var RB=Object.defineProperty;var i2=n=>{throw TypeError(n)};var NB=(n,e,t)=>e in n?RB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>NB(n,typeof e!="symbol"?e+"":e,t),bS=(n,e,t)=>e.has(n)||i2("Cannot "+t);var c=(n,e,t)=>(bS(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?i2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),b=(n,e,t,s)=>(bS(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),k=(n,e,t)=>(bS(n,e,"access private method"),t);var Jt=(n,e,t,s)=>({set _(r){b(n,e,r,t)},get _(){return c(n,e,s)}});function LB(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Hk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jM={exports:{}},nE={},FM={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=Symbol.for("react.element"),DB=Symbol.for("react.portal"),MB=Symbol.for("react.fragment"),OB=Symbol.for("react.strict_mode"),jB=Symbol.for("react.profiler"),FB=Symbol.for("react.provider"),VB=Symbol.for("react.context"),BB=Symbol.for("react.forward_ref"),UB=Symbol.for("react.suspense"),zB=Symbol.for("react.memo"),$B=Symbol.for("react.lazy"),o2=Symbol.iterator;function HB(n){return n===null||typeof n!="object"?null:(n=o2&&n[o2]||n["@@iterator"],typeof n=="function"?n:null)}var VM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BM=Object.assign,UM={};function wg(n,e,t){this.props=n,this.context=e,this.refs=UM,this.updater=t||VM}wg.prototype.isReactComponent={};wg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};wg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function zM(){}zM.prototype=wg.prototype;function Wk(n,e,t){this.props=n,this.context=e,this.refs=UM,this.updater=t||VM}var Gk=Wk.prototype=new zM;Gk.constructor=Wk;BM(Gk,wg.prototype);Gk.isPureReactComponent=!0;var a2=Array.isArray,$M=Object.prototype.hasOwnProperty,qk={current:null},HM={key:!0,ref:!0,__self:!0,__source:!0};function WM(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$M.call(e,s)&&!HM.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Dw,type:n,key:i,ref:o,props:r,_owner:qk.current}}function WB(n,e){return{$$typeof:Dw,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Kk(n){return typeof n=="object"&&n!==null&&n.$$typeof===Dw}function GB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var l2=/\/+/g;function xS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?GB(""+n.key):e.toString(36)}function px(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Dw:case DB:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+xS(o,0):s,a2(r)?(t="",n!=null&&(t=n.replace(l2,"$&/")+"/"),px(r,e,t,"",function(u){return u})):r!=null&&(Kk(r)&&(r=WB(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(l2,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",a2(n))for(var a=0;a<n.length;a++){i=n[a];var l=s+xS(i,a);o+=px(i,e,t,l,r)}else if(l=HB(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=s+xS(i,a++),o+=px(i,e,t,l,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _b(n,e,t){if(n==null)return n;var s=[],r=0;return px(n,s,"","",function(i){return e.call(t,i,r++)}),s}function qB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var zs={current:null},mx={transition:null},KB={ReactCurrentDispatcher:zs,ReactCurrentBatchConfig:mx,ReactCurrentOwner:qk};function GM(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:_b,forEach:function(n,e,t){_b(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _b(n,function(){e++}),e},toArray:function(n){return _b(n,function(e){return e})||[]},only:function(n){if(!Kk(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ve.Component=wg;Ve.Fragment=MB;Ve.Profiler=jB;Ve.PureComponent=Wk;Ve.StrictMode=OB;Ve.Suspense=UB;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KB;Ve.act=GM;Ve.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=BM({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qk.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)$M.call(e,l)&&!HM.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:Dw,type:n.type,key:r,ref:i,props:s,_owner:o}};Ve.createContext=function(n){return n={$$typeof:VB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:FB,_context:n},n.Consumer=n};Ve.createElement=WM;Ve.createFactory=function(n){var e=WM.bind(null,n);return e.type=n,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(n){return{$$typeof:BB,render:n}};Ve.isValidElement=Kk;Ve.lazy=function(n){return{$$typeof:$B,_payload:{_status:-1,_result:n},_init:qB}};Ve.memo=function(n,e){return{$$typeof:zB,type:n,compare:e===void 0?null:e}};Ve.startTransition=function(n){var e=mx.transition;mx.transition={};try{n()}finally{mx.transition=e}};Ve.unstable_act=GM;Ve.useCallback=function(n,e){return zs.current.useCallback(n,e)};Ve.useContext=function(n){return zs.current.useContext(n)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(n){return zs.current.useDeferredValue(n)};Ve.useEffect=function(n,e){return zs.current.useEffect(n,e)};Ve.useId=function(){return zs.current.useId()};Ve.useImperativeHandle=function(n,e,t){return zs.current.useImperativeHandle(n,e,t)};Ve.useInsertionEffect=function(n,e){return zs.current.useInsertionEffect(n,e)};Ve.useLayoutEffect=function(n,e){return zs.current.useLayoutEffect(n,e)};Ve.useMemo=function(n,e){return zs.current.useMemo(n,e)};Ve.useReducer=function(n,e,t){return zs.current.useReducer(n,e,t)};Ve.useRef=function(n){return zs.current.useRef(n)};Ve.useState=function(n){return zs.current.useState(n)};Ve.useSyncExternalStore=function(n,e,t){return zs.current.useSyncExternalStore(n,e,t)};Ve.useTransition=function(){return zs.current.useTransition()};Ve.version="18.3.1";FM.exports=Ve;var B=FM.exports;const Z=Hk(B),YB=LB({__proto__:null,default:Z},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XB=B,QB=Symbol.for("react.element"),JB=Symbol.for("react.fragment"),ZB=Object.prototype.hasOwnProperty,eU=XB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tU={key:!0,ref:!0,__self:!0,__source:!0};function qM(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)ZB.call(e,s)&&!tU.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:QB,type:n,key:i,ref:o,props:r,_owner:eU.current}}nE.Fragment=JB;nE.jsx=qM;nE.jsxs=qM;jM.exports=nE;var p=jM.exports,jA={},KM={exports:{}},Xr={},YM={exports:{}},XM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,q){var ee=G.length;G.push(q);e:for(;0<ee;){var ue=ee-1>>>1,J=G[ue];if(0<r(J,q))G[ue]=q,G[ee]=J,ee=ue;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var q=G[0],ee=G.pop();if(ee!==q){G[0]=ee;e:for(var ue=0,J=G.length,se=J>>>1;ue<se;){var pe=2*(ue+1)-1,_e=G[pe],Se=pe+1,ie=G[Se];if(0>r(_e,ee))Se<J&&0>r(ie,_e)?(G[ue]=ie,G[Se]=ee,ue=Se):(G[ue]=_e,G[pe]=ee,ue=pe);else if(Se<J&&0>r(ie,ee))G[ue]=ie,G[Se]=ee,ue=Se;else break e}}return q}function r(G,q){var ee=G.sortIndex-q.sortIndex;return ee!==0?ee:G.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,g=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var q=t(u);q!==null;){if(q.callback===null)s(u);else if(q.startTime<=G)s(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(u)}}function I(G){if(v=!1,E(G),!y)if(t(l)!==null)y=!0,U(D);else{var q=t(u);q!==null&&W(I,q.startTime-G)}}function D(G,q){y=!1,v&&(v=!1,w(C),C=-1),g=!0;var ee=f;try{for(E(q),d=t(l);d!==null&&(!(d.expirationTime>q)||G&&!R());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,f=d.priorityLevel;var J=ue(d.expirationTime<=q);q=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&s(l),E(q)}else s(l);d=t(l)}if(d!==null)var se=!0;else{var pe=t(u);pe!==null&&W(I,pe.startTime-q),se=!1}return se}finally{d=null,f=ee,g=!1}}var M=!1,T=null,C=-1,N=5,L=-1;function R(){return!(n.unstable_now()-L<N)}function O(){if(T!==null){var G=n.unstable_now();L=G;var q=!0;try{q=T(!0,G)}finally{q?j():(M=!1,T=null)}}else M=!1}var j;if(typeof _=="function")j=function(){_(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=O,j=function(){$.postMessage(null)}}else j=function(){S(O,0)};function U(G){T=G,M||(M=!0,j())}function W(G,q){C=S(function(){G(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,U(D))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var ee=f;f=q;try{return G()}finally{f=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=f;f=G;try{return q()}finally{f=ee}},n.unstable_scheduleCallback=function(G,q,ee){var ue=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ue+ee:ue):ee=ue,G){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ee+J,G={id:h++,callback:q,priorityLevel:G,startTime:ee,expirationTime:J,sortIndex:-1},ee>ue?(G.sortIndex=ee,e(u,G),t(l)===null&&G===t(u)&&(v?(w(C),C=-1):v=!0,W(I,ee-ue))):(G.sortIndex=J,e(l,G),y||g||(y=!0,U(D))),G},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(G){var q=f;return function(){var ee=f;f=q;try{return G.apply(this,arguments)}finally{f=ee}}}})(XM);YM.exports=XM;var nU=YM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sU=B,Kr=nU;function Q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QM=new Set,p0={};function Zd(n,e){Xm(n,e),Xm(n+"Capture",e)}function Xm(n,e){for(p0[n]=e,n=0;n<e.length;n++)QM.add(e[n])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FA=Object.prototype.hasOwnProperty,rU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c2={},u2={};function iU(n){return FA.call(u2,n)?!0:FA.call(c2,n)?!1:rU.test(n)?u2[n]=!0:(c2[n]=!0,!1)}function oU(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function aU(n,e,t,s){if(e===null||typeof e>"u"||oU(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $s(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var as={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){as[n]=new $s(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];as[e]=new $s(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){as[n]=new $s(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){as[n]=new $s(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){as[n]=new $s(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){as[n]=new $s(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){as[n]=new $s(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){as[n]=new $s(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){as[n]=new $s(n,5,!1,n.toLowerCase(),null,!1,!1)});var Yk=/[\-:]([a-z])/g;function Xk(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Yk,Xk);as[e]=new $s(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Yk,Xk);as[e]=new $s(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Yk,Xk);as[e]=new $s(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){as[n]=new $s(n,1,!1,n.toLowerCase(),null,!1,!1)});as.xlinkHref=new $s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){as[n]=new $s(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qk(n,e,t,s){var r=as.hasOwnProperty(e)?as[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aU(e,t,r,s)&&(t=null),s||r===null?iU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Ol=sU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eb=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Df=Symbol.for("react.fragment"),Jk=Symbol.for("react.strict_mode"),VA=Symbol.for("react.profiler"),JM=Symbol.for("react.provider"),ZM=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),BA=Symbol.for("react.suspense"),UA=Symbol.for("react.suspense_list"),eP=Symbol.for("react.memo"),ec=Symbol.for("react.lazy"),eO=Symbol.for("react.offscreen"),h2=Symbol.iterator;function Wg(n){return n===null||typeof n!="object"?null:(n=h2&&n[h2]||n["@@iterator"],typeof n=="function"?n:null)}var Kt=Object.assign,_S;function uy(n){if(_S===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_S=e&&e[1]||""}return`
`+_S+n}var ES=!1;function SS(n,e){if(!n||ES)return"";ES=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{ES=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?uy(n):""}function lU(n){switch(n.tag){case 5:return uy(n.type);case 16:return uy("Lazy");case 13:return uy("Suspense");case 19:return uy("SuspenseList");case 0:case 2:case 15:return n=SS(n.type,!1),n;case 11:return n=SS(n.type.render,!1),n;case 1:return n=SS(n.type,!0),n;default:return""}}function zA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Df:return"Fragment";case Lf:return"Portal";case VA:return"Profiler";case Jk:return"StrictMode";case BA:return"Suspense";case UA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ZM:return(n.displayName||"Context")+".Consumer";case JM:return(n._context.displayName||"Context")+".Provider";case Zk:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case eP:return e=n.displayName||null,e!==null?e:zA(n.type)||"Memo";case ec:e=n._payload,n=n._init;try{return zA(n(e))}catch{}}return null}function cU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zA(e);case 8:return e===Jk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ku(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uU(n){var e=tO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sb(n){n._valueTracker||(n._valueTracker=uU(n))}function nO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=tO(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function v_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $A(n,e){var t=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function d2(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=ku(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sO(n,e){e=e.checked,e!=null&&Qk(n,"checked",e,!1)}function HA(n,e){sO(n,e);var t=ku(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?WA(n,e.type,t):e.hasOwnProperty("defaultValue")&&WA(n,e.type,ku(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function f2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function WA(n,e,t){(e!=="number"||v_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var hy=Array.isArray;function ep(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+ku(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function GA(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function p2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(hy(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ku(t)}}function rO(n,e){var t=ku(e.value),s=ku(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function m2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function iO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qA(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?iO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ab,oO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ab=Ab||document.createElement("div"),Ab.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ab.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function m0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Gy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hU=["Webkit","ms","Moz","O"];Object.keys(Gy).forEach(function(n){hU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Gy[e]=Gy[n]})});function aO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Gy.hasOwnProperty(n)&&Gy[n]?(""+e).trim():e+"px"}function lO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=aO(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var dU=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KA(n,e){if(e){if(dU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function YA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XA=null;function tP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var QA=null,tp=null,np=null;function g2(n){if(n=jw(n)){if(typeof QA!="function")throw Error(Q(280));var e=n.stateNode;e&&(e=aE(e),QA(n.stateNode,n.type,e))}}function cO(n){tp?np?np.push(n):np=[n]:tp=n}function uO(){if(tp){var n=tp,e=np;if(np=tp=null,g2(n),e)for(n=0;n<e.length;n++)g2(e[n])}}function hO(n,e){return n(e)}function dO(){}var AS=!1;function fO(n,e,t){if(AS)return n(e,t);AS=!0;try{return hO(n,e,t)}finally{AS=!1,(tp!==null||np!==null)&&(dO(),uO())}}function g0(n,e){var t=n.stateNode;if(t===null)return null;var s=aE(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var JA=!1;if(El)try{var Gg={};Object.defineProperty(Gg,"passive",{get:function(){JA=!0}}),window.addEventListener("test",Gg,Gg),window.removeEventListener("test",Gg,Gg)}catch{JA=!1}function fU(n,e,t,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var qy=!1,w_=null,b_=!1,ZA=null,pU={onError:function(n){qy=!0,w_=n}};function mU(n,e,t,s,r,i,o,a,l){qy=!1,w_=null,fU.apply(pU,arguments)}function gU(n,e,t,s,r,i,o,a,l){if(mU.apply(this,arguments),qy){if(qy){var u=w_;qy=!1,w_=null}else throw Error(Q(198));b_||(b_=!0,ZA=u)}}function ef(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function pO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function y2(n){if(ef(n)!==n)throw Error(Q(188))}function yU(n){var e=n.alternate;if(!e){if(e=ef(n),e===null)throw Error(Q(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return y2(r),n;if(i===s)return y2(r),e;i=i.sibling}throw Error(Q(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(t.alternate!==s)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?n:e}function mO(n){return n=yU(n),n!==null?gO(n):null}function gO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=gO(n);if(e!==null)return e;n=n.sibling}return null}var yO=Kr.unstable_scheduleCallback,v2=Kr.unstable_cancelCallback,vU=Kr.unstable_shouldYield,wU=Kr.unstable_requestPaint,fn=Kr.unstable_now,bU=Kr.unstable_getCurrentPriorityLevel,nP=Kr.unstable_ImmediatePriority,vO=Kr.unstable_UserBlockingPriority,x_=Kr.unstable_NormalPriority,xU=Kr.unstable_LowPriority,wO=Kr.unstable_IdlePriority,sE=null,sa=null;function _U(n){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(sE,n,void 0,(n.current.flags&128)===128)}catch{}}var ro=Math.clz32?Math.clz32:AU,EU=Math.log,SU=Math.LN2;function AU(n){return n>>>=0,n===0?32:31-(EU(n)/SU|0)|0}var Tb=64,Cb=4194304;function dy(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function __(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=dy(a):(i&=o,i!==0&&(s=dy(i)))}else o=t&~r,o!==0?s=dy(o):i!==0&&(s=dy(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-ro(e),r=1<<t,s|=n[t],e&=~r;return s}function TU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CU(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-ro(i),a=1<<o,l=r[o];l===-1?(!(a&t)||a&s)&&(r[o]=TU(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function eT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bO(){var n=Tb;return Tb<<=1,!(Tb&4194240)&&(Tb=64),n}function TS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mw(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ro(e),n[e]=t}function kU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ro(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function sP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-ro(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var it=0;function xO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var _O,rP,EO,SO,AO,tT=!1,kb=[],fu=null,pu=null,mu=null,y0=new Map,v0=new Map,nc=[],PU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w2(n,e){switch(n){case"focusin":case"focusout":fu=null;break;case"dragenter":case"dragleave":pu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":y0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":v0.delete(e.pointerId)}}function qg(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=jw(e),e!==null&&rP(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function IU(n,e,t,s,r){switch(e){case"focusin":return fu=qg(fu,n,e,t,s,r),!0;case"dragenter":return pu=qg(pu,n,e,t,s,r),!0;case"mouseover":return mu=qg(mu,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return y0.set(i,qg(y0.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,v0.set(i,qg(v0.get(i)||null,n,e,t,s,r)),!0}return!1}function TO(n){var e=hh(n.target);if(e!==null){var t=ef(e);if(t!==null){if(e=t.tag,e===13){if(e=pO(t),e!==null){n.blockedOn=e,AO(n.priority,function(){EO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=nT(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);XA=s,t.target.dispatchEvent(s),XA=null}else return e=jw(t),e!==null&&rP(e),n.blockedOn=t,!1;e.shift()}return!0}function b2(n,e,t){gx(n)&&t.delete(e)}function RU(){tT=!1,fu!==null&&gx(fu)&&(fu=null),pu!==null&&gx(pu)&&(pu=null),mu!==null&&gx(mu)&&(mu=null),y0.forEach(b2),v0.forEach(b2)}function Kg(n,e){n.blockedOn===e&&(n.blockedOn=null,tT||(tT=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,RU)))}function w0(n){function e(r){return Kg(r,n)}if(0<kb.length){Kg(kb[0],n);for(var t=1;t<kb.length;t++){var s=kb[t];s.blockedOn===n&&(s.blockedOn=null)}}for(fu!==null&&Kg(fu,n),pu!==null&&Kg(pu,n),mu!==null&&Kg(mu,n),y0.forEach(e),v0.forEach(e),t=0;t<nc.length;t++)s=nc[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<nc.length&&(t=nc[0],t.blockedOn===null);)TO(t),t.blockedOn===null&&nc.shift()}var sp=Ol.ReactCurrentBatchConfig,E_=!0;function NU(n,e,t,s){var r=it,i=sp.transition;sp.transition=null;try{it=1,iP(n,e,t,s)}finally{it=r,sp.transition=i}}function LU(n,e,t,s){var r=it,i=sp.transition;sp.transition=null;try{it=4,iP(n,e,t,s)}finally{it=r,sp.transition=i}}function iP(n,e,t,s){if(E_){var r=nT(n,e,t,s);if(r===null)OS(n,e,s,S_,t),w2(n,s);else if(IU(r,n,e,t,s))s.stopPropagation();else if(w2(n,s),e&4&&-1<PU.indexOf(n)){for(;r!==null;){var i=jw(r);if(i!==null&&_O(i),i=nT(n,e,t,s),i===null&&OS(n,e,s,S_,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else OS(n,e,s,null,t)}}var S_=null;function nT(n,e,t,s){if(S_=null,n=tP(s),n=hh(n),n!==null)if(e=ef(n),e===null)n=null;else if(t=e.tag,t===13){if(n=pO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return S_=n,null}function CO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bU()){case nP:return 1;case vO:return 4;case x_:case xU:return 16;case wO:return 536870912;default:return 16}default:return 16}}var lu=null,oP=null,yx=null;function kO(){if(yx)return yx;var n,e=oP,t=e.length,s,r="value"in lu?lu.value:lu.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return yx=r.slice(n,1<s?1-s:void 0)}function vx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Pb(){return!0}function x2(){return!1}function Qr(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pb:x2,this.isPropagationStopped=x2,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pb)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pb)},persist:function(){},isPersistent:Pb}),e}var bg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aP=Qr(bg),Ow=Kt({},bg,{view:0,detail:0}),DU=Qr(Ow),CS,kS,Yg,rE=Kt({},Ow,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yg&&(Yg&&n.type==="mousemove"?(CS=n.screenX-Yg.screenX,kS=n.screenY-Yg.screenY):kS=CS=0,Yg=n),CS)},movementY:function(n){return"movementY"in n?n.movementY:kS}}),_2=Qr(rE),MU=Kt({},rE,{dataTransfer:0}),OU=Qr(MU),jU=Kt({},Ow,{relatedTarget:0}),PS=Qr(jU),FU=Kt({},bg,{animationName:0,elapsedTime:0,pseudoElement:0}),VU=Qr(FU),BU=Kt({},bg,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),UU=Qr(BU),zU=Kt({},bg,{data:0}),E2=Qr(zU),$U={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=WU[n])?!!e[n]:!1}function lP(){return GU}var qU=Kt({},Ow,{key:function(n){if(n.key){var e=$U[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=vx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?HU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lP,charCode:function(n){return n.type==="keypress"?vx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),KU=Qr(qU),YU=Kt({},rE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S2=Qr(YU),XU=Kt({},Ow,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lP}),QU=Qr(XU),JU=Kt({},bg,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZU=Qr(JU),ez=Kt({},rE,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tz=Qr(ez),nz=[9,13,27,32],cP=El&&"CompositionEvent"in window,Ky=null;El&&"documentMode"in document&&(Ky=document.documentMode);var sz=El&&"TextEvent"in window&&!Ky,PO=El&&(!cP||Ky&&8<Ky&&11>=Ky),A2=" ",T2=!1;function IO(n,e){switch(n){case"keyup":return nz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mf=!1;function rz(n,e){switch(n){case"compositionend":return RO(e);case"keypress":return e.which!==32?null:(T2=!0,A2);case"textInput":return n=e.data,n===A2&&T2?null:n;default:return null}}function iz(n,e){if(Mf)return n==="compositionend"||!cP&&IO(n,e)?(n=kO(),yx=oP=lu=null,Mf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PO&&e.locale!=="ko"?null:e.data;default:return null}}var oz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!oz[n.type]:e==="textarea"}function NO(n,e,t,s){cO(s),e=A_(e,"onChange"),0<e.length&&(t=new aP("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Yy=null,b0=null;function az(n){$O(n,0)}function iE(n){var e=Ff(n);if(nO(e))return n}function lz(n,e){if(n==="change")return e}var LO=!1;if(El){var IS;if(El){var RS="oninput"in document;if(!RS){var k2=document.createElement("div");k2.setAttribute("oninput","return;"),RS=typeof k2.oninput=="function"}IS=RS}else IS=!1;LO=IS&&(!document.documentMode||9<document.documentMode)}function P2(){Yy&&(Yy.detachEvent("onpropertychange",DO),b0=Yy=null)}function DO(n){if(n.propertyName==="value"&&iE(b0)){var e=[];NO(e,b0,n,tP(n)),fO(az,e)}}function cz(n,e,t){n==="focusin"?(P2(),Yy=e,b0=t,Yy.attachEvent("onpropertychange",DO)):n==="focusout"&&P2()}function uz(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return iE(b0)}function hz(n,e){if(n==="click")return iE(e)}function dz(n,e){if(n==="input"||n==="change")return iE(e)}function fz(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var oo=typeof Object.is=="function"?Object.is:fz;function x0(n,e){if(oo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!FA.call(e,r)||!oo(n[r],e[r]))return!1}return!0}function I2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function R2(n,e){var t=I2(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=I2(t)}}function MO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?MO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function OO(){for(var n=window,e=v_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=v_(n.document)}return e}function uP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pz(n){var e=OO(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&MO(t.ownerDocument.documentElement,t)){if(s!==null&&uP(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=R2(t,i);var o=R2(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mz=El&&"documentMode"in document&&11>=document.documentMode,Of=null,sT=null,Xy=null,rT=!1;function N2(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rT||Of==null||Of!==v_(s)||(s=Of,"selectionStart"in s&&uP(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Xy&&x0(Xy,s)||(Xy=s,s=A_(sT,"onSelect"),0<s.length&&(e=new aP("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Of)))}function Ib(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var jf={animationend:Ib("Animation","AnimationEnd"),animationiteration:Ib("Animation","AnimationIteration"),animationstart:Ib("Animation","AnimationStart"),transitionend:Ib("Transition","TransitionEnd")},NS={},jO={};El&&(jO=document.createElement("div").style,"AnimationEvent"in window||(delete jf.animationend.animation,delete jf.animationiteration.animation,delete jf.animationstart.animation),"TransitionEvent"in window||delete jf.transitionend.transition);function oE(n){if(NS[n])return NS[n];if(!jf[n])return n;var e=jf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in jO)return NS[n]=e[t];return n}var FO=oE("animationend"),VO=oE("animationiteration"),BO=oE("animationstart"),UO=oE("transitionend"),zO=new Map,L2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zu(n,e){zO.set(n,e),Zd(e,[n])}for(var LS=0;LS<L2.length;LS++){var DS=L2[LS],gz=DS.toLowerCase(),yz=DS[0].toUpperCase()+DS.slice(1);zu(gz,"on"+yz)}zu(FO,"onAnimationEnd");zu(VO,"onAnimationIteration");zu(BO,"onAnimationStart");zu("dblclick","onDoubleClick");zu("focusin","onFocus");zu("focusout","onBlur");zu(UO,"onTransitionEnd");Xm("onMouseEnter",["mouseout","mouseover"]);Xm("onMouseLeave",["mouseout","mouseover"]);Xm("onPointerEnter",["pointerout","pointerover"]);Xm("onPointerLeave",["pointerout","pointerover"]);Zd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vz=new Set("cancel close invalid load scroll toggle".split(" ").concat(fy));function D2(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,gU(s,e,void 0,n),n.currentTarget=null}function $O(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;D2(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;D2(r,a,u),i=l}}}if(b_)throw n=ZA,b_=!1,ZA=null,n}function Pt(n,e){var t=e[cT];t===void 0&&(t=e[cT]=new Set);var s=n+"__bubble";t.has(s)||(HO(e,n,2,!1),t.add(s))}function MS(n,e,t){var s=0;e&&(s|=4),HO(t,n,s,e)}var Rb="_reactListening"+Math.random().toString(36).slice(2);function _0(n){if(!n[Rb]){n[Rb]=!0,QM.forEach(function(t){t!=="selectionchange"&&(vz.has(t)||MS(t,!1,n),MS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Rb]||(e[Rb]=!0,MS("selectionchange",!1,e))}}function HO(n,e,t,s){switch(CO(e)){case 1:var r=NU;break;case 4:r=LU;break;default:r=iP}t=r.bind(null,e,t,n),r=void 0,!JA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function OS(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=hh(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}fO(function(){var u=i,h=tP(t),d=[];e:{var f=zO.get(n);if(f!==void 0){var g=aP,y=n;switch(n){case"keypress":if(vx(t)===0)break e;case"keydown":case"keyup":g=KU;break;case"focusin":y="focus",g=PS;break;case"focusout":y="blur",g=PS;break;case"beforeblur":case"afterblur":g=PS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=_2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=QU;break;case FO:case VO:case BO:g=VU;break;case UO:g=ZU;break;case"scroll":g=DU;break;case"wheel":g=tz;break;case"copy":case"cut":case"paste":g=UU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=S2}var v=(e&4)!==0,S=!v&&n==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var _=u,E;_!==null;){E=_;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,w!==null&&(I=g0(_,w),I!=null&&v.push(E0(_,I,E)))),S)break;_=_.return}0<v.length&&(f=new g(f,y,null,t,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==XA&&(y=t.relatedTarget||t.fromElement)&&(hh(y)||y[Sl]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=u,y=y?hh(y):null,y!==null&&(S=ef(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=_2,I="onMouseLeave",w="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(v=S2,I="onPointerLeave",w="onPointerEnter",_="pointer"),S=g==null?f:Ff(g),E=y==null?f:Ff(y),f=new v(I,_+"leave",g,t,h),f.target=S,f.relatedTarget=E,I=null,hh(h)===u&&(v=new v(w,_+"enter",y,t,h),v.target=E,v.relatedTarget=S,I=v),S=I,g&&y)t:{for(v=g,w=y,_=0,E=v;E;E=mf(E))_++;for(E=0,I=w;I;I=mf(I))E++;for(;0<_-E;)v=mf(v),_--;for(;0<E-_;)w=mf(w),E--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=mf(v),w=mf(w)}v=null}else v=null;g!==null&&M2(d,f,g,v,!1),y!==null&&S!==null&&M2(d,S,y,v,!0)}}e:{if(f=u?Ff(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var D=lz;else if(C2(f))if(LO)D=dz;else{D=uz;var M=cz}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=hz);if(D&&(D=D(n,u))){NO(d,D,t,h);break e}M&&M(n,f,u),n==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&WA(f,"number",f.value)}switch(M=u?Ff(u):window,n){case"focusin":(C2(M)||M.contentEditable==="true")&&(Of=M,sT=u,Xy=null);break;case"focusout":Xy=sT=Of=null;break;case"mousedown":rT=!0;break;case"contextmenu":case"mouseup":case"dragend":rT=!1,N2(d,t,h);break;case"selectionchange":if(mz)break;case"keydown":case"keyup":N2(d,t,h)}var T;if(cP)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mf?IO(n,t)&&(C="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&(PO&&t.locale!=="ko"&&(Mf||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mf&&(T=kO()):(lu=h,oP="value"in lu?lu.value:lu.textContent,Mf=!0)),M=A_(u,C),0<M.length&&(C=new E2(C,n,null,t,h),d.push({event:C,listeners:M}),T?C.data=T:(T=RO(t),T!==null&&(C.data=T)))),(T=sz?rz(n,t):iz(n,t))&&(u=A_(u,"onBeforeInput"),0<u.length&&(h=new E2("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}$O(d,e)})}function E0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function A_(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=g0(n,t),i!=null&&s.unshift(E0(n,i,r)),i=g0(n,e),i!=null&&s.push(E0(n,i,r))),n=n.return}return s}function mf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function M2(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=g0(t,i),l!=null&&o.unshift(E0(t,l,a))):r||(l=g0(t,i),l!=null&&o.push(E0(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var wz=/\r\n?/g,bz=/\u0000|\uFFFD/g;function O2(n){return(typeof n=="string"?n:""+n).replace(wz,`
`).replace(bz,"")}function Nb(n,e,t){if(e=O2(e),O2(n)!==e&&t)throw Error(Q(425))}function T_(){}var iT=null,oT=null;function aT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lT=typeof setTimeout=="function"?setTimeout:void 0,xz=typeof clearTimeout=="function"?clearTimeout:void 0,j2=typeof Promise=="function"?Promise:void 0,_z=typeof queueMicrotask=="function"?queueMicrotask:typeof j2<"u"?function(n){return j2.resolve(null).then(n).catch(Ez)}:lT;function Ez(n){setTimeout(function(){throw n})}function jS(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),w0(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);w0(e)}function gu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function F2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var xg=Math.random().toString(36).slice(2),ea="__reactFiber$"+xg,S0="__reactProps$"+xg,Sl="__reactContainer$"+xg,cT="__reactEvents$"+xg,Sz="__reactListeners$"+xg,Az="__reactHandles$"+xg;function hh(n){var e=n[ea];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Sl]||t[ea]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=F2(n);n!==null;){if(t=n[ea])return t;n=F2(n)}return e}n=t,t=n.parentNode}return null}function jw(n){return n=n[ea]||n[Sl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ff(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Q(33))}function aE(n){return n[S0]||null}var uT=[],Vf=-1;function $u(n){return{current:n}}function Nt(n){0>Vf||(n.current=uT[Vf],uT[Vf]=null,Vf--)}function Et(n,e){Vf++,uT[Vf]=n.current,n.current=e}var Pu={},Ss=$u(Pu),lr=$u(!1),Vd=Pu;function Qm(n,e){var t=n.type.contextTypes;if(!t)return Pu;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function cr(n){return n=n.childContextTypes,n!=null}function C_(){Nt(lr),Nt(Ss)}function V2(n,e,t){if(Ss.current!==Pu)throw Error(Q(168));Et(Ss,e),Et(lr,t)}function WO(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Q(108,cU(n)||"Unknown",r));return Kt({},t,s)}function k_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pu,Vd=Ss.current,Et(Ss,n),Et(lr,lr.current),!0}function B2(n,e,t){var s=n.stateNode;if(!s)throw Error(Q(169));t?(n=WO(n,e,Vd),s.__reactInternalMemoizedMergedChildContext=n,Nt(lr),Nt(Ss),Et(Ss,n)):Nt(lr),Et(lr,t)}var Ia=null,lE=!1,FS=!1;function GO(n){Ia===null?Ia=[n]:Ia.push(n)}function Tz(n){lE=!0,GO(n)}function Hu(){if(!FS&&Ia!==null){FS=!0;var n=0,e=it;try{var t=Ia;for(it=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ia=null,lE=!1}catch(r){throw Ia!==null&&(Ia=Ia.slice(n+1)),yO(nP,Hu),r}finally{it=e,FS=!1}}return null}var Bf=[],Uf=0,P_=null,I_=0,yi=[],vi=0,Bd=null,fl=1,pl="";function eh(n,e){Bf[Uf++]=I_,Bf[Uf++]=P_,P_=n,I_=e}function qO(n,e,t){yi[vi++]=fl,yi[vi++]=pl,yi[vi++]=Bd,Bd=n;var s=fl;n=pl;var r=32-ro(s)-1;s&=~(1<<r),t+=1;var i=32-ro(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,fl=1<<32-ro(e)+r|t<<r|s,pl=i+n}else fl=1<<i|t<<r|s,pl=n}function hP(n){n.return!==null&&(eh(n,1),qO(n,1,0))}function dP(n){for(;n===P_;)P_=Bf[--Uf],Bf[Uf]=null,I_=Bf[--Uf],Bf[Uf]=null;for(;n===Bd;)Bd=yi[--vi],yi[vi]=null,pl=yi[--vi],yi[vi]=null,fl=yi[--vi],yi[vi]=null}var Wr=null,$r=null,Vt=!1,eo=null;function KO(n,e){var t=_i(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function U2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Wr=n,$r=gu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Wr=n,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Bd!==null?{id:fl,overflow:pl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=_i(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Wr=n,$r=null,!0):!1;default:return!1}}function hT(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dT(n){if(Vt){var e=$r;if(e){var t=e;if(!U2(n,e)){if(hT(n))throw Error(Q(418));e=gu(t.nextSibling);var s=Wr;e&&U2(n,e)?KO(s,t):(n.flags=n.flags&-4097|2,Vt=!1,Wr=n)}}else{if(hT(n))throw Error(Q(418));n.flags=n.flags&-4097|2,Vt=!1,Wr=n}}}function z2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Wr=n}function Lb(n){if(n!==Wr)return!1;if(!Vt)return z2(n),Vt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!aT(n.type,n.memoizedProps)),e&&(e=$r)){if(hT(n))throw YO(),Error(Q(418));for(;e;)KO(n,e),e=gu(e.nextSibling)}if(z2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$r=gu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$r=null}}else $r=Wr?gu(n.stateNode.nextSibling):null;return!0}function YO(){for(var n=$r;n;)n=gu(n.nextSibling)}function Jm(){$r=Wr=null,Vt=!1}function fP(n){eo===null?eo=[n]:eo.push(n)}var Cz=Ol.ReactCurrentBatchConfig;function Xg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var s=t.stateNode}if(!s)throw Error(Q(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,n))}return n}function Db(n,e){throw n=Object.prototype.toString.call(e),Error(Q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $2(n){var e=n._init;return e(n._payload)}function XO(n){function e(w,_){if(n){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function t(w,_){if(!n)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function s(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function r(w,_){return w=bu(w,_),w.index=0,w.sibling=null,w}function i(w,_,E){return w.index=E,n?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,_,E,I){return _===null||_.tag!==6?(_=WS(E,w.mode,I),_.return=w,_):(_=r(_,E),_.return=w,_)}function l(w,_,E,I){var D=E.type;return D===Df?h(w,_,E.props.children,I,E.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ec&&$2(D)===_.type)?(I=r(_,E.props),I.ref=Xg(w,_,E),I.return=w,I):(I=Ax(E.type,E.key,E.props,null,w.mode,I),I.ref=Xg(w,_,E),I.return=w,I)}function u(w,_,E,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=GS(E,w.mode,I),_.return=w,_):(_=r(_,E.children||[]),_.return=w,_)}function h(w,_,E,I,D){return _===null||_.tag!==7?(_=Dd(E,w.mode,I,D),_.return=w,_):(_=r(_,E),_.return=w,_)}function d(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=WS(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eb:return E=Ax(_.type,_.key,_.props,null,w.mode,E),E.ref=Xg(w,null,_),E.return=w,E;case Lf:return _=GS(_,w.mode,E),_.return=w,_;case ec:var I=_._init;return d(w,I(_._payload),E)}if(hy(_)||Wg(_))return _=Dd(_,w.mode,E,null),_.return=w,_;Db(w,_)}return null}function f(w,_,E,I){var D=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:a(w,_,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Eb:return E.key===D?l(w,_,E,I):null;case Lf:return E.key===D?u(w,_,E,I):null;case ec:return D=E._init,f(w,_,D(E._payload),I)}if(hy(E)||Wg(E))return D!==null?null:h(w,_,E,I,null);Db(w,E)}return null}function g(w,_,E,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(E)||null,a(_,w,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Eb:return w=w.get(I.key===null?E:I.key)||null,l(_,w,I,D);case Lf:return w=w.get(I.key===null?E:I.key)||null,u(_,w,I,D);case ec:var M=I._init;return g(w,_,E,M(I._payload),D)}if(hy(I)||Wg(I))return w=w.get(E)||null,h(_,w,I,D,null);Db(_,I)}return null}function y(w,_,E,I){for(var D=null,M=null,T=_,C=_=0,N=null;T!==null&&C<E.length;C++){T.index>C?(N=T,T=null):N=T.sibling;var L=f(w,T,E[C],I);if(L===null){T===null&&(T=N);break}n&&T&&L.alternate===null&&e(w,T),_=i(L,_,C),M===null?D=L:M.sibling=L,M=L,T=N}if(C===E.length)return t(w,T),Vt&&eh(w,C),D;if(T===null){for(;C<E.length;C++)T=d(w,E[C],I),T!==null&&(_=i(T,_,C),M===null?D=T:M.sibling=T,M=T);return Vt&&eh(w,C),D}for(T=s(w,T);C<E.length;C++)N=g(T,w,C,E[C],I),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?C:N.key),_=i(N,_,C),M===null?D=N:M.sibling=N,M=N);return n&&T.forEach(function(R){return e(w,R)}),Vt&&eh(w,C),D}function v(w,_,E,I){var D=Wg(E);if(typeof D!="function")throw Error(Q(150));if(E=D.call(E),E==null)throw Error(Q(151));for(var M=D=null,T=_,C=_=0,N=null,L=E.next();T!==null&&!L.done;C++,L=E.next()){T.index>C?(N=T,T=null):N=T.sibling;var R=f(w,T,L.value,I);if(R===null){T===null&&(T=N);break}n&&T&&R.alternate===null&&e(w,T),_=i(R,_,C),M===null?D=R:M.sibling=R,M=R,T=N}if(L.done)return t(w,T),Vt&&eh(w,C),D;if(T===null){for(;!L.done;C++,L=E.next())L=d(w,L.value,I),L!==null&&(_=i(L,_,C),M===null?D=L:M.sibling=L,M=L);return Vt&&eh(w,C),D}for(T=s(w,T);!L.done;C++,L=E.next())L=g(T,w,C,L.value,I),L!==null&&(n&&L.alternate!==null&&T.delete(L.key===null?C:L.key),_=i(L,_,C),M===null?D=L:M.sibling=L,M=L);return n&&T.forEach(function(O){return e(w,O)}),Vt&&eh(w,C),D}function S(w,_,E,I){if(typeof E=="object"&&E!==null&&E.type===Df&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Eb:e:{for(var D=E.key,M=_;M!==null;){if(M.key===D){if(D=E.type,D===Df){if(M.tag===7){t(w,M.sibling),_=r(M,E.props.children),_.return=w,w=_;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ec&&$2(D)===M.type){t(w,M.sibling),_=r(M,E.props),_.ref=Xg(w,M,E),_.return=w,w=_;break e}t(w,M);break}else e(w,M);M=M.sibling}E.type===Df?(_=Dd(E.props.children,w.mode,I,E.key),_.return=w,w=_):(I=Ax(E.type,E.key,E.props,null,w.mode,I),I.ref=Xg(w,_,E),I.return=w,w=I)}return o(w);case Lf:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){t(w,_.sibling),_=r(_,E.children||[]),_.return=w,w=_;break e}else{t(w,_);break}else e(w,_);_=_.sibling}_=GS(E,w.mode,I),_.return=w,w=_}return o(w);case ec:return M=E._init,S(w,_,M(E._payload),I)}if(hy(E))return y(w,_,E,I);if(Wg(E))return v(w,_,E,I);Db(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(t(w,_.sibling),_=r(_,E),_.return=w,w=_):(t(w,_),_=WS(E,w.mode,I),_.return=w,w=_),o(w)):t(w,_)}return S}var Zm=XO(!0),QO=XO(!1),R_=$u(null),N_=null,zf=null,pP=null;function mP(){pP=zf=N_=null}function gP(n){var e=R_.current;Nt(R_),n._currentValue=e}function fT(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function rp(n,e){N_=n,pP=zf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ar=!0),n.firstContext=null)}function Ci(n){var e=n._currentValue;if(pP!==n)if(n={context:n,memoizedValue:e,next:null},zf===null){if(N_===null)throw Error(Q(308));zf=n,N_.dependencies={lanes:0,firstContext:n}}else zf=zf.next=n;return e}var dh=null;function yP(n){dh===null?dh=[n]:dh.push(n)}function JO(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,yP(e)):(t.next=r.next,r.next=t),e.interleaved=t,Al(n,s)}function Al(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var tc=!1;function vP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yu(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Ye&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Al(n,t)}return r=s.interleaved,r===null?(e.next=e,yP(s)):(e.next=r.next,r.next=e),s.interleaved=e,Al(n,t)}function wx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,sP(n,t)}}function H2(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function L_(n,e,t,s){var r=n.updateQueue;tc=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,h=u=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,v=a;switch(f=e,g=t,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=Kt({},d,f);break e;case 2:tc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);zd|=o,n.lanes=o,n.memoizedState=d}}function W2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(Q(191,r));r.call(s)}}}var Fw={},ra=$u(Fw),A0=$u(Fw),T0=$u(Fw);function fh(n){if(n===Fw)throw Error(Q(174));return n}function wP(n,e){switch(Et(T0,e),Et(A0,n),Et(ra,Fw),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qA(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=qA(e,n)}Nt(ra),Et(ra,e)}function eg(){Nt(ra),Nt(A0),Nt(T0)}function ej(n){fh(T0.current);var e=fh(ra.current),t=qA(e,n.type);e!==t&&(Et(A0,n),Et(ra,t))}function bP(n){A0.current===n&&(Nt(ra),Nt(A0))}var Ht=$u(0);function D_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var VS=[];function xP(){for(var n=0;n<VS.length;n++)VS[n]._workInProgressVersionPrimary=null;VS.length=0}var bx=Ol.ReactCurrentDispatcher,BS=Ol.ReactCurrentBatchConfig,Ud=0,Gt=null,Pn=null,Wn=null,M_=!1,Qy=!1,C0=0,kz=0;function cs(){throw Error(Q(321))}function _P(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!oo(n[t],e[t]))return!1;return!0}function EP(n,e,t,s,r,i){if(Ud=i,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bx.current=n===null||n.memoizedState===null?Nz:Lz,n=t(s,r),Qy){i=0;do{if(Qy=!1,C0=0,25<=i)throw Error(Q(301));i+=1,Wn=Pn=null,e.updateQueue=null,bx.current=Dz,n=t(s,r)}while(Qy)}if(bx.current=O_,e=Pn!==null&&Pn.next!==null,Ud=0,Wn=Pn=Gt=null,M_=!1,e)throw Error(Q(300));return n}function SP(){var n=C0!==0;return C0=0,n}function Ao(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?Gt.memoizedState=Wn=n:Wn=Wn.next=n,Wn}function ki(){if(Pn===null){var n=Gt.alternate;n=n!==null?n.memoizedState:null}else n=Pn.next;var e=Wn===null?Gt.memoizedState:Wn.next;if(e!==null)Wn=e,Pn=n;else{if(n===null)throw Error(Q(310));Pn=n,n={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Wn===null?Gt.memoizedState=Wn=n:Wn=Wn.next=n}return Wn}function k0(n,e){return typeof e=="function"?e(n):e}function US(n){var e=ki(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var s=Pn,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Ud&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,Gt.lanes|=h,zd|=h}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,oo(s,e.memoizedState)||(ar=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,Gt.lanes|=i,zd|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function zS(n){var e=ki(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);oo(i,e.memoizedState)||(ar=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function tj(){}function nj(n,e){var t=Gt,s=ki(),r=e(),i=!oo(s.memoizedState,r);if(i&&(s.memoizedState=r,ar=!0),s=s.queue,AP(ij.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||Wn!==null&&Wn.memoizedState.tag&1){if(t.flags|=2048,P0(9,rj.bind(null,t,s,r,e),void 0,null),Gn===null)throw Error(Q(349));Ud&30||sj(t,e,r)}return r}function sj(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function rj(n,e,t,s){e.value=t,e.getSnapshot=s,oj(e)&&aj(n)}function ij(n,e,t){return t(function(){oj(e)&&aj(n)})}function oj(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!oo(n,t)}catch{return!0}}function aj(n){var e=Al(n,1);e!==null&&io(e,n,1,-1)}function G2(n){var e=Ao();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:n},e.queue=n,n=n.dispatch=Rz.bind(null,Gt,n),[e.memoizedState,n]}function P0(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function lj(){return ki().memoizedState}function xx(n,e,t,s){var r=Ao();Gt.flags|=n,r.memoizedState=P0(1|e,t,void 0,s===void 0?null:s)}function cE(n,e,t,s){var r=ki();s=s===void 0?null:s;var i=void 0;if(Pn!==null){var o=Pn.memoizedState;if(i=o.destroy,s!==null&&_P(s,o.deps)){r.memoizedState=P0(e,t,i,s);return}}Gt.flags|=n,r.memoizedState=P0(1|e,t,i,s)}function q2(n,e){return xx(8390656,8,n,e)}function AP(n,e){return cE(2048,8,n,e)}function cj(n,e){return cE(4,2,n,e)}function uj(n,e){return cE(4,4,n,e)}function hj(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function dj(n,e,t){return t=t!=null?t.concat([n]):null,cE(4,4,hj.bind(null,e,n),t)}function TP(){}function fj(n,e){var t=ki();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&_P(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function pj(n,e){var t=ki();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&_P(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function mj(n,e,t){return Ud&21?(oo(t,e)||(t=bO(),Gt.lanes|=t,zd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ar=!0),n.memoizedState=t)}function Pz(n,e){var t=it;it=t!==0&&4>t?t:4,n(!0);var s=BS.transition;BS.transition={};try{n(!1),e()}finally{it=t,BS.transition=s}}function gj(){return ki().memoizedState}function Iz(n,e,t){var s=wu(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},yj(n))vj(e,t);else if(t=JO(n,e,t,s),t!==null){var r=Vs();io(t,n,s,r),wj(t,e,s)}}function Rz(n,e,t){var s=wu(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(yj(n))vj(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,oo(a,o)){var l=e.interleaved;l===null?(r.next=r,yP(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=JO(n,e,r,s),t!==null&&(r=Vs(),io(t,n,s,r),wj(t,e,s))}}function yj(n){var e=n.alternate;return n===Gt||e!==null&&e===Gt}function vj(n,e){Qy=M_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function wj(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,sP(n,t)}}var O_={readContext:Ci,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},Nz={readContext:Ci,useCallback:function(n,e){return Ao().memoizedState=[n,e===void 0?null:e],n},useContext:Ci,useEffect:q2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,xx(4194308,4,hj.bind(null,e,n),t)},useLayoutEffect:function(n,e){return xx(4194308,4,n,e)},useInsertionEffect:function(n,e){return xx(4,2,n,e)},useMemo:function(n,e){var t=Ao();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Ao();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=Iz.bind(null,Gt,n),[s.memoizedState,n]},useRef:function(n){var e=Ao();return n={current:n},e.memoizedState=n},useState:G2,useDebugValue:TP,useDeferredValue:function(n){return Ao().memoizedState=n},useTransition:function(){var n=G2(!1),e=n[0];return n=Pz.bind(null,n[1]),Ao().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Gt,r=Ao();if(Vt){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),Gn===null)throw Error(Q(349));Ud&30||sj(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,q2(ij.bind(null,s,i,n),[n]),s.flags|=2048,P0(9,rj.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Ao(),e=Gn.identifierPrefix;if(Vt){var t=pl,s=fl;t=(s&~(1<<32-ro(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=C0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=kz++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Lz={readContext:Ci,useCallback:fj,useContext:Ci,useEffect:AP,useImperativeHandle:dj,useInsertionEffect:cj,useLayoutEffect:uj,useMemo:pj,useReducer:US,useRef:lj,useState:function(){return US(k0)},useDebugValue:TP,useDeferredValue:function(n){var e=ki();return mj(e,Pn.memoizedState,n)},useTransition:function(){var n=US(k0)[0],e=ki().memoizedState;return[n,e]},useMutableSource:tj,useSyncExternalStore:nj,useId:gj,unstable_isNewReconciler:!1},Dz={readContext:Ci,useCallback:fj,useContext:Ci,useEffect:AP,useImperativeHandle:dj,useInsertionEffect:cj,useLayoutEffect:uj,useMemo:pj,useReducer:zS,useRef:lj,useState:function(){return zS(k0)},useDebugValue:TP,useDeferredValue:function(n){var e=ki();return Pn===null?e.memoizedState=n:mj(e,Pn.memoizedState,n)},useTransition:function(){var n=zS(k0)[0],e=ki().memoizedState;return[n,e]},useMutableSource:tj,useSyncExternalStore:nj,useId:gj,unstable_isNewReconciler:!1};function Oi(n,e){if(n&&n.defaultProps){e=Kt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function pT(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Kt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var uE={isMounted:function(n){return(n=n._reactInternals)?ef(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Vs(),r=wu(n),i=vl(s,r);i.payload=e,t!=null&&(i.callback=t),e=yu(n,i,r),e!==null&&(io(e,n,r,s),wx(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Vs(),r=wu(n),i=vl(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=yu(n,i,r),e!==null&&(io(e,n,r,s),wx(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Vs(),s=wu(n),r=vl(t,s);r.tag=2,e!=null&&(r.callback=e),e=yu(n,r,s),e!==null&&(io(e,n,s,t),wx(e,n,s))}};function K2(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!x0(t,s)||!x0(r,i):!0}function bj(n,e,t){var s=!1,r=Pu,i=e.contextType;return typeof i=="object"&&i!==null?i=Ci(i):(r=cr(e)?Vd:Ss.current,s=e.contextTypes,i=(s=s!=null)?Qm(n,r):Pu),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uE,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function Y2(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&uE.enqueueReplaceState(e,e.state,null)}function mT(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},vP(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ci(i):(i=cr(e)?Vd:Ss.current,r.context=Qm(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pT(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&uE.enqueueReplaceState(r,r.state,null),L_(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function tg(n,e){try{var t="",s=e;do t+=lU(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function $S(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function gT(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Mz=typeof WeakMap=="function"?WeakMap:Map;function xj(n,e,t){t=vl(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){F_||(F_=!0,TT=s),gT(n,e)},t}function _j(n,e,t){t=vl(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){gT(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){gT(n,e),typeof s!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function X2(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new Mz;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=Yz.bind(null,n,e,t),e.then(n,n))}function Q2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function J2(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vl(-1,1),e.tag=2,yu(t,e,1))),t.lanes|=1),n)}var Oz=Ol.ReactCurrentOwner,ar=!1;function Os(n,e,t,s){e.child=n===null?QO(e,null,t,s):Zm(e,n.child,t,s)}function Z2(n,e,t,s,r){t=t.render;var i=e.ref;return rp(e,r),s=EP(n,e,t,s,i,r),t=SP(),n!==null&&!ar?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Tl(n,e,r)):(Vt&&t&&hP(e),e.flags|=1,Os(n,e,s,r),e.child)}function eN(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!DP(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Ej(n,e,i,s,r)):(n=Ax(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:x0,t(o,s)&&n.ref===e.ref)return Tl(n,e,r)}return e.flags|=1,n=bu(i,s),n.ref=e.ref,n.return=e,e.child=n}function Ej(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(x0(i,s)&&n.ref===e.ref)if(ar=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(ar=!0);else return e.lanes=n.lanes,Tl(n,e,r)}return yT(n,e,t,s,r)}function Sj(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Hf,Fr),Fr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Et(Hf,Fr),Fr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,Et(Hf,Fr),Fr|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,Et(Hf,Fr),Fr|=s;return Os(n,e,r,t),e.child}function Aj(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function yT(n,e,t,s,r){var i=cr(t)?Vd:Ss.current;return i=Qm(e,i),rp(e,r),t=EP(n,e,t,s,i,r),s=SP(),n!==null&&!ar?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Tl(n,e,r)):(Vt&&s&&hP(e),e.flags|=1,Os(n,e,t,r),e.child)}function tN(n,e,t,s,r){if(cr(t)){var i=!0;k_(e)}else i=!1;if(rp(e,r),e.stateNode===null)_x(n,e),bj(e,t,s),mT(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ci(u):(u=cr(t)?Vd:Ss.current,u=Qm(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&Y2(e,o,s,u),tc=!1;var f=e.memoizedState;o.state=f,L_(e,s,o,r),l=e.memoizedState,a!==s||f!==l||lr.current||tc?(typeof h=="function"&&(pT(e,t,h,s),l=e.memoizedState),(a=tc||K2(e,t,a,s,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,ZO(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Oi(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ci(l):(l=cr(t)?Vd:Ss.current,l=Qm(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Y2(e,o,s,l),tc=!1,f=e.memoizedState,o.state=f,L_(e,s,o,r);var y=e.memoizedState;a!==d||f!==y||lr.current||tc?(typeof g=="function"&&(pT(e,t,g,s),y=e.memoizedState),(u=tc||K2(e,t,u,s,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return vT(n,e,t,s,i,r)}function vT(n,e,t,s,r,i){Aj(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&B2(e,t,!1),Tl(n,e,i);s=e.stateNode,Oz.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=Zm(e,n.child,null,i),e.child=Zm(e,null,a,i)):Os(n,e,a,i),e.memoizedState=s.state,r&&B2(e,t,!0),e.child}function Tj(n){var e=n.stateNode;e.pendingContext?V2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&V2(n,e.context,!1),wP(n,e.containerInfo)}function nN(n,e,t,s,r){return Jm(),fP(r),e.flags|=256,Os(n,e,t,s),e.child}var wT={dehydrated:null,treeContext:null,retryLane:0};function bT(n){return{baseLanes:n,cachePool:null,transitions:null}}function Cj(n,e,t){var s=e.pendingProps,r=Ht.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Et(Ht,r&1),n===null)return dT(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fE(o,s,0,null),n=Dd(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=bT(t),e.memoizedState=wT,n):CP(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return jz(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=bu(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=bu(a,i):(i=Dd(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?bT(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=wT,s}return i=n.child,n=i.sibling,s=bu(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function CP(n,e){return e=fE({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Mb(n,e,t,s){return s!==null&&fP(s),Zm(e,n.child,null,t),n=CP(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function jz(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=$S(Error(Q(422))),Mb(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=fE({mode:"visible",children:s.children},r,0,null),i=Dd(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Zm(e,n.child,null,o),e.child.memoizedState=bT(o),e.memoizedState=wT,i);if(!(e.mode&1))return Mb(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(Q(419)),s=$S(i,s,void 0),Mb(n,e,o,s)}if(a=(o&n.childLanes)!==0,ar||a){if(s=Gn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Al(n,r),io(s,n,r,-1))}return LP(),s=$S(Error(Q(421))),Mb(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=Xz.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,$r=gu(r.nextSibling),Wr=e,Vt=!0,eo=null,n!==null&&(yi[vi++]=fl,yi[vi++]=pl,yi[vi++]=Bd,fl=n.id,pl=n.overflow,Bd=e),e=CP(e,s.children),e.flags|=4096,e)}function sN(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),fT(n.return,e,t)}function HS(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function kj(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Os(n,e,s.children,t),s=Ht.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sN(n,t,e);else if(n.tag===19)sN(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Et(Ht,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&D_(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),HS(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&D_(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}HS(e,!0,t,null,i);break;case"together":HS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _x(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Tl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Q(153));if(e.child!==null){for(n=e.child,t=bu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=bu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Fz(n,e,t){switch(e.tag){case 3:Tj(e),Jm();break;case 5:ej(e);break;case 1:cr(e.type)&&k_(e);break;case 4:wP(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Et(R_,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Et(Ht,Ht.current&1),e.flags|=128,null):t&e.child.childLanes?Cj(n,e,t):(Et(Ht,Ht.current&1),n=Tl(n,e,t),n!==null?n.sibling:null);Et(Ht,Ht.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return kj(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Et(Ht,Ht.current),s)break;return null;case 22:case 23:return e.lanes=0,Sj(n,e,t)}return Tl(n,e,t)}var Pj,xT,Ij,Rj;Pj=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xT=function(){};Ij=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,fh(ra.current);var i=null;switch(t){case"input":r=$A(n,r),s=$A(n,s),i=[];break;case"select":r=Kt({},r,{value:void 0}),s=Kt({},s,{value:void 0}),i=[];break;case"textarea":r=GA(n,r),s=GA(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=T_)}KA(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(p0.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(p0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pt("scroll",n),i||a===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Rj=function(n,e,t,s){t!==s&&(e.flags|=4)};function Qg(n,e){if(!Vt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function us(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function Vz(n,e,t){var s=e.pendingProps;switch(dP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(e),null;case 1:return cr(e.type)&&C_(),us(e),null;case 3:return s=e.stateNode,eg(),Nt(lr),Nt(Ss),xP(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Lb(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,eo!==null&&(PT(eo),eo=null))),xT(n,e),us(e),null;case 5:bP(e);var r=fh(T0.current);if(t=e.type,n!==null&&e.stateNode!=null)Ij(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Q(166));return us(e),null}if(n=fh(ra.current),Lb(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[ea]=e,s[S0]=i,n=(e.mode&1)!==0,t){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(r=0;r<fy.length;r++)Pt(fy[r],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":d2(s,i),Pt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Pt("invalid",s);break;case"textarea":p2(s,i),Pt("invalid",s)}KA(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Nb(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Nb(s.textContent,a,n),r=["children",""+a]):p0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",s)}switch(t){case"input":Sb(s),f2(s,i,!0);break;case"textarea":Sb(s),m2(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=T_)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=iO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[ea]=e,n[S0]=s,Pj(n,e,!1,!1),e.stateNode=n;e:{switch(o=YA(t,s),t){case"dialog":Pt("cancel",n),Pt("close",n),r=s;break;case"iframe":case"object":case"embed":Pt("load",n),r=s;break;case"video":case"audio":for(r=0;r<fy.length;r++)Pt(fy[r],n);r=s;break;case"source":Pt("error",n),r=s;break;case"img":case"image":case"link":Pt("error",n),Pt("load",n),r=s;break;case"details":Pt("toggle",n),r=s;break;case"input":d2(n,s),r=$A(n,s),Pt("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=Kt({},s,{value:void 0}),Pt("invalid",n);break;case"textarea":p2(n,s),r=GA(n,s),Pt("invalid",n);break;default:r=s}KA(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?lO(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oO(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&m0(n,l):typeof l=="number"&&m0(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(p0.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pt("scroll",n):l!=null&&Qk(n,i,l,o))}switch(t){case"input":Sb(n),f2(n,s,!1);break;case"textarea":Sb(n),m2(n);break;case"option":s.value!=null&&n.setAttribute("value",""+ku(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?ep(n,!!s.multiple,i,!1):s.defaultValue!=null&&ep(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=T_)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return us(e),null;case 6:if(n&&e.stateNode!=null)Rj(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Q(166));if(t=fh(T0.current),fh(ra.current),Lb(e)){if(s=e.stateNode,t=e.memoizedProps,s[ea]=e,(i=s.nodeValue!==t)&&(n=Wr,n!==null))switch(n.tag){case 3:Nb(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Nb(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[ea]=e,e.stateNode=s}return us(e),null;case 13:if(Nt(Ht),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Vt&&$r!==null&&e.mode&1&&!(e.flags&128))YO(),Jm(),e.flags|=98560,i=!1;else if(i=Lb(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[ea]=e}else Jm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;us(e),i=!1}else eo!==null&&(PT(eo),eo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Ht.current&1?Rn===0&&(Rn=3):LP())),e.updateQueue!==null&&(e.flags|=4),us(e),null);case 4:return eg(),xT(n,e),n===null&&_0(e.stateNode.containerInfo),us(e),null;case 10:return gP(e.type._context),us(e),null;case 17:return cr(e.type)&&C_(),us(e),null;case 19:if(Nt(Ht),i=e.memoizedState,i===null)return us(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Qg(i,!1);else{if(Rn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=D_(n),o!==null){for(e.flags|=128,Qg(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Et(Ht,Ht.current&1|2),e.child}n=n.sibling}i.tail!==null&&fn()>ng&&(e.flags|=128,s=!0,Qg(i,!1),e.lanes=4194304)}else{if(!s)if(n=D_(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qg(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Vt)return us(e),null}else 2*fn()-i.renderingStartTime>ng&&t!==1073741824&&(e.flags|=128,s=!0,Qg(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fn(),e.sibling=null,t=Ht.current,Et(Ht,s?t&1|2:t&1),e):(us(e),null);case 22:case 23:return NP(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Fr&1073741824&&(us(e),e.subtreeFlags&6&&(e.flags|=8192)):us(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Bz(n,e){switch(dP(e),e.tag){case 1:return cr(e.type)&&C_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return eg(),Nt(lr),Nt(Ss),xP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return bP(e),null;case 13:if(Nt(Ht),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Jm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Nt(Ht),null;case 4:return eg(),null;case 10:return gP(e.type._context),null;case 22:case 23:return NP(),null;case 24:return null;default:return null}}var Ob=!1,xs=!1,Uz=typeof WeakSet=="function"?WeakSet:Set,he=null;function $f(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){on(n,e,s)}else t.current=null}function _T(n,e,t){try{t()}catch(s){on(n,e,s)}}var rN=!1;function zz(n,e){if(iT=E_,n=OO(),uP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var g;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break t;if(f===t&&++u===r&&(a=o),f===i&&++h===s&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(oT={focusedElem:n,selectionRange:t},E_=!1,he=e;he!==null;)if(e=he,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,he=n;else for(;he!==null;){e=he;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Oi(e.type,v),S);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(I){on(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}return y=rN,rN=!1,y}function Jy(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&_T(e,t,i)}r=r.next}while(r!==s)}}function hE(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function ET(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Nj(n){var e=n.alternate;e!==null&&(n.alternate=null,Nj(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ea],delete e[S0],delete e[cT],delete e[Sz],delete e[Az])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Lj(n){return n.tag===5||n.tag===3||n.tag===4}function iN(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Lj(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ST(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=T_));else if(s!==4&&(n=n.child,n!==null))for(ST(n,e,t),n=n.sibling;n!==null;)ST(n,e,t),n=n.sibling}function AT(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(AT(n,e,t),n=n.sibling;n!==null;)AT(n,e,t),n=n.sibling}var es=null,Zi=!1;function Gl(n,e,t){for(t=t.child;t!==null;)Dj(n,e,t),t=t.sibling}function Dj(n,e,t){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(sE,t)}catch{}switch(t.tag){case 5:xs||$f(t,e);case 6:var s=es,r=Zi;es=null,Gl(n,e,t),es=s,Zi=r,es!==null&&(Zi?(n=es,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):es.removeChild(t.stateNode));break;case 18:es!==null&&(Zi?(n=es,t=t.stateNode,n.nodeType===8?jS(n.parentNode,t):n.nodeType===1&&jS(n,t),w0(n)):jS(es,t.stateNode));break;case 4:s=es,r=Zi,es=t.stateNode.containerInfo,Zi=!0,Gl(n,e,t),es=s,Zi=r;break;case 0:case 11:case 14:case 15:if(!xs&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_T(t,e,o),r=r.next}while(r!==s)}Gl(n,e,t);break;case 1:if(!xs&&($f(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){on(t,e,a)}Gl(n,e,t);break;case 21:Gl(n,e,t);break;case 22:t.mode&1?(xs=(s=xs)||t.memoizedState!==null,Gl(n,e,t),xs=s):Gl(n,e,t);break;default:Gl(n,e,t)}}function oN(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Uz),e.forEach(function(s){var r=Qz.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Ni(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:es=a.stateNode,Zi=!1;break e;case 3:es=a.stateNode.containerInfo,Zi=!0;break e;case 4:es=a.stateNode.containerInfo,Zi=!0;break e}a=a.return}if(es===null)throw Error(Q(160));Dj(i,o,r),es=null,Zi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){on(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mj(e,n),e=e.sibling}function Mj(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ni(e,n),bo(n),s&4){try{Jy(3,n,n.return),hE(3,n)}catch(v){on(n,n.return,v)}try{Jy(5,n,n.return)}catch(v){on(n,n.return,v)}}break;case 1:Ni(e,n),bo(n),s&512&&t!==null&&$f(t,t.return);break;case 5:if(Ni(e,n),bo(n),s&512&&t!==null&&$f(t,t.return),n.flags&32){var r=n.stateNode;try{m0(r,"")}catch(v){on(n,n.return,v)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&sO(r,i),YA(a,o);var u=YA(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?lO(r,d):h==="dangerouslySetInnerHTML"?oO(r,d):h==="children"?m0(r,d):Qk(r,h,d,u)}switch(a){case"input":HA(r,i);break;case"textarea":rO(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ep(r,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?ep(r,!!i.multiple,i.defaultValue,!0):ep(r,!!i.multiple,i.multiple?[]:"",!1))}r[S0]=i}catch(v){on(n,n.return,v)}}break;case 6:if(Ni(e,n),bo(n),s&4){if(n.stateNode===null)throw Error(Q(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(v){on(n,n.return,v)}}break;case 3:if(Ni(e,n),bo(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{w0(e.containerInfo)}catch(v){on(n,n.return,v)}break;case 4:Ni(e,n),bo(n);break;case 13:Ni(e,n),bo(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(IP=fn())),s&4&&oN(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(xs=(u=xs)||h,Ni(e,n),xs=u):Ni(e,n),bo(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(he=n,h=n.child;h!==null;){for(d=he=h;he!==null;){switch(f=he,g=f.child,f.tag){case 0:case 11:case 14:case 15:Jy(4,f,f.return);break;case 1:$f(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){on(s,t,v)}}break;case 5:$f(f,f.return);break;case 22:if(f.memoizedState!==null){lN(d);continue}}g!==null?(g.return=f,he=g):lN(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=aO("display",o))}catch(v){on(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){on(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ni(e,n),bo(n),s&4&&oN(n);break;case 21:break;default:Ni(e,n),bo(n)}}function bo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Lj(t)){var s=t;break e}t=t.return}throw Error(Q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(m0(r,""),s.flags&=-33);var i=iN(n);AT(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=iN(n);ST(n,a,o);break;default:throw Error(Q(161))}}catch(l){on(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function $z(n,e,t){he=n,Oj(n)}function Oj(n,e,t){for(var s=(n.mode&1)!==0;he!==null;){var r=he,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Ob;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||xs;a=Ob;var u=xs;if(Ob=o,(xs=l)&&!u)for(he=r;he!==null;)o=he,l=o.child,o.tag===22&&o.memoizedState!==null?cN(r):l!==null?(l.return=o,he=l):cN(r);for(;i!==null;)he=i,Oj(i),i=i.sibling;he=r,Ob=a,xs=u}aN(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,he=i):aN(n)}}function aN(n){for(;he!==null;){var e=he;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xs||hE(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!xs)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Oi(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&W2(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}W2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&w0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}xs||e.flags&512&&ET(e)}catch(f){on(e,e.return,f)}}if(e===n){he=null;break}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}}function lN(n){for(;he!==null;){var e=he;if(e===n){he=null;break}var t=e.sibling;if(t!==null){t.return=e.return,he=t;break}he=e.return}}function cN(n){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hE(4,e)}catch(l){on(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){on(e,r,l)}}var i=e.return;try{ET(e)}catch(l){on(e,i,l)}break;case 5:var o=e.return;try{ET(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===n){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var Hz=Math.ceil,j_=Ol.ReactCurrentDispatcher,kP=Ol.ReactCurrentOwner,Si=Ol.ReactCurrentBatchConfig,Ye=0,Gn=null,wn=null,os=0,Fr=0,Hf=$u(0),Rn=0,I0=null,zd=0,dE=0,PP=0,Zy=null,ir=null,IP=0,ng=1/0,Ca=null,F_=!1,TT=null,vu=null,jb=!1,cu=null,V_=0,e0=0,CT=null,Ex=-1,Sx=0;function Vs(){return Ye&6?fn():Ex!==-1?Ex:Ex=fn()}function wu(n){return n.mode&1?Ye&2&&os!==0?os&-os:Cz.transition!==null?(Sx===0&&(Sx=bO()),Sx):(n=it,n!==0||(n=window.event,n=n===void 0?16:CO(n.type)),n):1}function io(n,e,t,s){if(50<e0)throw e0=0,CT=null,Error(Q(185));Mw(n,t,s),(!(Ye&2)||n!==Gn)&&(n===Gn&&(!(Ye&2)&&(dE|=t),Rn===4&&sc(n,os)),ur(n,s),t===1&&Ye===0&&!(e.mode&1)&&(ng=fn()+500,lE&&Hu()))}function ur(n,e){var t=n.callbackNode;CU(n,e);var s=__(n,n===Gn?os:0);if(s===0)t!==null&&v2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&v2(t),e===1)n.tag===0?Tz(uN.bind(null,n)):GO(uN.bind(null,n)),_z(function(){!(Ye&6)&&Hu()}),t=null;else{switch(xO(s)){case 1:t=nP;break;case 4:t=vO;break;case 16:t=x_;break;case 536870912:t=wO;break;default:t=x_}t=Hj(t,jj.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function jj(n,e){if(Ex=-1,Sx=0,Ye&6)throw Error(Q(327));var t=n.callbackNode;if(ip()&&n.callbackNode!==t)return null;var s=__(n,n===Gn?os:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=B_(n,s);else{e=s;var r=Ye;Ye|=2;var i=Vj();(Gn!==n||os!==e)&&(Ca=null,ng=fn()+500,Ld(n,e));do try{qz();break}catch(a){Fj(n,a)}while(!0);mP(),j_.current=i,Ye=r,wn!==null?e=0:(Gn=null,os=0,e=Rn)}if(e!==0){if(e===2&&(r=eT(n),r!==0&&(s=r,e=kT(n,r))),e===1)throw t=I0,Ld(n,0),sc(n,s),ur(n,fn()),t;if(e===6)sc(n,s);else{if(r=n.current.alternate,!(s&30)&&!Wz(r)&&(e=B_(n,s),e===2&&(i=eT(n),i!==0&&(s=i,e=kT(n,i))),e===1))throw t=I0,Ld(n,0),sc(n,s),ur(n,fn()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(Q(345));case 2:th(n,ir,Ca);break;case 3:if(sc(n,s),(s&130023424)===s&&(e=IP+500-fn(),10<e)){if(__(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Vs(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=lT(th.bind(null,n,ir,Ca),e);break}th(n,ir,Ca);break;case 4:if(sc(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-ro(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=fn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Hz(s/1960))-s,10<s){n.timeoutHandle=lT(th.bind(null,n,ir,Ca),s);break}th(n,ir,Ca);break;case 5:th(n,ir,Ca);break;default:throw Error(Q(329))}}}return ur(n,fn()),n.callbackNode===t?jj.bind(null,n):null}function kT(n,e){var t=Zy;return n.current.memoizedState.isDehydrated&&(Ld(n,e).flags|=256),n=B_(n,e),n!==2&&(e=ir,ir=t,e!==null&&PT(e)),n}function PT(n){ir===null?ir=n:ir.push.apply(ir,n)}function Wz(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!oo(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sc(n,e){for(e&=~PP,e&=~dE,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ro(e),s=1<<t;n[t]=-1,e&=~s}}function uN(n){if(Ye&6)throw Error(Q(327));ip();var e=__(n,0);if(!(e&1))return ur(n,fn()),null;var t=B_(n,e);if(n.tag!==0&&t===2){var s=eT(n);s!==0&&(e=s,t=kT(n,s))}if(t===1)throw t=I0,Ld(n,0),sc(n,e),ur(n,fn()),t;if(t===6)throw Error(Q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,th(n,ir,Ca),ur(n,fn()),null}function RP(n,e){var t=Ye;Ye|=1;try{return n(e)}finally{Ye=t,Ye===0&&(ng=fn()+500,lE&&Hu())}}function $d(n){cu!==null&&cu.tag===0&&!(Ye&6)&&ip();var e=Ye;Ye|=1;var t=Si.transition,s=it;try{if(Si.transition=null,it=1,n)return n()}finally{it=s,Si.transition=t,Ye=e,!(Ye&6)&&Hu()}}function NP(){Fr=Hf.current,Nt(Hf)}function Ld(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,xz(t)),wn!==null)for(t=wn.return;t!==null;){var s=t;switch(dP(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&C_();break;case 3:eg(),Nt(lr),Nt(Ss),xP();break;case 5:bP(s);break;case 4:eg();break;case 13:Nt(Ht);break;case 19:Nt(Ht);break;case 10:gP(s.type._context);break;case 22:case 23:NP()}t=t.return}if(Gn=n,wn=n=bu(n.current,null),os=Fr=e,Rn=0,I0=null,PP=dE=zd=0,ir=Zy=null,dh!==null){for(e=0;e<dh.length;e++)if(t=dh[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}dh=null}return n}function Fj(n,e){do{var t=wn;try{if(mP(),bx.current=O_,M_){for(var s=Gt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}M_=!1}if(Ud=0,Wn=Pn=Gt=null,Qy=!1,C0=0,kP.current=null,t===null||t.return===null){Rn=1,I0=e,wn=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=os,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Q2(o);if(g!==null){g.flags&=-257,J2(g,o,a,i,e),g.mode&1&&X2(i,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){X2(i,u,e),LP();break e}l=Error(Q(426))}}else if(Vt&&a.mode&1){var S=Q2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),J2(S,o,a,i,e),fP(tg(l,a));break e}}i=l=tg(l,a),Rn!==4&&(Rn=2),Zy===null?Zy=[i]:Zy.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=xj(i,l,e);H2(i,w);break e;case 1:a=l;var _=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(vu===null||!vu.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=_j(i,a,e);H2(i,I);break e}}i=i.return}while(i!==null)}Uj(t)}catch(D){e=D,wn===t&&t!==null&&(wn=t=t.return);continue}break}while(!0)}function Vj(){var n=j_.current;return j_.current=O_,n===null?O_:n}function LP(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Gn===null||!(zd&268435455)&&!(dE&268435455)||sc(Gn,os)}function B_(n,e){var t=Ye;Ye|=2;var s=Vj();(Gn!==n||os!==e)&&(Ca=null,Ld(n,e));do try{Gz();break}catch(r){Fj(n,r)}while(!0);if(mP(),Ye=t,j_.current=s,wn!==null)throw Error(Q(261));return Gn=null,os=0,Rn}function Gz(){for(;wn!==null;)Bj(wn)}function qz(){for(;wn!==null&&!vU();)Bj(wn)}function Bj(n){var e=$j(n.alternate,n,Fr);n.memoizedProps=n.pendingProps,e===null?Uj(n):wn=e,kP.current=null}function Uj(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Bz(t,e),t!==null){t.flags&=32767,wn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rn=6,wn=null;return}}else if(t=Vz(t,e,Fr),t!==null){wn=t;return}if(e=e.sibling,e!==null){wn=e;return}wn=e=n}while(e!==null);Rn===0&&(Rn=5)}function th(n,e,t){var s=it,r=Si.transition;try{Si.transition=null,it=1,Kz(n,e,t,s)}finally{Si.transition=r,it=s}return null}function Kz(n,e,t,s){do ip();while(cu!==null);if(Ye&6)throw Error(Q(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Q(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(kU(n,i),n===Gn&&(wn=Gn=null,os=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||jb||(jb=!0,Hj(x_,function(){return ip(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Si.transition,Si.transition=null;var o=it;it=1;var a=Ye;Ye|=4,kP.current=null,zz(n,t),Mj(t,n),pz(oT),E_=!!iT,oT=iT=null,n.current=t,$z(t),wU(),Ye=a,it=o,Si.transition=i}else n.current=t;if(jb&&(jb=!1,cu=n,V_=r),i=n.pendingLanes,i===0&&(vu=null),_U(t.stateNode),ur(n,fn()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(F_)throw F_=!1,n=TT,TT=null,n;return V_&1&&n.tag!==0&&ip(),i=n.pendingLanes,i&1?n===CT?e0++:(e0=0,CT=n):e0=0,Hu(),null}function ip(){if(cu!==null){var n=xO(V_),e=Si.transition,t=it;try{if(Si.transition=null,it=16>n?16:n,cu===null)var s=!1;else{if(n=cu,cu=null,V_=0,Ye&6)throw Error(Q(331));var r=Ye;for(Ye|=4,he=n.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:Jy(8,h,i)}var d=h.child;if(d!==null)d.return=h,he=d;else for(;he!==null;){h=he;var f=h.sibling,g=h.return;if(Nj(h),h===u){he=null;break}if(f!==null){f.return=g,he=f;break}he=g}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jy(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,he=w;break e}he=i.return}}var _=n.current;for(he=_;he!==null;){o=he;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,he=E;else e:for(o=_;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hE(9,a)}}catch(D){on(a,a.return,D)}if(a===o){he=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,he=I;break e}he=a.return}}if(Ye=r,Hu(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(sE,n)}catch{}s=!0}return s}finally{it=t,Si.transition=e}}return!1}function hN(n,e,t){e=tg(t,e),e=xj(n,e,1),n=yu(n,e,1),e=Vs(),n!==null&&(Mw(n,1,e),ur(n,e))}function on(n,e,t){if(n.tag===3)hN(n,n,t);else for(;e!==null;){if(e.tag===3){hN(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vu===null||!vu.has(s))){n=tg(t,n),n=_j(e,n,1),e=yu(e,n,1),n=Vs(),e!==null&&(Mw(e,1,n),ur(e,n));break}}e=e.return}}function Yz(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Vs(),n.pingedLanes|=n.suspendedLanes&t,Gn===n&&(os&t)===t&&(Rn===4||Rn===3&&(os&130023424)===os&&500>fn()-IP?Ld(n,0):PP|=t),ur(n,e)}function zj(n,e){e===0&&(n.mode&1?(e=Cb,Cb<<=1,!(Cb&130023424)&&(Cb=4194304)):e=1);var t=Vs();n=Al(n,e),n!==null&&(Mw(n,e,t),ur(n,t))}function Xz(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zj(n,t)}function Qz(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(Q(314))}s!==null&&s.delete(e),zj(n,t)}var $j;$j=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||lr.current)ar=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ar=!1,Fz(n,e,t);ar=!!(n.flags&131072)}else ar=!1,Vt&&e.flags&1048576&&qO(e,I_,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;_x(n,e),n=e.pendingProps;var r=Qm(e,Ss.current);rp(e,t),r=EP(null,e,s,n,r,t);var i=SP();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cr(s)?(i=!0,k_(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vP(e),r.updater=uE,e.stateNode=r,r._reactInternals=e,mT(e,s,n,t),e=vT(null,e,s,!0,i,t)):(e.tag=0,Vt&&i&&hP(e),Os(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(_x(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=Zz(s),n=Oi(s,n),r){case 0:e=yT(null,e,s,n,t);break e;case 1:e=tN(null,e,s,n,t);break e;case 11:e=Z2(null,e,s,n,t);break e;case 14:e=eN(null,e,s,Oi(s.type,n),t);break e}throw Error(Q(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oi(s,r),yT(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oi(s,r),tN(n,e,s,r,t);case 3:e:{if(Tj(e),n===null)throw Error(Q(387));s=e.pendingProps,i=e.memoizedState,r=i.element,ZO(n,e),L_(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=tg(Error(Q(423)),e),e=nN(n,e,s,t,r);break e}else if(s!==r){r=tg(Error(Q(424)),e),e=nN(n,e,s,t,r);break e}else for($r=gu(e.stateNode.containerInfo.firstChild),Wr=e,Vt=!0,eo=null,t=QO(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Jm(),s===r){e=Tl(n,e,t);break e}Os(n,e,s,t)}e=e.child}return e;case 5:return ej(e),n===null&&dT(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,aT(s,r)?o=null:i!==null&&aT(s,i)&&(e.flags|=32),Aj(n,e),Os(n,e,o,t),e.child;case 6:return n===null&&dT(e),null;case 13:return Cj(n,e,t);case 4:return wP(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Zm(e,null,s,t):Os(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oi(s,r),Z2(n,e,s,r,t);case 7:return Os(n,e,e.pendingProps,t),e.child;case 8:return Os(n,e,e.pendingProps.children,t),e.child;case 12:return Os(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Et(R_,s._currentValue),s._currentValue=o,i!==null)if(oo(i.value,o)){if(i.children===r.children&&!lr.current){e=Tl(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=vl(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),fT(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),fT(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Os(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,rp(e,t),r=Ci(r),s=s(r),e.flags|=1,Os(n,e,s,t),e.child;case 14:return s=e.type,r=Oi(s,e.pendingProps),r=Oi(s.type,r),eN(n,e,s,r,t);case 15:return Ej(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oi(s,r),_x(n,e),e.tag=1,cr(s)?(n=!0,k_(e)):n=!1,rp(e,t),bj(e,s,r),mT(e,s,r,t),vT(null,e,s,!0,n,t);case 19:return kj(n,e,t);case 22:return Sj(n,e,t)}throw Error(Q(156,e.tag))};function Hj(n,e){return yO(n,e)}function Jz(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(n,e,t,s){return new Jz(n,e,t,s)}function DP(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zz(n){if(typeof n=="function")return DP(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Zk)return 11;if(n===eP)return 14}return 2}function bu(n,e){var t=n.alternate;return t===null?(t=_i(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ax(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")DP(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Df:return Dd(t.children,r,i,e);case Jk:o=8,r|=8;break;case VA:return n=_i(12,t,e,r|2),n.elementType=VA,n.lanes=i,n;case BA:return n=_i(13,t,e,r),n.elementType=BA,n.lanes=i,n;case UA:return n=_i(19,t,e,r),n.elementType=UA,n.lanes=i,n;case eO:return fE(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case JM:o=10;break e;case ZM:o=9;break e;case Zk:o=11;break e;case eP:o=14;break e;case ec:o=16,s=null;break e}throw Error(Q(130,n==null?n:typeof n,""))}return e=_i(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function Dd(n,e,t,s){return n=_i(7,n,s,e),n.lanes=t,n}function fE(n,e,t,s){return n=_i(22,n,s,e),n.elementType=eO,n.lanes=t,n.stateNode={isHidden:!1},n}function WS(n,e,t){return n=_i(6,n,null,e),n.lanes=t,n}function GS(n,e,t){return e=_i(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function e9(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TS(0),this.expirationTimes=TS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TS(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function MP(n,e,t,s,r,i,o,a,l){return n=new e9(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_i(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},vP(i),n}function t9(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lf,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function Wj(n){if(!n)return Pu;n=n._reactInternals;e:{if(ef(n)!==n||n.tag!==1)throw Error(Q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(n.tag===1){var t=n.type;if(cr(t))return WO(n,t,e)}return e}function Gj(n,e,t,s,r,i,o,a,l){return n=MP(t,s,!0,n,r,i,o,a,l),n.context=Wj(null),t=n.current,s=Vs(),r=wu(t),i=vl(s,r),i.callback=e??null,yu(t,i,r),n.current.lanes=r,Mw(n,r,s),ur(n,s),n}function pE(n,e,t,s){var r=e.current,i=Vs(),o=wu(r);return t=Wj(t),e.context===null?e.context=t:e.pendingContext=t,e=vl(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=yu(r,e,o),n!==null&&(io(n,r,o,i),wx(n,r,o)),o}function U_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dN(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function OP(n,e){dN(n,e),(n=n.alternate)&&dN(n,e)}function n9(){return null}var qj=typeof reportError=="function"?reportError:function(n){console.error(n)};function jP(n){this._internalRoot=n}mE.prototype.render=jP.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Q(409));pE(n,e,null,null)};mE.prototype.unmount=jP.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$d(function(){pE(null,n,null,null)}),e[Sl]=null}};function mE(n){this._internalRoot=n}mE.prototype.unstable_scheduleHydration=function(n){if(n){var e=SO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<nc.length&&e!==0&&e<nc[t].priority;t++);nc.splice(t,0,n),t===0&&TO(n)}};function FP(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fN(){}function s9(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=U_(o);i.call(u)}}var o=Gj(e,s,n,0,null,!1,!1,"",fN);return n._reactRootContainer=o,n[Sl]=o.current,_0(n.nodeType===8?n.parentNode:n),$d(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=U_(l);a.call(u)}}var l=MP(n,0,!1,null,null,!1,!1,"",fN);return n._reactRootContainer=l,n[Sl]=l.current,_0(n.nodeType===8?n.parentNode:n),$d(function(){pE(e,l,t,s)}),l}function yE(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=U_(o);a.call(l)}}pE(e,o,n,r)}else o=s9(t,e,n,r,s);return U_(o)}_O=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=dy(e.pendingLanes);t!==0&&(sP(e,t|1),ur(e,fn()),!(Ye&6)&&(ng=fn()+500,Hu()))}break;case 13:$d(function(){var s=Al(n,1);if(s!==null){var r=Vs();io(s,n,1,r)}}),OP(n,1)}};rP=function(n){if(n.tag===13){var e=Al(n,134217728);if(e!==null){var t=Vs();io(e,n,134217728,t)}OP(n,134217728)}};EO=function(n){if(n.tag===13){var e=wu(n),t=Al(n,e);if(t!==null){var s=Vs();io(t,n,e,s)}OP(n,e)}};SO=function(){return it};AO=function(n,e){var t=it;try{return it=n,e()}finally{it=t}};QA=function(n,e,t){switch(e){case"input":if(HA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=aE(s);if(!r)throw Error(Q(90));nO(s),HA(s,r)}}}break;case"textarea":rO(n,t);break;case"select":e=t.value,e!=null&&ep(n,!!t.multiple,e,!1)}};hO=RP;dO=$d;var r9={usingClientEntryPoint:!1,Events:[jw,Ff,aE,cO,uO,RP]},Jg={findFiberByHostInstance:hh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i9={bundleType:Jg.bundleType,version:Jg.version,rendererPackageName:Jg.rendererPackageName,rendererConfig:Jg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=mO(n),n===null?null:n.stateNode},findFiberByHostInstance:Jg.findFiberByHostInstance||n9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fb.isDisabled&&Fb.supportsFiber)try{sE=Fb.inject(i9),sa=Fb}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r9;Xr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!FP(e))throw Error(Q(200));return t9(n,e,null,t)};Xr.createRoot=function(n,e){if(!FP(n))throw Error(Q(299));var t=!1,s="",r=qj;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=MP(n,1,!1,null,null,t,!1,s,r),n[Sl]=e.current,_0(n.nodeType===8?n.parentNode:n),new jP(e)};Xr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Q(188)):(n=Object.keys(n).join(","),Error(Q(268,n)));return n=mO(e),n=n===null?null:n.stateNode,n};Xr.flushSync=function(n){return $d(n)};Xr.hydrate=function(n,e,t){if(!gE(e))throw Error(Q(200));return yE(null,n,e,!0,t)};Xr.hydrateRoot=function(n,e,t){if(!FP(n))throw Error(Q(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=qj;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Gj(e,null,n,1,t??null,r,!1,i,o),n[Sl]=e.current,_0(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new mE(e)};Xr.render=function(n,e,t){if(!gE(e))throw Error(Q(200));return yE(null,n,e,!1,t)};Xr.unmountComponentAtNode=function(n){if(!gE(n))throw Error(Q(40));return n._reactRootContainer?($d(function(){yE(null,null,n,!1,function(){n._reactRootContainer=null,n[Sl]=null})}),!0):!1};Xr.unstable_batchedUpdates=RP;Xr.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!gE(t))throw Error(Q(200));if(n==null||n._reactInternals===void 0)throw Error(Q(38));return yE(n,e,t,!1,s)};Xr.version="18.3.1-next-f1338f8080-20240426";function Kj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kj)}catch(n){console.error(n)}}Kj(),KM.exports=Xr;var VP=KM.exports;const o9=Hk(VP);var pN=VP;jA.createRoot=pN.createRoot,jA.hydrateRoot=pN.hydrateRoot;const Vb={Ready:{type:"ready"},ElementSelection:{type:"element-selection",selectedElements:null}},a9=["http://localhost:3000","https://dev.caffeine.ai","https://caffeine.ai"];let qS=null;function mN(n){let e=5381;for(let t=0;t<n.length;t++)e=(e<<5)+e^n.charCodeAt(t);return"id-"+(e>>>0).toString(36).padStart(6,"0")}function l9(n){window.getComputedStyle(n).position==="static"&&n.classList.add("editor-selected-badged")}function c9(n,e){l9(n);const t=document.createElement("span");t.className="editor-badge",t.textContent=e,t.setAttribute("data-editor-badge","1"),n.appendChild(t)}function u9(n){const e=n.querySelector('[data-editor-badge="1"]');e&&e.remove(),n.classList.remove("editor-selected-badged")}function h9(){document.querySelectorAll('[data-editor-badge="1"]').forEach(e=>{const t=e.parentElement;e.remove(),t&&t.classList.remove("editor-selected-badged")})}var ye,Eo,wr,ri,Y0,X0,Yj,py,IT,RT,my,NT,gy,Xj,Qj,Jj,Zj,eF,tF,nF;class d9{constructor(){A(this,ye);A(this,wr,{type:"initializing"});A(this,ri,new Map);A(this,Y0,k(this,ye,eF).bind(this));A(this,X0,k(this,ye,tF).bind(this));k(this,ye,Yj).call(this),k(this,ye,my).call(this,!1),window.addEventListener("message",e=>{if(!a9.includes(e.origin)){k(this,ye,Eo).call(this,{type:"error",payload:{msg:`disallowed origin: ${e.origin}`}});return}qS=e.origin;const{type:t,payload:s}=e.data;switch(k(this,ye,Eo).call(this,{type:"ack",payload:{message:e.data}}),t){case"ready":k(this,ye,py).call(this),b(this,wr,Vb.Ready),k(this,ye,my).call(this,!1),k(this,ye,Eo).call(this,{type:"status",payload:{status:c(this,wr).type}});break;case"tool-element-selection":k(this,ye,py).call(this),b(this,wr,Vb.ElementSelection),k(this,ye,my).call(this,!0),k(this,ye,Eo).call(this,{type:"status",payload:{status:c(this,wr).type}});break;case"clear-selection":k(this,ye,Eo).call(this,{type:"status",payload:{status:"clearing selections"}}),k(this,ye,py).call(this);break;case"remove-selection":s!=null&&s.element&&(k(this,ye,Eo).call(this,{type:"status",payload:{status:`removing ${s.element}`}}),k(this,ye,IT).call(this,s.element));break;case"rebuild-selection":{const r=Array.isArray(s==null?void 0:s.ids)?s.ids:[];k(this,ye,nF).call(this,r);break}}}),k(this,ye,Qj).call(this),k(this,ye,Jj).call(this),b(this,wr,Vb.Ready)}}ye=new WeakSet,Eo=function(e){qS&&parent.postMessage(e,qS)},wr=new WeakMap,ri=new WeakMap,Y0=new WeakMap,X0=new WeakMap,Yj=function(){const e=document.createElement("style");e.textContent=`
            .editor-selected {
                outline: 2px solid #4D99F0 !important;
                outline-offset: 2px !important;
                /* Override visibility properties that could hide the outline */
                opacity: 1 !important;
                visibility: visible !important;
                /* Disable transitions that could affect outline visibility */
                transition: none !important;
                transition-property: none !important;
                transition-duration: 0s !important;
                transition-delay: 0s !important;
                /* Ensure outline is not clipped by clip-path or clip */
                clip-path: none !important;
                clip: unset !important;
            }

            .editor-hover {
                outline: 1px dashed #4D99F0 !important;
                outline-offset: 2px !important;
            }

            .editor-selected-badged {
                position: relative !important;
            }
            .editor-badge {
                position: absolute !important;
                top: 0 !important;
                right: 0 !important;
                background: #4D99F0 !important;
                color: #fff !important;
                font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
                font-size: 11px !important;
                line-height: 1 !important;
                padding: 4px 6px !important;
                border-radius: 10px !important;
                box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;
                z-index: 2147483647 !important;
                pointer-events: none !important;
                user-select: none !important;
            }

            .editor-element-selection-mode {
                cursor: crosshair !important;
            }
            .editor-element-selection-mode * {
                cursor: crosshair !important;
            }

        `,document.head.appendChild(e)},py=function(){document.querySelectorAll(".editor-selected").forEach(t=>{t.classList.remove("editor-selected")}),c(this,ri).clear(),h9()},IT=function(e){const t=c(this,ri).get(e);if(t){t.element.classList.remove("editor-selected"),u9(t.element),c(this,ri).delete(e);return}},RT=function(e,t,s){t.classList.add("editor-selected"),c9(t,e),c(this,ri).set(e,{id:e,element:t,domTreeString:s})},my=function(e){e?document.body.classList.add("editor-element-selection-mode"):document.body.classList.remove("editor-element-selection-mode")},NT=function(e){const t=[];let s=e;for(;s&&s!==document.body;)t.unshift(s),s=s.parentElement;const r=document.body;if(!r)return e.outerHTML;const i=(a,l)=>{const u=a.cloneNode(!1);return Array.from(a.children).forEach(h=>{const d=h;if(l.length>0&&d===l[0])if(l.length===1){const f=d.cloneNode(!0);k(this,ye,gy).call(this,f),f.setAttribute("data-target","this"),u.appendChild(f)}else{const f=i(d,l.slice(1));u.appendChild(f)}else{const f=d.cloneNode(!0);k(this,ye,gy).call(this,f),u.appendChild(f)}}),k(this,ye,gy).call(this,u),u};return i(r,t).outerHTML},gy=function(e){e.querySelectorAll('[data-editor-badge="1"]').forEach(r=>r.remove()),e.classList.remove("editor-selected","editor-selected-badged","editor-hover");const s=e.children;for(let r=0;r<s.length;r++)k(this,ye,gy).call(this,s[r])},Xj=function(e){const t=e.target,s=k(this,ye,NT).call(this,t),r=mN(s);c(this,ri).has(r)?k(this,ye,IT).call(this,r):k(this,ye,RT).call(this,r,t,s);const i=Array.from(c(this,ri).values()).map(({id:a,element:l,domTreeString:u})=>({id:a,tagName:l.tagName.toLowerCase(),domTreeString:u})),o=Array.from(c(this,ri).keys());k(this,ye,Eo).call(this,{type:"element-selection",payload:{selectedElements:i,selectedElementIds:o,elementId:r,elementTree:s}})},Qj=function(){(document.body??document).addEventListener("click",t=>{c(this,wr).type==="element-selection"&&(t.preventDefault(),k(this,ye,Xj).call(this,t))})},Jj=function(){k(this,ye,Zj).call(this);const e=document.body??document;e.addEventListener("mouseover",c(this,Y0)),e.addEventListener("mouseout",c(this,X0))},Zj=function(){const e=document.body??document;e.removeEventListener("mouseover",c(this,Y0)),e.removeEventListener("mouseout",c(this,X0))},eF=function(e){if(c(this,wr).type!=="element-selection")return;e.stopPropagation();const t=e.target;document.querySelectorAll(".editor-hover").forEach(r=>{r.classList.remove("editor-hover")}),t.classList.add("editor-hover")},tF=function(e){if(c(this,wr).type!=="element-selection")return;e.target.classList.remove("editor-hover")},nF=function(e){if(k(this,ye,py).call(this),!Array.isArray(e)||e.length===0)return[];const t=new Set(e),s=[];document.querySelectorAll("*").forEach(a=>{const l=k(this,ye,NT).call(this,a),u=mN(l);t.has(u)&&(k(this,ye,RT).call(this,u,a,l),s.push(u))});const i=Array.from(c(this,ri).values()).map(({id:a,domTreeString:l})=>({id:a,domTreeString:l})),o=Array.from(c(this,ri).keys());return o.length>0&&(b(this,wr,Vb.ElementSelection),k(this,ye,my).call(this,!0),k(this,ye,Eo).call(this,{type:"status",payload:{status:c(this,wr).type}})),k(this,ye,Eo).call(this,{type:"selection-rebuilt",payload:{selectedElements:i,selectedElementIds:o}}),s};let KS=null;function gN(){return KS||(KS=new d9),KS}var vE=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},f9={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},lc,$k,TM,p9=(TM=class{constructor(){A(this,lc,f9);A(this,$k,!1)}setTimeoutProvider(n){b(this,lc,n)}setTimeout(n,e){return c(this,lc).setTimeout(n,e)}clearTimeout(n){c(this,lc).clearTimeout(n)}setInterval(n,e){return c(this,lc).setInterval(n,e)}clearInterval(n){c(this,lc).clearInterval(n)}},lc=new WeakMap,$k=new WeakMap,TM),LT=new p9;function m9(n){setTimeout(n,0)}var wE=typeof window>"u"||"Deno"in globalThis;function ji(){}function g9(n,e){return typeof n=="function"?n(e):n}function y9(n){return typeof n=="number"&&n>=0&&n!==1/0}function v9(n,e){return Math.max(n+(e||0)-Date.now(),0)}function DT(n,e){return typeof n=="function"?n(e):n}function w9(n,e){return typeof n=="function"?n(e):n}function yN(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=n;if(o){if(s){if(e.queryHash!==BP(o,e.options))return!1}else if(!N0(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function vN(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(R0(e.options.mutationKey)!==R0(i))return!1}else if(!N0(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function BP(n,e){return((e==null?void 0:e.queryKeyHashFn)||R0)(n)}function R0(n){return JSON.stringify(n,(e,t)=>MT(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function N0(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>N0(n[t],e[t])):!1}var b9=Object.prototype.hasOwnProperty;function sF(n,e){if(n===e)return n;const t=wN(n)&&wN(e);if(!t&&!(MT(n)&&MT(e)))return e;const r=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),o=i.length,a=t?new Array(o):{};let l=0;for(let u=0;u<o;u++){const h=t?u:i[u],d=n[h],f=e[h];if(d===f){a[h]=d,(t?u<r:b9.call(n,h))&&l++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){a[h]=f;continue}const g=sF(d,f);a[h]=g,g===d&&l++}return r===o&&l===r?n:a}function wN(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function MT(n){if(!bN(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!bN(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function bN(n){return Object.prototype.toString.call(n)==="[object Object]"}function x9(n){return new Promise(e=>{LT.setTimeout(e,n)})}function _9(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?sF(n,e):e}function E9(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function S9(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var UP=Symbol();function rF(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===UP?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function A9(n,e,t){let s=!1,r;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(r??(r=e()),s||(s=!0,r.aborted?t():r.addEventListener("abort",t,{once:!0})),r)}),n}var mh,cc,gp,CM,T9=(CM=class extends vE{constructor(){super();A(this,mh);A(this,cc);A(this,gp);b(this,gp,e=>{if(!wE&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){c(this,cc)||this.setEventListener(c(this,gp))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,cc))==null||e.call(this),b(this,cc,void 0))}setEventListener(e){var t;b(this,gp,e),(t=c(this,cc))==null||t.call(this),b(this,cc,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,mh)!==e&&(b(this,mh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof c(this,mh)=="boolean"?c(this,mh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},mh=new WeakMap,cc=new WeakMap,gp=new WeakMap,CM),iF=new T9;function C9(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}var k9=m9;function P9(){let n=[],e=0,t=a=>{a()},s=a=>{a()},r=k9;const i=a=>{e?n.push(a):r(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var js=P9(),yp,uc,vp,kM,I9=(kM=class extends vE{constructor(){super();A(this,yp,!0);A(this,uc);A(this,vp);b(this,vp,e=>{if(!wE&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,uc)||this.setEventListener(c(this,vp))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,uc))==null||e.call(this),b(this,uc,void 0))}setEventListener(e){var t;b(this,vp,e),(t=c(this,uc))==null||t.call(this),b(this,uc,e(this.setOnline.bind(this)))}setOnline(e){c(this,yp)!==e&&(b(this,yp,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,yp)}},yp=new WeakMap,uc=new WeakMap,vp=new WeakMap,kM),z_=new I9;function R9(n){return Math.min(1e3*2**n,3e4)}function oF(n){return(n??"online")==="online"?z_.isOnline():!0}var OT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function aF(n){let e=!1,t=0,s;const r=C9(),i=()=>r.status!=="pending",o=v=>{var S;if(!i()){const w=new OT(v);f(w),(S=n.onCancel)==null||S.call(n,w)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>iF.isFocused()&&(n.networkMode==="always"||z_.isOnline())&&n.canRun(),h=()=>oF(n.networkMode)&&n.canRun(),d=v=>{i()||(s==null||s(),r.resolve(v))},f=v=>{i()||(s==null||s(),r.reject(v))},g=()=>new Promise(v=>{var S;s=w=>{(i()||u())&&v(w)},(S=n.onPause)==null||S.call(n)}).then(()=>{var v;s=void 0,i()||(v=n.onContinue)==null||v.call(n)}),y=()=>{if(i())return;let v;const S=t===0?n.initialPromise:void 0;try{v=S??n.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(d).catch(w=>{var M;if(i())return;const _=n.retry??(wE?0:3),E=n.retryDelay??R9,I=typeof E=="function"?E(t,w):E,D=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,w);if(e||!D){f(w);return}t++,(M=n.onFail)==null||M.call(n,t,w),x9(I).then(()=>u()?void 0:g()).then(()=>{e?f(w):y()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?y():g().then(y),r)}}var gh,PM,lF=(PM=class{constructor(){A(this,gh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),y9(this.gcTime)&&b(this,gh,LT.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(wE?1/0:5*60*1e3))}clearGcTimeout(){c(this,gh)&&(LT.clearTimeout(c(this,gh)),b(this,gh,void 0))}},gh=new WeakMap,PM),yh,wp,ii,vh,On,Q0,wh,Vi,Ea,IM,N9=(IM=class extends lF{constructor(t){super();A(this,Vi);A(this,yh);A(this,wp);A(this,ii);A(this,vh);A(this,On);A(this,Q0);A(this,wh);b(this,wh,!1),b(this,Q0,t.defaultOptions),this.setOptions(t.options),this.observers=[],b(this,vh,t.client),b(this,ii,c(this,vh).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,b(this,yh,_N(this.options)),this.state=t.state??c(this,yh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=c(this,On))==null?void 0:t.promise}setOptions(t){if(this.options={...c(this,Q0),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=_N(this.options);s.data!==void 0&&(this.setState(xN(s.data,s.dataUpdatedAt)),b(this,yh,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,ii).remove(this)}setData(t,s){const r=_9(this.state.data,t,this.options);return k(this,Vi,Ea).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){k(this,Vi,Ea).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,i;const s=(r=c(this,On))==null?void 0:r.promise;return(i=c(this,On))==null||i.cancel(t),s?s.then(ji).catch(ji):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,yh))}isActive(){return this.observers.some(t=>w9(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===UP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>DT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!v9(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=c(this,On))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=c(this,On))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),c(this,ii).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(c(this,On)&&(c(this,wh)?c(this,On).cancel({revert:!0}):c(this,On).cancelRetry()),this.scheduleGc()),c(this,ii).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Vi,Ea).call(this,{type:"invalidate"})}async fetch(t,s){var u,h,d,f,g,y,v,S,w,_,E,I;if(this.state.fetchStatus!=="idle"&&((u=c(this,On))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,On))return c(this,On).continueRetry(),c(this,On).promise}if(t&&this.setOptions(t),!this.options.queryFn){const D=this.observers.find(M=>M.options.queryFn);D&&this.setOptions(D.options)}const r=new AbortController,i=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(b(this,wh,!0),r.signal)})},o=()=>{const D=rF(this.options,s),T=(()=>{const C={client:c(this,vh),queryKey:this.queryKey,meta:this.meta};return i(C),C})();return b(this,wh,!1),this.options.persister?this.options.persister(D,T,this):D(T)},l=(()=>{const D={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,vh),state:this.state,fetchFn:o};return i(D),D})();(h=this.options.behavior)==null||h.onFetch(l,this),b(this,wp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&k(this,Vi,Ea).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),b(this,On,aF({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:D=>{D instanceof OT&&D.revert&&this.setState({...c(this,wp),fetchStatus:"idle"}),r.abort()},onFail:(D,M)=>{k(this,Vi,Ea).call(this,{type:"failed",failureCount:D,error:M})},onPause:()=>{k(this,Vi,Ea).call(this,{type:"pause"})},onContinue:()=>{k(this,Vi,Ea).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const D=await c(this,On).start();if(D===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(D),(y=(g=c(this,ii).config).onSuccess)==null||y.call(g,D,this),(S=(v=c(this,ii).config).onSettled)==null||S.call(v,D,this.state.error,this),D}catch(D){if(D instanceof OT){if(D.silent)return c(this,On).promise;if(D.revert){if(this.state.data===void 0)throw D;return this.state.data}}throw k(this,Vi,Ea).call(this,{type:"error",error:D}),(_=(w=c(this,ii).config).onError)==null||_.call(w,D,this),(I=(E=c(this,ii).config).onSettled)==null||I.call(E,this.state.data,D,this),D}finally{this.scheduleGc()}}},yh=new WeakMap,wp=new WeakMap,ii=new WeakMap,vh=new WeakMap,On=new WeakMap,Q0=new WeakMap,wh=new WeakMap,Vi=new WeakSet,Ea=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...L9(r.data,this.options),fetchMeta:t.meta??null};case"success":const i={...r,...xN(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return b(this,wp,t.manual?i:void 0),i;case"error":const o=t.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),js.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),c(this,ii).notify({query:this,type:"updated",action:t})})},IM);function L9(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oF(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function xN(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _N(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function EN(n){return{onFetch:(e,t)=>{var h,d,f,g,y;const s=e.options,r=(f=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const S=E=>{A9(E,()=>e.signal,()=>v=!0)},w=rF(e.options,e.fetchOptions),_=async(E,I,D)=>{if(v)return Promise.reject();if(I==null&&E.pages.length)return Promise.resolve(E);const T=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:I,direction:D?"backward":"forward",meta:e.options.meta};return S(R),R})(),C=await w(T),{maxPages:N}=e.options,L=D?S9:E9;return{pages:L(E.pages,C,N),pageParams:L(E.pageParams,I,N)}};if(r&&i.length){const E=r==="backward",I=E?D9:SN,D={pages:i,pageParams:o},M=I(s,D);a=await _(D,M,E)}else{const E=n??i.length;do{const I=l===0?o[0]??s.initialPageParam:SN(s,a);if(l>0&&I==null)break;a=await _(a,I),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function SN(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function D9(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var J0,ko,Rs,bh,Po,Jl,RM,M9=(RM=class extends lF{constructor(t){super();A(this,Po);A(this,J0);A(this,ko);A(this,Rs);A(this,bh);b(this,J0,t.client),this.mutationId=t.mutationId,b(this,Rs,t.mutationCache),b(this,ko,[]),this.state=t.state||O9(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){c(this,ko).includes(t)||(c(this,ko).push(t),this.clearGcTimeout(),c(this,Rs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){b(this,ko,c(this,ko).filter(s=>s!==t)),this.scheduleGc(),c(this,Rs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){c(this,ko).length||(this.state.status==="pending"?this.scheduleGc():c(this,Rs).remove(this))}continue(){var t;return((t=c(this,bh))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,u,h,d,f,g,y,v,S,w,_,E,I,D,M,T,C,N,L;const s=()=>{k(this,Po,Jl).call(this,{type:"continue"})},r={client:c(this,J0),meta:this.options.meta,mutationKey:this.options.mutationKey};b(this,bh,aF({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{k(this,Po,Jl).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{k(this,Po,Jl).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,Rs).canRun(this)}));const i=this.state.status==="pending",o=!c(this,bh).canStart();try{if(i)s();else{k(this,Po,Jl).call(this,{type:"pending",variables:t,isPaused:o}),await((l=(a=c(this,Rs).config).onMutate)==null?void 0:l.call(a,t,this,r));const O=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t,r));O!==this.state.context&&k(this,Po,Jl).call(this,{type:"pending",context:O,variables:t,isPaused:o})}const R=await c(this,bh).start();return await((f=(d=c(this,Rs).config).onSuccess)==null?void 0:f.call(d,R,t,this.state.context,this,r)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,R,t,this.state.context,r)),await((S=(v=c(this,Rs).config).onSettled)==null?void 0:S.call(v,R,null,this.state.variables,this.state.context,this,r)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,R,null,t,this.state.context,r)),k(this,Po,Jl).call(this,{type:"success",data:R}),R}catch(R){try{await((I=(E=c(this,Rs).config).onError)==null?void 0:I.call(E,R,t,this.state.context,this,r))}catch(O){Promise.reject(O)}try{await((M=(D=this.options).onError)==null?void 0:M.call(D,R,t,this.state.context,r))}catch(O){Promise.reject(O)}try{await((C=(T=c(this,Rs).config).onSettled)==null?void 0:C.call(T,void 0,R,this.state.variables,this.state.context,this,r))}catch(O){Promise.reject(O)}try{await((L=(N=this.options).onSettled)==null?void 0:L.call(N,void 0,R,t,this.state.context,r))}catch(O){Promise.reject(O)}throw k(this,Po,Jl).call(this,{type:"error",error:R}),R}finally{c(this,Rs).runNext(this)}}},J0=new WeakMap,ko=new WeakMap,Rs=new WeakMap,bh=new WeakMap,Po=new WeakSet,Jl=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),js.batch(()=>{c(this,ko).forEach(r=>{r.onMutationUpdate(t)}),c(this,Rs).notify({mutation:this,type:"updated",action:t})})},RM);function O9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Na,Bi,Z0,NM,j9=(NM=class extends vE{constructor(e={}){super();A(this,Na);A(this,Bi);A(this,Z0);this.config=e,b(this,Na,new Set),b(this,Bi,new Map),b(this,Z0,0)}build(e,t,s){const r=new M9({client:e,mutationCache:this,mutationId:++Jt(this,Z0)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){c(this,Na).add(e);const t=Bb(e);if(typeof t=="string"){const s=c(this,Bi).get(t);s?s.push(e):c(this,Bi).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,Na).delete(e)){const t=Bb(e);if(typeof t=="string"){const s=c(this,Bi).get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&c(this,Bi).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Bb(e);if(typeof t=="string"){const s=c(this,Bi).get(t),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const t=Bb(e);if(typeof t=="string"){const r=(s=c(this,Bi).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){js.batch(()=>{c(this,Na).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,Na).clear(),c(this,Bi).clear()})}getAll(){return Array.from(c(this,Na))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>vN(t,s))}findAll(e={}){return this.getAll().filter(t=>vN(e,t))}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return js.batch(()=>Promise.all(e.map(t=>t.continue().catch(ji))))}},Na=new WeakMap,Bi=new WeakMap,Z0=new WeakMap,NM);function Bb(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Io,LM,F9=(LM=class extends vE{constructor(e={}){super();A(this,Io);this.config=e,b(this,Io,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??BP(r,t);let o=this.get(i);return o||(o=new N9({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,Io).has(e.queryHash)||(c(this,Io).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=c(this,Io).get(e.queryHash);t&&(e.destroy(),t===e&&c(this,Io).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,Io).get(e)}getAll(){return[...c(this,Io).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>yN(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>yN(e,s)):t}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Io=new WeakMap,LM),Zt,hc,dc,bp,xp,fc,_p,Ep,DM,V9=(DM=class{constructor(n={}){A(this,Zt);A(this,hc);A(this,dc);A(this,bp);A(this,xp);A(this,fc);A(this,_p);A(this,Ep);b(this,Zt,n.queryCache||new F9),b(this,hc,n.mutationCache||new j9),b(this,dc,n.defaultOptions||{}),b(this,bp,new Map),b(this,xp,new Map),b(this,fc,0)}mount(){Jt(this,fc)._++,c(this,fc)===1&&(b(this,_p,iF.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,Zt).onFocus())})),b(this,Ep,z_.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,Zt).onOnline())})))}unmount(){var n,e;Jt(this,fc)._--,c(this,fc)===0&&((n=c(this,_p))==null||n.call(this),b(this,_p,void 0),(e=c(this,Ep))==null||e.call(this),b(this,Ep,void 0))}isFetching(n){return c(this,Zt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return c(this,hc).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,Zt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=c(this,Zt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(DT(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return c(this,Zt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=c(this,Zt).get(s.queryHash),i=r==null?void 0:r.state.data,o=g9(e,i);if(o!==void 0)return c(this,Zt).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return js.batch(()=>c(this,Zt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,Zt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=c(this,Zt);js.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=c(this,Zt);return js.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=js.batch(()=>c(this,Zt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(ji).catch(ji)}invalidateQueries(n,e={}){return js.batch(()=>(c(this,Zt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=js.batch(()=>c(this,Zt).findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(ji)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ji)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=c(this,Zt).build(this,e);return t.isStaleByTime(DT(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ji).catch(ji)}fetchInfiniteQuery(n){return n.behavior=EN(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ji).catch(ji)}ensureInfiniteQueryData(n){return n.behavior=EN(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return z_.isOnline()?c(this,hc).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,Zt)}getMutationCache(){return c(this,hc)}getDefaultOptions(){return c(this,dc)}setDefaultOptions(n){b(this,dc,n)}setQueryDefaults(n,e){c(this,bp).set(R0(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...c(this,bp).values()],t={};return e.forEach(s=>{N0(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){c(this,xp).set(R0(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...c(this,xp).values()],t={};return e.forEach(s=>{N0(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...c(this,dc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=BP(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===UP&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...c(this,dc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){c(this,Zt).clear(),c(this,hc).clear()}},Zt=new WeakMap,hc=new WeakMap,dc=new WeakMap,bp=new WeakMap,xp=new WeakMap,fc=new WeakMap,_p=new WeakMap,Ep=new WeakMap,DM),B9=B.createContext(void 0),U9=({client:n,children:e})=>(B.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(B9.Provider,{value:n,children:e}));const jT=new WeakMap,z9=new WeakMap,$_={current:[]};let YS=!1,t0=0;const yy=new Set,Ub=new Map;function cF(n){for(const e of n){if($_.current.includes(e))continue;$_.current.push(e),e.recompute();const t=z9.get(e);if(t)for(const s of t){const r=jT.get(s);r!=null&&r.length&&cF(r)}}}function $9(n){const e={prevVal:n.prevState,currentVal:n.state};for(const t of n.listeners)t(e)}function H9(n){const e={prevVal:n.prevState,currentVal:n.state};for(const t of n.listeners)t(e)}function uF(n){if(t0>0&&!Ub.has(n)&&Ub.set(n,n.prevState),yy.add(n),!(t0>0)&&!YS)try{for(YS=!0;yy.size>0;){const e=Array.from(yy);yy.clear();for(const t of e){const s=Ub.get(t)??t.prevState;t.prevState=s,$9(t)}for(const t of e){const s=jT.get(t);s&&($_.current.push(t),cF(s))}for(const t of e){const s=jT.get(t);if(s)for(const r of s)H9(r)}}}finally{YS=!1,$_.current=[],Ub.clear()}}function n0(n){t0++;try{n()}finally{if(t0--,t0===0){const e=yy.values().next().value;e&&uF(e)}}}function W9(n){return typeof n=="function"}class G9{constructor(e,t){this.listeners=new Set,this.subscribe=s=>{var r,i;this.listeners.add(s);const o=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,s,this);return()=>{this.listeners.delete(s),o==null||o()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,s,r;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(e):W9(e)?this.state=e(this.prevState):this.state=e,(r=(s=this.options)==null?void 0:s.onUpdate)==null||r.call(s),uF(this)}}const xu="__TSR_index",AN="popstate",TN="beforeunload";function q9(n){let e=n.getLocation();const t=new Set,s=o=>{e=n.getLocation(),t.forEach(a=>a({location:e,action:o}))},r=o=>{n.notifyOnIndexChange??!0?s(o):e=n.getLocation()},i=async({task:o,navigateOpts:a,...l})=>{var f,g;if((a==null?void 0:a.ignoreBlocker)??!1){o();return}const h=((f=n.getBlockers)==null?void 0:f.call(n))??[],d=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&h.length&&d)for(const y of h){const v=H_(l.path,l.state);if(await y.blockerFn({currentLocation:e,nextLocation:v,action:l.type})){(g=n.onBlocked)==null||g.call(n);return}}o()};return{get location(){return e},get length(){return n.getLength()},subscribers:t,subscribe:o=>(t.add(o),()=>{t.delete(o)}),push:(o,a,l)=>{const u=e.state[xu];a=CN(u+1,a),i({task:()=>{n.pushState(o,a),s({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:o,state:a})},replace:(o,a,l)=>{const u=e.state[xu];a=CN(u,a),i({task:()=>{n.replaceState(o,a),s({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:o,state:a})},go:(o,a)=>{i({task:()=>{n.go(o),r({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{i({task:()=>{n.back((o==null?void 0:o.ignoreBlocker)??!1),r({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{n.forward((o==null?void 0:o.ignoreBlocker)??!1),r({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[xu]!==0,createHref:o=>n.createHref(o),block:o=>{var l;if(!n.setBlockers)return()=>{};const a=((l=n.getBlockers)==null?void 0:l.call(n))??[];return n.setBlockers([...a,o]),()=>{var h,d;const u=((h=n.getBlockers)==null?void 0:h.call(n))??[];(d=n.setBlockers)==null||d.call(n,u.filter(f=>f!==o))}},flush:()=>{var o;return(o=n.flush)==null?void 0:o.call(n)},destroy:()=>{var o;return(o=n.destroy)==null?void 0:o.call(n)},notify:s}}function CN(n,e){e||(e={});const t=zP();return{...e,key:t,__TSR_key:t,[xu]:n}}function K9(n){var C,N;const e=typeof document<"u"?window:void 0,t=e.history.pushState,s=e.history.replaceState;let r=[];const i=()=>r,o=L=>r=L,a=L=>L,l=()=>H_(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);if(!((C=e.history.state)!=null&&C.__TSR_key)&&!((N=e.history.state)!=null&&N.key)){const L=zP();e.history.replaceState({[xu]:0,key:L,__TSR_key:L},"")}let u=l(),h,d=!1,f=!1,g=!1,y=!1;const v=()=>u;let S,w;const _=()=>{S&&(T._ignoreSubscribers=!0,(S.isPush?e.history.pushState:e.history.replaceState)(S.state,"",S.href),T._ignoreSubscribers=!1,S=void 0,w=void 0,h=void 0)},E=(L,R,O)=>{const j=a(R);w||(h=u),u=H_(R,O),S={href:j,state:O,isPush:(S==null?void 0:S.isPush)||L==="push"},w||(w=Promise.resolve().then(()=>_()))},I=L=>{u=l(),T.notify({type:L})},D=async()=>{if(f){f=!1;return}const L=l(),R=L.state[xu]-u.state[xu],O=R===1,j=R===-1,V=!O&&!j||d;d=!1;const $=V?"GO":j?"BACK":"FORWARD",U=V?{type:"GO",index:R}:{type:j?"BACK":"FORWARD"};if(g)g=!1;else{const W=i();if(typeof document<"u"&&W.length){for(const G of W)if(await G.blockerFn({currentLocation:u,nextLocation:L,action:$})){f=!0,e.history.go(1),T.notify(U);return}}}u=l(),T.notify(U)},M=L=>{if(y){y=!1;return}let R=!1;const O=i();if(typeof document<"u"&&O.length)for(const j of O){const V=j.enableBeforeUnload??!0;if(V===!0){R=!0;break}if(typeof V=="function"&&V()===!0){R=!0;break}}if(R)return L.preventDefault(),L.returnValue=""},T=q9({getLocation:v,getLength:()=>e.history.length,pushState:(L,R)=>E("push",L,R),replaceState:(L,R)=>E("replace",L,R),back:L=>(L&&(g=!0),y=!0,e.history.back()),forward:L=>{L&&(g=!0),y=!0,e.history.forward()},go:L=>{d=!0,e.history.go(L)},createHref:L=>a(L),flush:_,destroy:()=>{e.history.pushState=t,e.history.replaceState=s,e.removeEventListener(TN,M,{capture:!0}),e.removeEventListener(AN,D)},onBlocked:()=>{h&&u!==h&&(u=h)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(TN,M,{capture:!0}),e.addEventListener(AN,D),e.history.pushState=function(...L){const R=t.apply(e.history,L);return T._ignoreSubscribers||I("PUSH"),R},e.history.replaceState=function(...L){const R=s.apply(e.history,L);return T._ignoreSubscribers||I("REPLACE"),R},T}function Y9(n){let e=n.replace(/[\x00-\x1f\x7f]/g,"");return e.startsWith("//")&&(e="/"+e.replace(/^\/+/,"")),e}function H_(n,e){const t=Y9(n),s=t.indexOf("#"),r=t.indexOf("?"),i=zP();return{href:t,pathname:t.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:t.length),hash:s>-1?t.substring(s):"",search:r>-1?t.slice(r,s===-1?void 0:s):"",state:e||{[xu]:0,key:i,__TSR_key:i}}}function zP(){return(Math.random()+1).toString(36).substring(7)}function W_(n){return n[n.length-1]}function X9(n){return typeof n=="function"}function uu(n,e){return X9(n)?n(e):n}const Q9=Object.prototype.hasOwnProperty;function ni(n,e){if(n===e)return n;const t=e,s=IN(n)&&IN(t);if(!s&&!(G_(n)&&G_(t)))return t;const r=s?n:kN(n);if(!r)return t;const i=s?t:kN(t);if(!i)return t;const o=r.length,a=i.length,l=s?new Array(a):{};let u=0;for(let h=0;h<a;h++){const d=s?h:i[h],f=n[d],g=t[d];if(f===g){l[d]=f,(s?h<o:Q9.call(n,d))&&u++;continue}if(f===null||g===null||typeof f!="object"||typeof g!="object"){l[d]=g;continue}const y=ni(f,g);l[d]=y,y===f&&u++}return o===a&&u===o?n:l}function kN(n){const e=[],t=Object.getOwnPropertyNames(n);for(const r of t){if(!Object.prototype.propertyIsEnumerable.call(n,r))return!1;e.push(r)}const s=Object.getOwnPropertySymbols(n);for(const r of s){if(!Object.prototype.propertyIsEnumerable.call(n,r))return!1;e.push(r)}return e}function G_(n){if(!PN(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!PN(t)||!t.hasOwnProperty("isPrototypeOf"))}function PN(n){return Object.prototype.toString.call(n)==="[object Object]"}function IN(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Md(n,e,t){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let s=0,r=n.length;s<r;s++)if(!Md(n[s],e[s],t))return!1;return!0}if(G_(n)&&G_(e)){const s=(t==null?void 0:t.ignoreUndefined)??!0;if(t!=null&&t.partial){for(const o in e)if((!s||e[o]!==void 0)&&!Md(n[o],e[o],t))return!1;return!0}let r=0;if(!s)r=Object.keys(n).length;else for(const o in n)n[o]!==void 0&&r++;let i=0;for(const o in e)if((!s||e[o]!==void 0)&&(i++,i>r||!Md(n[o],e[o],t)))return!1;return r===i}return!1}function sg(n){let e,t;const s=new Promise((r,i)=>{e=r,t=i});return s.status="pending",s.resolve=r=>{s.status="resolved",s.value=r,e(r),n==null||n(r)},s.reject=r=>{s.status="rejected",t(r)},s}function _u(n){return!!(n&&typeof n=="object"&&typeof n.then=="function")}function J9(n){return n.replace(/[\x00-\x1f\x7f]/g,"")}function RN(n){let e;try{e=decodeURI(n)}catch{e=n.replaceAll(/%[0-9A-F]{2}/gi,t=>{try{return decodeURI(t)}catch{return t}})}return J9(e)}function NN(n,e){if(!n)return n;const t=/%25|%5C/gi;let s=0,r="",i;for(;(i=t.exec(n))!==null;)r+=RN(n.slice(s,i.index))+i[0],s=t.lastIndex;return r=r+RN(s?n.slice(s):n),r.startsWith("//")&&(r="/"+r.replace(/^\/+/,"")),r}var Z9="Invariant failed";function Be(n,e){if(!n)throw new Error(Z9)}function q_(n){const e=new Map;let t,s;const r=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,s&&(s.next=i,i.prev=s)):(i.next.prev=void 0,t=i.next,i.next=void 0,s&&(i.prev=s,s.next=i)),s=i)};return{get(i){const o=e.get(i);if(o)return r(o),o.value},set(i,o){if(e.size>=n&&t){const l=t;e.delete(l.key),l.next&&(t=l.next,l.next.prev=void 0),l===s&&(s=void 0)}const a=e.get(i);if(a)a.value=o,r(a);else{const l={key:i,value:o,prev:s};s&&(s.next=l),s=l,t||(t=l),e.set(i,l)}},clear(){e.clear(),t=void 0,s=void 0}}}const rg=0,Hd=1,Wd=2,L0=3,Wf=4,e8=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,t8=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,n8=/^([^{]*)\{\$\}([^}]*)$/;function $P(n,e,t=new Uint16Array(6)){const s=n.indexOf("/",e),r=s===-1?n.length:s,i=n.substring(e,r);if(!i||!i.includes("$"))return t[0]=rg,t[1]=e,t[2]=e,t[3]=r,t[4]=r,t[5]=r,t;if(i==="$"){const u=n.length;return t[0]=Wd,t[1]=e,t[2]=e,t[3]=u,t[4]=u,t[5]=u,t}if(i.charCodeAt(0)===36)return t[0]=Hd,t[1]=e,t[2]=e+1,t[3]=r,t[4]=r,t[5]=r,t;const o=i.match(n8);if(o){const h=o[1].length;return t[0]=Wd,t[1]=e+h,t[2]=e+h+1,t[3]=e+h+2,t[4]=e+h+3,t[5]=n.length,t}const a=i.match(t8);if(a){const u=a[1],h=a[2],d=a[3],f=u.length;return t[0]=L0,t[1]=e+f,t[2]=e+f+3,t[3]=e+f+3+h.length,t[4]=r-d.length,t[5]=r,t}const l=i.match(e8);if(l){const u=l[1],h=l[2],d=l[3],f=u.length;return t[0]=Hd,t[1]=e+f,t[2]=e+f+2,t[3]=e+f+2+h.length,t[4]=r-d.length,t[5]=r,t}return t[0]=rg,t[1]=e,t[2]=e,t[3]=r,t[4]=r,t[5]=r,t}function bE(n,e,t,s,r,i,o){var l,u,h,d,f;o==null||o(t);let a=s;{const g=t.fullPath??t.from,y=g.length,v=((l=t.options)==null?void 0:l.caseSensitive)??n;for(;a<y;){const w=$P(g,a,e);let _;const E=a,I=w[5];switch(a=I+1,i++,w[0]){case rg:{const M=g.substring(w[2],w[3]);if(v){const T=(u=r.static)==null?void 0:u.get(M);if(T)_=T;else{r.static??(r.static=new Map);const C=op(t.fullPath??t.from);C.parent=r,C.depth=i,_=C,r.static.set(M,C)}}else{const T=M.toLowerCase(),C=(h=r.staticInsensitive)==null?void 0:h.get(T);if(C)_=C;else{r.staticInsensitive??(r.staticInsensitive=new Map);const N=op(t.fullPath??t.from);N.parent=r,N.depth=i,_=N,r.staticInsensitive.set(T,N)}}break}case Hd:{const M=g.substring(E,w[1]),T=g.substring(w[4],I),C=v&&!!(M||T),N=M?C?M:M.toLowerCase():void 0,L=T?C?T:T.toLowerCase():void 0,R=(d=r.dynamic)==null?void 0:d.find(O=>O.caseSensitive===C&&O.prefix===N&&O.suffix===L);if(R)_=R;else{const O=QS(Hd,t.fullPath??t.from,C,N,L);_=O,O.depth=i,O.parent=r,r.dynamic??(r.dynamic=[]),r.dynamic.push(O)}break}case L0:{const M=g.substring(E,w[1]),T=g.substring(w[4],I),C=v&&!!(M||T),N=M?C?M:M.toLowerCase():void 0,L=T?C?T:T.toLowerCase():void 0,R=(f=r.optional)==null?void 0:f.find(O=>O.caseSensitive===C&&O.prefix===N&&O.suffix===L);if(R)_=R;else{const O=QS(L0,t.fullPath??t.from,C,N,L);_=O,O.parent=r,O.depth=i,r.optional??(r.optional=[]),r.optional.push(O)}break}case Wd:{const M=g.substring(E,w[1]),T=g.substring(w[4],I),C=v&&!!(M||T),N=M?C?M:M.toLowerCase():void 0,L=T?C?T:T.toLowerCase():void 0,R=QS(Wd,t.fullPath??t.from,C,N,L);_=R,R.parent=r,R.depth=i,r.wildcard??(r.wildcard=[]),r.wildcard.push(R)}}r=_}const S=(t.path||!t.children)&&!t.isRoot;if(S&&g.endsWith("/")){const w=op(t.fullPath??t.from);w.kind=Wf,w.parent=r,i++,w.depth=i,r.index=w,r=w}S&&!r.route&&(r.route=t,r.fullPath=t.fullPath??t.from)}if(t.children)for(const g of t.children)bE(n,e,g,a,r,i,o)}function XS(n,e){if(n.prefix&&e.prefix&&n.prefix!==e.prefix){if(n.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(n.prefix))return 1}if(n.suffix&&e.suffix&&n.suffix!==e.suffix){if(n.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(n.suffix))return 1}return n.prefix&&!e.prefix?-1:!n.prefix&&e.prefix?1:n.suffix&&!e.suffix?-1:!n.suffix&&e.suffix?1:n.caseSensitive&&!e.caseSensitive?-1:!n.caseSensitive&&e.caseSensitive?1:0}function oh(n){var e,t,s;if(n.static)for(const r of n.static.values())oh(r);if(n.staticInsensitive)for(const r of n.staticInsensitive.values())oh(r);if((e=n.dynamic)!=null&&e.length){n.dynamic.sort(XS);for(const r of n.dynamic)oh(r)}if((t=n.optional)!=null&&t.length){n.optional.sort(XS);for(const r of n.optional)oh(r)}if((s=n.wildcard)!=null&&s.length){n.wildcard.sort(XS);for(const r of n.wildcard)oh(r)}}function op(n){return{kind:rg,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:n,parent:null}}function QS(n,e,t,s,r){return{kind:n,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:t,prefix:s,suffix:r}}function s8(n,e){const t=op("/"),s=new Uint16Array(6);for(const r of n)bE(!1,s,r,1,t,0);oh(t),e.masksTree=t,e.flatCache=q_(1e3)}function r8(n,e){n||(n="/");const t=e.flatCache.get(n);if(t)return t;const s=HP(n,e.masksTree);return e.flatCache.set(n,s),s}function i8(n,e,t,s,r){n||(n="/"),s||(s="/");const i=e?`case\0${n}`:n;let o=r.singleCache.get(i);if(!o){o=op("/");const a=new Uint16Array(6);bE(e,a,{from:n},1,o,0),r.singleCache.set(i,o)}return HP(s,o,t)}function o8(n,e,t=!1){const s=t?n:`nofuzz\0${n}`,r=e.matchCache.get(s);if(r!==void 0)return r;n||(n="/");const i=HP(n,e.segmentTree,t);return i&&(i.branch=u8(i.route)),e.matchCache.set(s,i),i}function a8(n){return n==="/"?n:n.replace(/\/{1,}$/,"")}function l8(n,e=!1,t){const s=op(n.fullPath),r=new Uint16Array(6),i={},o={};let a=0;return bE(e,r,n,1,s,0,u=>{if(t==null||t(u,a),Be(!(u.id in i),`Duplicate routes found with id: ${String(u.id)}`),i[u.id]=u,a!==0&&u.path){const h=a8(u.fullPath);(!o[h]||u.fullPath.endsWith("/"))&&(o[h]=u)}a++}),oh(s),{processedTree:{segmentTree:s,singleCache:q_(1e3),matchCache:q_(1e3),flatCache:null,masksTree:null},routesById:i,routesByPath:o}}function HP(n,e,t=!1){const s=n.split("/"),r=d8(n,s,e,t);if(!r)return null;const i=c8(n,s,r);return"**"in r&&(i["**"]=r["**"]),{route:r.node.route,params:i}}function c8(n,e,t){var o,a,l,u,h,d;const s=h8(t.node);let r=null;const i={};for(let f=0,g=0,y=0;g<s.length;f++,g++,y++){const v=s[g],S=e[f],w=y;if(S&&(y+=S.length),v.kind===Hd){r??(r=t.node.fullPath.split("/"));const _=r[g],E=((o=v.prefix)==null?void 0:o.length)??0;if(_.charCodeAt(E)===123){const D=((a=v.suffix)==null?void 0:a.length)??0,M=_.substring(E+2,_.length-D-1),T=S.substring(E,S.length-D);i[M]=decodeURIComponent(T)}else{const D=_.substring(1);i[D]=decodeURIComponent(S)}}else if(v.kind===L0){if(t.skipped&1<<g){f--;continue}r??(r=t.node.fullPath.split("/"));const _=r[g],E=((l=v.prefix)==null?void 0:l.length)??0,I=((u=v.suffix)==null?void 0:u.length)??0,D=_.substring(E+3,_.length-I-1),M=v.suffix||v.prefix?S.substring(E,S.length-I):S;M&&(i[D]=decodeURIComponent(M))}else if(v.kind===Wd){const _=v,E=n.substring(w+(((h=_.prefix)==null?void 0:h.length)??0),n.length-(((d=_.suffix)==null?void 0:d.length)??0)),I=decodeURIComponent(E);i["*"]=I,i._splat=I;break}}return i}function u8(n){const e=[n];for(;n.parentRoute;)n=n.parentRoute,e.push(n);return e.reverse(),e}function h8(n){const e=Array(n.depth+1);do e[n.depth]=n,n=n.parent;while(n);return e}function d8(n,e,t,s){if(n==="/"&&t.index)return{node:t.index,skipped:0};const r=!W_(e),i=r&&n!=="/",o=e.length-(r?1:0),a=[{node:t,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let l=null,u=null,h=null;for(;a.length;){const d=a.pop();let{node:f,index:g,skipped:y,depth:v,statics:S,dynamics:w,optionals:_}=d;s&&f.route&&f.kind!==Wf&&Zg(u,d)&&(u=d);const E=g===o;if(E&&(f.route&&!i&&Zg(h,d)&&(h=d),!f.optional&&!f.wildcard&&!f.index))continue;const I=E?void 0:e[g];let D;if(E&&f.index){const M={node:f.index,index:g,skipped:y,depth:v+1,statics:S,dynamics:w,optionals:_};if(S===o&&!w&&!_&&!y)return M;Zg(h,M)&&(h=M)}if(f.wildcard&&Zg(l,d))for(const M of f.wildcard){const{prefix:T,suffix:C}=M;if(!(T&&(E||!(M.caseSensitive?I:D??(D=I.toLowerCase())).startsWith(T)))){if(C){if(E)continue;const N=e.slice(g).join("/").slice(-C.length);if((M.caseSensitive?N:N.toLowerCase())!==C)continue}l={node:M,index:o,skipped:y,depth:v,statics:S,dynamics:w,optionals:_};break}}if(f.optional){const M=y|1<<v,T=v+1;for(let C=f.optional.length-1;C>=0;C--){const N=f.optional[C];a.push({node:N,index:g,skipped:M,depth:T,statics:S,dynamics:w,optionals:_})}if(!E)for(let C=f.optional.length-1;C>=0;C--){const N=f.optional[C],{prefix:L,suffix:R}=N;if(L||R){const O=N.caseSensitive?I:D??(D=I.toLowerCase());if(L&&!O.startsWith(L)||R&&!O.endsWith(R))continue}a.push({node:N,index:g+1,skipped:y,depth:T,statics:S,dynamics:w,optionals:_+1})}}if(!E&&f.dynamic&&I)for(let M=f.dynamic.length-1;M>=0;M--){const T=f.dynamic[M],{prefix:C,suffix:N}=T;if(C||N){const L=T.caseSensitive?I:D??(D=I.toLowerCase());if(C&&!L.startsWith(C)||N&&!L.endsWith(N))continue}a.push({node:T,index:g+1,skipped:y,depth:v+1,statics:S,dynamics:w+1,optionals:_})}if(!E&&f.staticInsensitive){const M=f.staticInsensitive.get(D??(D=I.toLowerCase()));M&&a.push({node:M,index:g+1,skipped:y,depth:v+1,statics:S+1,dynamics:w,optionals:_})}if(!E&&f.static){const M=f.static.get(I);M&&a.push({node:M,index:g+1,skipped:y,depth:v+1,statics:S+1,dynamics:w,optionals:_})}}if(h&&l)return Zg(l,h)?h:l;if(h)return h;if(l)return l;if(s&&u){let d=u.index;for(let g=0;g<u.index;g++)d+=e[g].length;const f=d===n.length?"/":n.slice(d);return{node:u.node,skipped:u.skipped,"**":decodeURIComponent(f)}}return null}function Zg(n,e){return n?e.statics>n.statics||e.statics===n.statics&&(e.dynamics>n.dynamics||e.dynamics===n.dynamics&&(e.optionals>n.optionals||e.optionals===n.optionals&&((e.node.kind===Wf)>(n.node.kind===Wf)||e.node.kind===Wf==(n.node.kind===Wf)&&e.depth>n.depth))):!0}function Tx(n){return WP(n.filter(e=>e!==void 0).join("/"))}function WP(n){return n.replace(/\/{2,}/g,"/")}function hF(n){return n==="/"?n:n.replace(/^\/{1,}/,"")}function Od(n){const e=n.length;return e>1&&n[e-1]==="/"?n.replace(/\/{1,}$/,""):n}function dF(n){return Od(hF(n))}function K_(n,e){return n!=null&&n.endsWith("/")&&n!=="/"&&n!==`${e}/`?n.slice(0,-1):n}function f8(n,e,t){return K_(n,t)===K_(e,t)}function p8({base:n,to:e,trailingSlash:t="never",cache:s}){const r=e.startsWith("/"),i=!r&&e===".";let o;if(s){o=r?e:i?n:n+"\0"+e;const d=s.get(o);if(d)return d}let a;if(i)a=n.split("/");else if(r)a=e.split("/");else{for(a=n.split("/");a.length>1&&W_(a)==="";)a.pop();const d=e.split("/");for(let f=0,g=d.length;f<g;f++){const y=d[f];y===""?f?f===g-1&&a.push(y):a=[y]:y===".."?a.pop():y==="."||a.push(y)}}a.length>1&&(W_(a)===""?t==="never"&&a.pop():t==="always"&&a.push(""));let l,u="";for(let d=0;d<a.length;d++){d>0&&(u+="/");const f=a[d];if(!f)continue;l=$P(f,0,l);const g=l[0];if(g===rg){u+=f;continue}const y=l[5],v=f.substring(0,l[1]),S=f.substring(l[4],y),w=f.substring(l[2],l[3]);g===Hd?u+=v||S?`${v}{$${w}}${S}`:`$${w}`:g===Wd?u+=v||S?`${v}{$}${S}`:"$":u+=`${v}{-$${w}}${S}`}u=WP(u);const h=u||"/";return o&&s&&s.set(o,h),h}function JS(n,e,t){const s=e[n];return typeof s!="string"?s:n==="_splat"?encodeURI(s):m8(s,t)}function ZS({path:n,params:e,decodeCharMap:t}){let s=!1;const r={};if(!n||n==="/")return{interpolatedPath:"/",usedParams:r,isMissingParams:s};if(!n.includes("$"))return{interpolatedPath:n,usedParams:r,isMissingParams:s};const i=n.length;let o=0,a,l="";for(;o<i;){const h=o;a=$P(n,h,a);const d=a[5];if(o=d+1,h===d)continue;const f=a[0];if(f===rg){l+="/"+n.substring(h,d);continue}if(f===Wd){const g=e._splat;r._splat=g,r["*"]=g;const y=n.substring(h,a[1]),v=n.substring(a[4],d);if(!g){s=!0,(y||v)&&(l+="/"+y+v);continue}const S=JS("_splat",e,t);l+="/"+y+S+v;continue}if(f===Hd){const g=n.substring(a[2],a[3]);!s&&!(g in e)&&(s=!0),r[g]=e[g];const y=n.substring(h,a[1]),v=n.substring(a[4],d),S=JS(g,e,t)??"undefined";l+="/"+y+S+v;continue}if(f===L0){const g=n.substring(a[2],a[3]),y=e[g];if(y==null)continue;r[g]=y;const v=n.substring(h,a[1]),S=n.substring(a[4],d),w=JS(g,e,t)??"";l+="/"+v+w+S;continue}}return n.endsWith("/")&&(l+="/"),{usedParams:r,interpolatedPath:l||"/",isMissingParams:s}}function m8(n,e){let t=encodeURIComponent(n);if(e)for(const[s,r]of e)t=t.replaceAll(s,r);return t}function Gr(n){return!!(n!=null&&n.isNotFound)}function g8(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Y_="tsr-scroll-restoration-v1_3",y8=(n,e)=>{let t;return(...s)=>{t||(t=setTimeout(()=>{n(...s),t=null},e))}};function v8(){const n=g8();if(!n)return null;const e=n.getItem(Y_);let t=e?JSON.parse(e):{};return{state:t,set:s=>{t=uu(s,t)||t;try{n.setItem(Y_,JSON.stringify(t))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const zb=v8(),FT=n=>n.state.__TSR_key||n.href;function w8(n){const e=[];let t;for(;t=n.parentNode;)e.push(`${n.tagName}:nth-child(${Array.prototype.indexOf.call(t.children,n)+1})`),n=t;return`${e.reverse().join(" > ")}`.toLowerCase()}let X_=!1;function fF({storageKey:n,key:e,behavior:t,shouldScrollRestoration:s,scrollToTopSelectors:r,location:i}){var u,h;let o;try{o=JSON.parse(sessionStorage.getItem(n)||"{}")}catch(d){console.error(d);return}const a=e||((u=window.history.state)==null?void 0:u.__TSR_key),l=o[a];X_=!0;e:{if(s&&l&&Object.keys(l).length>0){for(const g in l){const y=l[g];if(g==="window")window.scrollTo({top:y.scrollY,left:y.scrollX,behavior:t});else if(g){const v=document.querySelector(g);v&&(v.scrollLeft=y.scrollX,v.scrollTop=y.scrollY)}}break e}const d=(i??window.location).hash.split("#",2)[1];if(d){const g=((h=window.history.state)==null?void 0:h.__hashScrollIntoViewOptions)??!0;if(g){const y=document.getElementById(d);y&&y.scrollIntoView(g)}break e}const f={top:0,left:0,behavior:t};if(window.scrollTo(f),r)for(const g of r){if(g==="window")continue;const y=typeof g=="function"?g():document.querySelector(g);y&&y.scrollTo(f)}}X_=!1}function b8(n,e){if(!zb&&!n.isServer||((n.options.scrollRestoration??!1)&&(n.isScrollRestoring=!0),n.isServer||n.isScrollRestorationSetup||!zb))return;n.isScrollRestorationSetup=!0,X_=!1;const s=n.options.getScrollRestorationKey||FT;window.history.scrollRestoration="manual";const r=i=>{if(X_||!n.isScrollRestoring)return;let o="";if(i.target===document||i.target===window)o="window";else{const l=i.target.getAttribute("data-scroll-restoration-id");l?o=`[data-scroll-restoration-id="${l}"]`:o=w8(i.target)}const a=s(n.state.location);zb.set(l=>{const u=l[a]||(l[a]={}),h=u[o]||(u[o]={});if(o==="window")h.scrollX=window.scrollX||0,h.scrollY=window.scrollY||0;else if(o){const d=document.querySelector(o);d&&(h.scrollX=d.scrollLeft||0,h.scrollY=d.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",y8(r,100),!0),n.subscribe("onRendered",i=>{const o=s(i.toLocation);if(!n.resetNextScroll){n.resetNextScroll=!0;return}typeof n.options.scrollRestoration=="function"&&!n.options.scrollRestoration({location:n.latestLocation})||(fF({storageKey:Y_,key:o,behavior:n.options.scrollRestorationBehavior,shouldScrollRestoration:n.isScrollRestoring,scrollToTopSelectors:n.options.scrollToTopSelectors,location:n.history.location}),n.isScrollRestoring&&zb.set(a=>(a[o]||(a[o]={}),a)))})}function x8(n){if(typeof document<"u"&&document.querySelector){const e=n.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&n.state.location.hash!==""){const t=document.getElementById(n.state.location.hash);t&&t.scrollIntoView(e)}}}function _8(n,e=String){const t=new URLSearchParams;for(const s in n){const r=n[s];r!==void 0&&t.set(s,e(r))}return t.toString()}function eA(n){return n?n==="false"?!1:n==="true"?!0:+n*0===0&&+n+""===n?+n:n:""}function E8(n){const e=new URLSearchParams(n),t={};for(const[s,r]of e.entries()){const i=t[s];i==null?t[s]=eA(r):Array.isArray(i)?i.push(eA(r)):t[s]=[i,eA(r)]}return t}const S8=T8(JSON.parse),A8=C8(JSON.stringify,JSON.parse);function T8(n){return e=>{e[0]==="?"&&(e=e.substring(1));const t=E8(e);for(const s in t){const r=t[s];if(typeof r=="string")try{t[s]=n(r)}catch{}}return t}}function C8(n,e){const t=typeof e=="function";function s(r){if(typeof r=="object"&&r!==null)try{return n(r)}catch{}else if(t&&typeof r=="string")try{return e(r),n(r)}catch{}return r}return r=>{const i=_8(r,s);return i?`?${i}`:""}}const Vr="__root__";function k8(n){if(n.statusCode=n.statusCode||n.code||307,!n.reloadDocument&&typeof n.href=="string")try{new URL(n.href),n.reloadDocument=!0}catch{}const e=new Headers(n.headers);n.href&&e.get("Location")===null&&e.set("Location",n.href);const t=new Response(null,{status:n.statusCode,headers:e});if(t.options=n,n.throw)throw t;return t}function Ei(n){return n instanceof Response&&!!n.options}const Cx=n=>{var e;if(!n.rendered)return n.rendered=!0,(e=n.onReady)==null?void 0:e.call(n)},xE=(n,e)=>!!(n.preload&&!n.router.state.matches.some(t=>t.id===e)),GP=(n,e,t=!0)=>{const s={...n.router.options.context??{}},r=t?e:e-1;for(let i=0;i<=r;i++){const o=n.matches[i];if(!o)continue;const a=n.router.getMatch(o.id);a&&Object.assign(s,a.__routeContext,a.__beforeLoadContext)}return s},pF=(n,e)=>{var r;const t=n.router.routesById[e.routeId??""]??n.router.routeTree;!t.options.notFoundComponent&&((r=n.router.options)!=null&&r.defaultNotFoundComponent)&&(t.options.notFoundComponent=n.router.options.defaultNotFoundComponent),Be(t.options.notFoundComponent);const s=n.matches.find(i=>i.routeId===t.id);Be(s,"Could not find match for route: "+t.id),n.updateMatch(s.id,i=>({...i,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&t.parentRoute&&(e.routeId=t.parentRoute.id,pF(n,e))},hu=(n,e,t)=>{var s,r,i;if(!(!Ei(t)&&!Gr(t))){if(Ei(t)&&t.redirectHandled&&!t.options.reloadDocument)throw t;if(e){(s=e._nonReactive.beforeLoadPromise)==null||s.resolve(),(r=e._nonReactive.loaderPromise)==null||r.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const o=Ei(t)?"redirected":"notFound";e._nonReactive.error=t,n.updateMatch(e.id,a=>({...a,status:o,isFetching:!1,error:t})),Gr(t)&&!t.routeId&&(t.routeId=e.routeId),(i=e._nonReactive.loadPromise)==null||i.resolve()}throw Ei(t)?(n.rendered=!0,t.options._fromLocation=n.location,t.redirectHandled=!0,t=n.router.resolveRedirect(t),t):(pF(n,t),t)}},mF=(n,e)=>{const t=n.router.getMatch(e);return!!(!n.router.isServer&&t._nonReactive.dehydrated||n.router.isServer&&t.ssr===!1)},ey=(n,e,t,s)=>{var a,l;const{id:r,routeId:i}=n.matches[e],o=n.router.looseRoutesById[i];if(t instanceof Promise)throw t;t.routerCode=s,n.firstBadMatchIndex??(n.firstBadMatchIndex=e),hu(n,n.router.getMatch(r),t);try{(l=(a=o.options).onError)==null||l.call(a,t)}catch(u){t=u,hu(n,n.router.getMatch(r),t)}n.updateMatch(r,u=>{var h,d;return(h=u._nonReactive.beforeLoadPromise)==null||h.resolve(),u._nonReactive.beforeLoadPromise=void 0,(d=u._nonReactive.loadPromise)==null||d.resolve(),{...u,error:t,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}})},P8=(n,e,t,s)=>{var g;const r=n.router.getMatch(e),i=(g=n.matches[t-1])==null?void 0:g.id,o=i?n.router.getMatch(i):void 0;if(n.router.isShell()){r.ssr=s.id===Vr;return}if((o==null?void 0:o.ssr)===!1){r.ssr=!1;return}const a=y=>y===!0&&(o==null?void 0:o.ssr)==="data-only"?"data-only":y,l=n.router.options.defaultSsr??!0;if(s.options.ssr===void 0){r.ssr=a(l);return}if(typeof s.options.ssr!="function"){r.ssr=a(s.options.ssr);return}const{search:u,params:h}=r,d={search:$b(u,r.searchError),params:$b(h,r.paramsError),location:n.location,matches:n.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:$b(y.search,y.searchError),params:$b(y.params,y.paramsError),ssr:y.ssr}))},f=s.options.ssr(d);if(_u(f))return f.then(y=>{r.ssr=a(y??l)});r.ssr=a(f??l)},gF=(n,e,t,s)=>{var o;if(s._nonReactive.pendingTimeout!==void 0)return;const r=t.options.pendingMs??n.router.options.defaultPendingMs;if(!!(n.onReady&&!n.router.isServer&&!xE(n,e)&&(t.options.loader||t.options.beforeLoad||wF(t))&&typeof r=="number"&&r!==1/0&&(t.options.pendingComponent??((o=n.router.options)==null?void 0:o.defaultPendingComponent)))){const a=setTimeout(()=>{Cx(n)},r);s._nonReactive.pendingTimeout=a}},I8=(n,e,t)=>{const s=n.router.getMatch(e);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;gF(n,e,t,s);const r=()=>{const i=n.router.getMatch(e);i.preload&&(i.status==="redirected"||i.status==="notFound")&&hu(n,i,i.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(r):r()},R8=(n,e,t,s)=>{var M;const r=n.router.getMatch(e),i=r._nonReactive.loadPromise;r._nonReactive.loadPromise=sg(()=>{i==null||i.resolve()});const{paramsError:o,searchError:a}=r;o&&ey(n,t,o,"PARSE_PARAMS"),a&&ey(n,t,a,"VALIDATE_SEARCH"),gF(n,e,s,r);const l=new AbortController,u=(M=n.matches[t-1])==null?void 0:M.id,h=u?n.router.getMatch(u):void 0;(h==null?void 0:h.context)??n.router.options.context;let d=!1;const f=()=>{d||(d=!0,n.updateMatch(e,T=>({...T,isFetching:"beforeLoad",fetchCount:T.fetchCount+1,abortController:l})))},g=()=>{var T;(T=r._nonReactive.beforeLoadPromise)==null||T.resolve(),r._nonReactive.beforeLoadPromise=void 0,n.updateMatch(e,C=>({...C,isFetching:!1}))};if(!s.options.beforeLoad){n0(()=>{f(),g()});return}r._nonReactive.beforeLoadPromise=sg();const y={...GP(n,t,!1),...r.__routeContext},{search:v,params:S,cause:w}=r,_=xE(n,e),E={search:v,abortController:l,params:S,preload:_,context:y,location:n.location,navigate:T=>n.router.navigate({...T,_fromLocation:n.location}),buildLocation:n.router.buildLocation,cause:_?"preload":w,matches:n.matches,...n.router.options.additionalContext},I=T=>{if(T===void 0){n0(()=>{f(),g()});return}(Ei(T)||Gr(T))&&(f(),ey(n,t,T,"BEFORE_LOAD")),n0(()=>{f(),n.updateMatch(e,C=>({...C,__beforeLoadContext:T})),g()})};let D;try{if(D=s.options.beforeLoad(E),_u(D))return f(),D.catch(T=>{ey(n,t,T,"BEFORE_LOAD")}).then(I)}catch(T){f(),ey(n,t,T,"BEFORE_LOAD")}I(D)},N8=(n,e)=>{const{id:t,routeId:s}=n.matches[e],r=n.router.looseRoutesById[s],i=()=>{if(n.router.isServer){const l=P8(n,t,e,r);if(_u(l))return l.then(a)}return a()},o=()=>R8(n,t,e,r),a=()=>{if(mF(n,t))return;const l=I8(n,t,r);return _u(l)?l.then(o):o()};return i()},L8=(n,e,t)=>{var i,o,a,l,u,h;const s=n.router.getMatch(e);if(!s||!t.options.head&&!t.options.scripts&&!t.options.headers)return;const r={matches:n.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([(o=(i=t.options).head)==null?void 0:o.call(i,r),(l=(a=t.options).scripts)==null?void 0:l.call(a,r),(h=(u=t.options).headers)==null?void 0:h.call(u,r)]).then(([d,f,g])=>{const y=d==null?void 0:d.meta,v=d==null?void 0:d.links,S=d==null?void 0:d.scripts,w=d==null?void 0:d.styles;return{meta:y,links:v,headScripts:S,headers:g,scripts:f,styles:w}})},yF=(n,e,t,s)=>{const r=n.matchPromises[t-1],{params:i,loaderDeps:o,abortController:a,cause:l}=n.router.getMatch(e),u=GP(n,t),h=xE(n,e);return{params:i,deps:o,preload:!!h,parentMatchPromise:r,abortController:a,context:u,location:n.location,navigate:d=>n.router.navigate({...d,_fromLocation:n.location}),cause:h?"preload":l,route:s,...n.router.options.additionalContext}},LN=async(n,e,t,s)=>{var r,i,o,a,l,u;try{const h=n.router.getMatch(e);try{(!n.router.isServer||h.ssr===!0)&&vF(s);const d=(i=(r=s.options).loader)==null?void 0:i.call(r,yF(n,e,t,s)),f=s.options.loader&&_u(d);if(!!(f||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||h._nonReactive.minPendingPromise)&&n.updateMatch(e,v=>({...v,isFetching:"loader"})),s.options.loader){const v=f?await d:d;hu(n,n.router.getMatch(e),v),v!==void 0&&n.updateMatch(e,S=>({...S,loaderData:v}))}s._lazyPromise&&await s._lazyPromise;const y=h._nonReactive.minPendingPromise;y&&await y,s._componentsPromise&&await s._componentsPromise,n.updateMatch(e,v=>({...v,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(d){let f=d;const g=h._nonReactive.minPendingPromise;g&&await g,Gr(d)&&await((a=(o=s.options.notFoundComponent)==null?void 0:o.preload)==null?void 0:a.call(o)),hu(n,n.router.getMatch(e),d);try{(u=(l=s.options).onError)==null||u.call(l,d)}catch(y){f=y,hu(n,n.router.getMatch(e),y)}n.updateMatch(e,y=>({...y,error:f,status:"error",isFetching:!1}))}}catch(h){const d=n.router.getMatch(e);d&&(d._nonReactive.loaderPromise=void 0),hu(n,d,h)}},D8=async(n,e)=>{var h,d;const{id:t,routeId:s}=n.matches[e];let r=!1,i=!1;const o=n.router.looseRoutesById[s],a=()=>{n.updateMatch(t,f=>({...f,context:GP(n,e)}))};if(mF(n,t)){if(n.router.isServer)return n.router.getMatch(t)}else{const f=n.router.getMatch(t);if(f._nonReactive.loaderPromise){if(f.status==="success"&&!n.sync&&!f.preload)return f;await f._nonReactive.loaderPromise;const g=n.router.getMatch(t),y=g._nonReactive.error||g.error;y&&hu(n,g,y)}else{const g=Date.now()-f.updatedAt,y=xE(n,t),v=y?o.options.preloadStaleTime??n.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??n.router.options.defaultStaleTime??0,S=o.options.shouldReload,w=typeof S=="function"?S(yF(n,t,e,o)):S,_=!!y&&!n.router.state.matches.some(M=>M.id===t),E=n.router.getMatch(t);E._nonReactive.loaderPromise=sg(),_!==E.preload&&n.updateMatch(t,M=>({...M,preload:_}));const{status:I,invalid:D}=E;r=I==="success"&&(D||(w??g>v)),y&&o.options.preload===!1||(r&&!n.sync?(i=!0,(async()=>{var M,T;try{await LN(n,t,e,o),a();const C=n.router.getMatch(t);(M=C._nonReactive.loaderPromise)==null||M.resolve(),(T=C._nonReactive.loadPromise)==null||T.resolve(),C._nonReactive.loaderPromise=void 0}catch(C){Ei(C)&&await n.router.navigate(C.options)}})()):(I!=="success"||r&&n.sync)&&await LN(n,t,e,o))}}const l=n.router.getMatch(t);i||((h=l._nonReactive.loaderPromise)==null||h.resolve(),(d=l._nonReactive.loadPromise)==null||d.resolve()),clearTimeout(l._nonReactive.pendingTimeout),l._nonReactive.pendingTimeout=void 0,i||(l._nonReactive.loaderPromise=void 0),l._nonReactive.dehydrated=void 0,i||a();const u=i?l.isFetching:!1;return u!==l.isFetching||l.invalid!==!1?(n.updateMatch(t,f=>({...f,isFetching:u,invalid:!1})),n.router.getMatch(t)):l};async function DN(n){const e=Object.assign(n,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(t=>t._forcePending)&&Cx(e);try{for(let a=0;a<e.matches.length;a++){const l=N8(e,a);_u(l)&&await l}const t=e.firstBadMatchIndex??e.matches.length;for(let a=0;a<t;a++)e.matchPromises.push(D8(e,a));const r=(await Promise.allSettled(e.matchPromises)).filter(a=>a.status==="rejected").map(a=>a.reason);let i;for(const a of r){if(Ei(a))throw a;!i&&Gr(a)&&(i=a)}for(const a of e.matches){const{id:l,routeId:u}=a,h=e.router.looseRoutesById[u];try{const d=L8(e,l,h);if(d){const f=await d;e.updateMatch(l,g=>({...g,...f}))}}catch(d){console.error(`Error executing head for route ${u}:`,d)}}if(i)throw i;const o=Cx(e);_u(o)&&await o}catch(t){if(Gr(t)&&!e.preload){const s=Cx(e);throw _u(s)&&await s,t}if(Ei(t))throw t}return e.matches}async function vF(n){if(!n._lazyLoaded&&n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(e=>{const{id:t,...s}=e.options;Object.assign(n.options,s),n._lazyLoaded=!0,n._lazyPromise=void 0}):n._lazyLoaded=!0),!n._componentsLoaded&&n._componentsPromise===void 0){const e=()=>{var s;const t=[];for(const r of bF){const i=(s=n.options[r])==null?void 0:s.preload;i&&t.push(i())}if(t.length)return Promise.all(t).then(()=>{n._componentsLoaded=!0,n._componentsPromise=void 0});n._componentsLoaded=!0,n._componentsPromise=void 0};n._componentsPromise=n._lazyPromise?n._lazyPromise.then(e):e()}return n._componentsPromise}function $b(n,e){return e?{status:"error",error:e}:{status:"success",value:n}}function wF(n){var e;for(const t of bF)if((e=n.options[t])!=null&&e.preload)return!0;return!1}const bF=["component","errorComponent","pendingComponent","notFoundComponent"];function M8(n){return{input:({url:e})=>{for(const t of n)e=xF(t,e);return e},output:({url:e})=>{for(let t=n.length-1;t>=0;t--)e=_F(n[t],e);return e}}}function O8(n){const e=dF(n.basepath),t=`/${e}`,s=`${t}/`,r=n.caseSensitive?t:t.toLowerCase(),i=n.caseSensitive?s:s.toLowerCase();return{input:({url:o})=>{const a=n.caseSensitive?o.pathname:o.pathname.toLowerCase();return a===r?o.pathname="/":a.startsWith(i)&&(o.pathname=o.pathname.slice(t.length)),o},output:({url:o})=>(o.pathname=Tx(["/",e,o.pathname]),o)}}function xF(n,e){var s;const t=(s=n==null?void 0:n.input)==null?void 0:s.call(n,{url:e});if(t){if(typeof t=="string")return new URL(t);if(t instanceof URL)return t}return e}function _F(n,e){var s;const t=(s=n==null?void 0:n.output)==null?void 0:s.call(n,{url:e});if(t){if(typeof t=="string")return new URL(t);if(t instanceof URL)return t}return e}function jd(n){const e=n.resolvedLocation,t=n.location,s=(e==null?void 0:e.pathname)!==t.pathname,r=(e==null?void 0:e.href)!==t.href,i=(e==null?void 0:e.hash)!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:s,hrefChanged:r,hashChanged:i}}class j8{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{var f;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options,r=this.basepath??(s==null?void 0:s.basepath)??"/",i=this.basepath===void 0,o=s==null?void 0:s.rewrite;this.options={...s,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=K9())),this.origin=this.options.origin,this.origin||(!this.isServer&&(window!=null&&window.origin)&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new G9(V8(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),b8(this));let a=!1;const l=this.options.basepath??"/",u=this.options.rewrite;if(i||r!==l||o!==u){this.basepath=l;const g=[];dF(l)!==""&&g.push(O8({basepath:l})),u&&g.push(u),this.rewrite=g.length===0?void 0:g.length===1?g[0]:M8(g),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof((f=window.CSS)==null?void 0:f.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:t,routesByPath:s,processedTree:r}=l8(this.routeTree,this.options.caseSensitive,(o,a)=>{o.init({originalIndex:a})});this.options.routeMasks&&s8(this.options.routeMasks,r),this.routesById=t,this.routesByPath=s,this.processedTree=r;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(t,s)=>{const r={eventType:t,fn:s};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=t=>{this.subscribers.forEach(s=>{s.eventType===t.type&&s.fn(t)})},this.parseLocation=(t,s)=>{const r=({href:l,state:u})=>{const h=new URL(l,this.origin),d=xF(this.rewrite,h),f=this.options.parseSearch(d.search),g=this.options.stringifySearch(f);return d.search=g,{href:d.href.replace(d.origin,""),publicHref:l,url:d,pathname:NN(d.pathname),searchStr:g,search:ni(s==null?void 0:s.search,f),hash:d.hash.split("#").reverse()[0]??"",state:ni(s==null?void 0:s.state,u)}},i=r(t),{__tempLocation:o,__tempKey:a}=i.state;if(o&&(!a||a===this.tempLocationKey)){const l=r(o);return l.state.key=i.state.key,l.state.__TSR_key=i.state.__TSR_key,delete l.state.__tempLocation,{...l,maskedLocation:i}}return i},this.resolvePathCache=q_(1e3),this.resolvePathWithBase=(t,s)=>p8({base:t,to:WP(s),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(t,s,r)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:s},r):this.matchRoutesInternal(t,s),this.getMatchedRoutes=t=>B8({pathname:t,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=t=>{const s=this.getMatch(t);s&&(s.abortController.abort(),clearTimeout(s._nonReactive.pendingTimeout),s._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const t=this.state.matches.filter(i=>i.status==="pending"),s=this.state.matches.filter(i=>i.isFetching==="loader");new Set([...this.state.pendingMatches??[],...t,...s]).forEach(i=>{this.cancelMatch(i.id)})},this.buildLocation=t=>{const s=(i={})=>{var L,R;const o=i._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=this.matchRoutes(o,{_buildLocation:!0}),l=W_(a);i.from;const u=i.unsafeRelative==="path"?o.pathname:i.from??l.fullPath,h=this.resolvePathWithBase(u,"."),d=l.search,f={...l.params},g=i.to?this.resolvePathWithBase(h,`${i.to}`):this.resolvePathWithBase(h,"."),y=i.params===!1||i.params===null?{}:(i.params??!0)===!0?f:Object.assign(f,uu(i.params,f)),v=ZS({path:g,params:y}).interpolatedPath,S=this.matchRoutes(v,void 0,{_buildLocation:!0}).map(O=>this.looseRoutesById[O.routeId]);if(Object.keys(y).length>0)for(const O of S){const j=((L=O.options.params)==null?void 0:L.stringify)??O.options.stringifyParams;j&&Object.assign(y,j(y))}const w=t.leaveParams?g:NN(ZS({path:g,params:y,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let _=d;if(t._includeValidateSearch&&((R=this.options.search)!=null&&R.strict)){const O={};S.forEach(j=>{if(j.options.validateSearch)try{Object.assign(O,VT(j.options.validateSearch,{...O,..._}))}catch{}}),_=O}_=U8({search:_,dest:i,destRoutes:S,_includeValidateSearch:t._includeValidateSearch}),_=ni(d,_);const E=this.options.stringifySearch(_),I=i.hash===!0?o.hash:i.hash?uu(i.hash,o.hash):void 0,D=I?`#${I}`:"";let M=i.state===!0?o.state:i.state?uu(i.state,o.state):{};M=ni(o.state,M);const T=`${w}${E}${D}`,C=new URL(T,this.origin),N=_F(this.rewrite,C);return{publicHref:N.pathname+N.search+N.hash,href:T,url:N,pathname:w,search:_,searchStr:E,state:M,hash:I??"",unmaskOnReload:i.unmaskOnReload}},r=(i={},o)=>{const a=s(i);let l=o?s(o):void 0;if(!l){const u={};if(this.options.routeMasks){const h=r8(a.pathname,this.processedTree);if(h){Object.assign(u,h.params);const{from:d,params:f,...g}=h.route,y=f===!1||f===null?{}:(f??!0)===!0?u:Object.assign(u,uu(f,u));o={from:t.from,...g,params:y},l=s(o)}}}return l&&(a.maskedLocation=l),a};return t.mask?r(t,{from:t.from,...t.mask}):r(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:s,...r})=>{const i=()=>{const l=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(h=>{r.state[h]=this.latestLocation.state[h]});const u=Md(r.state,this.latestLocation.state);return l.forEach(h=>{delete r.state[h]}),u},o=Od(this.latestLocation.href)===Od(r.href),a=this.commitLocationPromise;if(this.commitLocationPromise=sg(()=>{a==null||a.resolve()}),o&&i())this.load();else{let{maskedLocation:l,hashScrollIntoView:u,url:h,...d}=r;l&&(d={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...d,search:d.searchStr,state:{...d.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(d.unmaskOnReload??this.options.unmaskOnReload??!1)&&(d.state.__tempKey=this.tempLocationKey)),d.state.__hashScrollIntoViewOptions=u??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[r.replace?"replace":"push"](d.publicHref,d.state,{ignoreBlocker:s})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:s,hashScrollIntoView:r,viewTransition:i,ignoreBlocker:o,href:a,...l}={})=>{if(a){const d=this.history.location.state.__TSR_index,f=H_(a,{__TSR_index:t?d:d+1});l.to=f.pathname,l.search=this.options.parseSearch(f.search),l.hash=f.hash.slice(1)}const u=this.buildLocation({...l,_includeValidateSearch:!0});this.pendingBuiltLocation=u;const h=this.commitLocation({...u,viewTransition:i,replace:t,resetScroll:s,hashScrollIntoView:r,ignoreBlocker:o});return Promise.resolve().then(()=>{this.pendingBuiltLocation===u&&(this.pendingBuiltLocation=void 0)}),h},this.navigate=async({to:t,reloadDocument:s,href:r,publicHref:i,...o})=>{var l;let a=!1;if(r)try{new URL(`${r}`),a=!0}catch{}if(a&&!s&&(s=!0),s){if(!r||!i&&!a){const h=this.buildLocation({to:t,...o});r=r??h.url.href,i=i??h.url.href}const u=!a&&i?i:r;if(!o.ignoreBlocker){const h=this.history,d=((l=h.getBlockers)==null?void 0:l.call(h))??[];for(const f of d)if(f!=null&&f.blockerFn&&await f.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return o.replace?window.location.replace(u):window.location.href=u,Promise.resolve()}return this.buildAndCommitLocation({...o,href:r,to:t,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const s=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==s.publicHref||s.url.origin!==this.origin){const r=this.getParsedLocationHref(s);throw k8({href:r})}}const t=this.matchRoutes(this.latestLocation);this.__store.setState(s=>({...s,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:t,cachedMatches:s.cachedMatches.filter(r=>!t.some(i=>i.id===r.id))}))},this.load=async t=>{let s,r,i;for(i=new Promise(a=>{this.startTransition(async()=>{var l;try{this.beforeLoad();const u=this.latestLocation,h=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...jd({resolvedLocation:h,location:u})}),this.emit({type:"onBeforeLoad",...jd({resolvedLocation:h,location:u})}),await DN({router:this,sync:t==null?void 0:t.sync,matches:this.state.pendingMatches,location:u,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let d=[],f=[],g=[];n0(()=>{this.__store.setState(y=>{const v=y.matches,S=y.pendingMatches||y.matches;return d=v.filter(w=>!S.some(_=>_.id===w.id)),f=S.filter(w=>!v.some(_=>_.id===w.id)),g=S.filter(w=>v.some(_=>_.id===w.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:S,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...d.filter(w=>w.status!=="error"&&w.status!=="notFound")]}}),this.clearExpiredCache()}),[[d,"onLeave"],[f,"onEnter"],[g,"onStay"]].forEach(([y,v])=>{y.forEach(S=>{var w,_;(_=(w=this.looseRoutesById[S.routeId].options)[v])==null||_.call(w,S)})})})})}})}catch(u){Ei(u)?(s=u,this.isServer||this.navigate({...s.options,replace:!0,ignoreBlocker:!0})):Gr(u)&&(r=u),this.__store.setState(h=>({...h,statusCode:s?s.status:r?404:h.matches.some(d=>d.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===i&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;let o;this.hasNotFoundMatch()?o=404:this.__store.state.matches.some(a=>a.status==="error")&&(o=500),o!==void 0&&this.__store.setState(a=>({...a,statusCode:o}))},this.startViewTransition=t=>{const s=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,s&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;if(typeof s=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,o=this.state.resolvedLocation,a=typeof s.types=="function"?s.types(jd({resolvedLocation:o,location:i})):s.types;if(a===!1){t();return}r={update:t,types:a}}else r=t;document.startViewTransition(r)}else t()},this.updateMatch=(t,s)=>{this.startTransition(()=>{var i;const r=(i=this.state.pendingMatches)!=null&&i.some(o=>o.id===t)?"pendingMatches":this.state.matches.some(o=>o.id===t)?"matches":this.state.cachedMatches.some(o=>o.id===t)?"cachedMatches":"";r&&this.__store.setState(o=>{var a;return{...o,[r]:(a=o[r])==null?void 0:a.map(l=>l.id===t?s(l):l)}})})},this.getMatch=t=>{var r;const s=i=>i.id===t;return this.state.cachedMatches.find(s)??((r=this.state.pendingMatches)==null?void 0:r.find(s))??this.state.matches.find(s)},this.invalidate=t=>{const s=r=>{var i;return((i=t==null?void 0:t.filter)==null?void 0:i.call(t,r))??!0?{...r,invalid:!0,...t!=null&&t.forcePending||r.status==="error"||r.status==="notFound"?{status:"pending",error:void 0}:void 0}:r};return this.__store.setState(r=>{var i;return{...r,matches:r.matches.map(s),cachedMatches:r.cachedMatches.map(s),pendingMatches:(i=r.pendingMatches)==null?void 0:i.map(s)}}),this.shouldViewTransition=!1,this.load({sync:t==null?void 0:t.sync})},this.getParsedLocationHref=t=>{let s=t.url.href;return this.origin&&t.url.origin===this.origin&&(s=s.replace(this.origin,"")||"/"),s},this.resolveRedirect=t=>{if(!t.options.href){const s=this.buildLocation(t.options),r=this.getParsedLocationHref(s);t.options.href=s.href,t.headers.set("Location",r)}return t.headers.get("Location")||t.headers.set("Location",t.options.href),t},this.clearCache=t=>{const s=t==null?void 0:t.filter;s!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(i=>!s(i))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=s=>{const r=this.looseRoutesById[s.routeId];if(!r.options.loader)return!0;const i=(s.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return s.status==="error"?!0:Date.now()-s.updatedAt>=i};this.clearCache({filter:t})},this.loadRouteChunk=vF,this.preloadRoute=async t=>{const s=this.buildLocation(t);let r=this.matchRoutes(s,{throwOnError:!0,preload:!0,dest:t});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...i,...this.state.cachedMatches.map(a=>a.id)]);n0(()=>{r.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return r=await DN({router:this,matches:r,location:s,preload:!0,updateMatch:(a,l)=>{i.has(a)?r=r.map(u=>u.id===a?l(u):u):this.updateMatch(a,l)}}),r}catch(a){if(Ei(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:s});Gr(a)||console.error(a);return}},this.matchRoute=(t,s)=>{const r={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},i=this.buildLocation(r);if(s!=null&&s.pending&&this.state.status!=="pending")return!1;const a=((s==null?void 0:s.pending)===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=i8(i.pathname,(s==null?void 0:s.caseSensitive)??!1,(s==null?void 0:s.fuzzy)??!1,a.pathname,this.processedTree);return!l||t.params&&!Md(l.params,t.params,{partial:!0})?!1:(s==null?void 0:s.includeSearch)??!0?Md(a.search,i.search,{partial:!0})?l.params:!1:l.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??A8,parseSearch:e.parseSearch??S8}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const s=this.getMatchedRoutes(e.pathname),{foundRoute:r,routeParams:i}=s;let{matchedRoutes:o}=s,a=!1;(r?r.path!=="/"&&i["**"]:Od(e.pathname))&&(this.options.notFoundRoute?o=[...o,this.options.notFoundRoute]:a=!0);const l=(()=>{if(a){if(this.options.notFoundMode!=="root")for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.children)return f.id}return Vr}})(),u=[],h=d=>(d==null?void 0:d.id)?d.context??this.options.context??void 0:this.options.context??void 0;return o.forEach((d,f)=>{var j,V,$;const g=u[f-1],[y,v,S]=(()=>{const U=(g==null?void 0:g.search)??e.search,W=(g==null?void 0:g._strictSearch)??void 0;try{const G=VT(d.options.validateSearch,{...U})??void 0;return[{...U,...G},{...W,...G},void 0]}catch(G){let q=G;if(G instanceof Q_||(q=new Q_(G.message,{cause:G})),t!=null&&t.throwOnError)throw q;return[U,{},q]}})(),w=((V=(j=d.options).loaderDeps)==null?void 0:V.call(j,{search:y}))??"",_=w?JSON.stringify(w):"",{interpolatedPath:E,usedParams:I}=ZS({path:d.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),D=d.id+E+_,M=this.getMatch(D),T=this.state.matches.find(U=>U.routeId===d.id),C=(M==null?void 0:M._strictParams)??I;let N;if(!M){const U=(($=d.options.params)==null?void 0:$.parse)??d.options.parseParams;if(U)try{Object.assign(C,U(C))}catch(W){if(Gr(W)||Ei(W)?N=W:N=new F8(W.message,{cause:W}),t!=null&&t.throwOnError)throw N}}Object.assign(i,C);const L=T?"stay":"enter";let R;if(M)R={...M,cause:L,params:T?ni(T.params,i):i,_strictParams:C,search:ni(T?T.search:M.search,y),_strictSearch:v};else{const U=d.options.loader||d.options.beforeLoad||d.lazyFn||wF(d)?"pending":"success";R={id:D,ssr:this.isServer?void 0:d.options.ssr,index:f,routeId:d.id,params:T?ni(T.params,i):i,_strictParams:C,pathname:E,updatedAt:Date.now(),search:T?ni(T.search,y):y,_strictSearch:v,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:N,__routeContext:void 0,_nonReactive:{loadPromise:sg()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:L,loaderDeps:T?ni(T.loaderDeps,w):w,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:d.options.staticData||{},fullPath:d.fullPath}}t!=null&&t.preload||(R.globalNotFound=l===d.id),R.searchError=S;const O=h(g);R.context={...O,...R.__routeContext,...R.__beforeLoadContext},u.push(R)}),u.forEach((d,f)=>{const g=this.looseRoutesById[d.routeId];if(!this.getMatch(d.id)&&(t==null?void 0:t._buildLocation)!==!0){const v=u[f-1],S=h(v);if(g.options.context){const w={deps:d.loaderDeps,params:d.params,context:S??{},location:e,navigate:_=>this.navigate({..._,_fromLocation:e}),buildLocation:this.buildLocation,cause:d.cause,abortController:d.abortController,preload:!!d.preload,matches:u};d.__routeContext=g.options.context(w)??void 0}d.context={...S,...d.__routeContext,...d.__beforeLoadContext}}}),u}}class Q_ extends Error{}class F8 extends Error{}function V8(n){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:n,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function VT(n,e){if(n==null)return{};if("~standard"in n){const t=n["~standard"].validate(e);if(t instanceof Promise)throw new Q_("Async validation not supported");if(t.issues)throw new Q_(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in n?n.parse(e):typeof n=="function"?n(e):{}}function B8({pathname:n,routesById:e,processedTree:t}){const s={},r=Od(n);let i;const o=o8(r,t,!0);return o&&(i=o.route,Object.assign(s,o.params)),{matchedRoutes:(o==null?void 0:o.branch)||[e[Vr]],routeParams:s,foundRoute:i}}function U8({search:n,dest:e,destRoutes:t,_includeValidateSearch:s}){const r=t.reduce((a,l)=>{var h;const u=[];if("search"in l.options)(h=l.options.search)!=null&&h.middlewares&&u.push(...l.options.search.middlewares);else if(l.options.preSearchFilters||l.options.postSearchFilters){const d=({search:f,next:g})=>{let y=f;"preSearchFilters"in l.options&&l.options.preSearchFilters&&(y=l.options.preSearchFilters.reduce((S,w)=>w(S),f));const v=g(y);return"postSearchFilters"in l.options&&l.options.postSearchFilters?l.options.postSearchFilters.reduce((S,w)=>w(S),v):v};u.push(d)}if(s&&l.options.validateSearch){const d=({search:f,next:g})=>{const y=g(f);try{return{...y,...VT(l.options.validateSearch,y)??void 0}}catch{return y}};u.push(d)}return a.concat(u)},[])??[],i=({search:a})=>e.search?e.search===!0?a:uu(e.search,a):{};r.push(i);const o=(a,l)=>{if(a>=r.length)return l;const u=r[a];return u({search:l,next:d=>o(a+1,d)})};return o(0,n)}const z8="Error preloading route! ";class EF{constructor(e){if(this.init=t=>{var u,h;this.originalIndex=t.originalIndex;const s=this.options,r=!(s!=null&&s.path)&&!(s!=null&&s.id);this.parentRoute=(h=(u=this.options).getParentRoute)==null?void 0:h.call(u),r?this._path=Vr:this.parentRoute||Be(!1);let i=r?Vr:s==null?void 0:s.path;i&&i!=="/"&&(i=hF(i));const o=(s==null?void 0:s.id)||i;let a=r?Vr:Tx([this.parentRoute.id===Vr?"":this.parentRoute.id,o]);i===Vr&&(i="/"),a!==Vr&&(a=Tx(["/",a]));const l=a===Vr?"/":Tx([this.parentRoute.fullPath,i]);this._path=i,this._id=a,this._fullPath=l,this._to=l},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class $8 extends EF{constructor(e){super(e)}}function qP(n){const e=n.errorComponent??_E;return p.jsx(H8,{getResetKey:n.getResetKey,onCatch:n.onCatch,children:({error:t,reset:s})=>t?B.createElement(e,{error:t,reset:s}):n.children})}class H8 extends B.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function _E({error:n}){const[e,t]=B.useState(!1);return p.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[p.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),p.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(s=>!s),children:e?"Hide Error":"Show Error"})]}),p.jsx("div",{style:{height:".25rem"}}),e?p.jsx("div",{children:p.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:n.message?p.jsx("code",{children:n.message}):null})}):null]})}function W8({children:n,fallback:e=null}){return G8()?p.jsx(Z.Fragment,{children:n}):p.jsx(Z.Fragment,{children:e})}function G8(){return Z.useSyncExternalStore(q8,()=>!0,()=>!1)}function q8(){return()=>{}}var SF={exports:{}},AF={},TF={exports:{}},CF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=B;function K8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Y8=typeof Object.is=="function"?Object.is:K8,X8=ig.useState,Q8=ig.useEffect,J8=ig.useLayoutEffect,Z8=ig.useDebugValue;function e$(n,e){var t=e(),s=X8({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return J8(function(){r.value=t,r.getSnapshot=e,tA(r)&&i({inst:r})},[n,t,e]),Q8(function(){return tA(r)&&i({inst:r}),n(function(){tA(r)&&i({inst:r})})},[n]),Z8(t),t}function tA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Y8(n,t)}catch{return!0}}function t$(n,e){return e()}var n$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$:e$;CF.useSyncExternalStore=ig.useSyncExternalStore!==void 0?ig.useSyncExternalStore:n$;TF.exports=CF;var s$=TF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE=B,r$=s$;function i$(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var o$=typeof Object.is=="function"?Object.is:i$,a$=r$.useSyncExternalStore,l$=EE.useRef,c$=EE.useEffect,u$=EE.useMemo,h$=EE.useDebugValue;AF.useSyncExternalStoreWithSelector=function(n,e,t,s,r){var i=l$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=u$(function(){function l(g){if(!u){if(u=!0,h=g,g=s(g),r!==void 0&&o.hasValue){var y=o.value;if(r(y,g))return d=y}return d=g}if(y=d,o$(h,g))return y;var v=s(g);return r!==void 0&&r(y,v)?(h=g,y):(h=g,d=v)}var u=!1,h,d,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,s,r]);var a=a$(n,i[0],i[1]);return c$(function(){o.hasValue=!0,o.value=a},[a]),h$(a),a};SF.exports=AF;var d$=SF.exports;function f$(n,e=s=>s,t={}){const s=t.equal??p$;return d$.useSyncExternalStoreWithSelector(n.subscribe,()=>n.state,()=>n.state,e,s)}function p$(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[s,r]of n)if(!e.has(s)||!Object.is(r,e.get(s)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const s of n)if(!e.has(s))return!1;return!0}if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();const t=MN(n);if(t.length!==MN(e).length)return!1;for(let s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!Object.is(n[t[s]],e[t[s]]))return!1;return!0}function MN(n){return Object.keys(n).concat(Object.getOwnPropertySymbols(n))}const nA=B.createContext(null);function kF(){return typeof document>"u"?nA:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=nA,nA)}function dr(n){const e=B.useContext(kF());return n==null||n.warn,e}function hr(n){const e=dr({warn:(n==null?void 0:n.router)===void 0}),t=(n==null?void 0:n.router)||e,s=B.useRef(void 0);return f$(t.__store,r=>{if(n!=null&&n.select){if(n.structuralSharing??t.options.defaultStructuralSharing){const i=ni(s.current,n.select(r));return s.current=i,i}return n.select(r)}return r})}const SE=B.createContext(void 0),m$=B.createContext(void 0);function fa(n){const e=B.useContext(n.from?m$:SE);return hr({select:s=>{const r=s.matches.find(i=>n.from?n.from===i.routeId:i.id===e);if(Be(!((n.shouldThrow??!0)&&!r),`Could not find ${n.from?`an active match from "${n.from}"`:"a nearest match!"}`),r!==void 0)return n.select?n.select(r):r},structuralSharing:n.structuralSharing})}function KP(n){return fa({from:n.from,strict:n.strict,structuralSharing:n.structuralSharing,select:e=>n.select?n.select(e.loaderData):e.loaderData})}function YP(n){const{select:e,...t}=n;return fa({...t,select:s=>e?e(s.loaderDeps):s.loaderDeps})}function AE(n){return fa({from:n.from,shouldThrow:n.shouldThrow,structuralSharing:n.structuralSharing,strict:n.strict,select:e=>{const t=n.strict===!1?e.params:e._strictParams;return n.select?n.select(t):t}})}function XP(n){return fa({from:n.from,strict:n.strict,shouldThrow:n.shouldThrow,structuralSharing:n.structuralSharing,select:e=>n.select?n.select(e.search):e.search})}const vy=typeof window<"u"?B.useLayoutEffect:B.useEffect;function sA(n){const e=B.useRef({value:n,prev:null}),t=e.current.value;return n!==t&&(e.current={value:n,prev:t}),e.current.prev}function g$(n,e,t={},s={}){B.useEffect(()=>{if(!n.current||s.disabled||typeof IntersectionObserver!="function")return;const r=new IntersectionObserver(([i])=>{e(i)},t);return r.observe(n.current),()=>{r.disconnect()}},[e,t,s.disabled,n])}function y$(n){const e=B.useRef(null);return B.useImperativeHandle(n,()=>e.current,[]),e}function ya(n){const e=dr();return B.useCallback(t=>e.navigate({...t,from:t.from??(n==null?void 0:n.from)}),[n==null?void 0:n.from,e])}function Vw(n){const e=dr(),t=ya(),s=B.useRef(null);return vy(()=>{s.current!==n&&(t(n),s.current=n)},[e,n,t]),null}function v$(n,e){const t=dr(),[s,r]=B.useState(!1),i=B.useRef(!1),o=y$(e),{activeProps:a,inactiveProps:l,activeOptions:u,to:h,preload:d,preloadDelay:f,hashScrollIntoView:g,replace:y,startTransition:v,resetScroll:S,viewTransition:w,children:_,target:E,disabled:I,style:D,className:M,onClick:T,onFocus:C,onMouseEnter:N,onMouseLeave:L,onTouchStart:R,ignoreBlocker:O,params:j,search:V,hash:$,state:U,mask:W,reloadDocument:G,unsafeRelative:q,from:ee,_fromLocation:ue,...J}=n,se=hr({select:Re=>Re.location.search,structuralSharing:!0}),pe=n.from,_e=B.useMemo(()=>({...n,from:pe}),[t,se,pe,n._fromLocation,n.hash,n.to,n.search,n.params,n.state,n.mask,n.unsafeRelative]),Se=B.useMemo(()=>t.buildLocation({..._e}),[t,_e]),ie=B.useMemo(()=>{if(I)return;let Re=Se.maskedLocation?Se.maskedLocation.url.href:Se.url.href,Ut=!1;return t.origin&&(Re.startsWith(t.origin)?Re=t.history.createHref(Re.replace(t.origin,""))||"/":Ut=!0),{href:Re,external:Ut}},[I,Se.maskedLocation,Se.url,t.origin,t.history]),Xt=B.useMemo(()=>{if(ie!=null&&ie.external)return ie.href;try{return new URL(h),h}catch{}},[h,ie]),At=n.reloadDocument||Xt?!1:d??t.options.defaultPreload,Lt=f??t.options.defaultPreloadDelay??0,Ie=hr({select:Re=>{if(Xt)return!1;if(u!=null&&u.exact){if(!f8(Re.location.pathname,Se.pathname,t.basepath))return!1}else{const Ut=K_(Re.location.pathname,t.basepath),an=K_(Se.pathname,t.basepath);if(!(Ut.startsWith(an)&&(Ut.length===an.length||Ut[an.length]==="/")))return!1}return((u==null?void 0:u.includeSearch)??!0)&&!Md(Re.location.search,Se.search,{partial:!(u!=null&&u.exact),ignoreUndefined:!(u!=null&&u.explicitUndefined)})?!1:u!=null&&u.includeHash?Re.location.hash===Se.hash:!0}}),Dt=B.useCallback(()=>{t.preloadRoute({..._e}).catch(Re=>{console.warn(Re),console.warn(z8)})},[t,_e]),qe=B.useCallback(Re=>{Re!=null&&Re.isIntersecting&&Dt()},[Dt]);g$(o,qe,E$,{disabled:!!I||At!=="viewport"}),B.useEffect(()=>{i.current||!I&&At==="render"&&(Dt(),i.current=!0)},[I,Dt,At]);const Ke=Re=>{const Ut=Re.currentTarget.getAttribute("target"),an=E!==void 0?E:Ut;if(!I&&!S$(Re)&&!Re.defaultPrevented&&(!an||an==="_self")&&Re.button===0){Re.preventDefault(),VP.flushSync(()=>{r(!0)});const mn=t.subscribe("onResolved",()=>{mn(),r(!1)});t.navigate({..._e,replace:y,resetScroll:S,hashScrollIntoView:g,startTransition:v,viewTransition:w,ignoreBlocker:O})}};if(Xt)return{...J,ref:o,href:Xt,..._&&{children:_},...E&&{target:E},...I&&{disabled:I},...D&&{style:D},...M&&{className:M},...T&&{onClick:T},...C&&{onFocus:C},...N&&{onMouseEnter:N},...L&&{onMouseLeave:L},...R&&{onTouchStart:R}};const ot=Re=>{I||At&&Dt()},Bt=ot,wt=Re=>{if(!(I||!At))if(!Lt)Dt();else{const Ut=Re.target;if(ty.has(Ut))return;const an=setTimeout(()=>{ty.delete(Ut),Dt()},Lt);ty.set(Ut,an)}},po=Re=>{if(I||!At||!Lt)return;const Ut=Re.target,an=ty.get(Ut);an&&(clearTimeout(an),ty.delete(Ut))},Tt=Ie?uu(a,{})??w$:rA,ft=Ie?rA:uu(l,{})??rA,Ts=[M,Tt.className,ft.className].filter(Boolean).join(" "),Jr=(D||Tt.style||ft.style)&&{...D,...Tt.style,...ft.style};return{...J,...Tt,...ft,href:ie==null?void 0:ie.href,ref:o,onClick:ny([T,Ke]),onFocus:ny([C,ot]),onMouseEnter:ny([N,wt]),onMouseLeave:ny([L,po]),onTouchStart:ny([R,Bt]),disabled:!!I,target:E,...Jr&&{style:Jr},...Ts&&{className:Ts},...I&&b$,...Ie&&x$,...s&&_$}}const rA={},w$={className:"active"},b$={role:"link","aria-disabled":!0},x$={"data-status":"active","aria-current":"page"},_$={"data-transitioning":"transitioning"},ty=new WeakMap,E$={rootMargin:"100px"},ny=n=>e=>{for(const t of n)if(t){if(e.defaultPrevented)return;t(e)}},dn=B.forwardRef((n,e)=>{const{_asChild:t,...s}=n,{type:r,ref:i,...o}=v$(s,e),a=typeof s.children=="function"?s.children({isActive:o["data-status"]==="active"}):s.children;return t===void 0&&delete o.disabled,B.createElement(t||"a",{...o,ref:i},a)});function S$(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}class A$ extends EF{constructor(e){super(e),this.useMatch=t=>fa({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>fa({...t,from:this.id,select:s=>t!=null&&t.select?t.select(s.context):s.context}),this.useSearch=t=>XP({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>AE({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>YP({...t,from:this.id}),this.useLoaderData=t=>KP({...t,from:this.id}),this.useNavigate=()=>ya({from:this.fullPath}),this.Link=Z.forwardRef((t,s)=>p.jsx(dn,{ref:s,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function fr(n){return new A$(n)}class T$ extends $8{constructor(e){super(e),this.useMatch=t=>fa({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>fa({...t,from:this.id,select:s=>t!=null&&t.select?t.select(s.context):s.context}),this.useSearch=t=>XP({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>AE({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>YP({...t,from:this.id}),this.useLoaderData=t=>KP({...t,from:this.id}),this.useNavigate=()=>ya({from:this.fullPath}),this.Link=Z.forwardRef((t,s)=>p.jsx(dn,{ref:s,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function C$(n){return new T$(n)}function ON(n){return typeof n=="object"?new jN(n,{silent:!0}).createRoute(n):new jN(n,{silent:!0}).createRoute}class jN{constructor(e,t){this.path=e,this.createRoute=s=>{this.silent;const r=fr(s);return r.isRoot=!1,r},this.silent=t==null?void 0:t.silent}}class FN{constructor(e){this.useMatch=t=>fa({select:t==null?void 0:t.select,from:this.options.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>fa({from:this.options.id,select:s=>t!=null&&t.select?t.select(s.context):s.context}),this.useSearch=t=>XP({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.options.id}),this.useParams=t=>AE({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.options.id}),this.useLoaderDeps=t=>YP({...t,from:this.options.id}),this.useLoaderData=t=>KP({...t,from:this.options.id}),this.useNavigate=()=>{const t=dr();return ya({from:t.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function VN(n){return typeof n=="object"?new FN(n):e=>new FN({id:n,...e})}function k$(){const n=dr(),e=B.useRef({router:n,mounted:!1}),[t,s]=B.useState(!1),{hasPendingMatches:r,isLoading:i}=hr({select:d=>({isLoading:d.isLoading,hasPendingMatches:d.matches.some(f=>f.status==="pending")}),structuralSharing:!0}),o=sA(i),a=i||t||r,l=sA(a),u=i||r,h=sA(u);return n.startTransition=d=>{s(!0),B.startTransition(()=>{d(),s(!1)})},B.useEffect(()=>{const d=n.history.subscribe(n.load),f=n.buildLocation({to:n.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Od(n.latestLocation.publicHref)!==Od(f.publicHref)&&n.commitLocation({...f,replace:!0}),()=>{d()}},[n,n.history]),vy(()=>{if(typeof window<"u"&&n.ssr||e.current.router===n&&e.current.mounted)return;e.current={router:n,mounted:!0},(async()=>{try{await n.load()}catch(f){console.error(f)}})()},[n]),vy(()=>{o&&!i&&n.emit({type:"onLoad",...jd(n.state)})},[o,n,i]),vy(()=>{h&&!u&&n.emit({type:"onBeforeRouteMount",...jd(n.state)})},[u,h,n]),vy(()=>{if(l&&!a){const d=jd(n.state);n.emit({type:"onResolved",...d}),n.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})),d.hrefChanged&&x8(n)}},[a,l,n]),null}function P$(n){const e=hr({select:t=>`not-found-${t.location.pathname}-${t.status}`});return p.jsx(qP,{getResetKey:()=>e,onCatch:(t,s)=>{var r;if(Gr(t))(r=n.onCatch)==null||r.call(n,t,s);else throw t},errorComponent:({error:t})=>{var s;if(Gr(t))return(s=n.fallback)==null?void 0:s.call(n,t);throw t},children:n.children})}function I$(){return p.jsx("p",{children:"Not Found"})}function bf(n){return p.jsx(p.Fragment,{children:n.children})}function PF(n,e,t){return e.options.notFoundComponent?p.jsx(e.options.notFoundComponent,{...t}):n.options.defaultNotFoundComponent?p.jsx(n.options.defaultNotFoundComponent,{...t}):p.jsx(I$,{})}function R$({children:n}){var t;const e=dr();return e.isServer?p.jsx("script",{nonce:(t=e.options.ssr)==null?void 0:t.nonce,dangerouslySetInnerHTML:{__html:n+";document.currentScript.remove()"}}):null}function N$(){const n=dr();if(!n.isScrollRestoring||!n.isServer||typeof n.options.scrollRestoration=="function"&&!n.options.scrollRestoration({location:n.latestLocation}))return null;const t=(n.options.getScrollRestorationKey||FT)(n.latestLocation),s=t!==FT(n.latestLocation)?t:void 0,r={storageKey:Y_,shouldScrollRestoration:!0};return s&&(r.key=s),p.jsx(R$,{children:`(${fF.toString()})(${JSON.stringify(r)})`})}const IF=B.memo(function({matchId:e}){var w,_;const t=dr(),s=hr({select:E=>{const I=E.matches.find(D=>D.id===e);return Be(I),{routeId:I.routeId,ssr:I.ssr,_displayPending:I._displayPending}},structuralSharing:!0}),r=t.routesById[s.routeId],i=r.options.pendingComponent??t.options.defaultPendingComponent,o=i?p.jsx(i,{}):null,a=r.options.errorComponent??t.options.defaultErrorComponent,l=r.options.onCatch??t.options.defaultOnCatch,u=r.isRoot?r.options.notFoundComponent??((w=t.options.notFoundRoute)==null?void 0:w.options.component):r.options.notFoundComponent,h=s.ssr===!1||s.ssr==="data-only",d=(!r.isRoot||r.options.wrapInSuspense||h)&&(r.options.wrapInSuspense??i??(((_=r.options.errorComponent)==null?void 0:_.preload)||h))?B.Suspense:bf,f=a?qP:bf,g=u?P$:bf,y=hr({select:E=>E.loadedAt}),v=hr({select:E=>{var D;const I=E.matches.findIndex(M=>M.id===e);return(D=E.matches[I-1])==null?void 0:D.routeId}}),S=r.isRoot?r.options.shellComponent??bf:bf;return p.jsxs(S,{children:[p.jsx(SE.Provider,{value:e,children:p.jsx(d,{fallback:o,children:p.jsx(f,{getResetKey:()=>y,errorComponent:a||_E,onCatch:(E,I)=>{if(Gr(E))throw E;l==null||l(E,I)},children:p.jsx(g,{fallback:E=>{if(!u||E.routeId&&E.routeId!==s.routeId||!E.routeId&&!r.isRoot)throw E;return B.createElement(u,E)},children:h||s._displayPending?p.jsx(W8,{fallback:o,children:p.jsx(BN,{matchId:e})}):p.jsx(BN,{matchId:e})})})})}),v===Vr&&t.options.scrollRestoration?p.jsxs(p.Fragment,{children:[p.jsx(L$,{}),p.jsx(N$,{})]}):null]})});function L$(){const n=dr(),e=B.useRef(void 0);return p.jsx("script",{suppressHydrationWarning:!0,ref:t=>{t&&(e.current===void 0||e.current.href!==n.latestLocation.href)&&(n.emit({type:"onRendered",...jd(n.state)}),e.current=n.latestLocation)}},n.latestLocation.state.__TSR_key)}const BN=B.memo(function({matchId:e}){var l,u,h,d;const t=dr(),{match:s,key:r,routeId:i}=hr({select:f=>{const g=f.matches.find(_=>_.id===e),y=g.routeId,v=t.routesById[y].options.remountDeps??t.options.defaultRemountDeps,S=v==null?void 0:v({routeId:y,loaderDeps:g.loaderDeps,params:g._strictParams,search:g._strictSearch});return{key:S?JSON.stringify(S):void 0,routeId:y,match:{id:g.id,status:g.status,error:g.error,invalid:g.invalid,_forcePending:g._forcePending,_displayPending:g._displayPending}}},structuralSharing:!0}),o=t.routesById[i],a=B.useMemo(()=>{const f=o.options.component??t.options.defaultComponent;return f?p.jsx(f,{},r):p.jsx(RF,{})},[r,o.options.component,t.options.defaultComponent]);if(s._displayPending)throw(l=t.getMatch(s.id))==null?void 0:l._nonReactive.displayPendingPromise;if(s._forcePending)throw(u=t.getMatch(s.id))==null?void 0:u._nonReactive.minPendingPromise;if(s.status==="pending"){const f=o.options.pendingMinMs??t.options.defaultPendingMinMs;if(f){const g=t.getMatch(s.id);if(g&&!g._nonReactive.minPendingPromise&&!t.isServer){const y=sg();g._nonReactive.minPendingPromise=y,setTimeout(()=>{y.resolve(),g._nonReactive.minPendingPromise=void 0},f)}}throw(h=t.getMatch(s.id))==null?void 0:h._nonReactive.loadPromise}if(s.status==="notFound")return Be(Gr(s.error)),PF(t,o,s.error);if(s.status==="redirected")throw Be(Ei(s.error)),(d=t.getMatch(s.id))==null?void 0:d._nonReactive.loadPromise;if(s.status==="error"){if(t.isServer){const f=(o.options.errorComponent??t.options.defaultErrorComponent)||_E;return p.jsx(f,{error:s.error,reset:void 0,info:{componentStack:""}})}throw s.error}return a}),RF=B.memo(function(){const e=dr(),t=B.useContext(SE),s=hr({select:u=>{var h;return(h=u.matches.find(d=>d.id===t))==null?void 0:h.routeId}}),r=e.routesById[s],i=hr({select:u=>{const d=u.matches.find(f=>f.id===t);return Be(d),d.globalNotFound}}),o=hr({select:u=>{var f;const h=u.matches,d=h.findIndex(g=>g.id===t);return(f=h[d+1])==null?void 0:f.id}}),a=e.options.defaultPendingComponent?p.jsx(e.options.defaultPendingComponent,{}):null;if(i)return PF(e,r,void 0);if(!o)return null;const l=p.jsx(IF,{matchId:o});return s===Vr?p.jsx(B.Suspense,{fallback:a,children:l}):l});function D$(){const n=dr(),t=n.routesById[Vr].options.pendingComponent??n.options.defaultPendingComponent,s=t?p.jsx(t,{}):null,r=n.isServer||typeof document<"u"&&n.ssr?bf:B.Suspense,i=p.jsxs(r,{fallback:s,children:[!n.isServer&&p.jsx(k$,{}),p.jsx(M$,{})]});return n.options.InnerWrap?p.jsx(n.options.InnerWrap,{children:i}):i}function M$(){const n=dr(),e=hr({select:r=>{var i;return(i=r.matches[0])==null?void 0:i.id}}),t=hr({select:r=>r.loadedAt}),s=e?p.jsx(IF,{matchId:e}):null;return p.jsx(SE.Provider,{value:e,children:n.options.disableGlobalCatchBoundary?s:p.jsx(qP,{getResetKey:()=>t,errorComponent:_E,onCatch:r=>{r.message||r.toString()},children:s})})}const O$=n=>new j$(n);class j$ extends j8{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=ON,globalThis.createLazyFileRoute=VN):typeof window<"u"&&(window.createFileRoute=ON,window.createLazyFileRoute=VN);function F$({router:n,children:e,...t}){Object.keys(t).length>0&&n.update({...n.options,...t,context:{...n.options.context,...t.context}});const s=kF(),r=p.jsx(s.Provider,{value:n,children:e});return n.options.Wrap?p.jsx(n.options.Wrap,{children:r}):r}function V$({router:n,...e}){return p.jsx(F$,{router:n,...e,children:p.jsx(D$,{})})}var B$=(n,e,t,s,r,i,o,a)=>{let l=document.documentElement,u=["light","dark"];function h(g){(Array.isArray(n)?n:[n]).forEach(y=>{let v=y==="class",S=v&&i?r.map(w=>i[w]||w):r;v?(l.classList.remove(...S),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(y,g)}),d(g)}function d(g){a&&u.includes(g)&&(l.style.colorScheme=g)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)h(s);else try{let g=localStorage.getItem(e)||t,y=o&&g==="system"?f():g;h(y)}catch{}},U$=B.createContext(void 0),z$={setTheme:n=>{},themes:[]},$$=()=>{var n;return(n=B.useContext(U$))!=null?n:z$};B.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:u})=>{let h=JSON.stringify([t,e,i,n,a,o,s,r]).slice(1,-1);return B.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${B$.toString()})(${h})`}})});var H$=n=>{switch(n){case"success":return q$;case"info":return Y$;case"warning":return K$;case"error":return X$;default:return null}},W$=Array(12).fill(0),G$=({visible:n,className:e})=>Z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Z.createElement("div",{className:"sonner-spinner"},W$.map((t,s)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),q$=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),K$=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Y$=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),X$=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Q$=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),J$=()=>{let[n,e]=Z.useState(document.hidden);return Z.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},BT=1,Z$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:BT++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:s}),{...l,...e,id:i,dismissible:a,title:s}):l):this.addToast({title:s,...r,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=s!==void 0,o,a=r.then(async u=>{if(o=["resolve",u],Z.isValidElement(u))i=!1,this.create({id:s,type:"default",message:u});else if(tH(u)&&!u.ok){i=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:s,type:"error",message:h,description:d})}else if(t.success!==void 0){i=!1;let h=typeof t.success=="function"?await t.success(u):t.success,d=typeof t.description=="function"?await t.description(u):t.description;this.create({id:s,type:"success",message:h,description:d})}}).catch(async u=>{if(o=["reject",u],t.error!==void 0){i=!1;let h=typeof t.error=="function"?await t.error(u):t.error,d=typeof t.description=="function"?await t.description(u):t.description;this.create({id:s,type:"error",message:h,description:d})}}).finally(()=>{var u;i&&(this.dismiss(s),s=void 0),(u=t.finally)==null||u.call(t)}),l=()=>new Promise((u,h)=>a.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,t)=>{let s=(t==null?void 0:t.id)||BT++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},nr=new Z$,eH=(n,e)=>{let t=(e==null?void 0:e.id)||BT++;return nr.addToast({title:n,...e,id:t}),t},tH=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",nH=eH,sH=()=>nr.toasts,rH=()=>nr.getActiveToasts(),Fe=Object.assign(nH,{success:nr.success,info:nr.info,warning:nr.warning,error:nr.error,custom:nr.custom,message:nr.message,promise:nr.promise,dismiss:nr.dismiss,loading:nr.loading},{getHistory:sH,getToasts:rH});function iH(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}iH(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hb(n){return n.label!==void 0}var oH=3,aH="32px",lH="16px",UN=4e3,cH=356,uH=14,hH=20,dH=200;function Li(...n){return n.filter(Boolean).join(" ")}function fH(n){let[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var pH=n=>{var e,t,s,r,i,o,a,l,u,h,d;let{invert:f,toast:g,unstyled:y,interacting:v,setHeights:S,visibleToasts:w,heights:_,index:E,toasts:I,expanded:D,removeToast:M,defaultRichColors:T,closeButton:C,style:N,cancelButtonStyle:L,actionButtonStyle:R,className:O="",descriptionClassName:j="",duration:V,position:$,gap:U,loadingIcon:W,expandByDefault:G,classNames:q,icons:ee,closeButtonAriaLabel:ue="Close toast",pauseWhenPageIsHidden:J}=n,[se,pe]=Z.useState(null),[_e,Se]=Z.useState(null),[ie,Xt]=Z.useState(!1),[At,Lt]=Z.useState(!1),[Ie,Dt]=Z.useState(!1),[qe,Ke]=Z.useState(!1),[ot,Bt]=Z.useState(!1),[wt,po]=Z.useState(0),[Tt,ft]=Z.useState(0),Ts=Z.useRef(g.duration||V||UN),Jr=Z.useRef(null),Re=Z.useRef(null),Ut=E===0,an=E+1<=w,mn=g.type,Pi=g.dismissible!==!1,Hs=g.className||"",mo=g.descriptionClassName||"",Cs=Z.useMemo(()=>_.findIndex(we=>we.toastId===g.id)||0,[_,g.id]),Fl=Z.useMemo(()=>{var we;return(we=g.closeButton)!=null?we:C},[g.closeButton,C]),Ng=Z.useMemo(()=>g.duration||V||UN,[g.duration,V]),xa=Z.useRef(0),go=Z.useRef(0),hf=Z.useRef(0),Ws=Z.useRef(null),[hb,df]=$.split("-"),Lg=Z.useMemo(()=>_.reduce((we,Ze,bt)=>bt>=Cs?we:we+Ze.height,0),[_,Cs]),Vl=J$(),db=g.invert||f,Sn=mn==="loading";go.current=Z.useMemo(()=>Cs*U+Lg,[Cs,Lg]),Z.useEffect(()=>{Ts.current=Ng},[Ng]),Z.useEffect(()=>{Xt(!0)},[]),Z.useEffect(()=>{let we=Re.current;if(we){let Ze=we.getBoundingClientRect().height;return ft(Ze),S(bt=>[{toastId:g.id,height:Ze,position:g.position},...bt]),()=>S(bt=>bt.filter(Dn=>Dn.toastId!==g.id))}},[S,g.id]),Z.useLayoutEffect(()=>{if(!ie)return;let we=Re.current,Ze=we.style.height;we.style.height="auto";let bt=we.getBoundingClientRect().height;we.style.height=Ze,ft(bt),S(Dn=>Dn.find(mr=>mr.toastId===g.id)?Dn.map(mr=>mr.toastId===g.id?{...mr,height:bt}:mr):[{toastId:g.id,height:bt,position:g.position},...Dn])},[ie,g.title,g.description,S,g.id]);let Ii=Z.useCallback(()=>{Lt(!0),po(go.current),S(we=>we.filter(Ze=>Ze.toastId!==g.id)),setTimeout(()=>{M(g)},dH)},[g,M,S,go]);Z.useEffect(()=>{if(g.promise&&mn==="loading"||g.duration===1/0||g.type==="loading")return;let we;return D||v||J&&Vl?(()=>{if(hf.current<xa.current){let Ze=new Date().getTime()-xa.current;Ts.current=Ts.current-Ze}hf.current=new Date().getTime()})():Ts.current!==1/0&&(xa.current=new Date().getTime(),we=setTimeout(()=>{var Ze;(Ze=g.onAutoClose)==null||Ze.call(g,g),Ii()},Ts.current)),()=>clearTimeout(we)},[D,v,g,mn,J,Vl,Ii]),Z.useEffect(()=>{g.delete&&Ii()},[Ii,g.delete]);function Ku(){var we,Ze,bt;return ee!=null&&ee.loading?Z.createElement("div",{className:Li(q==null?void 0:q.loader,(we=g==null?void 0:g.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":mn==="loading"},ee.loading):W?Z.createElement("div",{className:Li(q==null?void 0:q.loader,(Ze=g==null?void 0:g.classNames)==null?void 0:Ze.loader,"sonner-loader"),"data-visible":mn==="loading"},W):Z.createElement(G$,{className:Li(q==null?void 0:q.loader,(bt=g==null?void 0:g.classNames)==null?void 0:bt.loader),visible:mn==="loading"})}return Z.createElement("li",{tabIndex:0,ref:Re,className:Li(O,Hs,q==null?void 0:q.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[mn],(t=g==null?void 0:g.classNames)==null?void 0:t[mn]),"data-sonner-toast":"","data-rich-colors":(s=g.richColors)!=null?s:T,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":ie,"data-promise":!!g.promise,"data-swiped":ot,"data-removed":At,"data-visible":an,"data-y-position":hb,"data-x-position":df,"data-index":E,"data-front":Ut,"data-swiping":Ie,"data-dismissible":Pi,"data-type":mn,"data-invert":db,"data-swipe-out":qe,"data-swipe-direction":_e,"data-expanded":!!(D||G&&ie),style:{"--index":E,"--toasts-before":E,"--z-index":I.length-E,"--offset":`${At?wt:go.current}px`,"--initial-height":G?"auto":`${Tt}px`,...N,...g.style},onDragEnd:()=>{Dt(!1),pe(null),Ws.current=null},onPointerDown:we=>{Sn||!Pi||(Jr.current=new Date,po(go.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(Dt(!0),Ws.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,Ze,bt,Dn;if(qe||!Pi)return;Ws.current=null;let mr=Number(((we=Re.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yo=Number(((Ze=Re.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Zr=new Date().getTime()-((bt=Jr.current)==null?void 0:bt.getTime()),Gs=se==="x"?mr:yo,Ri=Math.abs(Gs)/Zr;if(Math.abs(Gs)>=hH||Ri>.11){po(go.current),(Dn=g.onDismiss)==null||Dn.call(g,g),Se(se==="x"?mr>0?"right":"left":yo>0?"down":"up"),Ii(),Ke(!0),Bt(!1);return}Dt(!1),pe(null)},onPointerMove:we=>{var Ze,bt,Dn,mr;if(!Ws.current||!Pi||((Ze=window.getSelection())==null?void 0:Ze.toString().length)>0)return;let yo=we.clientY-Ws.current.y,Zr=we.clientX-Ws.current.x,Gs=(bt=n.swipeDirections)!=null?bt:fH($);!se&&(Math.abs(Zr)>1||Math.abs(yo)>1)&&pe(Math.abs(Zr)>Math.abs(yo)?"x":"y");let Ri={x:0,y:0};se==="y"?(Gs.includes("top")||Gs.includes("bottom"))&&(Gs.includes("top")&&yo<0||Gs.includes("bottom")&&yo>0)&&(Ri.y=yo):se==="x"&&(Gs.includes("left")||Gs.includes("right"))&&(Gs.includes("left")&&Zr<0||Gs.includes("right")&&Zr>0)&&(Ri.x=Zr),(Math.abs(Ri.x)>0||Math.abs(Ri.y)>0)&&Bt(!0),(Dn=Re.current)==null||Dn.style.setProperty("--swipe-amount-x",`${Ri.x}px`),(mr=Re.current)==null||mr.style.setProperty("--swipe-amount-y",`${Ri.y}px`)}},Fl&&!g.jsx?Z.createElement("button",{"aria-label":ue,"data-disabled":Sn,"data-close-button":!0,onClick:Sn||!Pi?()=>{}:()=>{var we;Ii(),(we=g.onDismiss)==null||we.call(g,g)},className:Li(q==null?void 0:q.closeButton,(r=g==null?void 0:g.classNames)==null?void 0:r.closeButton)},(i=ee==null?void 0:ee.close)!=null?i:Q$):null,g.jsx||B.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:Z.createElement(Z.Fragment,null,mn||g.icon||g.promise?Z.createElement("div",{"data-icon":"",className:Li(q==null?void 0:q.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Ku():null,g.type!=="loading"?g.icon||(ee==null?void 0:ee[mn])||H$(mn):null):null,Z.createElement("div",{"data-content":"",className:Li(q==null?void 0:q.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},Z.createElement("div",{"data-title":"",className:Li(q==null?void 0:q.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?Z.createElement("div",{"data-description":"",className:Li(j,mo,q==null?void 0:q.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),B.isValidElement(g.cancel)?g.cancel:g.cancel&&Hb(g.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||L,onClick:we=>{var Ze,bt;Hb(g.cancel)&&Pi&&((bt=(Ze=g.cancel).onClick)==null||bt.call(Ze,we),Ii())},className:Li(q==null?void 0:q.cancelButton,(h=g==null?void 0:g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,B.isValidElement(g.action)?g.action:g.action&&Hb(g.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||R,onClick:we=>{var Ze,bt;Hb(g.action)&&((bt=(Ze=g.action).onClick)==null||bt.call(Ze,we),!we.defaultPrevented&&Ii())},className:Li(q==null?void 0:q.actionButton,(d=g==null?void 0:g.classNames)==null?void 0:d.actionButton)},g.action.label):null))};function zN(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function mH(n,e){let t={};return[n,e].forEach((s,r)=>{let i=r===1,o=i?"--mobile-offset":"--offset",a=i?lH:aH;function l(u){["top","right","bottom","left"].forEach(h=>{t[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?t[`${o}-${u}`]=a:t[`${o}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):l(a)}),t}var gH=B.forwardRef(function(n,e){let{invert:t,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:u,theme:h="light",richColors:d,duration:f,style:g,visibleToasts:y=oH,toastOptions:v,dir:S=zN(),gap:w=uH,loadingIcon:_,icons:E,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:D}=n,[M,T]=Z.useState([]),C=Z.useMemo(()=>Array.from(new Set([s].concat(M.filter(J=>J.position).map(J=>J.position)))),[M,s]),[N,L]=Z.useState([]),[R,O]=Z.useState(!1),[j,V]=Z.useState(!1),[$,U]=Z.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=Z.useRef(null),G=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=Z.useRef(null),ee=Z.useRef(!1),ue=Z.useCallback(J=>{T(se=>{var pe;return(pe=se.find(_e=>_e.id===J.id))!=null&&pe.delete||nr.dismiss(J.id),se.filter(({id:_e})=>_e!==J.id)})},[]);return Z.useEffect(()=>nr.subscribe(J=>{if(J.dismiss){T(se=>se.map(pe=>pe.id===J.id?{...pe,delete:!0}:pe));return}setTimeout(()=>{o9.flushSync(()=>{T(se=>{let pe=se.findIndex(_e=>_e.id===J.id);return pe!==-1?[...se.slice(0,pe),{...se[pe],...J},...se.slice(pe+1)]:[J,...se]})})})}),[]),Z.useEffect(()=>{if(h!=="system"){U(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{U(se?"dark":"light")})}catch{J.addListener(({matches:pe})=>{try{U(pe?"dark":"light")}catch(_e){console.error(_e)}})}},[h]),Z.useEffect(()=>{M.length<=1&&O(!1)},[M]),Z.useEffect(()=>{let J=se=>{var pe,_e;r.every(Se=>se[Se]||se.code===Se)&&(O(!0),(pe=W.current)==null||pe.focus()),se.code==="Escape"&&(document.activeElement===W.current||(_e=W.current)!=null&&_e.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[r]),Z.useEffect(()=>{if(W.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,ee.current=!1)}},[W.current]),Z.createElement("section",{ref:e,"aria-label":`${I} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((J,se)=>{var pe;let[_e,Se]=J.split("-");return M.length?Z.createElement("ol",{key:J,dir:S==="auto"?zN():S,tabIndex:-1,ref:W,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":_e,"data-lifted":R&&M.length>1&&!i,"data-x-position":Se,style:{"--front-toast-height":`${((pe=N[0])==null?void 0:pe.height)||0}px`,"--width":`${cH}px`,"--gap":`${w}px`,...g,...mH(l,u)},onBlur:ie=>{ee.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(ee.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,q.current=ie.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{j||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},M.filter(ie=>!ie.position&&se===0||ie.position===J).map((ie,Xt)=>{var At,Lt;return Z.createElement(pH,{key:ie.id,icons:E,index:Xt,toast:ie,defaultRichColors:d,duration:(At=v==null?void 0:v.duration)!=null?At:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:y,closeButton:(Lt=v==null?void 0:v.closeButton)!=null?Lt:o,interacting:j,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ue,toasts:M.filter(Ie=>Ie.position==ie.position),heights:N.filter(Ie=>Ie.position==ie.position),setHeights:L,expandByDefault:i,gap:w,loadingIcon:_,expanded:R,pauseWhenPageIsHidden:D,swipeDirections:n.swipeDirections})})):null}))});const yH=({...n})=>{const{theme:e="system"}=$$();return p.jsx(gH,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},vH=()=>{};var $N={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},wH=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},LF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(t[h],t[d],t[f],t[g])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const u=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||u==null||d==null)throw new bH;const f=i<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),d!==64){const y=u<<6&192|d;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xH=function(n){const e=NF(n);return LF.encodeByteArray(e,!0)},J_=function(n){return xH(n).replace(/\./g,"")},DF=function(n){try{return LF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=()=>_H().__FIREBASE_DEFAULTS__,SH=()=>{if(typeof process>"u"||typeof $N>"u")return;const n=$N.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&DF(n[1]);return e&&JSON.parse(e)},TE=()=>{try{return vH()||EH()||SH()||AH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},MF=n=>{var e,t;return(t=(e=TE())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},OF=n=>{const e=MF(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},jF=()=>{var n;return(n=TE())==null?void 0:n.config},FF=n=>{var e;return(e=TE())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QP(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[J_(JSON.stringify(t)),J_(JSON.stringify(o)),""].join(".")}const s0={};function CH(){const n={prod:[],emulator:[]};for(const e of Object.keys(s0))s0[e]?n.emulator.push(e):n.prod.push(e);return n}function kH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let HN=!1;function JP(n,e){if(typeof window>"u"||typeof document>"u"||!tf(window.location.host)||s0[n]===e||s0[n]||HN)return;s0[n]=e;function t(f){return`__firebase__banner__${f}`}const s="__firebase__banner",i=CH().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{HN=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=kH(s),g=t("text"),y=document.getElementById(g)||document.createElement("span"),v=t("learnmore"),S=document.getElementById(v)||document.createElement("a"),w=t("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),h(S,v);const I=u();l(_,w),E.append(_,y,S,I),document.body.appendChild(E)}i?(y.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(As())}function IH(){var e;const n=(e=TE())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DH(){const n=As();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MH(){return!IH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OH(){try{return typeof indexedDB=="object"}catch{return!1}}function jH(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH="FirebaseError";class va extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=FH,Object.setPrototypeOf(this,va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bw.prototype.create)}}class Bw{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?VH(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new va(r,a,s)}}function VH(n,e){return n.replace(BH,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const BH=/\{\$([^}]+)}/g;function UH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cl(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(WN(i)&&WN(o)){if(!Cl(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function WN(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wy(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function by(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zH(n,e){const t=new $H(n,e);return t.subscribe.bind(t)}class $H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");HH(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=iA),r.error===void 0&&(r.error=iA),r.complete===void 0&&(r.complete=iA);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HH(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function iA(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n){return n&&n._delegate?n._delegate:n}class Iu{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new TH;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qH(e))try{this.getOrInitializeService({instanceIdentifier:nh})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=nh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nh){return this.instances.has(e)}getOptions(e=nh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GH(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=nh){return this.component?this.component.multipleInstances?e:nh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GH(n){return n===nh?void 0:n}function qH(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const YH={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},XH=Ue.INFO,QH={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},JH=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=QH[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ZP{constructor(e){this.name=e,this._logLevel=XH,this._logHandler=JH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const ZH=(n,e)=>e.some(t=>n instanceof t);let GN,qN;function e7(){return GN||(GN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t7(){return qN||(qN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BF=new WeakMap,UT=new WeakMap,UF=new WeakMap,oA=new WeakMap,eI=new WeakMap;function n7(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Eu(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&BF.set(t,n)}).catch(()=>{}),eI.set(e,n),e}function s7(n){if(UT.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});UT.set(n,e)}let zT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return UT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Eu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function r7(n){zT=n(zT)}function i7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(aA(this),e,...t);return UF.set(s,e.sort?e.sort():[e]),Eu(s)}:t7().includes(n)?function(...e){return n.apply(aA(this),e),Eu(BF.get(this))}:function(...e){return Eu(n.apply(aA(this),e))}}function o7(n){return typeof n=="function"?i7(n):(n instanceof IDBTransaction&&s7(n),ZH(n,e7())?new Proxy(n,zT):n)}function Eu(n){if(n instanceof IDBRequest)return n7(n);if(oA.has(n))return oA.get(n);const e=o7(n);return e!==n&&(oA.set(n,e),eI.set(e,n)),e}const aA=n=>eI.get(n);function a7(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Eu(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Eu(o.result),l.oldVersion,l.newVersion,Eu(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const l7=["get","getKey","getAll","getAllKeys","count"],c7=["put","add","delete","clear"],lA=new Map;function KN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lA.get(e))return lA.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=c7.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||l7.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),r&&l.done]))[0]};return lA.set(e,i),i}r7(n=>({...n,get:(e,t,s)=>KN(e,t)||n.get(e,t,s),has:(e,t)=>!!KN(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h7(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function h7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $T="@firebase/app",YN="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new ZP("@firebase/app"),d7="@firebase/app-compat",f7="@firebase/analytics-compat",p7="@firebase/analytics",m7="@firebase/app-check-compat",g7="@firebase/app-check",y7="@firebase/auth",v7="@firebase/auth-compat",w7="@firebase/database",b7="@firebase/data-connect",x7="@firebase/database-compat",_7="@firebase/functions",E7="@firebase/functions-compat",S7="@firebase/installations",A7="@firebase/installations-compat",T7="@firebase/messaging",C7="@firebase/messaging-compat",k7="@firebase/performance",P7="@firebase/performance-compat",I7="@firebase/remote-config",R7="@firebase/remote-config-compat",N7="@firebase/storage",L7="@firebase/storage-compat",D7="@firebase/firestore",M7="@firebase/ai",O7="@firebase/firestore-compat",j7="firebase",F7="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="[DEFAULT]",V7={[$T]:"fire-core",[d7]:"fire-core-compat",[p7]:"fire-analytics",[f7]:"fire-analytics-compat",[g7]:"fire-app-check",[m7]:"fire-app-check-compat",[y7]:"fire-auth",[v7]:"fire-auth-compat",[w7]:"fire-rtdb",[b7]:"fire-data-connect",[x7]:"fire-rtdb-compat",[_7]:"fire-fn",[E7]:"fire-fn-compat",[S7]:"fire-iid",[A7]:"fire-iid-compat",[T7]:"fire-fcm",[C7]:"fire-fcm-compat",[k7]:"fire-perf",[P7]:"fire-perf-compat",[I7]:"fire-rc",[R7]:"fire-rc-compat",[N7]:"fire-gcs",[L7]:"fire-gcs-compat",[D7]:"fire-fst",[O7]:"fire-fst-compat",[M7]:"fire-vertex","fire-js":"fire-js",[j7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map,B7=new Map,WT=new Map;function XN(n,e){try{n.container.addComponent(e)}catch(t){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gd(n){const e=n.name;if(WT.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;WT.set(e,n);for(const t of Z_.values())XN(t,n);for(const t of B7.values())XN(t,n);return!0}function CE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Su=new Bw("app","Firebase",U7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Su.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=F7;function zF(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:HT,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Su.create("bad-app-name",{appName:String(r)});if(t||(t=jF()),!t)throw Su.create("no-options");const i=Z_.get(r);if(i){if(Cl(t,i.options)&&Cl(s,i.config))return i;throw Su.create("duplicate-app",{appName:r})}const o=new KH(r);for(const l of WT.values())o.addComponent(l);const a=new z7(t,s,o);return Z_.set(r,a),a}function tI(n=HT){const e=Z_.get(n);if(!e&&n===HT&&jF())return zF();if(!e)throw Su.create("no-app",{appName:n});return e}function ia(n,e,t){let s=V7[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(o.join(" "));return}Gd(new Iu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="firebase-heartbeat-database",H7=1,D0="firebase-heartbeat-store";let cA=null;function $F(){return cA||(cA=a7($7,H7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(D0)}catch(t){console.warn(t)}}}}).catch(n=>{throw Su.create("idb-open",{originalErrorMessage:n.message})})),cA}async function W7(n){try{const t=(await $F()).transaction(D0),s=await t.objectStore(D0).get(HF(n));return await t.done,s}catch(e){if(e instanceof va)kl.warn(e.message);else{const t=Su.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(t.message)}}}async function QN(n,e){try{const s=(await $F()).transaction(D0,"readwrite");await s.objectStore(D0).put(e,HF(n)),await s.done}catch(t){if(t instanceof va)kl.warn(t.message);else{const s=Su.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kl.warn(s.message)}}}function HF(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7=1024,q7=30;class K7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new X7(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=JN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>q7){const o=Q7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){kl.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=JN(),{heartbeatsToSend:s,unsentEntries:r}=Y7(this._heartbeatsCache.heartbeats),i=J_(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return kl.warn(t),""}}}function JN(){return new Date().toISOString().substring(0,10)}function Y7(n,e=G7){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ZN(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ZN(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class X7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OH()?jH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W7(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ZN(n){return J_(JSON.stringify({version:2,heartbeats:n})).length}function Q7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(n){Gd(new Iu("platform-logger",e=>new u7(e),"PRIVATE")),Gd(new Iu("heartbeat",e=>new K7(e),"PRIVATE")),ia($T,YN,n),ia($T,YN,"esm2020"),ia("fire-js","")}J7("");var Z7="firebase",eW="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(Z7,eW,"app");function WF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tW=WF,GF=new Bw("auth","Firebase",WF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new ZP("@firebase/auth");function nW(n,...e){e1.logLevel<=Ue.WARN&&e1.warn(`Auth (${nf}): ${n}`,...e)}function kx(n,...e){e1.logLevel<=Ue.ERROR&&e1.error(`Auth (${nf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(n,...e){throw nI(n,...e)}function oa(n,...e){return nI(n,...e)}function qF(n,e,t){const s={...tW(),[e]:t};return new Bw("auth","Firebase",s).create(e,{appName:n.name})}function wl(n){return qF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nI(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return GF.create(n,...e)}function be(n,e,...t){if(!n)throw nI(e,...t)}function ml(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kx(e),new Error(e)}function Pl(n,e){n||ml(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function sW(){return eL()==="http:"||eL()==="https:"}function eL(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sW()||NH()||"connection"in navigator)?navigator.onLine:!0}function iW(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pl(t>e,"Short delay should be less than long delay!"),this.isMobile=PH()||LH()}get(){return rW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(n,e){Pl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ml("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ml("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ml("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lW=new zw(3e4,6e4);function jl(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function wa(n,e,t,s,r={}){return YF(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Uw({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...i};return RH()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&tf(n.emulatorConfig.host)&&(u.credentials="include"),KF.fetch()(await XF(n,n.config.apiHost,t,a),u)})}async function YF(n,e,t){n._canInitEmulator=!1;const s={...oW,...e};try{const r=new uW(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wb(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wb(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wb(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wb(n,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qF(n,h,u);ao(n,h)}}catch(r){if(r instanceof va)throw r;ao(n,"network-request-failed",{message:String(r)})}}async function $w(n,e,t,s,r={}){const i=await wa(n,e,t,s,r);return"mfaPendingCredential"in i&&ao(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function XF(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?sI(n.config,r):`${n.config.apiScheme}://${r}`;return aW.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function cW(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(oa(this.auth,"network-request-failed")),lW.get())})}}function Wb(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=oa(n,e,s);return r.customData._tokenResponse=t,r}function tL(n){return n!==void 0&&n.enterprise!==void 0}class hW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cW(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dW(n,e){return wa(n,"GET","/v2/recaptchaConfig",jl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fW(n,e){return wa(n,"POST","/v1/accounts:delete",e)}async function t1(n,e){return wa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pW(n,e=!1){const t=En(n),s=await t.getIdToken(e),r=rI(s);be(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:r0(uA(r.auth_time)),issuedAtTime:r0(uA(r.iat)),expirationTime:r0(uA(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uA(n){return Number(n)*1e3}function rI(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return kx("JWT malformed, contained fewer than 3 sections"),null;try{const r=DF(t);return r?JSON.parse(r):(kx("Failed to decode base64 JWT payload"),null)}catch(r){return kx("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function nL(n){const e=rI(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof va&&mW(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function mW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=r0(this.lastLoginAt),this.creationTime=r0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(n){var d;const e=n.auth,t=await n.getIdToken(),s=await og(n,t1(e,{idToken:t}));be(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=(d=r.providerUserInfo)!=null&&d.length?QF(r.providerUserInfo):[],o=vW(n.providerData,i),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new qT(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function yW(n){const e=En(n);await n1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vW(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function QF(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(n,e){const t=await YF(n,{},async()=>{const s=Uw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await XF(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&tf(n.emulatorConfig.host)&&(l.credentials="include"),KF.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bW(n,e){return wa(n,"POST","/v2/accounts:revokeToken",jl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=nL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await wW(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new ap;return s&&(be(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(be(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(be(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ap,this.toJSON())}_performRefresh(){return ml("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class to{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new gW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new qT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await og(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pW(this,e)}reload(){return yW(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new to({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await n1(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(wl(this.auth));const e=await this.getIdToken();return await og(this,fW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:y,stsTokenManager:v}=t;be(d&&v,e,"internal-error");const S=ap.fromJSON(this.name,v);be(typeof d=="string",e,"internal-error"),ql(s,e.name),ql(r,e.name),be(typeof f=="boolean",e,"internal-error"),be(typeof g=="boolean",e,"internal-error"),ql(i,e.name),ql(o,e.name),ql(a,e.name),ql(l,e.name),ql(u,e.name),ql(h,e.name);const w=new to({uid:d,auth:e,email:r,emailVerified:f,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:S,createdAt:u,lastLoginAt:h});return y&&Array.isArray(y)&&(w.providerData=y.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,s=!1){const r=new ap;r.updateFromServerResponse(t);const i=new to({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await n1(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];be(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?QF(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new ap;a.updateFromIdToken(s);const l=new to({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new qT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Map;function gl(n){Pl(n instanceof Function,"Expected a class definition");let e=sL.get(n);return e?(Pl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sL.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JF.type="NONE";const rL=JF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n,e,t){return`firebase:${n}:${e}:${t}`}class lp{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Px(this.userKey,r.apiKey,i),this.fullPersistenceKey=Px("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await t1(this.auth,{idToken:e}).catch(()=>{});return t?to._fromGetAccountInfoResponse(this.auth,t,e):null}return to._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new lp(gl(rL),e,s);const r=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||gl(rL);const o=Px(s,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await t1(e,{idToken:h}).catch(()=>{});if(!f)break;d=await to._fromGetAccountInfoResponse(e,f,h)}else d=to._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new lp(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new lp(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r4(e))return"Blackberry";if(i4(e))return"Webos";if(e4(e))return"Safari";if((e.includes("chrome/")||t4(e))&&!e.includes("edge/"))return"Chrome";if(s4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ZF(n=As()){return/firefox\//i.test(n)}function e4(n=As()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t4(n=As()){return/crios\//i.test(n)}function n4(n=As()){return/iemobile/i.test(n)}function s4(n=As()){return/android/i.test(n)}function r4(n=As()){return/blackberry/i.test(n)}function i4(n=As()){return/webos/i.test(n)}function iI(n=As()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xW(n=As()){var e;return iI(n)&&!!((e=window.navigator)!=null&&e.standalone)}function _W(){return DH()&&document.documentMode===10}function o4(n=As()){return iI(n)||s4(n)||i4(n)||r4(n)||/windows phone/i.test(n)||n4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n,e=[]){let t;switch(n){case"Browser":t=iL(As());break;case"Worker":t=`${iL(As())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nf}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SW(n,e={}){return wa(n,"GET","/v2/passwordPolicy",jl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW=6;class TW{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AW,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oL(this),this.idTokenSubscription=new oL(this),this.beforeStateQueue=new EW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gl(t)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await lp.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await t1(this,{idToken:e}),s=await to._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(zr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await n1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(wl(this));const t=e?En(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(wl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(wl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SW(this),t=new TW(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bw("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bW(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gl(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await lp.create(this,[gl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&nW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wu(n){return En(n)}class oL{constructor(e){this.auth=e,this.observer=null,this.addObserver=zH(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kW(n){kE=n}function l4(n){return kE.loadJS(n)}function PW(){return kE.recaptchaEnterpriseScript}function IW(){return kE.gapiScript}function RW(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class NW{constructor(){this.enterprise=new LW}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LW{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DW="recaptcha-enterprise",c4="NO_RECAPTCHA";class MW{constructor(e){this.type=DW,this.auth=Wu(e)}async verify(e="verify",t=!1){async function s(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{dW(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new hW(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;tL(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(c4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NW().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!t&&tL(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PW();l.length!==0&&(l+=a),l4(l).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function aL(n,e,t,s=!1,r=!1){const i=new MW(n);let o;if(r)o=c4;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function s1(n,e,t,s,r){var i;if((i=n._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await aL(n,e,t,t==="getOobCode");return s(n,o)}else return s(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await aL(n,e,t,t==="getOobCode");return s(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OW(n,e){const t=CE(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Cl(i,e??{}))return r;ao(r,"already-initialized")}return t.initialize({options:e})}function jW(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(gl);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FW(n,e,t){const s=Wu(n);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=u4(e),{host:o,port:a}=VW(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(Cl(u,s.config.emulator)&&Cl(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,tf(o)?(QP(`${i}//${o}${l}`),JP("Auth",!0)):BW()}function u4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VW(n){const e=u4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:lL(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:lL(o)}}}function lL(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BW(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ml("not implemented")}_getIdTokenResponse(e){return ml("not implemented")}_linkToIdToken(e,t){return ml("not implemented")}_getReauthenticationResolver(e){return ml("not implemented")}}async function UW(n,e){return wa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(n,e){return $w(n,"POST","/v1/accounts:signInWithPassword",jl(n,e))}async function $W(n,e){return wa(n,"POST","/v1/accounts:sendOobCode",jl(n,e))}async function HW(n,e){return $W(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(n,e){return $w(n,"POST","/v1/accounts:signInWithEmailLink",jl(n,e))}async function GW(n,e){return $w(n,"POST","/v1/accounts:signInWithEmailLink",jl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends oI{constructor(e,t,s,r=null){super("password",s),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new M0(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new M0(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s1(e,t,"signInWithPassword",zW);case"emailLink":return WW(e,{email:this._email,oobCode:this._password});default:ao(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s1(e,s,"signUpPassword",UW);case"emailLink":return GW(e,{idToken:t,email:this._email,oobCode:this._password});default:ao(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(n,e){return $w(n,"POST","/v1/accounts:signInWithIdp",jl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW="http://localhost";class qd extends oI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ao("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new qd(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return cp(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,cp(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cp(e,t)}buildRequest(){const e={requestUri:qW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uw(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YW(n){const e=wy(by(n)).link,t=e?wy(by(e)).deep_link_id:null,s=wy(by(n)).deep_link_id;return(s?wy(by(s)).link:null)||s||t||e||n}class aI{constructor(e){const t=wy(by(e)),s=t.apiKey??null,r=t.oobCode??null,i=KW(t.mode??null);be(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=YW(e);try{return new aI(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.providerId=_g.PROVIDER_ID}static credential(e,t){return M0._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=aI.parseLink(t);return be(s,"argument-error"),M0._fromEmailAndCode(e,s.code,s.tenantId)}}_g.PROVIDER_ID="password";_g.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_g.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends h4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends Hw{constructor(){super("facebook.com")}static credential(e){return qd._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rc.credentialFromTaggedObject(e)}static credentialFromError(e){return rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rc.credential(e.oauthAccessToken)}catch{return null}}}rc.FACEBOOK_SIGN_IN_METHOD="facebook.com";rc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends Hw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qd._fromParams({providerId:ic.PROVIDER_ID,signInMethod:ic.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ic.credentialFromTaggedObject(e)}static credentialFromError(e){return ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ic.credential(t,s)}catch{return null}}}ic.GOOGLE_SIGN_IN_METHOD="google.com";ic.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Hw{constructor(){super("github.com")}static credential(e){return qd._fromParams({providerId:oc.PROVIDER_ID,signInMethod:oc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oc.credentialFromTaggedObject(e)}static credentialFromError(e){return oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oc.credential(e.oauthAccessToken)}catch{return null}}}oc.GITHUB_SIGN_IN_METHOD="github.com";oc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Hw{constructor(){super("twitter.com")}static credential(e,t){return qd._fromParams({providerId:ac.PROVIDER_ID,signInMethod:ac.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ac.credentialFromTaggedObject(e)}static credentialFromError(e){return ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ac.credential(t,s)}catch{return null}}}ac.TWITTER_SIGN_IN_METHOD="twitter.com";ac.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XW(n,e){return $w(n,"POST","/v1/accounts:signUp",jl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await to._fromIdTokenResponse(e,s,r),o=cL(s);return new Kd({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=cL(s);return new Kd({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function cL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends va{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,r1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new r1(e,t,s,r)}}function d4(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?r1._fromErrorAndOperation(n,i,e,s):i})}async function QW(n,e,t=!1){const s=await og(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Kd._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(n,e,t=!1){const{auth:s}=n;if(zr(s.app))return Promise.reject(wl(s));const r="reauthenticate";try{const i=await og(n,d4(s,r,e,n),t);be(i.idToken,s,"internal-error");const o=rI(i.idToken);be(o,s,"internal-error");const{sub:a}=o;return be(n.uid===a,s,"user-mismatch"),Kd._forOperation(n,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ao(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(n,e,t=!1){if(zr(n.app))return Promise.reject(wl(n));const s="signIn",r=await d4(n,s,e),i=await Kd._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}async function ZW(n,e){return f4(Wu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(n){const e=Wu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eG(n,e,t){const s=Wu(n);await s1(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",HW)}async function tG(n,e,t){if(zr(n.app))return Promise.reject(wl(n));const s=Wu(n),o=await s1(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XW).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&p4(n),l}),a=await Kd._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function m4(n,e,t){return zr(n.app)?Promise.reject(wl(n)):ZW(En(n),_g.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&p4(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nG(n,e){return wa(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=En(n),i={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await og(s,nG(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function sG(n,e,t,s){return En(n).onIdTokenChanged(e,t,s)}function rG(n,e,t){return En(n).beforeAuthStateChanged(e,t)}function iG(n,e,t,s){return En(n).onAuthStateChanged(e,t,s)}function oG(n){return En(n).signOut()}const i1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(i1,"1"),this.storage.removeItem(i1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=1e3,lG=10;class v4 extends y4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);_W()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,lG):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},aG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v4.type="LOCAL";const cG=v4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4 extends y4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w4.type="SESSION";const b4=w4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new PE(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(t.origin,i)),l=await uG(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}PE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=lI("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(){return window}function dG(n){aa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return typeof aa().WorkerGlobalScope<"u"&&typeof aa().importScripts=="function"}async function fG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pG(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function mG(){return x4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="firebaseLocalStorageDb",gG=1,o1="firebaseLocalStorage",E4="fbase_key";class Ww{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function IE(n,e){return n.transaction([o1],e?"readwrite":"readonly").objectStore(o1)}function yG(){const n=indexedDB.deleteDatabase(_4);return new Ww(n).toPromise()}function KT(){const n=indexedDB.open(_4,gG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(o1,{keyPath:E4})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(o1)?e(s):(s.close(),await yG(),e(await KT()))})})}async function uL(n,e,t){const s=IE(n,!0).put({[E4]:e,value:t});return new Ww(s).toPromise()}async function vG(n,e){const t=IE(n,!1).get(e),s=await new Ww(t).toPromise();return s===void 0?null:s.value}function hL(n,e){const t=IE(n,!0).delete(e);return new Ww(t).toPromise()}const wG=800,bG=3;class S4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>bG)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=PE._getInstance(mG()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await fG(),!this.activeServiceWorker)return;this.sender=new hG(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KT();return await uL(e,i1,"1"),await hL(e,i1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uL(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>vG(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hL(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=IE(r,!1).getAll();return new Ww(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S4.type="LOCAL";const xG=S4;new zw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _G(n,e){return e?gl(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI extends oI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EG(n){return f4(n.auth,new cI(n),n.bypassAuthState)}function SG(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),JW(t,new cI(n),n.bypassAuthState)}async function AG(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),QW(t,new cI(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EG;case"linkViaPopup":case"linkViaRedirect":return AG;case"reauthViaPopup":case"reauthViaRedirect":return SG;default:ao(this.auth,"internal-error")}}resolve(e){Pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TG=new zw(2e3,1e4);class Gf extends A4{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Gf.currentPopupAction&&Gf.currentPopupAction.cancel(),Gf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Pl(this.filter.length===1,"Popup operations only handle one event");const e=lI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TG.get())};e()}}Gf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG="pendingRedirect",Ix=new Map;class kG extends A4{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ix.get(this.auth._key());if(!e){try{const s=await PG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ix.set(this.auth._key(),e)}return this.bypassAuthState||Ix.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PG(n,e){const t=NG(e),s=RG(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function IG(n,e){Ix.set(n._key(),e)}function RG(n){return gl(n._redirectPersistence)}function NG(n){return Px(CG,n.config.apiKey,n.name)}async function LG(n,e,t=!1){if(zr(n.app))return Promise.reject(wl(n));const s=Wu(n),r=_G(s,e),o=await new kG(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=10*60*1e3;class MG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!T4(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(oa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DG&&this.cachedEventUids.clear(),this.cachedEventUids.has(dL(e))}saveEventToCache(e){this.cachedEventUids.add(dL(e)),this.lastProcessedEventTime=Date.now()}}function dL(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function T4({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T4(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(n,e={}){return wa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VG=/^https?/;async function BG(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jG(n);for(const t of e)try{if(UG(t))return}catch{}ao(n,"unauthorized-domain")}function UG(n){const e=GT(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!VG.test(t))return!1;if(FG.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=new zw(3e4,6e4);function fL(){const n=aa().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $G(n){return new Promise((e,t)=>{var r,i,o;function s(){fL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fL(),t(oa(n,"network-request-failed"))},timeout:zG.get()})}if((i=(r=aa().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=aa().gapi)!=null&&o.load)s();else{const a=RW("iframefcb");return aa()[a]=()=>{gapi.load?s():t(oa(n,"network-request-failed"))},l4(`${IW()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Rx=null,e})}let Rx=null;function HG(n){return Rx=Rx||$G(n),Rx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG=new zw(5e3,15e3),GG="__/auth/iframe",qG="emulator/auth/iframe",KG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XG(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sI(e,qG):`https://${n.config.authDomain}/${GG}`,s={apiKey:e.apiKey,appName:n.name,v:nf},r=YG.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${Uw(s).slice(1)}`}async function QG(n){const e=await HG(n),t=aa().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:XG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KG,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=oa(n,"network-request-failed"),a=aa().setTimeout(()=>{i(o)},WG.get());function l(){aa().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZG=500,eq=600,tq="_blank",nq="http://localhost";class pL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sq(n,e,t,s=ZG,r=eq){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...JG,width:s.toString(),height:r.toString(),top:i,left:o},u=As().toLowerCase();t&&(a=t4(u)?tq:t),ZF(u)&&(e=e||nq,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(xW(u)&&a!=="_self")return rq(e||"",a),new pL(null);const d=window.open(e||"",a,h);be(d,n,"popup-blocked");try{d.focus()}catch{}return new pL(d)}function rq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="__/auth/handler",oq="emulator/auth/handler",aq=encodeURIComponent("fac");async function mL(n,e,t,s,r,i){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:nf,eventId:r};if(e instanceof h4){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",UH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Hw){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${aq}=${encodeURIComponent(l)}`:"";return`${lq(n)}?${Uw(a).slice(1)}${u}`}function lq({config:n}){return n.emulator?sI(n,oq):`https://${n.authDomain}/${iq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="webStorageSupport";class cq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b4,this._completeRedirectFn=LG,this._overrideRedirectResult=IG}async _openPopup(e,t,s,r){var o;Pl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await mL(e,t,s,GT(),r);return sq(e,i,lI())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await mL(e,t,s,GT(),r);return dG(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(Pl(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await QG(e),s=new MG(e);return t.register("authEvent",r=>(be(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hA,{type:hA},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[hA];i!==void 0&&t(!!i),ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return o4()||e4()||iI()}}const uq=cq;var gL="@firebase/auth",yL="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fq(n){Gd(new Iu("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a4(n)},u=new CW(s,r,i,l);return jW(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Gd(new Iu("auth-internal",e=>{const t=Wu(e.getProvider("auth").getImmediate());return(s=>new hq(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ia(gL,yL,dq(n)),ia(gL,yL,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=5*60,mq=FF("authIdTokenMaxAge")||pq;let vL=null;const gq=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>mq)return;const r=t==null?void 0:t.token;vL!==r&&(vL=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function yq(n=tI()){const e=CE(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OW(n,{popupRedirectResolver:uq,persistence:[xG,cG,b4]}),s=FF("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=gq(i.toString());rG(t,o,()=>o(t.currentUser)),sG(t,a=>o(a))}}const r=MF("auth");return r&&FW(t,`http://${r}`),t}function vq(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}kW({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=oa("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",vq().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fq("Browser");var wL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Au,C4;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function N(){}N.prototype=C.prototype,T.F=C.prototype,T.prototype=new N,T.prototype.constructor=T,T.D=function(L,R,O){for(var j=Array(arguments.length-2),V=2;V<arguments.length;V++)j[V-2]=arguments[V];return C.prototype[R].apply(L,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,C,N){N||(N=0);const L=Array(16);if(typeof C=="string")for(var R=0;R<16;++R)L[R]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(R=0;R<16;++R)L[R]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=T.g[0],N=T.g[1],R=T.g[2];let O=T.g[3],j;j=C+(O^N&(R^O))+L[0]+3614090360&4294967295,C=N+(j<<7&4294967295|j>>>25),j=O+(R^C&(N^R))+L[1]+3905402710&4294967295,O=C+(j<<12&4294967295|j>>>20),j=R+(N^O&(C^N))+L[2]+606105819&4294967295,R=O+(j<<17&4294967295|j>>>15),j=N+(C^R&(O^C))+L[3]+3250441966&4294967295,N=R+(j<<22&4294967295|j>>>10),j=C+(O^N&(R^O))+L[4]+4118548399&4294967295,C=N+(j<<7&4294967295|j>>>25),j=O+(R^C&(N^R))+L[5]+1200080426&4294967295,O=C+(j<<12&4294967295|j>>>20),j=R+(N^O&(C^N))+L[6]+2821735955&4294967295,R=O+(j<<17&4294967295|j>>>15),j=N+(C^R&(O^C))+L[7]+4249261313&4294967295,N=R+(j<<22&4294967295|j>>>10),j=C+(O^N&(R^O))+L[8]+1770035416&4294967295,C=N+(j<<7&4294967295|j>>>25),j=O+(R^C&(N^R))+L[9]+2336552879&4294967295,O=C+(j<<12&4294967295|j>>>20),j=R+(N^O&(C^N))+L[10]+4294925233&4294967295,R=O+(j<<17&4294967295|j>>>15),j=N+(C^R&(O^C))+L[11]+2304563134&4294967295,N=R+(j<<22&4294967295|j>>>10),j=C+(O^N&(R^O))+L[12]+1804603682&4294967295,C=N+(j<<7&4294967295|j>>>25),j=O+(R^C&(N^R))+L[13]+4254626195&4294967295,O=C+(j<<12&4294967295|j>>>20),j=R+(N^O&(C^N))+L[14]+2792965006&4294967295,R=O+(j<<17&4294967295|j>>>15),j=N+(C^R&(O^C))+L[15]+1236535329&4294967295,N=R+(j<<22&4294967295|j>>>10),j=C+(R^O&(N^R))+L[1]+4129170786&4294967295,C=N+(j<<5&4294967295|j>>>27),j=O+(N^R&(C^N))+L[6]+3225465664&4294967295,O=C+(j<<9&4294967295|j>>>23),j=R+(C^N&(O^C))+L[11]+643717713&4294967295,R=O+(j<<14&4294967295|j>>>18),j=N+(O^C&(R^O))+L[0]+3921069994&4294967295,N=R+(j<<20&4294967295|j>>>12),j=C+(R^O&(N^R))+L[5]+3593408605&4294967295,C=N+(j<<5&4294967295|j>>>27),j=O+(N^R&(C^N))+L[10]+38016083&4294967295,O=C+(j<<9&4294967295|j>>>23),j=R+(C^N&(O^C))+L[15]+3634488961&4294967295,R=O+(j<<14&4294967295|j>>>18),j=N+(O^C&(R^O))+L[4]+3889429448&4294967295,N=R+(j<<20&4294967295|j>>>12),j=C+(R^O&(N^R))+L[9]+568446438&4294967295,C=N+(j<<5&4294967295|j>>>27),j=O+(N^R&(C^N))+L[14]+3275163606&4294967295,O=C+(j<<9&4294967295|j>>>23),j=R+(C^N&(O^C))+L[3]+4107603335&4294967295,R=O+(j<<14&4294967295|j>>>18),j=N+(O^C&(R^O))+L[8]+1163531501&4294967295,N=R+(j<<20&4294967295|j>>>12),j=C+(R^O&(N^R))+L[13]+2850285829&4294967295,C=N+(j<<5&4294967295|j>>>27),j=O+(N^R&(C^N))+L[2]+4243563512&4294967295,O=C+(j<<9&4294967295|j>>>23),j=R+(C^N&(O^C))+L[7]+1735328473&4294967295,R=O+(j<<14&4294967295|j>>>18),j=N+(O^C&(R^O))+L[12]+2368359562&4294967295,N=R+(j<<20&4294967295|j>>>12),j=C+(N^R^O)+L[5]+4294588738&4294967295,C=N+(j<<4&4294967295|j>>>28),j=O+(C^N^R)+L[8]+2272392833&4294967295,O=C+(j<<11&4294967295|j>>>21),j=R+(O^C^N)+L[11]+1839030562&4294967295,R=O+(j<<16&4294967295|j>>>16),j=N+(R^O^C)+L[14]+4259657740&4294967295,N=R+(j<<23&4294967295|j>>>9),j=C+(N^R^O)+L[1]+2763975236&4294967295,C=N+(j<<4&4294967295|j>>>28),j=O+(C^N^R)+L[4]+1272893353&4294967295,O=C+(j<<11&4294967295|j>>>21),j=R+(O^C^N)+L[7]+4139469664&4294967295,R=O+(j<<16&4294967295|j>>>16),j=N+(R^O^C)+L[10]+3200236656&4294967295,N=R+(j<<23&4294967295|j>>>9),j=C+(N^R^O)+L[13]+681279174&4294967295,C=N+(j<<4&4294967295|j>>>28),j=O+(C^N^R)+L[0]+3936430074&4294967295,O=C+(j<<11&4294967295|j>>>21),j=R+(O^C^N)+L[3]+3572445317&4294967295,R=O+(j<<16&4294967295|j>>>16),j=N+(R^O^C)+L[6]+76029189&4294967295,N=R+(j<<23&4294967295|j>>>9),j=C+(N^R^O)+L[9]+3654602809&4294967295,C=N+(j<<4&4294967295|j>>>28),j=O+(C^N^R)+L[12]+3873151461&4294967295,O=C+(j<<11&4294967295|j>>>21),j=R+(O^C^N)+L[15]+530742520&4294967295,R=O+(j<<16&4294967295|j>>>16),j=N+(R^O^C)+L[2]+3299628645&4294967295,N=R+(j<<23&4294967295|j>>>9),j=C+(R^(N|~O))+L[0]+4096336452&4294967295,C=N+(j<<6&4294967295|j>>>26),j=O+(N^(C|~R))+L[7]+1126891415&4294967295,O=C+(j<<10&4294967295|j>>>22),j=R+(C^(O|~N))+L[14]+2878612391&4294967295,R=O+(j<<15&4294967295|j>>>17),j=N+(O^(R|~C))+L[5]+4237533241&4294967295,N=R+(j<<21&4294967295|j>>>11),j=C+(R^(N|~O))+L[12]+1700485571&4294967295,C=N+(j<<6&4294967295|j>>>26),j=O+(N^(C|~R))+L[3]+2399980690&4294967295,O=C+(j<<10&4294967295|j>>>22),j=R+(C^(O|~N))+L[10]+4293915773&4294967295,R=O+(j<<15&4294967295|j>>>17),j=N+(O^(R|~C))+L[1]+2240044497&4294967295,N=R+(j<<21&4294967295|j>>>11),j=C+(R^(N|~O))+L[8]+1873313359&4294967295,C=N+(j<<6&4294967295|j>>>26),j=O+(N^(C|~R))+L[15]+4264355552&4294967295,O=C+(j<<10&4294967295|j>>>22),j=R+(C^(O|~N))+L[6]+2734768916&4294967295,R=O+(j<<15&4294967295|j>>>17),j=N+(O^(R|~C))+L[13]+1309151649&4294967295,N=R+(j<<21&4294967295|j>>>11),j=C+(R^(N|~O))+L[4]+4149444226&4294967295,C=N+(j<<6&4294967295|j>>>26),j=O+(N^(C|~R))+L[11]+3174756917&4294967295,O=C+(j<<10&4294967295|j>>>22),j=R+(C^(O|~N))+L[2]+718787259&4294967295,R=O+(j<<15&4294967295|j>>>17),j=N+(O^(R|~C))+L[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+O&4294967295}s.prototype.v=function(T,C){C===void 0&&(C=T.length);const N=C-this.blockSize,L=this.C;let R=this.h,O=0;for(;O<C;){if(R==0)for(;O<=N;)r(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(L[R++]=T.charCodeAt(O++),R==this.blockSize){r(this,L),R=0;break}}else for(;O<C;)if(L[R++]=T[O++],R==this.blockSize){r(this,L),R=0;break}}this.h=R,this.o+=C},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var N=T.length-8;N<T.length;++N)T[N]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)T[C++]=this.g[N]>>>L&255;return T};function i(T,C){var N=a;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=C(T)}function o(T,C){this.h=C;const N=[];let L=!0;for(let R=T.length-1;R>=0;R--){const O=T[R]|0;L&&O==C||(N[R]=O,L=!1)}this.g=N}var a={};function l(T){return-128<=T&&T<128?i(T,function(C){return new o([C|0],C<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return S(u(-T));const C=[];let N=1;for(let L=0;T>=N;L++)C[L]=T/N|0,N*=4294967296;return new o(C,0)}function h(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return S(h(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(C,8));let L=d;for(let O=0;O<T.length;O+=8){var R=Math.min(8,T.length-O);const j=parseInt(T.substring(O,O+R),C);R<8?(R=u(Math.pow(C,R)),L=L.j(R).add(u(j))):(L=L.j(N),L=L.add(u(j)))}return L}var d=l(0),f=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-S(this).m();let T=0,C=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);T+=(L>=0?L:4294967296+L)*C,C*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(v(this))return"-"+S(this).toString(T);const C=u(Math.pow(T,6));var N=this;let L="";for(;;){const R=I(N,C).g;N=w(N,R.j(C));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(T);if(N=R,y(N))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function v(T){return T.h==-1}n.l=function(T){return T=w(this,T),v(T)?-1:y(T)?0:1};function S(T){const C=T.g.length,N=[];for(let L=0;L<C;L++)N[L]=~T.g[L];return new o(N,~T.h).add(f)}n.abs=function(){return v(this)?S(this):this},n.add=function(T){const C=Math.max(this.g.length,T.g.length),N=[];let L=0;for(let R=0;R<=C;R++){let O=L+(this.i(R)&65535)+(T.i(R)&65535),j=(O>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);L=j>>>16,O&=65535,j&=65535,N[R]=j<<16|O}return new o(N,N[N.length-1]&-2147483648?-1:0)};function w(T,C){return T.add(S(C))}n.j=function(T){if(y(this)||y(T))return d;if(v(this))return v(T)?S(this).j(S(T)):S(S(this).j(T));if(v(T))return S(this.j(S(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const C=this.g.length+T.g.length,N=[];for(var L=0;L<2*C;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let R=0;R<T.g.length;R++){const O=this.i(L)>>>16,j=this.i(L)&65535,V=T.i(R)>>>16,$=T.i(R)&65535;N[2*L+2*R]+=j*$,_(N,2*L+2*R),N[2*L+2*R+1]+=O*$,_(N,2*L+2*R+1),N[2*L+2*R+1]+=j*V,_(N,2*L+2*R+1),N[2*L+2*R+2]+=O*V,_(N,2*L+2*R+2)}for(T=0;T<C;T++)N[T]=N[2*T+1]<<16|N[2*T];for(T=C;T<2*C;T++)N[T]=0;return new o(N,0)};function _(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function E(T,C){this.g=T,this.h=C}function I(T,C){if(y(C))throw Error("division by zero");if(y(T))return new E(d,d);if(v(T))return C=I(S(T),C),new E(S(C.g),S(C.h));if(v(C))return C=I(T,S(C)),new E(S(C.g),C.h);if(T.g.length>30){if(v(T)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var N=f,L=C;L.l(T)<=0;)N=D(N),L=D(L);var R=M(N,1),O=M(L,1);for(L=M(L,2),N=M(N,2);!y(L);){var j=O.add(L);j.l(T)<=0&&(R=R.add(N),O=j),L=M(L,1),N=M(N,1)}return C=w(T,R.j(C)),new E(R,C)}for(R=d;T.l(C)>=0;){for(N=Math.max(1,Math.floor(T.m()/C.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=u(N),j=O.j(C);v(j)||j.l(T)>0;)N-=L,O=u(N),j=O.j(C);y(O)&&(O=f),R=R.add(O),T=w(T,j)}return new E(R,T)}n.B=function(T){return I(this,T).h},n.and=function(T){const C=Math.max(this.g.length,T.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)&T.i(L);return new o(N,this.h&T.h)},n.or=function(T){const C=Math.max(this.g.length,T.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)|T.i(L);return new o(N,this.h|T.h)},n.xor=function(T){const C=Math.max(this.g.length,T.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)^T.i(L);return new o(N,this.h^T.h)};function D(T){const C=T.g.length+1,N=[];for(let L=0;L<C;L++)N[L]=T.i(L)<<1|T.i(L-1)>>>31;return new o(N,T.h)}function M(T,C){const N=C>>5;C%=32;const L=T.g.length-N,R=[];for(let O=0;O<L;O++)R[O]=C>0?T.i(O+N)>>>C|T.i(O+N+1)<<32-C:T.i(O+N);return new o(R,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,C4=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Au=o}).apply(typeof wL<"u"?wL:typeof self<"u"?self:typeof window<"u"?window:{});var Gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k4,xy,P4,Nx,YT,I4,R4,N4;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gb=="object"&&Gb];for(var x=0;x<m.length;++x){var P=m[x];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var s=t(this);function r(m,x){if(x)e:{var P=s;m=m.split(".");for(var F=0;F<m.length-1;F++){var z=m[F];if(!(z in P))break e;P=P[z]}m=m[m.length-1],F=P[m],x=x(F),x!=F&&x!=null&&e(P,m,{configurable:!0,writable:!0,value:x})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(x){var P=[],F;for(F in x)Object.prototype.hasOwnProperty.call(x,F)&&P.push([F,x[F]]);return P}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function l(m,x,P){return m.call.apply(m.bind,arguments)}function u(m,x,P){return u=l,u.apply(null,arguments)}function h(m,x){var P=Array.prototype.slice.call(arguments,1);return function(){var F=P.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function d(m,x){function P(){}P.prototype=x.prototype,m.Z=x.prototype,m.prototype=new P,m.prototype.constructor=m,m.Ob=function(F,z,H){for(var te=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)te[Oe-2]=arguments[Oe];return x.prototype[z].apply(F,te)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function g(m){const x=m.length;if(x>0){const P=Array(x);for(let F=0;F<x;F++)P[F]=m[F];return P}return[]}function y(m,x){for(let F=1;F<arguments.length;F++){const z=arguments[F];var P=typeof z;if(P=P!="object"?P:z?Array.isArray(z)?"array":P:"null",P=="array"||P=="object"&&typeof z.length=="number"){P=m.length||0;const H=z.length||0;m.length=P+H;for(let te=0;te<H;te++)m[P+te]=z[te]}else m.push(z)}}class v{constructor(x,P){this.i=x,this.j=P,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function S(m){o.setTimeout(()=>{throw m},0)}function w(){var m=T;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class _{constructor(){this.h=this.g=null}add(x,P){const F=E.get();F.set(x,P),this.h?this.h.next=F:this.g=F,this.h=F}}var E=new v(()=>new I,m=>m.reset());class I{constructor(){this.next=this.g=this.h=null}set(x,P){this.h=x,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,T=new _,C=()=>{const m=Promise.resolve(void 0);D=()=>{m.then(N)}};function N(){for(var m;m=w();){try{m.h.call(m.g)}catch(P){S(P)}var x=E;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}M=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const P=()=>{};o.addEventListener("test",P,x),o.removeEventListener("test",P,x)}catch{}return m}();function j(m){return/^[\s\xa0]*$/.test(m)}function V(m,x){R.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}d(V,R),V.prototype.init=function(m,x){const P=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(P=="mouseover"?x=m.fromElement:P=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),U=0;function W(m,x,P,F,z){this.listener=m,this.proxy=null,this.src=x,this.type=P,this.capture=!!F,this.ha=z,this.key=++U,this.da=this.fa=!1}function G(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function q(m,x,P){for(const F in m)x.call(P,m[F],F,m)}function ee(m,x){for(const P in m)x.call(void 0,m[P],P,m)}function ue(m){const x={};for(const P in m)x[P]=m[P];return x}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(m,x){let P,F;for(let z=1;z<arguments.length;z++){F=arguments[z];for(P in F)m[P]=F[P];for(let H=0;H<J.length;H++)P=J[H],Object.prototype.hasOwnProperty.call(F,P)&&(m[P]=F[P])}}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,x,P,F,z){const H=m.toString();m=this.g[H],m||(m=this.g[H]=[],this.h++);const te=Se(m,x,F,z);return te>-1?(x=m[te],P||(x.fa=!1)):(x=new W(x,this.src,H,!!F,z),x.fa=P,m.push(x)),x};function _e(m,x){const P=x.type;if(P in m.g){var F=m.g[P],z=Array.prototype.indexOf.call(F,x,void 0),H;(H=z>=0)&&Array.prototype.splice.call(F,z,1),H&&(G(x),m.g[P].length==0&&(delete m.g[P],m.h--))}}function Se(m,x,P,F){for(let z=0;z<m.length;++z){const H=m[z];if(!H.da&&H.listener==x&&H.capture==!!P&&H.ha==F)return z}return-1}var ie="closure_lm_"+(Math.random()*1e6|0),Xt={};function At(m,x,P,F,z){if(Array.isArray(x)){for(let H=0;H<x.length;H++)At(m,x[H],P,F,z);return null}return P=po(P),m&&m[$]?m.J(x,P,a(F)?!!F.capture:!1,z):Lt(m,x,P,!1,F,z)}function Lt(m,x,P,F,z,H){if(!x)throw Error("Invalid event type");const te=a(z)?!!z.capture:!!z;let Oe=Bt(m);if(Oe||(m[ie]=Oe=new pe(m)),P=Oe.add(x,P,F,te,H),P.proxy)return P;if(F=Ie(),P.proxy=F,F.src=m,F.listener=P,m.addEventListener)O||(z=te),z===void 0&&(z=!1),m.addEventListener(x.toString(),F,z);else if(m.attachEvent)m.attachEvent(Ke(x.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ie(){function m(P){return x.call(m.src,m.listener,P)}const x=ot;return m}function Dt(m,x,P,F,z){if(Array.isArray(x))for(var H=0;H<x.length;H++)Dt(m,x[H],P,F,z);else F=a(F)?!!F.capture:!!F,P=po(P),m&&m[$]?(m=m.i,H=String(x).toString(),H in m.g&&(x=m.g[H],P=Se(x,P,F,z),P>-1&&(G(x[P]),Array.prototype.splice.call(x,P,1),x.length==0&&(delete m.g[H],m.h--)))):m&&(m=Bt(m))&&(x=m.g[x.toString()],m=-1,x&&(m=Se(x,P,F,z)),(P=m>-1?x[m]:null)&&qe(P))}function qe(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[$])_e(x.i,m);else{var P=m.type,F=m.proxy;x.removeEventListener?x.removeEventListener(P,F,m.capture):x.detachEvent?x.detachEvent(Ke(P),F):x.addListener&&x.removeListener&&x.removeListener(F),(P=Bt(x))?(_e(P,m),P.h==0&&(P.src=null,x[ie]=null)):G(m)}}}function Ke(m){return m in Xt?Xt[m]:Xt[m]="on"+m}function ot(m,x){if(m.da)m=!0;else{x=new V(x,this);const P=m.listener,F=m.ha||m.src;m.fa&&qe(m),m=P.call(F,x)}return m}function Bt(m){return m=m[ie],m instanceof pe?m:null}var wt="__closure_events_fn_"+(Math.random()*1e9>>>0);function po(m){return typeof m=="function"?m:(m[wt]||(m[wt]=function(x){return m.handleEvent(x)}),m[wt])}function Tt(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}d(Tt,L),Tt.prototype[$]=!0,Tt.prototype.removeEventListener=function(m,x,P,F){Dt(this,m,x,P,F)};function ft(m,x){var P,F=m.G;if(F)for(P=[];F;F=F.G)P.push(F);if(m=m.M,F=x.type||x,typeof x=="string")x=new R(x,m);else if(x instanceof R)x.target=x.target||m;else{var z=x;x=new R(F,m),se(x,z)}z=!0;let H,te;if(P)for(te=P.length-1;te>=0;te--)H=x.g=P[te],z=Ts(H,F,!0,x)&&z;if(H=x.g=m,z=Ts(H,F,!0,x)&&z,z=Ts(H,F,!1,x)&&z,P)for(te=0;te<P.length;te++)H=x.g=P[te],z=Ts(H,F,!1,x)&&z}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const P=m.g[x];for(let F=0;F<P.length;F++)G(P[F]);delete m.g[x],m.h--}}this.G=null},Tt.prototype.J=function(m,x,P,F){return this.i.add(String(m),x,!1,P,F)},Tt.prototype.K=function(m,x,P,F){return this.i.add(String(m),x,!0,P,F)};function Ts(m,x,P,F){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let z=!0;for(let H=0;H<x.length;++H){const te=x[H];if(te&&!te.da&&te.capture==P){const Oe=te.listener,An=te.ha||te.src;te.fa&&_e(m.i,te),z=Oe.call(An,F)!==!1&&z}}return z&&!F.defaultPrevented}function Jr(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=u(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:o.setTimeout(m,x||0)}function Re(m){m.g=Jr(()=>{m.g=null,m.i&&(m.i=!1,Re(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class Ut extends L{constructor(x,P){super(),this.m=x,this.l=P,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(m){L.call(this),this.h=m,this.g={}}d(an,L);var mn=[];function Pi(m){q(m.g,function(x,P){this.g.hasOwnProperty(P)&&qe(x)},m),m.g={}}an.prototype.N=function(){an.Z.N.call(this),Pi(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hs=o.JSON.stringify,mo=o.JSON.parse,Cs=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Fl(){}function Ng(){}var xa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function go(){R.call(this,"d")}d(go,R);function hf(){R.call(this,"c")}d(hf,R);var Ws={},hb=null;function df(){return hb=hb||new Tt}Ws.Ia="serverreachability";function Lg(m){R.call(this,Ws.Ia,m)}d(Lg,R);function Vl(m){const x=df();ft(x,new Lg(x))}Ws.STAT_EVENT="statevent";function db(m,x){R.call(this,Ws.STAT_EVENT,m),this.stat=x}d(db,R);function Sn(m){const x=df();ft(x,new db(x,m))}Ws.Ja="timingevent";function Ii(m,x){R.call(this,Ws.Ja,m),this.size=x}d(Ii,R);function Ku(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},x)}function we(){this.g=!0}we.prototype.ua=function(){this.g=!1};function Ze(m,x,P,F,z,H){m.info(function(){if(m.g)if(H){var te="",Oe=H.split("&");for(let pt=0;pt<Oe.length;pt++){var An=Oe[pt].split("=");if(An.length>1){const Mn=An[0];An=An[1];const wo=Mn.split("_");te=wo.length>=2&&wo[1]=="type"?te+(Mn+"="+An+"&"):te+(Mn+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+F+") [attempt "+z+"]: "+x+`
`+P+`
`+te})}function bt(m,x,P,F,z,H,te){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+z+"]: "+x+`
`+P+`
`+H+" "+te})}function Dn(m,x,P,F){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+yo(m,P)+(F?" "+F:"")})}function mr(m,x){m.info(function(){return"TIMEOUT: "+x})}we.prototype.info=function(){};function yo(m,x){if(!m.g)return x;if(!x)return null;try{const H=JSON.parse(x);if(H){for(m=0;m<H.length;m++)if(Array.isArray(H[m])){var P=H[m];if(!(P.length<2)){var F=P[1];if(Array.isArray(F)&&!(F.length<1)){var z=F[0];if(z!="noop"&&z!="stop"&&z!="close")for(let te=1;te<F.length;te++)F[te]=""}}}}return Hs(H)}catch{return x}}var Zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ri;function oS(){}d(oS,Fl),oS.prototype.g=function(){return new XMLHttpRequest},Ri=new oS;function Dg(m){return encodeURIComponent(String(m))}function fB(m){var x=1;m=m.split(":");const P=[];for(;x>0&&m.length;)P.push(m.shift()),x--;return m.length&&P.push(m.join(":")),P}function Bl(m,x,P,F){this.j=m,this.i=x,this.l=P,this.S=F||1,this.V=new an(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _R}function _R(){this.i=null,this.g="",this.h=!1}var ER={},aS={};function lS(m,x,P){m.M=1,m.A=pb(vo(x)),m.u=P,m.R=!0,SR(m,null)}function SR(m,x){m.F=Date.now(),fb(m),m.B=vo(m.A);var P=m.B,F=m.S;Array.isArray(F)||(F=[String(F)]),jR(P.i,"t",F),m.C=0,P=m.j.L,m.h=new _R,m.g=t2(m.j,P?x:null,!m.u),m.P>0&&(m.O=new Ut(u(m.Y,m,m.g),m.P)),x=m.V,P=m.g,F=m.ba;var z="readystatechange";Array.isArray(z)||(z&&(mn[0]=z.toString()),z=mn);for(let H=0;H<z.length;H++){const te=At(P,z[H],F||x.handleEvent,!1,x.h||x);if(!te)break;x.g[te.key]=te}x=m.J?ue(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),Vl(),Ze(m.i,m.v,m.B,m.l,m.S,m.u)}Bl.prototype.ba=function(m){m=m.target;const x=this.O;x&&$l(m)==3?x.j():this.Y(m)},Bl.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=$l(this.g),An=this.g.ya(),pt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||HR(this.g)))){this.K||Oe!=4||An==7||(An==8||pt<=0?Vl(3):Vl(2)),cS(this);var x=this.g.ca();this.X=x;var P=pB(this);if(this.o=x==200,bt(this.i,this.v,this.B,this.l,this.S,Oe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var F,z=this.g;if((F=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(F)){var H=F;break t}}H=null}if(m=H)Dn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,uS(this,m);else{this.o=!1,this.m=3,Sn(12),Yu(this),Mg(this);break e}}if(this.R){m=!0;let Mn;for(;!this.K&&this.C<P.length;)if(Mn=mB(this,P),Mn==aS){Oe==4&&(this.m=4,Sn(14),m=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==ER){this.m=4,Sn(15),Dn(this.i,this.l,P,"[Invalid Chunk]"),m=!1;break}else Dn(this.i,this.l,Mn,null),uS(this,Mn);if(AR(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||P.length!=0||this.h.h||(this.m=1,Sn(16),m=!1),this.o=this.o&&m,!m)Dn(this.i,this.l,P,"[Invalid Chunked Response]"),Yu(this),Mg(this);else if(P.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),vS(te),te.P=!0,Sn(11))}}else Dn(this.i,this.l,P,null),uS(this,P);Oe==4&&Yu(this),this.o&&!this.K&&(Oe==4?QR(this.j,this):(this.o=!1,fb(this)))}else PB(this.g),x==400&&P.indexOf("Unknown SID")>0?(this.m=3,Sn(12)):(this.m=0,Sn(13)),Yu(this),Mg(this)}}}catch{}finally{}};function pB(m){if(!AR(m))return m.g.la();const x=HR(m.g);if(x==="")return"";let P="";const F=x.length,z=$l(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Yu(m),Mg(m),"";m.h.i=new o.TextDecoder}for(let H=0;H<F;H++)m.h.h=!0,P+=m.h.i.decode(x[H],{stream:!(z&&H==F-1)});return x.length=0,m.h.g+=P,m.C=0,m.h.g}function AR(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mB(m,x){var P=m.C,F=x.indexOf(`
`,P);return F==-1?aS:(P=Number(x.substring(P,F)),isNaN(P)?ER:(F+=1,F+P>x.length?aS:(x=x.slice(F,F+P),m.C=F+P,x)))}Bl.prototype.cancel=function(){this.K=!0,Yu(this)};function fb(m){m.T=Date.now()+m.H,TR(m,m.H)}function TR(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ku(u(m.aa,m),x)}function cS(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Bl.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(mr(this.i,this.B),this.M!=2&&(Vl(),Sn(17)),Yu(this),this.m=2,Mg(this)):TR(this,this.T-m)};function Mg(m){m.j.I==0||m.K||QR(m.j,m)}function Yu(m){cS(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,Pi(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function uS(m,x){try{var P=m.j;if(P.I!=0&&(P.g==m||hS(P.h,m))){if(!m.L&&hS(P.h,m)&&P.I==3){try{var F=P.Ba.g.parse(x)}catch{F=null}if(Array.isArray(F)&&F.length==3){var z=F;if(z[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<m.F)wb(P),yb(P);else break e;yS(P),Sn(18)}}else P.xa=z[1],0<P.xa-P.K&&z[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=Ku(u(P.Va,P),6e3));PR(P.h)<=1&&P.ta&&(P.ta=void 0)}else Qu(P,11)}else if((m.L||P.g==m)&&wb(P),!j(x))for(z=P.Ba.g.parse(x),x=0;x<z.length;x++){let pt=z[x];const Mn=pt[0];if(!(Mn<=P.K))if(P.K=Mn,pt=pt[1],P.I==2)if(pt[0]=="c"){P.M=pt[1],P.ba=pt[2];const wo=pt[3];wo!=null&&(P.ka=wo,P.j.info("VER="+P.ka));const Ju=pt[4];Ju!=null&&(P.za=Ju,P.j.info("SVER="+P.za));const Hl=pt[5];Hl!=null&&typeof Hl=="number"&&Hl>0&&(F=1.5*Hl,P.O=F,P.j.info("backChannelRequestTimeoutMs_="+F)),F=P;const Wl=m.g;if(Wl){const xb=Wl.g?Wl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xb){var H=F.h;H.g||xb.indexOf("spdy")==-1&&xb.indexOf("quic")==-1&&xb.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(dS(H,H.h),H.h=null))}if(F.G){const wS=Wl.g?Wl.g.getResponseHeader("X-HTTP-Session-Id"):null;wS&&(F.wa=wS,Ct(F.J,F.G,wS))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-m.F,P.j.info("Handshake RTT: "+P.T+"ms")),F=P;var te=m;if(F.na=e2(F,F.L?F.ba:null,F.W),te.L){IR(F.h,te);var Oe=te,An=F.O;An&&(Oe.H=An),Oe.D&&(cS(Oe),fb(Oe)),F.g=te}else YR(F);P.i.length>0&&vb(P)}else pt[0]!="stop"&&pt[0]!="close"||Qu(P,7);else P.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Qu(P,7):gS(P):pt[0]!="noop"&&P.l&&P.l.qa(pt),P.A=0)}}Vl(4)}catch{}}var gB=class{constructor(m,x){this.g=m,this.map=x}};function CR(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kR(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function PR(m){return m.h?1:m.g?m.g.size:0}function hS(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function dS(m,x){m.g?m.g.add(x):m.h=x}function IR(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}CR.prototype.cancel=function(){if(this.i=RR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function RR(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const P of m.g.values())x=x.concat(P.G);return x}return g(m.i)}var NR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yB(m,x){if(m){m=m.split("&");for(let P=0;P<m.length;P++){const F=m[P].indexOf("=");let z,H=null;F>=0?(z=m[P].substring(0,F),H=m[P].substring(F+1)):z=m[P],x(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ul(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof Ul?(this.l=m.l,Og(this,m.j),this.o=m.o,this.g=m.g,jg(this,m.u),this.h=m.h,fS(this,FR(m.i)),this.m=m.m):m&&(x=String(m).match(NR))?(this.l=!1,Og(this,x[1]||"",!0),this.o=Fg(x[2]||""),this.g=Fg(x[3]||"",!0),jg(this,x[4]),this.h=Fg(x[5]||"",!0),fS(this,x[6]||"",!0),this.m=Fg(x[7]||"")):(this.l=!1,this.i=new Bg(null,this.l))}Ul.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(Vg(x,LR,!0),":");var P=this.g;return(P||x=="file")&&(m.push("//"),(x=this.o)&&m.push(Vg(x,LR,!0),"@"),m.push(Dg(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&m.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&m.push("/"),m.push(Vg(P,P.charAt(0)=="/"?bB:wB,!0))),(P=this.i.toString())&&m.push("?",P),(P=this.m)&&m.push("#",Vg(P,_B)),m.join("")},Ul.prototype.resolve=function(m){const x=vo(this);let P=!!m.j;P?Og(x,m.j):P=!!m.o,P?x.o=m.o:P=!!m.g,P?x.g=m.g:P=m.u!=null;var F=m.h;if(P)jg(x,m.u);else if(P=!!m.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var z=x.h.lastIndexOf("/");z!=-1&&(F=x.h.slice(0,z+1)+F)}if(z=F,z==".."||z==".")F="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){F=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let te=0;te<z.length;){const Oe=z[te++];Oe=="."?F&&te==z.length&&H.push(""):Oe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),F&&te==z.length&&H.push("")):(H.push(Oe),F=!0)}F=H.join("/")}else F=z}return P?x.h=F:P=m.i.toString()!=="",P?fS(x,FR(m.i)):P=!!m.m,P&&(x.m=m.m),x};function vo(m){return new Ul(m)}function Og(m,x,P){m.j=P?Fg(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function jg(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function fS(m,x,P){x instanceof Bg?(m.i=x,EB(m.i,m.l)):(P||(x=Vg(x,xB)),m.i=new Bg(x,m.l))}function Ct(m,x,P){m.i.set(x,P)}function pb(m){return Ct(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Fg(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Vg(m,x,P){return typeof m=="string"?(m=encodeURI(m).replace(x,vB),P&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vB(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var LR=/[#\/\?@]/g,wB=/[#\?:]/g,bB=/[#\?]/g,xB=/[#\?@]/g,_B=/#/g;function Bg(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Xu(m){m.g||(m.g=new Map,m.h=0,m.i&&yB(m.i,function(x,P){m.add(decodeURIComponent(x.replace(/\+/g," ")),P)}))}n=Bg.prototype,n.add=function(m,x){Xu(this),this.i=null,m=ff(this,m);let P=this.g.get(m);return P||this.g.set(m,P=[]),P.push(x),this.h+=1,this};function DR(m,x){Xu(m),x=ff(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function MR(m,x){return Xu(m),x=ff(m,x),m.g.has(x)}n.forEach=function(m,x){Xu(this),this.g.forEach(function(P,F){P.forEach(function(z){m.call(x,z,F,this)},this)},this)};function OR(m,x){Xu(m);let P=[];if(typeof x=="string")MR(m,x)&&(P=P.concat(m.g.get(ff(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)P=P.concat(m[x]);return P}n.set=function(m,x){return Xu(this),this.i=null,m=ff(this,m),MR(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},n.get=function(m,x){return m?(m=OR(this,m),m.length>0?String(m[0]):x):x};function jR(m,x,P){DR(m,x),P.length>0&&(m.i=null,m.g.set(ff(m,x),g(P)),m.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let F=0;F<x.length;F++){var P=x[F];const z=Dg(P);P=OR(this,P);for(let H=0;H<P.length;H++){let te=z;P[H]!==""&&(te+="="+Dg(P[H])),m.push(te)}}return this.i=m.join("&")};function FR(m){const x=new Bg;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function ff(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function EB(m,x){x&&!m.j&&(Xu(m),m.i=null,m.g.forEach(function(P,F){const z=F.toLowerCase();F!=z&&(DR(this,F),jR(this,z,P))},m)),m.j=x}function SB(m,x){const P=new we;if(o.Image){const F=new Image;F.onload=h(zl,P,"TestLoadImage: loaded",!0,x,F),F.onerror=h(zl,P,"TestLoadImage: error",!1,x,F),F.onabort=h(zl,P,"TestLoadImage: abort",!1,x,F),F.ontimeout=h(zl,P,"TestLoadImage: timeout",!1,x,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else x(!1)}function AB(m,x){const P=new we,F=new AbortController,z=setTimeout(()=>{F.abort(),zl(P,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:F.signal}).then(H=>{clearTimeout(z),H.ok?zl(P,"TestPingServer: ok",!0,x):zl(P,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(z),zl(P,"TestPingServer: error",!1,x)})}function zl(m,x,P,F,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),F(P)}catch{}}function TB(){this.g=new Cs}function pS(m){this.i=m.Sb||null,this.h=m.ab||!1}d(pS,Fl),pS.prototype.g=function(){return new mb(this.i,this.h)};function mb(m,x){Tt.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(mb,Tt),n=mb.prototype,n.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,zg(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||o).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ug(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zg(this)),this.g&&(this.readyState=3,zg(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;VR(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function VR(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Ug(this):zg(this),this.readyState==3&&VR(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ug(this))},n.Na=function(m){this.g&&(this.response=m,Ug(this))},n.ga=function(){this.g&&Ug(this)};function Ug(m){m.readyState=4,m.l=null,m.j=null,m.B=null,zg(m)}n.setRequestHeader=function(m,x){this.A.append(m,x)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var P=x.next();!P.done;)P=P.value,m.push(P[0]+": "+P[1]),P=x.next();return m.join(`\r
`)};function zg(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(mb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function BR(m){let x="";return q(m,function(P,F){x+=F,x+=":",x+=P,x+=`\r
`}),x}function mS(m,x,P){e:{for(F in P){var F=!1;break e}F=!0}F||(P=BR(P),typeof m=="string"?P!=null&&Dg(P):Ct(m,x,P))}function Qt(m){Tt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Qt,Tt);var CB=/^https?$/i,kB=["POST","PUT"];n=Qt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,x,P,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ri.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(H){UR(this,H);return}if(m=P||"",P=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var z in F)P.set(z,F[z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const H of F.keys())P.set(H,F.get(H));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(P.keys()).find(H=>H.toLowerCase()=="content-type"),z=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(kB,x,void 0)>=0)||F||z||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of P)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(H){UR(this,H)}};function UR(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,zR(m),gb(m)}function zR(m){m.A||(m.A=!0,ft(m,"complete"),ft(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ft(this,"complete"),ft(this,"abort"),gb(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gb(this,!0)),Qt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$R(this):this.Xa())},n.Xa=function(){$R(this)};function $R(m){if(m.h&&typeof i<"u"){if(m.v&&$l(m)==4)setTimeout(m.Ca.bind(m),0);else if(ft(m,"readystatechange"),$l(m)==4){m.h=!1;try{const H=m.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var P;if(!(P=x)){var F;if(F=H===0){let te=String(m.D).match(NR)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),F=!CB.test(te?te.toLowerCase():"")}P=F}if(P)ft(m,"complete"),ft(m,"success");else{m.o=6;try{var z=$l(m)>2?m.g.statusText:""}catch{z=""}m.l=z+" ["+m.ca()+"]",zR(m)}}finally{gb(m)}}}}function gb(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const P=m.g;m.g=null,x||ft(m,"ready");try{P.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $l(m){return m.g?m.g.readyState:0}n.ca=function(){try{return $l(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),mo(x)}};function HR(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function PB(m){const x={};m=(m.g&&$l(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(j(m[F]))continue;var P=fB(m[F]);const z=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const H=x[z]||[];x[z]=H,H.push(P)}ee(x,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $g(m,x,P){return P&&P.internalChannelParams&&P.internalChannelParams[m]||x}function WR(m){this.za=0,this.i=[],this.j=new we,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$g("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$g("baseRetryDelayMs",5e3,m),this.Za=$g("retryDelaySeedMs",1e4,m),this.Ta=$g("forwardChannelMaxRetries",2,m),this.va=$g("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new CR(m&&m.concurrentRequestLimit),this.Ba=new TB,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=WR.prototype,n.ka=8,n.I=1,n.connect=function(m,x,P,F){Sn(0),this.W=m,this.H=x||{},P&&F!==void 0&&(this.H.OSID=P,this.H.OAID=F),this.F=this.X,this.J=e2(this,null,this.W),vb(this)};function gS(m){if(GR(m),m.I==3){var x=m.V++,P=vo(m.J);if(Ct(P,"SID",m.M),Ct(P,"RID",x),Ct(P,"TYPE","terminate"),Hg(m,P),x=new Bl(m,m.j,x),x.M=2,x.A=pb(vo(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(x.A.toString(),"")}catch{}!P&&o.Image&&(new Image().src=x.A,P=!0),P||(x.g=t2(x.j,null),x.g.ea(x.A)),x.F=Date.now(),fb(x)}ZR(m)}function yb(m){m.g&&(vS(m),m.g.cancel(),m.g=null)}function GR(m){yb(m),m.v&&(o.clearTimeout(m.v),m.v=null),wb(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function vb(m){if(!kR(m.h)&&!m.m){m.m=!0;var x=m.Ea;D||C(),M||(D(),M=!0),T.add(x,m),m.D=0}}function IB(m,x){return PR(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ku(u(m.Ea,m,x),JR(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const z=new Bl(this,this.j,m);let H=this.o;if(this.U&&(H?(H=ue(H),se(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var x=0,P=0;P<this.i.length;P++){t:{var F=this.i[P];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(x+=F,x>4096){x=P;break e}if(x===4096||P===this.i.length-1){x=P+1;break e}}x=1e3}else x=1e3;x=KR(this,z,x),P=vo(this.J),Ct(P,"RID",m),Ct(P,"CVER",22),this.G&&Ct(P,"X-HTTP-Session-Id",this.G),Hg(this,P),H&&(this.R?x="headers="+Dg(BR(H))+"&"+x:this.u&&mS(P,this.u,H)),dS(this.h,z),this.Ra&&Ct(P,"TYPE","init"),this.S?(Ct(P,"$req",x),Ct(P,"SID","null"),z.U=!0,lS(z,P,null)):lS(z,P,x),this.I=2}}else this.I==3&&(m?qR(this,m):this.i.length==0||kR(this.h)||qR(this))};function qR(m,x){var P;x?P=x.l:P=m.V++;const F=vo(m.J);Ct(F,"SID",m.M),Ct(F,"RID",P),Ct(F,"AID",m.K),Hg(m,F),m.u&&m.o&&mS(F,m.u,m.o),P=new Bl(m,m.j,P,m.D+1),m.u===null&&(P.J=m.o),x&&(m.i=x.G.concat(m.i)),x=KR(m,P,1e3),P.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),dS(m.h,P),lS(P,F,x)}function Hg(m,x){m.H&&q(m.H,function(P,F){Ct(x,F,P)}),m.l&&q({},function(P,F){Ct(x,F,P)})}function KR(m,x,P){P=Math.min(m.i.length,P);const F=m.l?u(m.l.Ka,m.l,m):null;e:{var z=m.i;let Oe=-1;for(;;){const An=["count="+P];Oe==-1?P>0?(Oe=z[0].g,An.push("ofs="+Oe)):Oe=0:An.push("ofs="+Oe);let pt=!0;for(let Mn=0;Mn<P;Mn++){var H=z[Mn].g;const wo=z[Mn].map;if(H-=Oe,H<0)Oe=Math.max(0,z[Mn].g-100),pt=!1;else try{H="req"+H+"_"||"";try{var te=wo instanceof Map?wo:Object.entries(wo);for(const[Ju,Hl]of te){let Wl=Hl;a(Hl)&&(Wl=Hs(Hl)),An.push(H+Ju+"="+encodeURIComponent(Wl))}}catch(Ju){throw An.push(H+"type="+encodeURIComponent("_badmap")),Ju}}catch{F&&F(wo)}}if(pt){te=An.join("&");break e}}te=void 0}return m=m.i.splice(0,P),x.G=m,te}function YR(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;D||C(),M||(D(),M=!0),T.add(x,m),m.A=0}}function yS(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ku(u(m.Da,m),JR(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,XR(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ku(u(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Sn(10),yb(this),XR(this))};function vS(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function XR(m){m.g=new Bl(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=vo(m.na);Ct(x,"RID","rpc"),Ct(x,"SID",m.M),Ct(x,"AID",m.K),Ct(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ct(x,"TO",m.ia),Ct(x,"TYPE","xmlhttp"),Hg(m,x),m.u&&m.o&&mS(x,m.u,m.o),m.O&&(m.g.H=m.O);var P=m.g;m=m.ba,P.M=1,P.A=pb(vo(x)),P.u=null,P.R=!0,SR(P,m)}n.Va=function(){this.C!=null&&(this.C=null,yb(this),yS(this),Sn(19))};function wb(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function QR(m,x){var P=null;if(m.g==x){wb(m),vS(m),m.g=null;var F=2}else if(hS(m.h,x))P=x.G,IR(m.h,x),F=1;else return;if(m.I!=0){if(x.o)if(F==1){P=x.u?x.u.length:0,x=Date.now()-x.F;var z=m.D;F=df(),ft(F,new Ii(F,P)),vb(m)}else YR(m);else if(z=x.m,z==3||z==0&&x.X>0||!(F==1&&IB(m,x)||F==2&&yS(m)))switch(P&&P.length>0&&(x=m.h,x.i=x.i.concat(P)),z){case 1:Qu(m,5);break;case 4:Qu(m,10);break;case 3:Qu(m,6);break;default:Qu(m,2)}}}function JR(m,x){let P=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(P*=2),P*x}function Qu(m,x){if(m.j.info("Error code "+x),x==2){var P=u(m.bb,m),F=m.Ua;const z=!F;F=new Ul(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Og(F,"https"),pb(F),z?SB(F.toString(),P):AB(F.toString(),P)}else Sn(2);m.I=0,m.l&&m.l.pa(x),ZR(m),GR(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function ZR(m){if(m.I=0,m.ja=[],m.l){const x=RR(m.h);(x.length!=0||m.i.length!=0)&&(y(m.ja,x),y(m.ja,m.i),m.h.i.length=0,g(m.i),m.i.length=0),m.l.oa()}}function e2(m,x,P){var F=P instanceof Ul?vo(P):new Ul(P);if(F.g!="")x&&(F.g=x+"."+F.g),jg(F,F.u);else{var z=o.location;F=z.protocol,x=x?x+"."+z.hostname:z.hostname,z=+z.port;const H=new Ul(null);F&&Og(H,F),x&&(H.g=x),z&&jg(H,z),P&&(H.h=P),F=H}return P=m.G,x=m.wa,P&&x&&Ct(F,P,x),Ct(F,"VER",m.ka),Hg(m,F),F}function t2(m,x,P){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new Qt(new pS({ab:P})):new Qt(m.ma),x.Fa(m.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function n2(){}n=n2.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function bb(){}bb.prototype.g=function(m,x){return new gr(m,x)};function gr(m,x){Tt.call(this),this.g=new WR(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!j(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new pf(this)}d(gr,Tt),gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){gS(this.g)},gr.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var P={};P.__data__=m,m=P}else this.v&&(P={},P.__data__=Hs(m),m=P);x.i.push(new gB(x.Ya++,m)),x.I==3&&vb(x)},gr.prototype.N=function(){this.g.l=null,delete this.j,gS(this.g),delete this.g,gr.Z.N.call(this)};function s2(m){go.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const P in x){m=P;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}d(s2,go);function r2(){hf.call(this),this.status=1}d(r2,hf);function pf(m){this.g=m}d(pf,n2),pf.prototype.ra=function(){ft(this.g,"a")},pf.prototype.qa=function(m){ft(this.g,new s2(m))},pf.prototype.pa=function(m){ft(this.g,new r2)},pf.prototype.oa=function(){ft(this.g,"b")},bb.prototype.createWebChannel=bb.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,N4=function(){return new bb},R4=function(){return df()},I4=Ws,YT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,Nx=Zr,Gs.COMPLETE="complete",P4=Gs,Ng.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,xy=Ng,Qt.prototype.listenOnce=Qt.prototype.K,Qt.prototype.getLastError=Qt.prototype.Ha,Qt.prototype.getLastErrorCode=Qt.prototype.ya,Qt.prototype.getStatus=Qt.prototype.ca,Qt.prototype.getResponseJson=Qt.prototype.La,Qt.prototype.getResponseText=Qt.prototype.la,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Fa,k4=Qt}).apply(typeof Gb<"u"?Gb:typeof self<"u"?self:typeof window<"u"?window:{});const bL="@firebase/firestore",xL="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new ZP("@firebase/firestore");function xf(){return Yd.logLevel}function oe(n,...e){if(Yd.logLevel<=Ue.DEBUG){const t=e.map(uI);Yd.debug(`Firestore (${Eg}): ${n}`,...t)}}function Il(n,...e){if(Yd.logLevel<=Ue.ERROR){const t=e.map(uI);Yd.error(`Firestore (${Eg}): ${n}`,...t)}}function ag(n,...e){if(Yd.logLevel<=Ue.WARN){const t=e.map(uI);Yd.warn(`Firestore (${Eg}): ${n}`,...t)}}function uI(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,L4(n,s,t)}function L4(n,e,t){let s=`FIRESTORE (${Eg}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Il(s),new Error(s)}function tt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||L4(e,r,s)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends va{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bs.UNAUTHENTICATED))}shutdown(){}}class bq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xq{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,t(l)):Promise.resolve();let i=new bl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bl,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string",31837,{l:s}),new D4(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new bs(e)}}class _q{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Eq{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new _q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _L{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sq{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const s=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _L(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _L(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Aq(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function $e(n,e){return n<e?-1:n>e?1:0}function XT(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return dA(r)===dA(i)?$e(r,i):dA(r)?1:-1}return $e(n.length,e.length)}const Tq=55296,Cq=57343;function dA(n){const e=n.charCodeAt(0);return e>=Tq&&e<=Cq}function lg(n,e,t){return n.length===e.length&&n.every((s,r)=>t(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="__name__";class Co{constructor(e,t,s){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&xe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Co.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Co?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=Co.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return $e(e.length,t.length)}static compareSegments(e,t){const s=Co.isNumericId(e),r=Co.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Co.extractNumericId(e).compare(Co.extractNumericId(t)):XT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Au.fromString(e.substring(4,e.length-2))}}class _t extends Co{construct(e,t,s){return new _t(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(r=>r.length>0))}return new _t(t)}static emptyPath(){return new _t([])}}const kq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rs extends Co{construct(e,t,s){return new rs(e,t,s)}static isValidIdentifier(e){return kq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EL}static keyField(){return new rs([EL])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rs(t)}static emptyPath(){return new rs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(_t.fromString(e))}static fromName(e){return new me(_t.fromString(e).popFirst(5))}static empty(){return new me(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n,e,t){if(!t)throw new re(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Pq(n,e,t,s){if(e===!0&&s===!0)throw new re(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SL(n){if(!me.isDocumentKey(n))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AL(n){if(me.isDocumentKey(n))throw new re(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function O4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function RE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function lo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RE(n);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gw(n,e){if(!O4(n))throw new re(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new re(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=-62135596800,CL=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*CL);return new Rt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TL)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CL}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gw(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:xn("string",Rt._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Rt(0,0))}static max(){return new Ee(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=-1;function Iq(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(s===1e9?new Rt(t+1,0):new Rt(t,s));return new Ru(r,me.empty(),e)}function Rq(n){return new Ru(n.readTime,n.key,O0)}class Ru{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ru(Ee.min(),me.empty(),O0)}static max(){return new Ru(Ee.max(),me.empty(),O0)}}function Nq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sg(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==Lq)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,s)=>{t(e)})}static reject(e){return new Y((t,s)=>{s(e)})}static waitFor(e){return new Y((t,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&t()},l=>s(l))}),o=!0,i===r&&t()})}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next(r=>r?Y.resolve(r):s());return t}static forEach(e,t){const s=[];return e.forEach((r,i)=>{s.push(t.call(this,r,i))}),this.waitFor(s)}static mapArray(e,t){return new Y((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,t){return new Y((s,r)=>{const i=()=>{e()===!0?t().next(()=>{i()},r):s()};i()})}}function Mq(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ag(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}NE.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=-1;function LE(n){return n==null}function a1(n){return n===0&&1/n==-1/0}function Oq(n){return typeof n=="number"&&Number.isInteger(n)&&!a1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="";function jq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kL(e)),e=Fq(n.get(t),e);return kL(e)}function Fq(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case j4:t+="";break;default:t+=i}}return t}function kL(n){return n+j4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function F4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||ts.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qb(this.root,e,this.comparator,!1)}getReverseIterator(){return new qb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qb(this.root,e,this.comparator,!0)}}class qb{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??ts.RED,this.left=r??ts.EMPTY,this.right=i??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new ts(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ts.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1;ts.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new ts(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IL(this.data.getIterator())}getIteratorFrom(e){return new IL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class IL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.fields=e,e.sort(rs.comparator)}static empty(){return new Hr([])}unionWith(e){let t=new Ln(rs.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lg(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new V4("Invalid base64 string: "+i):i}}(e);return new ls(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ls.EMPTY_BYTE_STRING=new ls("");const Vq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nu(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=Vq.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:hn(n.seconds),nanos:hn(n.nanos)}}function hn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lu(n){return typeof n=="string"?ls.fromBase64String(n):ls.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="server_timestamp",U4="__type__",z4="__previous_value__",$4="__local_write_time__";function fI(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[U4])==null?void 0:s.stringValue)===B4}function DE(n){const e=n.mapValue.fields[z4];return fI(e)?DE(e):e}function j0(n){const e=Nu(n.mapValue.fields[$4].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,t,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const l1="(default)";class F0{constructor(e,t){this.projectId=e,this.database=t||l1}static empty(){return new F0("","")}get isDefaultDatabase(){return this.database===l1}isEqual(e){return e instanceof F0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="__type__",Uq="__max__",Kb={mapValue:{}},W4="__vector__",c1="value";function Du(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fI(n)?4:$q(n)?9007199254740991:zq(n)?10:11:xe(28295,{value:n})}function pa(n,e){if(n===e)return!0;const t=Du(n);if(t!==Du(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return j0(n).isEqual(j0(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Nu(r.timestampValue),a=Nu(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,i){return Lu(r.bytesValue).isEqual(Lu(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hn(r.geoPointValue.latitude)===hn(i.geoPointValue.latitude)&&hn(r.geoPointValue.longitude)===hn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hn(r.integerValue)===hn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=hn(r.doubleValue),a=hn(i.doubleValue);return o===a?a1(o)===a1(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return lg(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(PL(o)!==PL(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pa(o[l],a[l])))return!1;return!0}(n,e);default:return xe(52216,{left:n})}}function V0(n,e){return(n.values||[]).find(t=>pa(t,e))!==void 0}function cg(n,e){if(n===e)return 0;const t=Du(n),s=Du(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=hn(i.integerValue||i.doubleValue),l=hn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return RL(n.timestampValue,e.timestampValue);case 4:return RL(j0(n),j0(e));case 5:return XT(n.stringValue,e.stringValue);case 6:return function(i,o){const a=Lu(i),l=Lu(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=$e(a[u],l[u]);if(h!==0)return h}return $e(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=$e(hn(i.latitude),hn(o.latitude));return a!==0?a:$e(hn(i.longitude),hn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NL(n.arrayValue,e.arrayValue);case 10:return function(i,o){var f,g,y,v;const a=i.fields||{},l=o.fields||{},u=(f=a[c1])==null?void 0:f.arrayValue,h=(g=l[c1])==null?void 0:g.arrayValue,d=$e(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return d!==0?d:NL(u,h)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Kb.mapValue&&o===Kb.mapValue)return 0;if(i===Kb.mapValue)return 1;if(o===Kb.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=XT(l[d],h[d]);if(f!==0)return f;const g=cg(a[l[d]],u[h[d]]);if(g!==0)return g}return $e(l.length,h.length)}(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function RL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);const t=Nu(n),s=Nu(e),r=$e(t.seconds,s.seconds);return r!==0?r:$e(t.nanos,s.nanos)}function NL(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=cg(t[r],s[r]);if(i)return i}return $e(t.length,s.length)}function ug(n){return QT(n)}function QT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Nu(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lu(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=QT(i);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${QT(t.fields[o])}`;return r+"}"}(n.mapValue):xe(61005,{value:n})}function Lx(n){switch(Du(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=DE(n);return e?16+Lx(e):16;case 5:return 2*n.stringValue.length;case 6:return Lu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Lx(i),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return Gu(s.fields,(i,o)=>{r+=i.length+Lx(o)}),r}(n.mapValue);default:throw xe(13486,{value:n})}}function LL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function JT(n){return!!n&&"integerValue"in n}function pI(n){return!!n&&"arrayValue"in n}function DL(n){return!!n&&"nullValue"in n}function ML(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dx(n){return!!n&&"mapValue"in n}function zq(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[H4])==null?void 0:s.stringValue)===W4}function i0(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gu(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=i0(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=i0(n.arrayValue.values[t]);return e}return{...n}}function $q(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Uq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Dx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=i0(t)}setAll(e){let t=rs.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=i0(o):r.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());Dx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Dx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){Gu(t,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new or(i0(this.value))}}function G4(n){const e=[];return Gu(n.fields,(t,s)=>{const r=new rs([t]);if(Dx(s)){const i=G4(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _s(e,0,Ee.min(),Ee.min(),Ee.min(),or.empty(),0)}static newFoundDocument(e,t,s,r){return new _s(e,1,t,Ee.min(),s,r,0)}static newNoDocument(e,t){return new _s(e,2,t,Ee.min(),Ee.min(),or.empty(),0)}static newUnknownDocument(e,t){return new _s(e,3,t,Ee.min(),Ee.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _s&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.position=e,this.inclusive=t}}function OL(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=me.comparator(me.fromName(o.referenceValue),t.key):s=cg(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function jL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{}class bn extends q4{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Gq(e,t,s):t==="array-contains"?new Yq(e,s):t==="in"?new Xq(e,s):t==="not-in"?new Qq(e,s):t==="array-contains-any"?new Jq(e,s):new bn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new qq(e,s):new Kq(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cg(t,this.value)):t!==null&&Du(this.value)===Du(t)&&this.matchesComparison(cg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class co extends q4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new co(e,t)}matches(e){return K4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K4(n){return n.op==="and"}function Y4(n){return Wq(n)&&K4(n)}function Wq(n){for(const e of n.filters)if(e instanceof co)return!1;return!0}function ZT(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+ug(n.value);if(Y4(n))return n.filters.map(e=>ZT(e)).join(",");{const e=n.filters.map(t=>ZT(t)).join(",");return`${n.op}(${e})`}}function X4(n,e){return n instanceof bn?function(s,r){return r instanceof bn&&s.op===r.op&&s.field.isEqual(r.field)&&pa(s.value,r.value)}(n,e):n instanceof co?function(s,r){return r instanceof co&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&X4(o,r.filters[a]),!0):!1}(n,e):void xe(19439)}function Q4(n){return n instanceof bn?function(t){return`${t.field.canonicalString()} ${t.op} ${ug(t.value)}`}(n):n instanceof co?function(t){return t.op.toString()+" {"+t.getFilters().map(Q4).join(" ,")+"}"}(n):"Filter"}class Gq extends bn{constructor(e,t,s){super(e,t,s),this.key=me.fromName(s.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class qq extends bn{constructor(e,t){super(e,"in",t),this.keys=J4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Kq extends bn{constructor(e,t){super(e,"not-in",t),this.keys=J4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function J4(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(s=>me.fromName(s.referenceValue))}class Yq extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pI(t)&&V0(t.arrayValue,this.value)}}class Xq extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&V0(this.value.arrayValue,t)}}class Qq extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(V0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!V0(this.value.arrayValue,t)}}class Jq extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>V0(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function FL(n,e=null,t=[],s=[],r=null,i=null,o=null){return new Zq(n,e,t,s,r,i,o)}function mI(n){const e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ZT(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),LE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ug(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ug(s)).join(",")),e.Te=t}return e.Te}function gI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Hq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!X4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jL(n.startAt,e.startAt)&&jL(n.endAt,e.endAt)}function eC(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eK(n,e,t,s,r,i,o,a){return new qw(n,e,t,s,r,i,o,a)}function yI(n){return new qw(n)}function VL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Z4(n){return n.collectionGroup!==null}function o0(n){const e=Ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ln(rs.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new h1(i,s))}),t.has(rs.keyField().canonicalString())||e.Ie.push(new h1(rs.keyField(),s))}return e.Ie}function la(n){const e=Ce(n);return e.Ee||(e.Ee=tK(e,o0(n))),e.Ee}function tK(n,e){if(n.limitType==="F")return FL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new h1(r.field,i)});const t=n.endAt?new u1(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new u1(n.startAt.position,n.startAt.inclusive):null;return FL(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function tC(n,e){const t=n.filters.concat([e]);return new qw(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nC(n,e,t){return new qw(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ME(n,e){return gI(la(n),la(e))&&n.limitType===e.limitType}function e3(n){return`${mI(la(n))}|lt:${n.limitType}`}function _f(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(r=>Q4(r)).join(", ")}]`),LE(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(r=>ug(r)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(r=>ug(r)).join(",")),`Target(${s})`}(la(n))}; limitType=${n.limitType})`}function OE(n,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):me.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,e)&&function(s,r){for(const i of o0(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const u=OL(o,a,l);return o.inclusive?u<=0:u<0}(s.startAt,o0(s),r)||s.endAt&&!function(o,a,l){const u=OL(o,a,l);return o.inclusive?u>=0:u>0}(s.endAt,o0(s),r))}(n,e)}function nK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t3(n){return(e,t)=>{let s=!1;for(const r of o0(n)){const i=sK(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function sK(n,e,t){const s=n.field.isKeyField()?me.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?cg(l,u):xe(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gu(this.inner,(t,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return F4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=new Yt(me.comparator);function Rl(){return rK}const n3=new Yt(me.comparator);function _y(...n){let e=n3;for(const t of n)e=e.insert(t.key,t);return e}function s3(n){let e=n3;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ph(){return a0()}function r3(){return a0()}function a0(){return new sf(n=>n.toString(),(n,e)=>n.isEqual(e))}const iK=new Yt(me.comparator),oK=new Ln(me.comparator);function He(...n){let e=oK;for(const t of n)e=e.add(t);return e}const aK=new Ln($e);function lK(){return aK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a1(e)?"-0":e}}function i3(n){return{integerValue:""+n}}function cK(n,e){return Oq(e)?i3(e):vI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this._=void 0}}function uK(n,e,t){return n instanceof d1?function(r,i){const o={fields:{[U4]:{stringValue:B4},[$4]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&fI(i)&&(i=DE(i)),i&&(o.fields[z4]=i),{mapValue:o}}(t,e):n instanceof hg?a3(n,e):n instanceof dg?l3(n,e):function(r,i){const o=o3(r,i),a=BL(o)+BL(r.Ae);return JT(o)&&JT(r.Ae)?i3(a):vI(r.serializer,a)}(n,e)}function hK(n,e,t){return n instanceof hg?a3(n,e):n instanceof dg?l3(n,e):t}function o3(n,e){return n instanceof f1?function(s){return JT(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class d1 extends jE{}class hg extends jE{constructor(e){super(),this.elements=e}}function a3(n,e){const t=c3(e);for(const s of n.elements)t.some(r=>pa(r,s))||t.push(s);return{arrayValue:{values:t}}}class dg extends jE{constructor(e){super(),this.elements=e}}function l3(n,e){let t=c3(e);for(const s of n.elements)t=t.filter(r=>!pa(r,s));return{arrayValue:{values:t}}}class f1 extends jE{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function BL(n){return hn(n.integerValue||n.doubleValue)}function c3(n){return pI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t){this.field=e,this.transform=t}}function dK(n,e){return n.field.isEqual(e.field)&&function(s,r){return s instanceof hg&&r instanceof hg||s instanceof dg&&r instanceof dg?lg(s.elements,r.elements,pa):s instanceof f1&&r instanceof f1?pa(s.Ae,r.Ae):s instanceof d1&&r instanceof d1}(n.transform,e.transform)}class fK{constructor(e,t){this.version=e,this.transformResults=t}}class Ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mx(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class FE{}function h3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wI(n.key,Ai.none()):new Kw(n.key,n.data,Ai.none());{const t=n.data,s=or.empty();let r=new Ln(rs.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new qu(n.key,s,new Hr(r.toArray()),Ai.none())}}function pK(n,e,t){n instanceof Kw?function(r,i,o){const a=r.value.clone(),l=zL(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof qu?function(r,i,o){if(!Mx(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zL(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(d3(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function l0(n,e,t,s){return n instanceof Kw?function(i,o,a,l){if(!Mx(i.precondition,o))return a;const u=i.value.clone(),h=$L(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,s):n instanceof qu?function(i,o,a,l){if(!Mx(i.precondition,o))return a;const u=$L(i.fieldTransforms,l,o),h=o.data;return h.setAll(d3(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(n,e,t,s):function(i,o,a){return Mx(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function mK(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=o3(s.transform,r||null);i!=null&&(t===null&&(t=or.empty()),t.set(s.field,i))}return t||null}function UL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&lg(s,r,(i,o)=>dK(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Kw extends FE{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qu extends FE{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function d3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function zL(n,e,t){const s=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,hK(o,a,t[r]))}return s}function $L(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,uK(i,o,e))}return s}class wI extends FE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gK extends FE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&pK(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=l0(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=l0(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=r3();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const l=h3(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&lg(this.mutations,e.mutations,(t,s)=>UL(t,s))&&lg(this.baseMutations,e.baseMutations,(t,s)=>UL(t,s))}}class bI{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return iK}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new bI(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,Ge;function bK(n){switch(n){case K.OK:return xe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function f3(n){if(n===void 0)return Il("GRPC error has no .code"),K.UNKNOWN;switch(n){case yn.OK:return K.OK;case yn.CANCELLED:return K.CANCELLED;case yn.UNKNOWN:return K.UNKNOWN;case yn.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case yn.INTERNAL:return K.INTERNAL;case yn.UNAVAILABLE:return K.UNAVAILABLE;case yn.UNAUTHENTICATED:return K.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case yn.NOT_FOUND:return K.NOT_FOUND;case yn.ALREADY_EXISTS:return K.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return K.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case yn.ABORTED:return K.ABORTED;case yn.OUT_OF_RANGE:return K.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return K.UNIMPLEMENTED;case yn.DATA_LOSS:return K.DATA_LOSS;default:return xe(39323,{code:n})}}(Ge=yn||(yn={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=new Au([4294967295,4294967295],0);function HL(n){const e=xK().encode(n),t=new C4;return t.update(e),new Uint8Array(t.digest())}function WL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Au([t,s],0),new Au([r,i],0)]}class xI{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ey(`Invalid padding: ${t}`);if(s<0)throw new Ey(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ey(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ey(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Au.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Au.fromNumber(s)));return r.compare(_K)===1&&(r=new Au([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HL(e),[s,r]=WL(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new xI(i,r,t);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=HL(e),[s,r]=WL(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ey extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Yw.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new VE(Ee.min(),r,new Yt($e),Rl(),He())}}class Yw{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Yw(s,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class p3{constructor(e,t){this.targetId=e,this.Ce=t}}class m3{constructor(e,t,s=ls.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class GL{constructor(){this.ve=0,this.Fe=qL(),this.Me=ls.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),s=He();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:xe(38017,{changeType:i})}}),new Yw(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=qL()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EK{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rl(),this.Je=Yb(),this.He=Yb(),this.Ye=new Yt($e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,r)=>{this.rt(r)&&t(r)})}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(eC(i))if(s===0){const o=new me(i.path);this.et(t,o,_s.newNoDocument(o,Ee.min()))}else tt(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Lu(s).toUint8Array()}catch(l){if(l instanceof V4)return ag("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xI(o,r,i)}catch(l){return ag(l instanceof Ey?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&eC(a.target)){const l=new me(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,_s.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}});let s=He();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new VE(e,t,this.Ye,this.je,s);return this.je=Rl(),this.Je=Yb(),this.He=Yb(),this.Ye=new Yt($e),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new GL,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ln($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ln($e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GL),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yb(){return new Yt(me.comparator)}function qL(){return new Yt(me.comparator)}const SK={asc:"ASCENDING",desc:"DESCENDING"},AK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TK={and:"AND",or:"OR"};class CK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sC(n,e){return n.useProto3Json||LE(e)?e:{value:e}}function p1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kK(n,e){return p1(n,e.toTimestamp())}function ca(n){return tt(!!n,49232),Ee.fromTimestamp(function(t){const s=Nu(t);return new Rt(s.seconds,s.nanos)}(n))}function _I(n,e){return rC(n,e).canonicalString()}function rC(n,e){const t=function(r){return new _t(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function y3(n){const e=_t.fromString(n);return tt(_3(e),10190,{key:e.toString()}),e}function iC(n,e){return _I(n.databaseId,e.path)}function fA(n,e){const t=y3(e);if(t.get(1)!==n.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(w3(t))}function v3(n,e){return _I(n.databaseId,e)}function PK(n){const e=y3(n);return e.length===4?_t.emptyPath():w3(e)}function oC(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w3(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KL(n,e,t){return{name:iC(n,e),fields:t.value.mapValue.fields}}function IK(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(tt(h===void 0||typeof h=="string",58123),ls.fromBase64String(h||"")):(tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ls.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?K.UNKNOWN:f3(u.code);return new re(h,u.message||"")}(o);t=new m3(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=fA(n,s.document.name),i=ca(s.document.updateTime),o=s.document.createTime?ca(s.document.createTime):Ee.min(),a=new or({mapValue:{fields:s.document.fields}}),l=_s.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];t=new Ox(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=fA(n,s.document),i=s.readTime?ca(s.readTime):Ee.min(),o=_s.newNoDocument(r,i),a=s.removedTargetIds||[];t=new Ox([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=fA(n,s.document),i=s.removedTargetIds||[];t=new Ox([],i,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new wK(r,i),a=s.targetId;t=new p3(a,o)}}return t}function RK(n,e){let t;if(e instanceof Kw)t={update:KL(n,e.key,e.value)};else if(e instanceof wI)t={delete:iC(n,e.key)};else if(e instanceof qu)t={update:KL(n,e.key,e.data),updateMask:BK(e.fieldMask)};else{if(!(e instanceof gK))return xe(16599,{Vt:e.type});t={verify:iC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof d1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof f1)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw xe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:kK(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xe(27497)}(n,e.precondition)),t}function NK(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map(t=>function(r,i){let o=r.updateTime?ca(r.updateTime):ca(i);return o.isEqual(Ee.min())&&(o=ca(i)),new fK(o,r.transformResults||[])}(t,e))):[]}function LK(n,e){return{documents:[v3(n,e.path)]}}function DK(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=v3(n,r);const i=function(u){if(u.length!==0)return x3(co.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:Ef(f.field),direction:jK(f.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=sC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:r}}function MK(n){let e=PK(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){tt(s===1,65062);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(d){const f=b3(d);return f instanceof co&&Y4(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(y){return new h1(Sf(y.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,LE(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new u1(g,f)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new u1(g,f)}(t.endAt)),eK(e,r,o,i,a,"F",l,u)}function OK(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function b3(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Sf(t.unaryFilter.field);return bn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Sf(t.unaryFilter.field);return bn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sf(t.unaryFilter.field);return bn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sf(t.unaryFilter.field);return bn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(n):n.fieldFilter!==void 0?function(t){return bn.create(Sf(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return co.create(t.compositeFilter.filters.map(s=>b3(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(t.compositeFilter.op))}(n):xe(30097,{filter:n})}function jK(n){return SK[n]}function FK(n){return AK[n]}function VK(n){return TK[n]}function Ef(n){return{fieldPath:n.canonicalString()}}function Sf(n){return rs.fromServerFormat(n.fieldPath)}function x3(n){return n instanceof bn?function(t){if(t.op==="=="){if(ML(t.value))return{unaryFilter:{field:Ef(t.field),op:"IS_NAN"}};if(DL(t.value))return{unaryFilter:{field:Ef(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ML(t.value))return{unaryFilter:{field:Ef(t.field),op:"IS_NOT_NAN"}};if(DL(t.value))return{unaryFilter:{field:Ef(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ef(t.field),op:FK(t.op),value:t.value}}}(n):n instanceof co?function(t){const s=t.getFilters().map(r=>x3(r));return s.length===1?s[0]:{compositeFilter:{op:VK(t.op),filters:s}}}(n):xe(54877,{filter:n})}function BK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t,s,r,i=Ee.min(),o=Ee.min(),a=ls.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.yt=e}}function zK(n){const e=MK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K{constructor(){this.Cn=new HK}addToCollectionParentIndex(e,t){return this.Cn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ru.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ru.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class HK{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Ln(_t.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ln(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E3=41943040;class rr{static withCacheSize(e){return new rr(e,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(E3,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fg(0)}static cr(){return new fg(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="LruGarbageCollector",WK=1048576;function QL([n,e],[t,s]){const r=$e(n,t);return r===0?$e(e,s):r}class GK{constructor(e){this.Ir=e,this.buffer=new Ln(QL),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();QL(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qK{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(XL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ag(t)?oe(XL,"Ignoring IndexedDB error during garbage collection: ",t):await Sg(t)}await this.Vr(3e5)})}}class KK{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(NE.ce);const s=new GK(t);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(YL)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YL):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,t))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),xf()<=Ue.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function YK(n,e){return new KK(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(){this.changes=new sf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_s.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(s!==null&&l0(s.mutation,r,Hr.empty(),Rt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,He()).next(()=>s))}getLocalViewOfDocuments(e,t,s=He()){const r=ph();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,s).next(i=>{let o=_y();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const s=ph();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,He()))}populateOverlays(e,t,s){const r=[];return s.forEach(i=>{t.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,s,r){let i=Rl();const o=a0(),a=function(){return a0()}();return t.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof qu)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),l0(h.mutation,u,h.mutation.getFieldMask(),Rt.now())):o.set(u.key,Hr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>a.set(u,new QK(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){const s=a0();let r=new Yt((o,a)=>o-a),i=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=s.get(l)||Hr.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||He()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=r3();h.forEach(f=>{if(!i.has(f)){const g=h3(t.get(f),s.get(f));g!==null&&d.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Y.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,r){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Z4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):Y.resolve(ph());let a=O0,l=i;return o.next(u=>Y.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?Y.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,He())).next(h=>({batchId:a,changes:s3(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(s=>{let r=_y();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=_y();return this.indexManager.getCollectionParents(e,i).next(a=>Y.forEach(a,l=>{const u=function(d,f){return new qw(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,_s.newInvalidDocument(h)))});let a=_y();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&l0(h.mutation,u,Hr.empty(),Rt.now()),OE(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ca(r.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(r){return{name:r.name,query:zK(r.bundledQuery),readTime:ca(r.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(){this.overlays=new Yt(me.comparator),this.qr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ph();return Y.forEach(t,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((r,i)=>{this.St(e,t,i)}),Y.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const r=ph(),i=t.length+1,o=new me(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new Yt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=ph(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ph(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return Y.resolve(a)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new vK(t,s));let i=this.qr.get(t);i===void 0&&(i=He(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(){this.sessionToken=ls.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.Qr=new Ln(Hn.$r),this.Ur=new Ln(Hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Hn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Hn(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new me(new _t([])),s=new Hn(t,e),r=new Hn(t,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new _t([])),s=new Hn(t,e),r=new Hn(t,e+1);let i=He();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Hn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Hn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ln(Hn.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yK(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Hn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?dI:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Hn(t,0),r=new Hn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ln($e);return t.forEach(r=>{const i=new Hn(r,0),o=new Hn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;me.isDocumentKey(i)||(i=i.child(""));const o=new Hn(new me(i),0);let a=new Ln($e);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),Y.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(t.mutations,r=>{const i=new Hn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Hn(t,0),r=this.Zr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e){this.ri=e,this.docs=function(){return new Yt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():_s.newInvalidDocument(t))}getEntries(e,t){let s=Rl();return t.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():_s.newInvalidDocument(r))}),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=Rl();const o=t.path,a=new me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Nq(Rq(h),s)<=0||(r.has(h.key)||OE(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,t,s,r){xe(9500)}ii(e,t){return Y.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new rY(this)}getSize(e){return Y.resolve(this.size)}}class rY extends XK{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),Y.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e){this.persistence=e,this.si=new sf(t=>mI(t),gI),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new EI,this.targetCount=0,this.ai=fg.ur()}forEachTarget(e,t){return this.si.forEach((s,r)=>t(r)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Y.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new fg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Pr(t),Y.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Y.waitFor(i).next(()=>r)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,t){this.ui={},this.overlays={},this.ci=new NE(0),this.li=!1,this.li=!0,this.hi=new tY,this.referenceDelegate=e(this),this.Pi=new iY(this),this.indexManager=new $K,this.remoteDocumentCache=function(r){return new sY(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new UK(t),this.Ii=new ZK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new nY(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const r=new oY(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,t){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class oY extends Dq{constructor(e){super(),this.currentSequenceNumber=e}}class SI{constructor(e){this.persistence=e,this.Ri=new EI,this.Vi=null}static mi(e){return new SI(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const r=me.fromPath(s);return this.gi(e,r).next(i=>{i||t.removeEntry(r,Ee.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class m1{constructor(e,t){this.persistence=e,this.pi=new sf(s=>jq(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=YK(this,t)}static mi(e,t){return new m1(e,t)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(r=>s+r))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return Y.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?Y.resolve():t(r)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,t).next(a=>{a||(s++,i.removeEntry(o,Ee.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lx(e.data.value)),t}br(e,t,s){return Y.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return Y.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=He(),r=He();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new AI(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MH()?8:Mq(As())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,t,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new aY;return this.Ss(e,t,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>i.result)}bs(e,t,s,r){return s.documentReadCount<this.fs?(xf()<=Ue.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",_f(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(xf()<=Ue.DEBUG&&oe("QueryEngine","Query:",_f(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(xf()<=Ue.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",_f(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(t))):Y.resolve())}ys(e,t){if(VL(t))return Y.resolve(null);let s=la(t);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=nC(t,null,"F"),s=la(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=He(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(t,a);return this.Cs(t,u,o,l.readTime)?this.ys(e,nC(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,s,r){return VL(t)||r.isEqual(Ee.min())?Y.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?Y.resolve(null):(xf()<=Ue.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_f(t)),this.vs(e,o,t,Iq(r,O0)).next(a=>a))})}Ds(e,t){let s=new Ln(t3(e));return t.forEach((r,i)=>{OE(e,i)&&(s=s.add(i))}),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return xf()<=Ue.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",_f(t)),this.ps.getDocumentsMatchingQuery(e,t,Ru.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="LocalStore",cY=3e8;class uY{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Yt($e),this.xs=new sf(i=>mI(i),gI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function hY(n,e,t,s){return new uY(n,e,t,s)}async function A3(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=He();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function dY(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let g=Y.resolve();return f.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(v=>{const S=u.docVersions.get(y);tt(S!==null,48541),v.version.compareTo(S)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,s,e,i).next(()=>i.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=He();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(s,r))})}function T3(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function fY(n,e){const t=Ce(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(i,h.addedDocuments,d)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ls.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(d,g),function(v,S,w){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=cY?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,h)&&a.push(t.Pi.updateTargetData(i,g))});let l=Rl(),u=He();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(pY(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(Ee.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next(d=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return Y.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(t.Ms=r,i))}function pY(n,e,t){let s=He(),r=He();return t.forEach(i=>s=s.add(i)),e.getEntries(n,s).next(i=>{let o=Rl();return t.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe(TI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function mY(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=dI),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function gY(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return t.Pi.getTargetData(s,e).next(i=>i?(r=i,Y.resolve(r)):t.Pi.allocateTargetId(s).next(o=>(r=new du(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function aC(n,e,t){const s=Ce(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ag(o))throw o;oe(TI,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function JL(n,e,t){const s=Ce(n);let r=Ee.min(),i=He();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=Ce(l),f=d.xs.get(h);return f!==void 0?Y.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,h)}(s,o,la(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:Ee.min(),t?i:He())).next(a=>(yY(s,nK(e),a),{documents:a,Qs:i})))}function yY(n,e,t){let s=n.Os.get(e)||Ee.min();t.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),n.Os.set(e,s)}class ZL{constructor(){this.activeTargetIds=lK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vY{constructor(){this.Mo=new ZL,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ZL,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="ConnectivityMonitor";class tD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(eD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(eD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xb=null;function lC(){return Xb===null?Xb=function(){return 268435456+Math.round(2147483648*Math.random())}():Xb++,"0x"+Xb.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="RestConnection",bY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xY{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===l1?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=lC(),a=this.zo(e,t.toUriEncodedString());oe(pA,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=tf(u);return this.Jo(e,a,l,s,h).then(d=>(oe(pA,`Received RPC '${e}' ${o}: `,d),d),d=>{throw ag(pA,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eg}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,t){const s=bY[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="WebChannelConnection";class EY extends xY{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=lC();return new Promise((a,l)=>{const u=new k4;u.setWithCredentials(!0),u.listenOnce(P4.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nx.NO_ERROR:const d=u.getResponseJson();oe(hs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Nx.TIMEOUT:oe(hs,`RPC '${e}' ${o} timed out`),l(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case Nx.HTTP_ERROR:const f=u.getStatus();if(oe(hs,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const v=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(_)>=0?_:K.UNKNOWN}(y.status);l(new re(v,y.message))}else l(new re(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new re(K.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(hs,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);oe(hs,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",h,s,15)})}T_(e,t,s){const r=lC(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=N4(),a=R4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,s),l.encodeInitMessageHeaders=!0;const h=i.join("");oe(hs,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const y=new _Y({Yo:S=>{g?oe(hs,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(f||(oe(hs,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),oe(hs,`RPC '${e}' stream ${r} sending:`,S),d.send(S))},Zo:()=>d.close()}),v=(S,w,_)=>{S.listen(w,E=>{try{_(E)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,xy.EventType.OPEN,()=>{g||(oe(hs,`RPC '${e}' stream ${r} transport opened.`),y.o_())}),v(d,xy.EventType.CLOSE,()=>{g||(g=!0,oe(hs,`RPC '${e}' stream ${r} transport closed`),y.a_(),this.E_(d))}),v(d,xy.EventType.ERROR,S=>{g||(g=!0,ag(hs,`RPC '${e}' stream ${r} transport errored. Name:`,S.name,"Message:",S.message),y.a_(new re(K.UNAVAILABLE,"The operation could not be completed")))}),v(d,xy.EventType.MESSAGE,S=>{var w;if(!g){const _=S.data[0];tt(!!_,16349);const E=_,I=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(I){oe(hs,`RPC '${e}' stream ${r} received error:`,I);const D=I.status;let M=function(N){const L=yn[N];if(L!==void 0)return f3(L)}(D),T=I.message;M===void 0&&(M=K.INTERNAL,T="Unknown error status: "+D+" with message "+I.message),g=!0,y.a_(new re(M,T)),d.close()}else oe(hs,`RPC '${e}' stream ${r} received:`,_),y.u_(_)}}),v(a,I4.STAT_EVENT,S=>{S.stat===YT.PROXY?oe(hs,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===YT.NOPROXY&&oe(hs,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function mA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n){return new CK(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="PersistentStream";class k3{constructor(e,t,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Il(t.toString()),Il("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===t&&this.G_(s,r)},s=>{e(()=>{const r=new re(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(nD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oe(nD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SY extends k3{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=IK(this.serializer,e),s=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?ca(o.readTime):Ee.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=oC(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=eC(l)?{documents:LK(i,l)}:{query:DK(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=g3(i,o.resumeToken);const u=sC(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=p1(i,o.snapshotVersion.toTimestamp());const u=sC(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const s=OK(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=oC(this.serializer),t.removeTarget=e,this.q_(t)}}class AY extends k3{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NK(e.writeResults,e.commitTime),s=ca(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=oC(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>RK(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{}class CY extends TY{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,rC(t,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(K.UNKNOWN,i.toString())})}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,rC(t,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class kY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Il(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="RemoteStore";class PY{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{rf(this)&&(oe(Xd,"Restarting streams for network reachability change."),await async function(l){const u=Ce(l);u.Ea.add(4),await Xw(u),u.Ra.set("Unknown"),u.Ea.delete(4),await UE(u)}(this))})}),this.Ra=new kY(s,r)}}async function UE(n){if(rf(n))for(const e of n.da)await e(!0)}async function Xw(n){for(const e of n.da)await e(!1)}function P3(n,e){const t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),II(t)?PI(t):Tg(t).O_()&&kI(t,e))}function CI(n,e){const t=Ce(n),s=Tg(t);t.Ia.delete(e),s.O_()&&I3(t,e),t.Ia.size===0&&(s.O_()?s.L_():rf(t)&&t.Ra.set("Unknown"))}function kI(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tg(n).Y_(e)}function I3(n,e){n.Va.Ue(e),Tg(n).Z_(e)}function PI(n){n.Va=new EK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Tg(n).start(),n.Ra.ua()}function II(n){return rf(n)&&!Tg(n).x_()&&n.Ia.size>0}function rf(n){return Ce(n).Ea.size===0}function R3(n){n.Va=void 0}async function IY(n){n.Ra.set("Online")}async function RY(n){n.Ia.forEach((e,t)=>{kI(n,e)})}async function NY(n,e){R3(n),II(n)?(n.Ra.ha(e),PI(n)):n.Ra.set("Unknown")}async function LY(n,e,t){if(n.Ra.set("Online"),e instanceof m3&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))}(n,e)}catch(s){oe(Xd,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await g1(n,s)}else if(e instanceof Ox?n.Va.Ze(e):e instanceof p3?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const s=await T3(n.localStore);t.compareTo(s)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(ls.EMPTY_BYTE_STRING,h.snapshotVersion)),I3(i,l);const d=new du(h.target,l,u,h.sequenceNumber);kI(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(s){oe(Xd,"Failed to raise snapshot:",s),await g1(n,s)}}async function g1(n,e,t){if(!Ag(e))throw e;n.Ea.add(1),await Xw(n),n.Ra.set("Offline"),t||(t=()=>T3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(Xd,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await UE(n)})}function N3(n,e){return e().catch(t=>g1(n,t,e))}async function zE(n){const e=Ce(n),t=Mu(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dI;for(;DY(e);)try{const r=await mY(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,MY(e,r)}catch(r){await g1(e,r)}L3(e)&&D3(e)}function DY(n){return rf(n)&&n.Ta.length<10}function MY(n,e){n.Ta.push(e);const t=Mu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function L3(n){return rf(n)&&!Mu(n).x_()&&n.Ta.length>0}function D3(n){Mu(n).start()}async function OY(n){Mu(n).ra()}async function jY(n){const e=Mu(n);for(const t of n.Ta)e.ea(t.mutations)}async function FY(n,e,t){const s=n.Ta.shift(),r=bI.from(s,e,t);await N3(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await zE(n)}async function VY(n,e){e&&Mu(n).X_&&await async function(s,r){if(function(o){return bK(o)&&o!==K.ABORTED}(r.code)){const i=s.Ta.shift();Mu(s).B_(),await N3(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await zE(s)}}(n,e),L3(n)&&D3(n)}async function sD(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),oe(Xd,"RemoteStore received new credentials");const s=rf(t);t.Ea.add(3),await Xw(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await UE(t)}async function BY(n,e){const t=Ce(n);e?(t.Ea.delete(2),await UE(t)):e||(t.Ea.add(2),await Xw(t),t.Ra.set("Unknown"))}function Tg(n){return n.ma||(n.ma=function(t,s,r){const i=Ce(t);return i.sa(),new SY(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Xo:IY.bind(null,n),t_:RY.bind(null,n),r_:NY.bind(null,n),H_:LY.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),II(n)?PI(n):n.Ra.set("Unknown")):(await n.ma.stop(),R3(n))})),n.ma}function Mu(n){return n.fa||(n.fa=function(t,s,r){const i=Ce(t);return i.sa(),new AY(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:OY.bind(null,n),r_:VY.bind(null,n),ta:jY.bind(null,n),na:FY.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await zE(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(Xd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new bl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new RI(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function NI(n,e){if(Il("AsyncQueue",`${e}: ${n}`),Ag(n))return new re(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static emptySet(e){return new up(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||me.comparator(t.key,s.key):(t,s)=>me.comparator(t.key,s.key),this.keyedMap=_y(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof up)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new up;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.ga=new Yt(me.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class pg{constructor(e,t,s,r,i,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new pg(e,t,up.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ME(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zY{constructor(){this.queries=iD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Ce(t),i=r.queries;r.queries=iD(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function iD(){return new sf(n=>e3(n),ME)}async function M3(n,e){const t=Ce(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new UY,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=NI(o,`Initialization of query '${_f(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&LI(t)}async function O3(n,e){const t=Ce(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function $Y(n,e){const t=Ce(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&LI(t)}function HY(n,e,t){const s=Ce(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function LI(n){n.Ca.forEach(e=>{e.next()})}var cC,oD;(oD=cC||(cC={})).Ma="default",oD.Cache="cache";class j3{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new pg(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=pg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.key=e}}class V3{constructor(e){this.key=e}}class WY{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=t3(e),this.tu=new up(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new rD,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=OE(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;f&&g?f.data.isEqual(g.data)?y!==v&&(s.track({type:3,doc:g}),S=!0):this.su(f,g)||(s.track({type:2,doc:g}),S=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),S=!0):f&&!g&&(s.track({type:1,doc:f}),S=!0,(l||u)&&(a=!0)),S&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(g,y){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:S})}};return v(g)-v(y)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=t&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new pg(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new V3(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new F3(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return pg.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const DI="SyncEngine";class GY{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qY{constructor(e){this.key=e,this.hu=!1}}class KY{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new sf(a=>e3(a),ME),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(me.comparator),this.Au=new Map,this.Ru=new EI,this.Vu={},this.mu=new Map,this.fu=fg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YY(n,e,t=!0){const s=W3(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await B3(s,e,t,!0),r}async function XY(n,e){const t=W3(n);await B3(t,e,!0,!1)}async function B3(n,e,t,s){const r=await gY(n.localStore,la(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await QY(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&P3(n.remoteStore,r),a}async function QY(n,e,t,s,r){n.pu=(d,f,g)=>async function(v,S,w,_){let E=S.view.ru(w);E.Cs&&(E=await JL(v.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,E)));const I=_&&_.targetChanges.get(S.targetId),D=_&&_.targetMismatches.get(S.targetId)!=null,M=S.view.applyChanges(E,v.isPrimaryClient,I,D);return lD(v,S.targetId,M.au),M.snapshot}(n,d,f,g);const i=await JL(n.localStore,e,!0),o=new WY(e,i.Qs),a=o.ru(i.documents),l=Yw.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),u=o.applyChanges(a,n.isPrimaryClient,l);lD(n,t,u.au);const h=new GY(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function JY(n,e,t){const s=Ce(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!ME(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await aC(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),t&&CI(s.remoteStore,r.targetId),uC(s,r.targetId)}).catch(Sg)):(uC(s,r.targetId),await aC(s.localStore,r.targetId,!0))}async function ZY(n,e){const t=Ce(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),CI(t.remoteStore,s.targetId))}async function eX(n,e,t){const s=aX(n);try{const r=await function(o,a){const l=Ce(o),u=Rt.now(),h=a.reduce((g,y)=>g.add(y.key),He());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Rl(),v=He();return l.Ns.getEntries(g,h).next(S=>{y=S,y.forEach((w,_)=>{_.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(S=>{d=S;const w=[];for(const _ of a){const E=mK(_,d.get(_.key).overlayedDocument);E!=null&&w.push(new qu(_.key,E,G4(E.value.mapValue),Ai.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,w,a)}).next(S=>{f=S;const w=S.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(g,S.batchId,w)})}).then(()=>({batchId:f.batchId,changes:s3(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Yt($e)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,t),await Qw(s,r.changes),await zE(s.remoteStore)}catch(r){const i=NI(r,"Failed to persist write");t.reject(i)}}async function U3(n,e){const t=Ce(n);try{const s=await fY(t.localStore,e);e.targetChanges.forEach((r,i)=>{const o=t.Au.get(i);o&&(tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?tt(o.hu,14607):r.removedDocuments.size>0&&(tt(o.hu,42227),o.hu=!1))}),await Qw(t,s,e)}catch(s){await Sg(s)}}function aD(n,e,t){const s=Ce(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ce(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&LI(l)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tX(n,e,t){const s=Ce(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Yt(me.comparator);o=o.insert(i,_s.newNoDocument(i,Ee.min()));const a=He().add(i),l=new VE(Ee.min(),new Map,new Yt($e),o,a);await U3(s,l),s.du=s.du.remove(i),s.Au.delete(e),MI(s)}else await aC(s.localStore,e,!1).then(()=>uC(s,e,t)).catch(Sg)}async function nX(n,e){const t=Ce(n),s=e.batch.batchId;try{const r=await dY(t.localStore,e);$3(t,s,null),z3(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Qw(t,r)}catch(r){await Sg(r)}}async function sX(n,e,t){const s=Ce(n);try{const r=await function(o,a){const l=Ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(tt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(s.localStore,e);$3(s,e,t),z3(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Qw(s,r)}catch(r){await Sg(r)}}function z3(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function $3(n,e,t){const s=Ce(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function uC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(s=>{n.Ru.containsKey(s)||H3(n,s)})}function H3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(CI(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),MI(n))}function lD(n,e,t){for(const s of t)s instanceof F3?(n.Ru.addReference(s.key,e),rX(n,s)):s instanceof V3?(oe(DI,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||H3(n,s.key)):xe(19791,{wu:s})}function rX(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(oe(DI,"New document in limbo: "+t),n.Eu.add(s),MI(n))}function MI(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(_t.fromString(e)),s=n.fu.next();n.Au.set(s,new qY(t)),n.du=n.du.insert(t,s),P3(n.remoteStore,new du(la(yI(t.path)),s,"TargetPurposeLimboResolution",NE.ce))}}async function Qw(n,e,t){const s=Ce(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,t).then(u=>{var h;if((u||t)&&s.isPrimaryClient){const d=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=AI.As(l.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(l,u){const h=Ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Y.forEach(u,f=>Y.forEach(f.Es,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>Y.forEach(f.ds,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Ag(d))throw d;oe(TI,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(f,v)}}}(s.localStore,i))}async function iX(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){oe(DI,"User change. New user:",e.toKey());const s=await A3(t.localStore,e);t.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new re(K.CANCELLED,o))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qw(t,s.Ls)}}function oX(n,e){const t=Ce(n),s=t.Au.get(e);if(s&&s.hu)return He().add(s.key);{let r=He();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function W3(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=U3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tX.bind(null,e),e.Pu.H_=$Y.bind(null,e.eventManager),e.Pu.yu=HY.bind(null,e.eventManager),e}function aX(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sX.bind(null,e),e}class y1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=BE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hY(this.persistence,new lY,e.initialUser,this.serializer)}Cu(e){return new S3(SI.mi,this.serializer)}Du(e){return new vY}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}y1.provider={build:()=>new y1};class lX extends y1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof m1,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qK(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new S3(s=>m1.mi(s,t),this.serializer)}}class hC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>aD(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iX.bind(null,this.syncEngine),await BY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zY}()}createDatastore(e){const t=BE(e.databaseInfo.databaseId),s=function(i){return new EY(i)}(e.databaseInfo);return function(i,o,a,l){return new CY(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,r,i,o,a){return new PY(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>aD(this.syncEngine,t,0),function(){return tD.v()?new tD:new wY}())}createSyncEngine(e,t){return function(r,i,o,a,l,u,h){const d=new KY(r,i,o,a,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const i=Ce(r);oe(Xd,"RemoteStore shutting down."),i.Ea.add(5),await Xw(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hC.provider={build:()=>new hC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Il("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="FirestoreClient";class cX{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=bs.UNAUTHENTICATED,this.clientId=hI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{oe(Ou,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(oe(Ou,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=NI(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function gA(n,e){n.asyncQueue.verifyOperationInProgress(),oe(Ou,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await A3(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cD(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uX(n);oe(Ou,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>sD(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>sD(e.remoteStore,r)),n._onlineComponents=e}async function uX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Ou,"Using user provided OfflineComponentProvider");try{await gA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;ag("Error using user provided cache. Falling back to memory cache: "+t),await gA(n,new y1)}}else oe(Ou,"Using default OfflineComponentProvider"),await gA(n,new lX(void 0));return n._offlineComponents}async function q3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Ou,"Using user provided OnlineComponentProvider"),await cD(n,n._uninitializedComponentsProvider._online)):(oe(Ou,"Using default OnlineComponentProvider"),await cD(n,new hC))),n._onlineComponents}function hX(n){return q3(n).then(e=>e.syncEngine)}async function K3(n){const e=await q3(n),t=e.eventManager;return t.onListen=YY.bind(null,e.syncEngine),t.onUnlisten=JY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZY.bind(null,e.syncEngine),t}function dX(n,e,t={}){const s=new bl;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new G3({next:f=>{h.Nu(),o.enqueueAndForget(()=>O3(i,d));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new j3(yI(a.path),h,{includeMetadataChanges:!0,qa:!0});return M3(i,d)}(await K3(n),n.asyncQueue,e,t,s)),s.promise}function fX(n,e,t={}){const s=new bl;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new G3({next:f=>{h.Nu(),o.enqueueAndForget(()=>O3(i,d)),f.fromCache&&l.source==="server"?u.reject(new re(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new j3(a,h,{includeMetadataChanges:!0,qa:!0});return M3(i,d)}(await K3(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="firestore.googleapis.com",hD=!0;class dD{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X3,this.ssl=hD}else this.host=e.host,this.ssl=e.ssl??hD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WK)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y3(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $E{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dD(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new wq;switch(s.type){case"firstParty":return new Eq(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=uD.get(t);s&&(oe("ComponentProvider","Removing Datastore"),uD.delete(t),s.terminate())}(this),Promise.resolve()}}function pX(n,e,t,s={}){var u;n=lo(n,$E);const r=tf(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;r&&(QP(`https://${a}`),JP("Firestore",!0)),i.host!==X3&&i.host!==a&&ag("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Cl(l,o)&&(n._setSettings(l),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=bs.MOCK_USER;else{h=VF(s.mockUserToken,(u=n._app)==null?void 0:u.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new bs(f)}n._authCredentials=new bq(new D4(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Cg(this.firestore,e,this._query)}}class pn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gw(t,pn._jsonSchema))return new pn(e,s||null,new me(_t.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:xn("string",pn._jsonSchemaVersion),referencePath:xn("string")};class Tu extends Cg{constructor(e,t,s){super(e,t,yI(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new me(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function To(n,e,...t){if(n=En(n),M4("collection","path",e),n instanceof $E){const s=_t.fromString(e,...t);return AL(s),new Tu(n,null,s)}{if(!(n instanceof pn||n instanceof Tu))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return AL(s),new Tu(n.firestore,null,s)}}function In(n,e,...t){if(n=En(n),arguments.length===1&&(e=hI.newId()),M4("doc","path",e),n instanceof $E){const s=_t.fromString(e,...t);return SL(s),new pn(n,null,new me(s))}{if(!(n instanceof pn||n instanceof Tu))throw new re(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return SL(s),new pn(n.firestore,n instanceof Tu?n.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="AsyncQueue";class pD{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C3(this,"async_queue_retry"),this._c=()=>{const s=mA();s&&oe(fD,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=mA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new bl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ag(e))throw e;oe(fD,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Il("INTERNAL UNHANDLED ERROR: ",mD(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=RI.createAndSchedule(this,e,t,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:mD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mD(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class of extends $E{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new pD,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pD(e),this._firestoreClient=void 0,await e}}}function mX(n,e){const t=typeof n=="object"?n:tI(),s=typeof n=="string"?n:l1,r=CE(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=OF("firestore");i&&pX(r,...i)}return r}function OI(n){if(n._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gX(n),n._firestoreClient}function gX(n){var s,r,i;const e=n._freezeSettings(),t=function(a,l,u,h){return new Bq(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Y3(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cX(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(ls.fromBase64String(e))}catch(t){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wi(ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gw(e,wi._jsonSchema))return wi.fromBase64String(e.bytes)}}wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:xn("string",wi._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ua._jsonSchemaVersion}}static fromJSON(e){if(Gw(e,ua._jsonSchema))return new ua(e.latitude,e.longitude)}}ua._jsonSchemaVersion="firestore/geoPoint/1.0",ua._jsonSchema={type:xn("string",ua._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ha._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gw(e,ha._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ha(e.vectorValues);throw new re(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ha._jsonSchemaVersion="firestore/vectorValue/1.0",ha._jsonSchema={type:xn("string",ha._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yX=/^__.*__$/;class vX{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kw(e,this.data,t,this.fieldTransforms)}}class Q3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class WE{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new WE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return v1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(J3(this.Ac)&&yX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wX{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||BE(e)}Cc(e,t,s,r=!1){return new WE({Ac:e,methodName:t,Dc:s,path:rs.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GE(n){const e=n._freezeSettings(),t=BE(n._databaseId);return new wX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z3(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);VI("Data must be an object, but it was:",o,s);const a=tV(s,o);let l,u;if(i.merge)l=new Hr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=dC(e,d,t);if(!o.contains(f))throw new re(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);sV(h,f)||h.push(f)}l=new Hr(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new vX(new or(a),l,u)}class qE extends Jw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qE}}function eV(n,e,t){return new WE({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jI extends Jw{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=eV(this,e,!0),s=this.vc.map(i=>af(i,t)),r=new hg(s);return new u3(e.path,r)}isEqual(e){return e instanceof jI&&Cl(this.vc,e.vc)}}class FI extends Jw{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=eV(this,e,!0),s=this.vc.map(i=>af(i,t)),r=new dg(s);return new u3(e.path,r)}isEqual(e){return e instanceof FI&&Cl(this.vc,e.vc)}}function bX(n,e,t,s){const r=n.Cc(1,e,t);VI("Data must be an object, but it was:",r,s);const i=[],o=or.empty();Gu(s,(l,u)=>{const h=BI(e,l,t);u=En(u);const d=r.yc(h);if(u instanceof qE)i.push(h);else{const f=af(u,d);f!=null&&(i.push(h),o.set(h,f))}});const a=new Hr(i);return new Q3(o,a,r.fieldTransforms)}function xX(n,e,t,s,r,i){const o=n.Cc(1,e,t),a=[dC(e,s,t)],l=[r];if(i.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(dC(e,i[f])),l.push(i[f+1]);const u=[],h=or.empty();for(let f=a.length-1;f>=0;--f)if(!sV(u,a[f])){const g=a[f];let y=l[f];y=En(y);const v=o.yc(g);if(y instanceof qE)u.push(g);else{const S=af(y,v);S!=null&&(u.push(g),h.set(g,S))}}const d=new Hr(u);return new Q3(h,d,o.fieldTransforms)}function _X(n,e,t,s=!1){return af(t,n.Cc(s?4:3,e))}function af(n,e){if(nV(n=En(n)))return VI("Unsupported field value:",e,n),tV(n,e);if(n instanceof Jw)return function(s,r){if(!J3(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=af(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(n,e)}return function(s,r){if((s=En(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cK(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Rt.fromDate(s);return{timestampValue:p1(r.serializer,i)}}if(s instanceof Rt){const i=new Rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:p1(r.serializer,i)}}if(s instanceof ua)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wi)return{bytesValue:g3(r.serializer,s._byteString)};if(s instanceof pn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_I(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof ha)return function(o,a){return{mapValue:{fields:{[H4]:{stringValue:W4},[c1]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return vI(a.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${RE(s)}`)}(n,e)}function tV(n,e){const t={};return F4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gu(n,(s,r)=>{const i=af(r,e.mc(s));i!=null&&(t[s]=i)}),{mapValue:{fields:t}}}function nV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof ua||n instanceof wi||n instanceof pn||n instanceof Jw||n instanceof ha)}function VI(n,e,t){if(!nV(t)||!O4(t)){const s=RE(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function dC(n,e,t){if((e=En(e))instanceof HE)return e._internalPath;if(typeof e=="string")return BI(n,e);throw v1("Field path arguments must be of type string or ",n,!1,void 0,t)}const EX=new RegExp("[~\\*/\\[\\]]");function BI(n,e,t){if(e.search(EX)>=0)throw v1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new HE(...e.split("."))._internalPath}catch{throw v1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function v1(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new re(K.INVALID_ARGUMENT,a+n+l)}function sV(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SX extends rV{data(){return super.data()}}function UI(n,e){return typeof e=="string"?BI(n,e):e instanceof HE?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zI{}class TX extends zI{}function iV(n,e,...t){let s=[];e instanceof zI&&s.push(e),s=s.concat(t),function(i){const o=i.filter(l=>l instanceof $I).length,a=i.filter(l=>l instanceof KE).length;if(o>1||o>0&&a>0)throw new re(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)n=r._apply(n);return n}class KE extends TX{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new KE(e,t,s)}_apply(e){const t=this._parse(e);return aV(e._query,t),new Cg(e.firestore,e.converter,tC(e._query,t))}_parse(e){const t=GE(e.firestore);return function(i,o,a,l,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){yD(d,h);const y=[];for(const v of d)y.push(gD(l,i,v));f={arrayValue:{values:y}}}else f=gD(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||yD(d,h),f=_X(a,o,d,h==="in"||h==="not-in");return bn.create(u,h,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function oV(n,e,t){const s=e,r=UI("where",n);return KE._create(r,s,t)}class $I extends zI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $I(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:co.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)aV(o,l),o=tC(o,l)}(e._query,t),new Cg(e.firestore,e.converter,tC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gD(n,e,t){if(typeof(t=En(t))=="string"){if(t==="")throw new re(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z4(e)&&t.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(_t.fromString(t));if(!me.isDocumentKey(s))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return LL(n,new me(s))}if(t instanceof pn)return LL(n,t._key);throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RE(t)}.`)}function yD(n,e){if(!Array.isArray(n)||n.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aV(n,e){const t=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CX{convertValue(e,t="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Gu(e,(r,i)=>{s[r]=this.convertValue(i,t)}),s}convertVectorValue(e){var s,r,i;const t=(i=(r=(s=e.fields)==null?void 0:s[c1].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>hn(o.doubleValue));return new ha(t)}convertGeoPoint(e){return new ua(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=DE(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(j0(e));default:return null}}convertTimestamp(e){const t=Nu(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_t.fromString(e);tt(_3(s),9688,{name:e});const r=new F0(s.get(1),s.get(3)),i=new me(s.popFirst(5));return r.isEqual(t)||Il(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Sy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fd extends rV{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(UI("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fd._jsonSchema={type:xn("string",Fd._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class jx extends Fd{data(e={}){return super.data(e)}}class hp{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sy(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new jx(this._firestore,this._userDataWriter,s.key,s,new Sy(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new jx(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Sy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new jx(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Sy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:kX(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n){n=lo(n,pn);const e=lo(n.firestore,of);return dX(OI(e),n._key).then(t=>PX(e,n,t))}hp._jsonSchemaVersion="firestore/querySnapshot/1.0",hp._jsonSchema={type:xn("string",hp._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class cV extends CX{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function ah(n){n=lo(n,Cg);const e=lo(n.firestore,of),t=OI(e),s=new cV(e);return AX(n._query),fX(t,n._query).then(r=>new hp(e,s,n,r))}function w1(n,e,t){n=lo(n,pn);const s=lo(n.firestore,of),r=lV(n.converter,e,t);return YE(s,[Z3(GE(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ai.none())])}function da(n,e,t,...s){n=lo(n,pn);const r=lo(n.firestore,of),i=GE(r);let o;return o=typeof(e=En(e))=="string"||e instanceof HE?xX(i,"updateDoc",n._key,e,t,s):bX(i,"updateDoc",n._key,e),YE(r,[o.toMutation(n._key,Ai.exists(!0))])}function yA(n){return YE(lo(n.firestore,of),[new wI(n._key,Ai.none())])}function vA(n,e){const t=lo(n.firestore,of),s=In(n),r=lV(n.converter,e);return YE(t,[Z3(GE(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Ai.exists(!1))]).then(()=>s)}function YE(n,e){return function(s,r){const i=new bl;return s.asyncQueue.enqueueAndForget(async()=>eX(await hX(s),r,i)),i.promise}(OI(n),e)}function PX(n,e,t){const s=t.docs.get(e._key),r=new cV(n);return new Fd(n,r,e._key,s,new Sy(t.hasPendingWrites,t.fromCache),e.converter)}function c0(...n){return new jI("arrayUnion",n)}function IX(...n){return new FI("arrayRemove",n)}(function(e,t=!0){(function(r){Eg=r})(nf),Gd(new Iu("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new of(new xq(s.getProvider("auth-internal")),new Sq(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F0(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:t,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ia(bL,xL,e),ia(bL,xL,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="firebasestorage.googleapis.com",RX="storageBucket",NX=2*60*1e3,LX=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends va{constructor(e,t,s=0){super(wA(e),`Firebase Storage: ${t} (${wA(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ba.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ma;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ma||(ma={}));function wA(n){return"storage/"+n}function DX(){const n="An unknown error occurred, please check the error payload for server response.";return new ba(ma.UNKNOWN,n)}function MX(){return new ba(ma.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OX(){return new ba(ma.CANCELED,"User canceled the upload/download.")}function jX(n){return new ba(ma.INVALID_URL,"Invalid URL '"+n+"'.")}function FX(n){return new ba(ma.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vD(n){return new ba(ma.INVALID_ARGUMENT,n)}function hV(){return new ba(ma.APP_DELETED,"The Firebase app was deleted.")}function VX(n){return new ba(ma.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=no.makeFromUrl(e,t)}catch{return new no(e,"")}if(s.path==="")return s;throw FX(e)}static makeFromUrl(e,t){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),y={bucket:1,path:3},v=t===uV?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",w=new RegExp(`^https?://${v}/${r}/${S}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:g,indices:y,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<E.length;I++){const D=E[I],M=D.regex.exec(e);if(M){const T=M[D.indices.bucket];let C=M[D.indices.path];C||(C=""),s=new no(T,C),D.postModify(s);break}}if(s==null)throw jX(e);return s}}class BX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UX(n,e,t){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...S){u||(u=!0,e.apply(null,S))}function d(S){r=setTimeout(()=>{r=null,n(g,l())},S)}function f(){i&&clearTimeout(i)}function g(S,...w){if(u){f();return}if(S){f(),h.call(null,S,...w);return}if(l()||o){f(),h.call(null,S,...w);return}s<64&&(s*=2);let E;a===1?(a=2,E=0):E=(s+Math.random())*1e3,d(E)}let y=!1;function v(S){y||(y=!0,f(),!u&&(r!==null?(S||(a=2),clearTimeout(r),d(0)):S||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,v(!0)},t),v}function zX(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(n){return n!==void 0}function wD(n,e,t,s){if(s<e)throw vD(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw vD(`Invalid value for '${n}'. Expected ${t} or less.`)}function HX(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const r=e(s)+"="+e(n[s]);t=t+r+"&"}return t=t.slice(0,-1),t}var b1;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(b1||(b1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WX(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e,t,s,r,i,o,a,l,u,h,d,f=!0,g=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,v)=>{this.resolve_=y,this.reject_=v,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Qb(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===b1.NO_ERROR,l=i.getStatus();if(!a||WX(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===b1.ABORT;s(!1,new Qb(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new Qb(u,i))})},t=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());$X(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=DX();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?hV():OX();o(l)}else{const l=MX();o(l)}};this.canceled_?t(!1,new Qb(!1,null,!0)):this.backoffId_=UX(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qb{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function qX(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function KX(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YX(n,e){e&&(n["X-Firebase-GMPID"]=e)}function XX(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function QX(n,e,t,s,r,i,o=!0,a=!1){const l=HX(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return YX(h,e),qX(h,t),KX(h,i),XX(h,s),new GX(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ZX(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this._service=e,t instanceof no?this._location=t:this._location=no.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new x1(e,t)}get root(){const e=new no(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZX(this._location.path)}get storage(){return this._service}get parent(){const e=JX(this._location.path);if(e===null)return null;const t=new no(this._location.bucket,e);return new x1(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw VX(e)}}function bD(n,e){const t=e==null?void 0:e[RX];return t==null?null:no.makeFromBucketSpec(t,n)}function eQ(n,e,t,s={}){n.host=`${e}:${t}`;const r=tf(e);r&&(QP(`https://${n.host}/b`),JP("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(n._overrideAuthToken=typeof i=="string"?i:VF(i,n.app.options.projectId))}class tQ{constructor(e,t,s,r,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=uV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NX,this._maxUploadRetryTime=LX,this._requests=new Set,r!=null?this._bucket=no.makeFromBucketSpec(r,this._host):this._bucket=bD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=no.makeFromBucketSpec(this._url,e):this._bucket=bD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new x1(this,e)}_makeRequest(e,t,s,r,i=!0){if(this._deleted)return new BX(hV());{const o=QX(e,this._appId,s,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}const xD="@firebase/storage",_D="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="storage";function nQ(n=tI(),e){n=En(n);const s=CE(n,dV).getImmediate({identifier:e}),r=OF("storage");return r&&sQ(s,...r),s}function sQ(n,e,t,s={}){eQ(n,e,t,s)}function rQ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new tQ(t,s,r,e,nf)}function iQ(){Gd(new Iu(dV,rQ,"PUBLIC").setMultipleInstances(!0)),ia(xD,_D,""),ia(xD,_D,"esm2020")}iQ();const oQ={apiKey:"AIzaSyD4eUMaI7RGfYp8-Wbc07bmLUubMgx4Eag",authDomain:"gate-26.firebaseapp.com",projectId:"gate-26",storageBucket:"gate-26.firebasestorage.app",messagingSenderId:"40953329334",appId:"1:40953329334:web:de0a9122337df712f7d817",measurementId:"G-GBKB5CRC8T"},WI=zF(oQ),Cu=yq(WI),ht=mX(WI);nQ(WI);var fV="5.0.1";function _1(n,e){return new Promise(t=>setTimeout(t,n,e))}function aQ(){return new Promise(n=>{const e=new MessageChannel;e.port1.onmessage=()=>n(),e.port2.postMessage(null)})}function lQ(n,e=1/0){const{requestIdleCallback:t}=window;return t?new Promise(s=>t.call(window,()=>s(),{timeout:e})):_1(Math.min(n,e))}function pV(n){return!!n&&typeof n.then=="function"}function ED(n,e){try{const t=n();pV(t)?t.then(s=>e(!0,s),s=>e(!1,s)):e(!0,t)}catch(t){e(!1,t)}}async function SD(n,e,t=16){const s=Array(n.length);let r=Date.now();for(let i=0;i<n.length;++i){s[i]=e(n[i],i);const o=Date.now();o>=r+t&&(r=o,await aQ())}return s}function B0(n){return n.then(void 0,()=>{}),n}function cQ(n,e){for(let t=0,s=n.length;t<s;++t)if(n[t]===e)return!0;return!1}function uQ(n,e){return!cQ(n,e)}function GI(n){return parseInt(n)}function Fi(n){return parseFloat(n)}function Ra(n,e){return typeof n=="number"&&isNaN(n)?e:n}function Us(n){return n.reduce((e,t)=>e+(t?1:0),0)}function mV(n,e=1){if(Math.abs(e)>=1)return Math.round(n/e)*e;{const t=1/e;return Math.round(n*t)/t}}function hQ(n){var e,t;const s=`Unexpected syntax '${n}'`,r=/^\s*([a-z-]*)(.*)$/i.exec(n),i=r[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,h)=>{o[u]=o[u]||[],o[u].push(h)};for(;;){const u=a.exec(r[2]);if(!u)break;const h=u[0];switch(h[0]){case".":l("class",h.slice(1));break;case"#":l("id",h.slice(1));break;case"[":{const d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(h);if(d)l(d[1],(t=(e=d[4])!==null&&e!==void 0?e:d[5])!==null&&t!==void 0?t:"");else throw new Error(s);break}default:throw new Error(s)}}return[i,o]}function dQ(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);if(s>127)return new TextEncoder().encode(n);e[t]=s}return e}function Kl(n,e){const t=n[0]>>>16,s=n[0]&65535,r=n[1]>>>16,i=n[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,d=0,f=0,g=0;g+=i+u,f+=g>>>16,g&=65535,f+=r+l,d+=f>>>16,f&=65535,d+=s+a,h+=d>>>16,d&=65535,h+=t+o,h&=65535,n[0]=h<<16|d,n[1]=f<<16|g}function si(n,e){const t=n[0]>>>16,s=n[0]&65535,r=n[1]>>>16,i=n[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,d=0,f=0,g=0;g+=i*u,f+=g>>>16,g&=65535,f+=r*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=s*u,h+=d>>>16,d&=65535,d+=r*l,h+=d>>>16,d&=65535,d+=i*a,h+=d>>>16,d&=65535,h+=t*u+s*l+r*a+i*o,h&=65535,n[0]=h<<16|d,n[1]=f<<16|g}function gf(n,e){const t=n[0];e%=64,e===32?(n[0]=n[1],n[1]=t):e<32?(n[0]=t<<e|n[1]>>>32-e,n[1]=n[1]<<e|t>>>32-e):(e-=32,n[0]=n[1]<<e|t>>>32-e,n[1]=t<<e|n[1]>>>32-e)}function yr(n,e){e%=64,e!==0&&(e<32?(n[0]=n[1]>>>32-e,n[1]=n[1]<<e):(n[0]=n[1]<<e-32,n[1]=0))}function Ot(n,e){n[0]^=e[0],n[1]^=e[1]}const fQ=[4283543511,3981806797],pQ=[3301882366,444984403];function AD(n){const e=[0,n[0]>>>1];Ot(n,e),si(n,fQ),e[1]=n[0]>>>1,Ot(n,e),si(n,pQ),e[1]=n[0]>>>1,Ot(n,e)}const Jb=[2277735313,289559509],Zb=[1291169091,658871167],TD=[0,5],mQ=[0,1390208809],gQ=[0,944331445];function yQ(n,e){const t=dQ(n);e=e||0;const s=[0,t.length],r=s[1]%16,i=s[1]-r,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let h;for(h=0;h<i;h=h+16)l[0]=t[h+4]|t[h+5]<<8|t[h+6]<<16|t[h+7]<<24,l[1]=t[h]|t[h+1]<<8|t[h+2]<<16|t[h+3]<<24,u[0]=t[h+12]|t[h+13]<<8|t[h+14]<<16|t[h+15]<<24,u[1]=t[h+8]|t[h+9]<<8|t[h+10]<<16|t[h+11]<<24,si(l,Jb),gf(l,31),si(l,Zb),Ot(o,l),gf(o,27),Kl(o,a),si(o,TD),Kl(o,mQ),si(u,Zb),gf(u,33),si(u,Jb),Ot(a,u),gf(a,31),Kl(a,o),si(a,TD),Kl(a,gQ);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const d=[0,0];switch(r){case 15:d[1]=t[h+14],yr(d,48),Ot(u,d);case 14:d[1]=t[h+13],yr(d,40),Ot(u,d);case 13:d[1]=t[h+12],yr(d,32),Ot(u,d);case 12:d[1]=t[h+11],yr(d,24),Ot(u,d);case 11:d[1]=t[h+10],yr(d,16),Ot(u,d);case 10:d[1]=t[h+9],yr(d,8),Ot(u,d);case 9:d[1]=t[h+8],Ot(u,d),si(u,Zb),gf(u,33),si(u,Jb),Ot(a,u);case 8:d[1]=t[h+7],yr(d,56),Ot(l,d);case 7:d[1]=t[h+6],yr(d,48),Ot(l,d);case 6:d[1]=t[h+5],yr(d,40),Ot(l,d);case 5:d[1]=t[h+4],yr(d,32),Ot(l,d);case 4:d[1]=t[h+3],yr(d,24),Ot(l,d);case 3:d[1]=t[h+2],yr(d,16),Ot(l,d);case 2:d[1]=t[h+1],yr(d,8),Ot(l,d);case 1:d[1]=t[h],Ot(l,d),si(l,Jb),gf(l,31),si(l,Zb),Ot(o,l)}return Ot(o,s),Ot(a,s),Kl(o,a),Kl(a,o),AD(o),AD(a),Kl(o,a),Kl(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function vQ(n){var e;return{name:n.name,message:n.message,stack:(e=n.stack)===null||e===void 0?void 0:e.split(`
`),...n}}function wQ(n){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(n))}function bQ(n){return typeof n!="function"}function xQ(n,e){const t=B0(new Promise(s=>{const r=Date.now();ED(n.bind(null,e),(...i)=>{const o=Date.now()-r;if(!i[0])return s(()=>({error:i[1],duration:o}));const a=i[1];if(bQ(a))return s(()=>({value:a,duration:o}));s(()=>new Promise(l=>{const u=Date.now();ED(a,(...h)=>{const d=o+Date.now()-u;if(!h[0])return l({error:h[1],duration:d});l({value:h[1],duration:d})})}))})}));return function(){return t.then(r=>r())}}function _Q(n,e,t,s){const r=Object.keys(n).filter(o=>uQ(t,o)),i=B0(SD(r,o=>xQ(n[o],e),s));return async function(){const a=await i,l=await SD(a,d=>B0(d()),s),u=await Promise.all(l),h={};for(let d=0;d<r.length;++d)h[r[d]]=u[d];return h}}function gV(){const n=window,e=navigator;return Us(["MSCSSMatrix"in n,"msSetImmediate"in n,"msIndexedDB"in n,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function EQ(){const n=window,e=navigator;return Us(["msWriteProfilerMark"in n,"MSStream"in n,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!gV()}function Zw(){const n=window,e=navigator;return Us(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in n,"BatteryManager"in n,"webkitMediaStream"in n,"webkitSpeechGrammar"in n])>=5}function fo(){const n=window,e=navigator;return Us(["ApplePayError"in n,"CSSPrimitiveValue"in n,"Counter"in n,e.vendor.indexOf("Apple")===0,"RGBColor"in n,"WebKitMediaKeys"in n])>=4}function qI(){const n=window,{HTMLElement:e,Document:t}=n;return Us(["safari"in n,!("ongestureend"in n),!("TouchEvent"in n),!("orientation"in n),e&&!("autocapitalize"in e.prototype),t&&"pointerLockElement"in t.prototype])>=4}function eb(){const n=window;return wQ(n.print)&&String(n.browser)==="[object WebPageNamespace]"}function yV(){var n,e;const t=window;return Us(["buildID"in navigator,"MozAppearance"in((e=(n=document.documentElement)===null||n===void 0?void 0:n.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in t,"mozInnerScreenX"in t,"CSSMozDocumentRule"in t,"CanvasCaptureMediaStream"in t])>=4}function SQ(){const n=window;return Us([!("MediaSettingsRange"in n),"RTCEncodedAudioFrame"in n,""+n.Intl=="[object Intl]",""+n.Reflect=="[object Reflect]"])>=3}function AQ(){const n=window,{URLPattern:e}=n;return Us(["union"in Set.prototype,"Iterator"in n,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function TQ(){const n=window;return Us(["DOMRectList"in n,"RTCPeerConnectionIceEvent"in n,"SVGGeometryElement"in n,"ontransitioncancel"in n])>=3}function tb(){const n=window,e=navigator,{CSS:t,HTMLButtonElement:s}=n;return Us([!("getStorageUpdates"in e),s&&"popover"in s.prototype,"CSSCounterStyleRule"in n,t.supports("font-size-adjust: ex-height 0.5"),t.supports("text-transform: full-width")])>=4}function CQ(){if(navigator.platform==="iPad")return!0;const n=screen,e=n.width/n.height;return Us(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function kQ(){const n=document;return n.fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||null}function PQ(){const n=document;return(n.exitFullscreen||n.msExitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen).call(n)}function KI(){const n=Zw(),e=yV(),t=window,s=navigator,r="connection";return n?Us([!("SharedWorker"in t),s[r]&&"ontypechange"in s[r],!("sinkId"in new Audio)])>=2:e?Us(["onorientationchange"in t,"orientation"in t,/android/i.test(s.appVersion)])>=2:!1}function IQ(){const n=navigator,e=window,t=Audio.prototype,{visualViewport:s}=e;return Us(["srLatency"in t,"srChannelCount"in t,"devicePosture"in n,s&&"segments"in s,"getTextInformation"in Image.prototype])>=3}function RQ(){return DQ()?-4:NQ()}function NQ(){const n=window,e=n.OfflineAudioContext||n.webkitOfflineAudioContext;if(!e)return-2;if(LQ())return-1;const t=4500,s=5e3,r=new e(1,s,44100),i=r.createOscillator();i.type="triangle",i.frequency.value=1e4;const o=r.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,i.connect(o),o.connect(r.destination),i.start(0);const[a,l]=MQ(r),u=B0(a.then(h=>OQ(h.getChannelData(0).subarray(t)),h=>{if(h.name==="timeout"||h.name==="suspended")return-3;throw h}));return()=>(l(),u)}function LQ(){return fo()&&!qI()&&!TQ()}function DQ(){return fo()&&tb()&&eb()||Zw()&&IQ()&&AQ()}function MQ(n){let i=()=>{};return[new Promise((a,l)=>{let u=!1,h=0,d=0;n.oncomplete=y=>a(y.renderedBuffer);const f=()=>{setTimeout(()=>l(CD("timeout")),Math.min(500,d+5e3-Date.now()))},g=()=>{try{const y=n.startRendering();switch(pV(y)&&B0(y),n.state){case"running":d=Date.now(),u&&f();break;case"suspended":document.hidden||h++,u&&h>=3?l(CD("suspended")):setTimeout(g,500);break}}catch(y){l(y)}};g(),i=()=>{u||(u=!0,d>0&&f())}}),i]}function OQ(n){let e=0;for(let t=0;t<n.length;++t)e+=Math.abs(n[t]);return e}function CD(n){const e=new Error(n);return e.name=n,e}async function vV(n,e,t=50){var s,r,i;const o=document;for(;!o.body;)await _1(t);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let h=!1;const d=()=>{h=!0,l()},f=v=>{h=!0,u(v)};a.onload=d,a.onerror=f;const{style:g}=a;g.setProperty("display","block","important"),g.position="absolute",g.top="0",g.left="0",g.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const y=()=>{var v,S;h||(((S=(v=a.contentWindow)===null||v===void 0?void 0:v.document)===null||S===void 0?void 0:S.readyState)==="complete"?d():setTimeout(y,10))};y()});!(!((r=(s=a.contentWindow)===null||s===void 0?void 0:s.document)===null||r===void 0)&&r.body);)await _1(t);return await n(a,a.contentWindow)}finally{(i=a.parentNode)===null||i===void 0||i.removeChild(a)}}function jQ(n){const[e,t]=hQ(n),s=document.createElement(e??"div");for(const r of Object.keys(t)){const i=t[r].join(" ");r==="style"?FQ(s.style,i):s.setAttribute(r,i)}return s}function FQ(n,e){for(const t of e.split(";")){const s=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(t);if(s){const[,r,i,,o]=s;n.setProperty(r,i,o||"")}}}function VQ(){let n=window;for(;;){const e=n.parent;if(!e||e===n)return!1;try{if(e.location.origin!==n.location.origin)return!0}catch(t){if(t instanceof Error&&t.name==="SecurityError")return!0;throw t}n=e}}const BQ="mmMwWLliI0O&1",UQ="48px",yf=["monospace","sans-serif","serif"],kD=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function zQ(){return vV(async(n,{document:e})=>{const t=e.body;t.style.fontSize=UQ;const s=e.createElement("div");s.style.setProperty("visibility","hidden","important");const r={},i={},o=g=>{const y=e.createElement("span"),{style:v}=y;return v.position="absolute",v.top="0",v.left="0",v.fontFamily=g,y.textContent=BQ,s.appendChild(y),y},a=(g,y)=>o(`'${g}',${y}`),l=()=>yf.map(o),u=()=>{const g={};for(const y of kD)g[y]=yf.map(v=>a(y,v));return g},h=g=>yf.some((y,v)=>g[v].offsetWidth!==r[y]||g[v].offsetHeight!==i[y]),d=l(),f=u();t.appendChild(s);for(let g=0;g<yf.length;g++)r[yf[g]]=d[g].offsetWidth,i[yf[g]]=d[g].offsetHeight;return kD.filter(g=>h(f[g]))})}function $Q(){const n=navigator.plugins;if(!n)return;const e=[];for(let t=0;t<n.length;++t){const s=n[t];if(!s)continue;const r=[];for(let i=0;i<s.length;++i){const o=s[i];r.push({type:o.type,suffixes:o.suffixes})}e.push({name:s.name,description:s.description,mimeTypes:r})}return e}function HQ(){return WQ(JQ())}function WQ(n){let e=!1,t,s;const[r,i]=GQ();return qQ(r,i)?(e=KQ(i),n?t=s="skipped":[t,s]=YQ(r,i)):t=s="unsupported",{winding:e,geometry:t,text:s}}function GQ(){const n=document.createElement("canvas");return n.width=1,n.height=1,[n,n.getContext("2d")]}function qQ(n,e){return!!(e&&n.toDataURL)}function KQ(n){return n.rect(0,0,10,10),n.rect(2,2,6,6),!n.isPointInPath(5,5,"evenodd")}function YQ(n,e){XQ(n,e);const t=bA(n),s=bA(n);return t!==s?["unstable","unstable"]:(QQ(n,e),[bA(n),t])}function XQ(n,e){n.width=240,n.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const t="Cwm fjordbank gly ";e.fillText(t,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(t,4,45)}function QQ(n,e){n.width=122,n.height=110,e.globalCompositeOperation="multiply";for(const[t,s,r]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=t,e.beginPath(),e.arc(s,r,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function bA(n){return n.toDataURL()}function JQ(){return fo()&&tb()&&eb()}function ZQ(){const n=navigator;let e=0,t;n.maxTouchPoints!==void 0?e=GI(n.maxTouchPoints):n.msMaxTouchPoints!==void 0&&(e=n.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch{t=!1}const s="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:t,touchStart:s}}function eJ(){return navigator.oscpu}function tJ(){const n=navigator,e=[],t=n.language||n.userLanguage||n.browserLanguage||n.systemLanguage;if(t!==void 0&&e.push([t]),Array.isArray(n.languages))Zw()&&SQ()||e.push(n.languages);else if(typeof n.languages=="string"){const s=n.languages;s&&e.push(s.split(","))}return e}function nJ(){return window.screen.colorDepth}function sJ(){return Ra(Fi(navigator.deviceMemory),void 0)}function rJ(){if(!(fo()&&tb()&&eb()))return iJ()}function iJ(){const n=screen,e=s=>Ra(GI(s),null),t=[e(n.width),e(n.height)];return t.sort().reverse(),t}const oJ=2500,aJ=10;let Fx,xA;function lJ(){if(xA!==void 0)return;const n=()=>{const e=fC();pC(e)?xA=setTimeout(n,oJ):(Fx=e,xA=void 0)};n()}function cJ(){return lJ(),async()=>{let n=fC();if(pC(n)){if(Fx)return[...Fx];kQ()&&(await PQ(),n=fC())}return pC(n)||(Fx=n),n}}function uJ(){if(fo()&&tb()&&eb())return()=>Promise.resolve(void 0);const n=cJ();return async()=>{const e=await n(),t=s=>s===null?null:mV(s,aJ);return[t(e[0]),t(e[1]),t(e[2]),t(e[3])]}}function fC(){const n=screen;return[Ra(Fi(n.availTop),null),Ra(Fi(n.width)-Fi(n.availWidth)-Ra(Fi(n.availLeft),0),null),Ra(Fi(n.height)-Fi(n.availHeight)-Ra(Fi(n.availTop),0),null),Ra(Fi(n.availLeft),null)]}function pC(n){for(let e=0;e<4;++e)if(n[e])return!1;return!0}function hJ(){return Ra(GI(navigator.hardwareConcurrency),void 0)}function dJ(){var n;const e=(n=window.Intl)===null||n===void 0?void 0:n.DateTimeFormat;if(e){const s=new e().resolvedOptions().timeZone;if(s)return s}const t=-fJ();return`UTC${t>=0?"+":""}${t}`}function fJ(){const n=new Date().getFullYear();return Math.max(Fi(new Date(n,0,1).getTimezoneOffset()),Fi(new Date(n,6,1).getTimezoneOffset()))}function pJ(){try{return!!window.sessionStorage}catch{return!0}}function mJ(){try{return!!window.localStorage}catch{return!0}}function gJ(){if(!(gV()||EQ()))try{return!!window.indexedDB}catch{return!0}}function yJ(){return!!window.openDatabase}function vJ(){return navigator.cpuClass}function wJ(){const{platform:n}=navigator;return n==="MacIntel"&&fo()&&!qI()?CQ()?"iPad":"iPhone":n}function bJ(){return navigator.vendor||""}function xJ(){const n=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const t=window[e];t&&typeof t=="object"&&n.push(e)}return n.sort()}function _J(){const n=document;try{n.cookie="cookietest=1; SameSite=Strict;";const e=n.cookie.indexOf("cookietest=")!==-1;return n.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function EJ(){const n=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',n("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",n("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",n("LnNwb25zb3JpdA=="),".ylamainos",n("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),n("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",n("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",n("LmhlYWRlci1ibG9ja2VkLWFk"),n("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",n("I2FkXzMwMFgyNTA="),n("I2Jhbm5lcmZsb2F0MjI="),n("I2NhbXBhaWduLWJhbm5lcg=="),n("I0FkLUNvbnRlbnQ=")],adGuardChinese:[n("LlppX2FkX2FfSA=="),n("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",n("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),n("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",n("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",n("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",n("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),n("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),n("LmFkZ29vZ2xl"),n("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[n("YW1wLWF1dG8tYWRz"),n("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",n("I2FkX2ludmlld19hcmVh")],adGuardRussian:[n("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),n("LnJlY2xhbWE="),'div[id^="smi2adblock"]',n("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[n("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),n("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",n("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),n("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),n("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",n("I3Jla2xhbWk="),n("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),n("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),n("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[n("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",n("LndpZGdldF9wb19hZHNfd2lkZ2V0"),n("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",n("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[n("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),n("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",n("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",n("I3Jla2xhbW5pLWJveA=="),n("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",n("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[n("I2FkdmVydGVudGll"),n("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",n("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",n("LnNwb25zb3JsaW5rZ3J1ZW4="),n("I3dlcmJ1bmdza3k="),n("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),n("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[n("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",n("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),n("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),n("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[n("LnJla2xhbW9zX3RhcnBhcw=="),n("LnJla2xhbW9zX251b3JvZG9z"),n("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),n("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),n("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[n("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[n("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),n("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",n("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[n("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),n("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),n("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",n("LmFkX19tYWlu"),n("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[n("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[n("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),n("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[n("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),n("I2xpdmVyZUFkV3JhcHBlcg=="),n("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),n("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[n("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",n("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),n("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),n("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[n("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),n("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),n("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",n("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),n("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),n("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),n("ZGl2I3NrYXBpZWNfYWQ=")],ro:[n("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),n("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),n("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),n("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[n("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),n("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),n("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",n("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),n("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",n("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function SJ({debug:n}={}){if(!AJ())return;const e=EJ(),t=Object.keys(e),s=[].concat(...t.map(o=>e[o])),r=await TJ(s);n&&CJ(e,r);const i=t.filter(o=>{const a=e[o];return Us(a.map(u=>r[u]))>a.length*.6});return i.sort(),i}function AJ(){return fo()||KI()}async function TJ(n){var e;const t=document,s=t.createElement("div"),r=new Array(n.length),i={};PD(s);for(let o=0;o<n.length;++o){const a=jQ(n[o]);a.tagName==="DIALOG"&&a.show();const l=t.createElement("div");PD(l),l.appendChild(a),s.appendChild(l),r[o]=a}for(;!t.body;)await _1(50);t.body.appendChild(s);try{for(let o=0;o<n.length;++o)r[o].offsetParent||(i[n[o]]=!0)}finally{(e=s.parentNode)===null||e===void 0||e.removeChild(s)}return i}function PD(n){n.style.setProperty("visibility","hidden","important"),n.style.setProperty("display","block","important")}function CJ(n,e){let t="DOM blockers debug:\n```";for(const s of Object.keys(n)){t+=`
${s}:`;for(const r of n[s])t+=`
  ${e[r]?"":""} ${r}`}console.log(`${t}
\`\`\``)}function kJ(){for(const n of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${n})`).matches)return n}function PJ(){if(ID("inverted"))return!0;if(ID("none"))return!1}function ID(n){return matchMedia(`(inverted-colors: ${n})`).matches}function IJ(){if(RD("active"))return!0;if(RD("none"))return!1}function RD(n){return matchMedia(`(forced-colors: ${n})`).matches}const RJ=100;function NJ(){if(matchMedia("(min-monochrome: 0)").matches){for(let n=0;n<=RJ;++n)if(matchMedia(`(max-monochrome: ${n})`).matches)return n;throw new Error("Too high value")}}function LJ(){if(vf("no-preference"))return 0;if(vf("high")||vf("more"))return 1;if(vf("low")||vf("less"))return-1;if(vf("forced"))return 10}function vf(n){return matchMedia(`(prefers-contrast: ${n})`).matches}function DJ(){if(ND("reduce"))return!0;if(ND("no-preference"))return!1}function ND(n){return matchMedia(`(prefers-reduced-motion: ${n})`).matches}function MJ(){if(LD("reduce"))return!0;if(LD("no-preference"))return!1}function LD(n){return matchMedia(`(prefers-reduced-transparency: ${n})`).matches}function OJ(){if(DD("high"))return!0;if(DD("standard"))return!1}function DD(n){return matchMedia(`(dynamic-range: ${n})`).matches}const et=Math,ks=()=>0;function jJ(){const n=et.acos||ks,e=et.acosh||ks,t=et.asin||ks,s=et.asinh||ks,r=et.atanh||ks,i=et.atan||ks,o=et.sin||ks,a=et.sinh||ks,l=et.cos||ks,u=et.cosh||ks,h=et.tan||ks,d=et.tanh||ks,f=et.exp||ks,g=et.expm1||ks,y=et.log1p||ks,v=C=>et.pow(et.PI,C),S=C=>et.log(C+et.sqrt(C*C-1)),w=C=>et.log(C+et.sqrt(C*C+1)),_=C=>et.log((1+C)/(1-C))/2,E=C=>et.exp(C)-1/et.exp(C)/2,I=C=>(et.exp(C)+1/et.exp(C))/2,D=C=>et.exp(C)-1,M=C=>(et.exp(2*C)-1)/(et.exp(2*C)+1),T=C=>et.log(1+C);return{acos:n(.12312423423423424),acosh:e(1e308),acoshPf:S(1e154),asin:t(.12312423423423424),asinh:s(1),asinhPf:w(1),atanh:r(.5),atanhPf:_(.5),atan:i(.5),sin:o(-1e300),sinh:a(1),sinhPf:E(1),cos:l(10.000000000123),cosh:u(1),coshPf:I(1),tan:h(-1e300),tanh:d(1),tanhPf:M(1),exp:f(1),expm1:g(1),expm1Pf:D(1),log1p:y(10),log1pPf:T(10),powPI:v(-100)}}const FJ="mmMwWLliI0fiflO&1",_A={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function VJ(){return BJ((n,e)=>{const t={},s={};for(const r of Object.keys(_A)){const[i={},o=FJ]=_A[r],a=n.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(i)){const u=i[l];u!==void 0&&(a.style[l]=u)}t[r]=a,e.append(n.createElement("br"),a)}for(const r of Object.keys(_A))s[r]=t[r].getBoundingClientRect().width;return s})}function BJ(n,e=4e3){return vV((t,s)=>{const r=s.document,i=r.body,o=i.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",Zw()?i.style.zoom=`${1/s.devicePixelRatio}`:fo()&&(i.style.zoom="reset");const a=r.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),i.appendChild(a),n(r,i)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function UJ(){return navigator.pdfViewerEnabled}function zJ(){const n=new Float32Array(1),e=new Uint8Array(n.buffer);return n[0]=1/0,n[0]=n[0]-n[0],e[3]}function $J(){const{ApplePaySession:n}=window;if(typeof(n==null?void 0:n.canMakePayments)!="function")return-1;if(HJ())return-3;try{return n.canMakePayments()?1:0}catch(e){return WJ(e)}}const HJ=VQ;function WJ(n){if(n instanceof Error&&n.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(n.message))return-2;throw n}function GJ(){var n;const e=document.createElement("a"),t=(n=e.attributionSourceId)!==null&&n!==void 0?n:e.attributionsourceid;return t===void 0?void 0:String(t)}const wV=-1,bV=-2,qJ=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),KJ=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),YJ=["FRAGMENT_SHADER","VERTEX_SHADER"],XJ=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],xV="WEBGL_debug_renderer_info",QJ="WEBGL_polygon_mode";function JJ({cache:n}){var e,t,s,r,i,o;const a=_V(n);if(!a)return wV;if(!SV(a))return bV;const l=EV()?null:a.getExtension(xV);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((t=a.getParameter(a.VENDOR))===null||t===void 0?void 0:t.toString())||"",vendorUnmasked:l?(s=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||s===void 0?void 0:s.toString():"",renderer:((r=a.getParameter(a.RENDERER))===null||r===void 0?void 0:r.toString())||"",rendererUnmasked:l?(i=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||i===void 0?void 0:i.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function ZJ({cache:n}){const e=_V(n);if(!e)return wV;if(!SV(e))return bV;const t=e.getSupportedExtensions(),s=e.getContextAttributes(),r=[],i=[],o=[],a=[],l=[];if(s)for(const h of Object.keys(s))i.push(`${h}=${s[h]}`);const u=MD(e);for(const h of u){const d=e[h];o.push(`${h}=${d}${qJ.has(d)?`=${e.getParameter(d)}`:""}`)}if(t)for(const h of t){if(h===xV&&EV()||h===QJ&&nZ())continue;const d=e.getExtension(h);if(!d){r.push(h);continue}for(const f of MD(d)){const g=d[f];a.push(`${f}=${g}${KJ.has(g)?`=${e.getParameter(g)}`:""}`)}}for(const h of YJ)for(const d of XJ){const f=eZ(e,h,d);l.push(`${h}.${d}=${f.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:i,parameters:o,shaderPrecisions:l,extensions:t,extensionParameters:a,unsupportedExtensions:r}}function _V(n){if(n.webgl)return n.webgl.context;const e=document.createElement("canvas");let t;e.addEventListener("webglCreateContextError",()=>t=void 0);for(const s of["webgl","experimental-webgl"]){try{t=e.getContext(s)}catch{}if(t)break}return n.webgl={context:t},t}function eZ(n,e,t){const s=n.getShaderPrecisionFormat(n[e],n[t]);return s?[s.rangeMin,s.rangeMax,s.precision]:[]}function MD(n){return Object.keys(n.__proto__).filter(tZ)}function tZ(n){return typeof n=="string"&&!n.match(/[^A-Z0-9_x]/)}function EV(){return yV()}function nZ(){return Zw()||fo()}function SV(n){return typeof n.getParameter=="function"}function sZ(){if(!(KI()||fo()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function rZ(){if(!window.Intl)return-1;const n=window.Intl.DateTimeFormat;if(!n)return-2;const e=n().resolvedOptions().locale;return!e&&e!==""?-3:e}const iZ={fonts:zQ,domBlockers:SJ,fontPreferences:VJ,audio:RQ,screenFrame:uJ,canvas:HQ,osCpu:eJ,languages:tJ,colorDepth:nJ,deviceMemory:sJ,screenResolution:rJ,hardwareConcurrency:hJ,timezone:dJ,sessionStorage:pJ,localStorage:mJ,indexedDB:gJ,openDatabase:yJ,cpuClass:vJ,platform:wJ,plugins:$Q,touchSupport:ZQ,vendor:bJ,vendorFlavors:xJ,cookiesEnabled:_J,colorGamut:kJ,invertedColors:PJ,forcedColors:IJ,monochrome:NJ,contrast:LJ,reducedMotion:DJ,reducedTransparency:MJ,hdr:OJ,math:jJ,pdfViewerEnabled:UJ,architecture:zJ,applePay:$J,privateClickMeasurement:GJ,audioBaseLatency:sZ,dateTimeLocale:rZ,webGlBasics:JJ,webGlExtensions:ZJ};function oZ(n){return _Q(iZ,n,[])}const aZ="$ if upgrade to Pro: https://fpjs.dev/pro";function lZ(n){const e=cZ(n),t=uZ(e);return{score:e,comment:aZ.replace(/\$/g,`${t}`)}}function cZ(n){if(KI())return .4;if(fo())return qI()&&!(tb()&&eb())?.5:.3;const e="value"in n.platform?n.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function uZ(n){return mV(.99+.01*n,1e-4)}function hZ(n){let e="";for(const t of Object.keys(n).sort()){const s=n[t],r="error"in s?"error":JSON.stringify(s.value);e+=`${e?"|":""}${t.replace(/([:|\\])/g,"\\$1")}:${r}`}return e}function AV(n){return JSON.stringify(n,(e,t)=>t instanceof Error?vQ(t):t,2)}function TV(n){return yQ(hZ(n))}function dZ(n){let e;const t=lZ(n);return{get visitorId(){return e===void 0&&(e=TV(this.components)),e},set visitorId(s){e=s},confidence:t,components:n,version:fV}}function fZ(n=50){return lQ(n,n*2)}function pZ(n,e){const t=Date.now();return{async get(s){const r=Date.now(),i=await n(),o=dZ(i);return(e||s!=null&&s.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${r-t}
visitorId: ${o.visitorId}
components: ${AV(i)}
\`\`\``),o}}}function mZ(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const n=new XMLHttpRequest;n.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${fV}/npm-monitoring`,!0),n.send()}catch(n){console.error(n)}}async function gZ(n={}){var e;(!((e=n.monitoring)!==null&&e!==void 0)||e)&&mZ();const{delayFallback:t,debug:s}=n;await fZ(t);const r=oZ({cache:{},debug:s});return pZ(r,s)}var yZ={load:gZ,hashComponents:TV,componentsToDebugString:AV};const lf=()=>{const[n,e]=B.useState(null),[t,s]=B.useState(!1),[r,i]=B.useState(!0),[o,a]=B.useState(null);return B.useEffect(()=>{const h=iG(Cu,async d=>{if(i(!0),d)try{const y=(await(await yZ.load()).get()).visitorId,v=In(ht,"users",d.uid),S=await HI(v);if(S.exists()){const w=S.data();a(w),w.primaryDeviceID?w.primaryDeviceID===y?(e(d),s(!1)):s(!0):(await da(v,{primaryDeviceID:y}),e(d),s(!1))}else await w1(v,{email:d.email,primaryDeviceID:y,isPaid:!1,createdAt:new Date}),e(d),s(!1)}catch(f){console.error("Auth Check Error:",f)}else e(null),a(null),s(!1);i(!1)});return()=>h()},[]),{user:n,isLocked:t,loading:r,userProfile:o,login:async(h,d)=>{try{return await m4(Cu,h,d),!0}catch(f){throw console.error("Login Error:",f),f}},logout:async()=>{await oG(Cu),s(!1)}}};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(n,e)=>{const t=B.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>B.createElement("svg",{ref:h,...vZ,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${wZ(n)}`,a].join(" "),...u},[...e.map(([d,f])=>B.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=ge("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=ge("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=ge("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=ge("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ge("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=ge("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ge("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=ge("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=ge("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=ge("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=ge("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ge("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=ge("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=ge("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ge("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=ge("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ge("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=ge("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=ge("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ge("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function BD(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function $Z(...n){return e=>{let t=!1;const s=n.map(r=>{const i=BD(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():BD(n[r],null)}}}}var HZ=Symbol.for("react.lazy"),S1=YB[" use ".trim().toString()];function WZ(n){return typeof n=="object"&&n!==null&&"then"in n}function MV(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===HZ&&"_payload"in n&&WZ(n._payload)}function GZ(n){const e=KZ(n),t=B.forwardRef((s,r)=>{let{children:i,...o}=s;MV(i)&&typeof S1=="function"&&(i=S1(i._payload));const a=B.Children.toArray(i),l=a.find(XZ);if(l){const u=l.props.children,h=a.map(d=>d===l?B.Children.count(u)>1?B.Children.only(null):B.isValidElement(u)?u.props.children:null:d);return p.jsx(e,{...o,ref:r,children:B.isValidElement(u)?B.cloneElement(u,void 0,h):null})}return p.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var qZ=GZ("Slot");function KZ(n){const e=B.forwardRef((t,s)=>{let{children:r,...i}=t;if(MV(r)&&typeof S1=="function"&&(r=S1(r._payload)),B.isValidElement(r)){const o=JZ(r),a=QZ(i,r.props);return r.type!==B.Fragment&&(a.ref=s?$Z(s,o):o),B.cloneElement(r,a)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var YZ=Symbol("radix.slottable");function XZ(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===YZ}function QZ(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function JZ(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function OV(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=OV(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function kg(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=OV(n))&&(s&&(s+=" "),s+=e);return s}const UD=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,zD=kg,ZZ=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return zD(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const h=t==null?void 0:t[u],d=i==null?void 0:i[u];if(h===null)return null;const f=UD(h)||UD(d);return r[u][f]}),a=t&&Object.entries(t).reduce((u,h)=>{let[d,f]=h;return f===void 0||(u[d]=f),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let{class:d,className:f,...g}=h;return Object.entries(g).every(y=>{let[v,S]=y;return Array.isArray(S)?S.includes({...i,...a}[v]):{...i,...a}[v]===S})?[...u,d,f]:u},[]);return zD(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},ZI="-",eee=n=>{const e=nee(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{const a=o.split(ZI);return a[0]===""&&a.length!==1&&a.shift(),jV(a,e)||tee(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},jV=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?jV(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(ZI);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},$D=/^\[(.+)\]$/,tee=n=>{if($D.test(n)){const e=$D.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},nee=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return ree(Object.entries(n.classGroups),t).forEach(([i,o])=>{gC(o,s,i,e)}),s},gC=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:HD(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(see(r)){gC(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{gC(o,HD(e,i),t,s)})})},HD=(n,e)=>{let t=n;return e.split(ZI).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},see=n=>n.isThemeGetter,ree=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,r]}):n,iee=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},FV="!",oee=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let u=0,h=0,d;for(let S=0;S<a.length;S++){let w=a[S];if(u===0){if(w===r&&(s||a.slice(S,S+i)===e)){l.push(a.slice(h,S)),h=S+i;continue}if(w==="/"){d=S;continue}}w==="["?u++:w==="]"&&u--}const f=l.length===0?a:a.substring(h),g=f.startsWith(FV),y=g?f.substring(1):f,v=d&&d>h?d-h:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},aee=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},lee=n=>({cache:iee(n.cacheSize),parseClassName:oee(n),...eee(n)}),cee=/\s+/,uee=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=n.trim().split(cee);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=t(u);let y=!!g,v=s(y?f.substring(0,g):f);if(!v){if(!y){a=u+(a.length>0?" "+a:a);continue}if(v=s(f),!v){a=u+(a.length>0?" "+a:a);continue}y=!1}const S=aee(h).join(":"),w=d?S+FV:S,_=w+v;if(i.includes(_))continue;i.push(_);const E=r(v,y);for(let I=0;I<E.length;++I){const D=E[I];i.push(w+D)}a=u+(a.length>0?" "+a:a)}return a};function hee(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=VV(e))&&(s&&(s+=" "),s+=t);return s}const VV=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=VV(n[s]))&&(t&&(t+=" "),t+=e);return t};function dee(n,...e){let t,s,r,i=o;function o(l){const u=e.reduce((h,d)=>d(h),n());return t=lee(u),s=t.cache.get,r=t.cache.set,i=a,a(l)}function a(l){const u=s(l);if(u)return u;const h=uee(l,t);return r(l,h),h}return function(){return i(hee.apply(null,arguments))}}const kt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},BV=/^\[(?:([a-z-]+):)?(.+)\]$/i,fee=/^\d+\/\d+$/,pee=new Set(["px","full","screen"]),mee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_a=n=>dp(n)||pee.has(n)||fee.test(n),Yl=n=>Pg(n,"length",Cee),dp=n=>!!n&&!Number.isNaN(Number(n)),SA=n=>Pg(n,"number",dp),sy=n=>!!n&&Number.isInteger(Number(n)),bee=n=>n.endsWith("%")&&dp(n.slice(0,-1)),Ne=n=>BV.test(n),Xl=n=>mee.test(n),xee=new Set(["length","size","percentage"]),_ee=n=>Pg(n,xee,UV),Eee=n=>Pg(n,"position",UV),See=new Set(["image","url"]),Aee=n=>Pg(n,See,Pee),Tee=n=>Pg(n,"",kee),ry=()=>!0,Pg=(n,e,t)=>{const s=BV.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},Cee=n=>gee.test(n)&&!yee.test(n),UV=()=>!1,kee=n=>vee.test(n),Pee=n=>wee.test(n),Iee=()=>{const n=kt("colors"),e=kt("spacing"),t=kt("blur"),s=kt("brightness"),r=kt("borderColor"),i=kt("borderRadius"),o=kt("borderSpacing"),a=kt("borderWidth"),l=kt("contrast"),u=kt("grayscale"),h=kt("hueRotate"),d=kt("invert"),f=kt("gap"),g=kt("gradientColorStops"),y=kt("gradientColorStopPositions"),v=kt("inset"),S=kt("margin"),w=kt("opacity"),_=kt("padding"),E=kt("saturate"),I=kt("scale"),D=kt("sepia"),M=kt("skew"),T=kt("space"),C=kt("translate"),N=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ne,e],O=()=>[Ne,e],j=()=>["",_a,Yl],V=()=>["auto",dp,Ne],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Ne],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[dp,Ne];return{cacheSize:500,separator:":",theme:{colors:[ry],spacing:[_a,Yl],blur:["none","",Xl,Ne],brightness:ue(),borderColor:[n],borderRadius:["none","","full",Xl,Ne],borderSpacing:O(),borderWidth:j(),contrast:ue(),grayscale:q(),hueRotate:ue(),invert:q(),gap:O(),gradientColorStops:[n],gradientColorStopPositions:[bee,Yl],inset:R(),margin:R(),opacity:ue(),padding:O(),saturate:ue(),scale:ue(),sepia:q(),skew:ue(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[Xl]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Ne]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sy,Ne]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",sy,Ne]}],"grid-cols":[{"grid-cols":[ry]}],"col-start-end":[{col:["auto",{span:["full",sy,Ne]},Ne]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[ry]}],"row-start-end":[{row:["auto",{span:[sy,Ne]},Ne]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,e]}],"min-w":[{"min-w":[Ne,e,"min","max","fit"]}],"max-w":[{"max-w":[Ne,e,"none","full","min","max","fit","prose",{screen:[Xl]},Xl]}],h:[{h:[Ne,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Xl,Yl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",SA]}],"font-family":[{font:[ry]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",dp,SA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_a,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_a,Yl]}],"underline-offset":[{"underline-offset":["auto",_a,Ne]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Eee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_ee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Aee]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:U()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[_a,Ne]}],"outline-w":[{outline:[_a,Yl]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[_a,Yl]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Xl,Tee]}],"shadow-color":[{shadow:[ry]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Xl,Ne]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[sy,Ne]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[_a,Yl,SA]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ree=dee(Iee);function Nee(...n){return Ree(kg(n))}const Lee=ZZ("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),zV=B.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?qZ:"button";return p.jsx(o,{className:Nee(Lee({variant:e,size:t,className:n})),ref:i,...r})});zV.displayName="Button";const Dee=({children:n})=>{const{isLocked:e,logout:t}=lf();return e?p.jsx("div",{className:"min-h-screen bg-red-50 flex flex-col items-center justify-center p-4 z-[9999] relative",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-2xl text-center max-w-md border-2 border-red-100",children:[p.jsx("div",{className:"bg-red-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:p.jsx(yl,{className:"h-10 w-10 text-red-600"})}),p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2 font-handwritten",children:"Access Denied"}),p.jsxs("p",{className:"text-gray-600 mb-6 text-lg",children:["Security Alert: This account is bound to another device.",p.jsx("br",{}),p.jsx("span",{className:"text-sm text-gray-400 mt-2 block",children:"ID Mismatch detected"})]}),p.jsx(zV,{onClick:t,variant:"destructive",className:"w-full font-bold",children:"Logout"})]})}):p.jsx(p.Fragment,{children:n})},Ms=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),yC=[.001,0,0,.001,0,0],AA=1.35,jr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ta={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},U0="pdfjs_internal_editor_",Ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},$V={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},f0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ln={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Af={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},sb={ERRORS:0,WARNINGS:1,INFOS:5},gg={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},tx={moveTo:0,lineTo:1,curveTo:2,closePath:3},HV={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let QE=sb.WARNINGS;function Mee(n){Number.isInteger(n)&&(QE=n)}function Oee(){return QE}function JE(n){QE>=sb.INFOS&&console.info(`Info: ${n}`)}function Te(n){QE>=sb.WARNINGS&&console.warn(`Warning: ${n}`)}function vt(n){throw new Error(n)}function We(n,e){n||vt(e)}function jee(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function eR(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=zee(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return jee(s)?s:null}function tR(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&eR(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const cf=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class WD extends cf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class TA extends cf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class A1 extends cf{constructor(e){super(e,"InvalidPDFException")}}class z0 extends cf{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class Fee extends cf{constructor(e){super(e,"FormatError")}}class Nl extends cf{constructor(e){super(e,"AbortException")}}function WV(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&vt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function rb(n){typeof n!="string"&&vt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function Vee(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Bee(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Uee(){try{return new Function(""),!0}catch{return!1}}class qn{static get isLittleEndian(){return Le(this,"isLittleEndian",Bee())}static get isEvalSupported(){return Le(this,"isEvalSupported",Uee())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Le(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Le(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const CA=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var xl,Bx,vC;class ce{static makeHexColor(e,t,s){return`#${CA[e]}${CA[t]}${CA[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let h=0;h<6;h+=2){const d=e[s+h],f=e[s+h+1];e[s+h]=d*r+f*o+l,e[s+h+1]=d*i+f*a+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5],h=e[0],d=e[1],f=e[2],g=e[3];let y=r*h+l,v=y,S=r*f+l,w=S,_=a*d+u,E=_,I=a*g+u,D=I;if(i!==0||o!==0){const M=i*h,T=i*f,C=o*d,N=o*g;y+=C,w+=C,S+=N,v+=N,_+=M,D+=M,I+=T,E+=T}s[0]=Math.min(s[0],y,S,v,w),s[1]=Math.min(s[1],_,I,E,D),s[2]=Math.max(s[2],y,S,v,w),s[3]=Math.max(s[3],_,I,E,D)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,l=s*i+r*o,u=i**2+o**2,h=(a+u)/2,d=Math.sqrt(h**2-(a*u-l**2));t[0]=Math.sqrt(h+d||1),t[1]=Math.sqrt(h-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,l,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l),k(this,xl,vC).call(this,e,s,i,a,t,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),u),k(this,xl,vC).call(this,e,s,i,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),u)}}xl=new WeakSet,Bx=function(e,t,s,r,i,o,a,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,y=d*(d*(d*e+3*u*t)+3*f*s)+g*r,v=d*(d*(d*i+3*u*o)+3*f*a)+g*l;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],v)},vC=function(e,t,s,r,i,o,a,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&k(this,xl,Bx).call(this,e,t,s,r,i,o,a,l,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const y=Math.sqrt(g),v=2*u;k(this,xl,Bx).call(this,e,t,s,r,i,o,a,l,(-h+y)/v,f),k(this,xl,Bx).call(this,e,t,s,r,i,o,a,l,(-h-y)/v,f)},A(ce,xl);function zee(n){return decodeURIComponent(escape(n))}let kA=null,GD=null;function GV(n){return kA||(kA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,GD=new Map([["","t"]])),n.replaceAll(kA,(e,t,s)=>t?t.normalize("NFKC"):GD.get(s))}function nR(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),WV(n)}const sR="pdfjs_internal_id_";function $ee(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function ws(n,e,t){return Math.min(Math.max(n,e),t)}function qV(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(WV(n))}function Hee(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):rb(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class $0{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if($0.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class rR{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),a&&$0.shouldBuildText(r.name)&&u.push(g)}return{textDivs:u}}const h=[[r,-1,o]];for(;h.length>0;){const[g,y,v]=h.at(-1);if(y+1===g.children.length){h.pop();continue}const S=g.children[++h.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const E=document.createTextNode(S.value);u.push(E),v.append(E);continue}const _=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(v.append(_),S.attributes&&this.setAttributes({html:_,element:S,storage:t,intent:i,linkService:s}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,_]);else if(S.value){const E=document.createTextNode(S.value);a&&$0.shouldBuildText(w)&&u.push(E),_.append(E)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Sa="http://www.w3.org/2000/svg",lh=class lh{};X(lh,"CSS",96),X(lh,"PDF",72),X(lh,"PDF_TO_CSS_UNITS",lh.CSS/lh.PDF);let Ll=lh;async function Ig(n,e="text"){if(Ay(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class ib{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,d=0,f=0,g=1;break;case 90:h=0,d=1,f=1,g=0;break;case 270:h=0,d=-1,f=-1,g=0;break;case 0:h=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let y,v,S,w;h===0?(y=Math.abs(u-e[1])*s+i,v=Math.abs(l-e[0])*s+o,S=(e[3]-e[1])*s,w=(e[2]-e[0])*s):(y=Math.abs(l-e[0])*s+i,v=Math.abs(u-e[1])*s+o,S=(e[2]-e[0])*s,w=(e[3]-e[1])*s),this.transform=[h*s,d*s,f*s,g*s,y-h*s*l-f*s*u,v-d*s*l-g*s*u],this.width=S,this.height=w}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new ib({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return ce.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];ce.applyTransform(t,this.transform);const s=[e[2],e[3]];return ce.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return ce.applyInverseTransform(s,this.transform),s}}class ZE extends cf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ob(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function eS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function KV(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function YV(n,e="document.pdf"){if(typeof n!="string")return e;if(ob(n))return Te('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const u of a)if(i.test(u))return r(u);const l=Array.from(s.searchParams.keys()).reverse();for(const u of l)if(i.test(u))return r(u)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return r(l[0])}return e}class qD{constructor(){X(this,"started",Object.create(null));X(this,"times",[])}time(e){e in this.started&&Te(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Te(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Ay(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Yr(n){n.preventDefault()}function Wt(n){n.preventDefault(),n.stopPropagation()}function Wee(n){console.log("Deprecated API usage: "+n)}var ev;class H0{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,ev)||b(this,ev,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,ev).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(s,r,i,o,a,l))}}ev=new WeakMap,A(H0,ev);function XV(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new ib({viewBox:i,userUnit:1,scale:e,rotation:t})}function Rg(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Te(`Not a valid color format: "${n}"`),[0,0,0])}function Gee(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Rg(s))}e.remove()}function $t(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function xo(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function Fu(n,e,t=!1,s=!0){if(e instanceof ib){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=qn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,h=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class uo{constructor(){const{pixelRatio:e}=uo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,l=1/0;s=uo.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,l=r/t);const u=Math.min(o,a,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const T1=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class qee{static get isDarkMode(){var e;return Le(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class QV{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",Rg(s))}}function JV(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function KD(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const l=i-o;switch(e[1]=a<.5?l/(i+o):l/(2-i-o),i){case t:e[0]=((s-r)/l+(s<r?6:0))*60;break;case s:e[0]=((r-t)/l+2)*60;break;case r:e[0]=((t-s)/l+4)*60;break}}e[2]=a}function wC(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),a=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function YD(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function XD(n,e,t){wC(n,t),t.map(YD);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];wC(e,t),t.map(YD);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const QD=new Map;function ZV(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=QD.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);KD(n,o);const a=r.subarray(6,9);KD(e,a);const l=a[2]<.5,u=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),XD(o,a,i)<u){let h,d;l?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const g=o[2]=(h+d)/2;l===XD(o,a,i)<u?h=g:d=g}o[2]=l?d:h}return wC(o,i),s=ce.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),QD.set(t,s),s}function iR({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const u=o[a];i.append(document.createTextNode(u)),a<l-1&&i.append(document.createElement("br"))}r.append(i)}else rR.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var pc,mc,oi,ai,tv,gc,Sp,Ap,nv,j1,e6,is,t6,n6,Tf,Ty;const ka=class ka{constructor(e){A(this,is);A(this,pc,null);A(this,mc,null);A(this,oi);A(this,ai,null);A(this,tv,null);A(this,gc,null);A(this,Sp,null);A(this,Ap,null);b(this,oi,e),c(ka,nv)||b(ka,nv,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=b(this,pc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,oi)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Yr,{signal:t}),e.addEventListener("pointerdown",k(ka,j1,e6),{signal:t}));const s=b(this,ai,document.createElement("div"));s.className="buttons",e.append(s);const r=c(this,oi).toolbarPosition;if(r){const{style:i}=e,o=c(this,oi)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,pc)}hide(){var e;c(this,pc).classList.add("hidden"),(e=c(this,mc))==null||e.hideDropdown()}show(){var e,t;c(this,pc).classList.remove("hidden"),(e=c(this,tv))==null||e.shown(),(t=c(this,gc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,oi),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",c(ka,nv)[e]),k(this,is,Tf).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,ai).append(s)}async addAltText(e){const t=await e.render();k(this,is,Tf).call(this,t),c(this,ai).append(t,c(this,is,Ty)),b(this,tv,e)}addComment(e,t=null){if(c(this,gc))return;const s=e.renderForToolbar();if(!s)return;k(this,is,Tf).call(this,s);const r=b(this,Sp,c(this,is,Ty));t?(c(this,ai).insertBefore(s,t),c(this,ai).insertBefore(r,t)):c(this,ai).append(s,r),b(this,gc,e),e.toolbar=this}addColorPicker(e){if(c(this,mc))return;b(this,mc,e);const t=e.renderButton();k(this,is,Tf).call(this,t),c(this,ai).append(t,c(this,is,Ty))}async addEditSignatureButton(e){const t=b(this,Ap,await e.renderEditButton(c(this,oi)));k(this,is,Tf).call(this,t),c(this,ai).append(t,c(this,is,Ty))}removeButton(e){var t,s;switch(e){case"comment":(t=c(this,gc))==null||t.removeToolbarCommentButton(),b(this,gc,null),(s=c(this,Sp))==null||s.remove(),b(this,Sp,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=c(this,ai).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,Ap)&&(c(this,Ap).title=e)}remove(){var e;c(this,pc).remove(),(e=c(this,mc))==null||e.destroy(),b(this,mc,null)}};pc=new WeakMap,mc=new WeakMap,oi=new WeakMap,ai=new WeakMap,tv=new WeakMap,gc=new WeakMap,Sp=new WeakMap,Ap=new WeakMap,nv=new WeakMap,j1=new WeakSet,e6=function(e){e.stopPropagation()},is=new WeakSet,t6=function(e){c(this,oi)._focusEventsAllowed=!1,Wt(e)},n6=function(e){c(this,oi)._focusEventsAllowed=!0,Wt(e)},Tf=function(e){const t=c(this,oi)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",k(this,is,t6).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,is,n6).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Yr,{signal:t}),!0)},Ty=function(){const e=document.createElement("div");return e.className="divider",e},A(ka,j1),A(ka,nv,null);let bC=ka;var sv,xh,La,Dl,s6,r6,xC;class Kee{constructor(e){A(this,Dl);A(this,sv,null);A(this,xh,null);A(this,La);b(this,La,e)}show(e,t,s){const[r,i]=k(this,Dl,r6).call(this,t,s),{style:o}=c(this,xh)||b(this,xh,k(this,Dl,s6).call(this));e.append(c(this,xh)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,xh).remove()}}sv=new WeakMap,xh=new WeakMap,La=new WeakMap,Dl=new WeakSet,s6=function(){const e=b(this,xh,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,La)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Yr,{signal:t});const s=b(this,sv,document.createElement("div"));return s.className="buttons",e.append(s),c(this,La).hasCommentManager()&&k(this,Dl,xC).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,La).commentSelection("floating_button")}),k(this,Dl,xC).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,La).highlightSelection("floating_button")}),e},r6=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},xC=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=c(this,La)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Yr,{signal:a}),i.addEventListener("click",r,{signal:a})),c(this,sv).append(i)};function i6(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var F1;class Yee{constructor(){A(this,F1,0)}get id(){return`${U0}${Jt(this,F1)._++}`}}F1=new WeakMap;var Tp,rv,fs,Cp,Ux;const yR=class yR{constructor(){A(this,Cp);A(this,Tp,nR());A(this,rv,0);A(this,fs,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return k(this,Cp,Ux).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return k(this,Cp,Ux).call(this,e,e)}async getFromBlob(e,t){const s=await t;return k(this,Cp,Ux).call(this,e,s)}async getFromId(e){c(this,fs)||b(this,fs,new Map);const t=c(this,fs).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,fs)||b(this,fs,new Map);let s=c(this,fs).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Tp)}_${Jt(this,rv)._++}`,refCounter:1,isSvg:!1},c(this,fs).set(e,s),c(this,fs).set(s.id,s),s}getSvgUrl(e){const t=c(this,fs).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,fs)||b(this,fs,new Map);const t=c(this,fs).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Tp)}_`)}};Tp=new WeakMap,rv=new WeakMap,fs=new WeakMap,Cp=new WeakSet,Ux=async function(e,t){c(this,fs)||b(this,fs,new Map);let s=c(this,fs).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Tp)}_${Jt(this,rv)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await Ig(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=yR._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;a.src=await i?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){Te(r),s=null}return c(this,fs).set(e,s),s&&c(this,fs).set(s.id,s),s};let _C=yR;var cn,yc,iv,zt;class Xee{constructor(e=128){A(this,cn,[]);A(this,yc,!1);A(this,iv);A(this,zt,-1);b(this,iv,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),c(this,yc))return;const l={cmd:e,undo:t,post:s,type:i};if(c(this,zt)===-1){c(this,cn).length>0&&(c(this,cn).length=0),b(this,zt,0),c(this,cn).push(l);return}if(o&&c(this,cn)[c(this,zt)].type===i){a&&(l.undo=c(this,cn)[c(this,zt)].undo),c(this,cn)[c(this,zt)]=l;return}const u=c(this,zt)+1;u===c(this,iv)?c(this,cn).splice(0,1):(b(this,zt,u),u<c(this,cn).length&&c(this,cn).splice(u)),c(this,cn).push(l)}undo(){if(c(this,zt)===-1)return;b(this,yc,!0);const{undo:e,post:t}=c(this,cn)[c(this,zt)];e(),t==null||t(),b(this,yc,!1),b(this,zt,c(this,zt)-1)}redo(){if(c(this,zt)<c(this,cn).length-1){b(this,zt,c(this,zt)+1),b(this,yc,!0);const{cmd:e,post:t}=c(this,cn)[c(this,zt)];e(),t==null||t(),b(this,yc,!1)}}hasSomethingToUndo(){return c(this,zt)!==-1}hasSomethingToRedo(){return c(this,zt)<c(this,cn).length-1}cleanType(e){if(c(this,zt)!==-1){for(let t=c(this,zt);t>=0;t--)if(c(this,cn)[t].type!==e){c(this,cn).splice(t+1,c(this,zt)-t),b(this,zt,t);return}c(this,cn).length=0,b(this,zt,-1)}}destroy(){b(this,cn,null)}}cn=new WeakMap,yc=new WeakMap,iv=new WeakMap,zt=new WeakMap;var V1,o6;class ab{constructor(e){A(this,V1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qn.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(k(this,V1,o6).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||Wt(t))}}V1=new WeakSet,o6=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const B1=class B1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Gee(e),Le(this,"_colors",e)}convert(e){const t=Rg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return B1._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?ce.makeHexColor(...t):e}};X(B1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let EC=B1;var kp,br,Pp,en,Cn,Ip,li,Rp,ci,ps,vc,wc,Np,bc,Ro,ui,_h,ov,av,Lp,lv,No,xc,Dp,_c,Lo,U1,Ec,Mp,cv,Sc,Eh,Op,Ac,uv,vn,st,Da,Tc,Cc,hv,jp,dv,kc,Do,Ma,fv,pv,hi,ne,zx,SC,a6,l6,Cy,c6,u6,h6,AC,d6,TC,CC,f6,Ps,Aa,p6,m6,kC,g6,ky,PC;const Xf=class Xf{constructor(e,t,s,r,i,o,a,l,u,h,d,f,g,y,v,S){A(this,ne);A(this,kp,new AbortController);A(this,br,null);A(this,Pp,null);A(this,en,new Map);A(this,Cn,new Map);A(this,Ip,null);A(this,li,null);A(this,Rp,null);A(this,ci,new Xee);A(this,ps,null);A(this,vc,null);A(this,wc,null);A(this,Np,0);A(this,bc,new Set);A(this,Ro,null);A(this,ui,null);A(this,_h,new Set);X(this,"_editorUndoBar",null);A(this,ov,!1);A(this,av,!1);A(this,Lp,!1);A(this,lv,null);A(this,No,null);A(this,xc,null);A(this,Dp,null);A(this,_c,!1);A(this,Lo,null);A(this,U1,new Yee);A(this,Ec,!1);A(this,Mp,!1);A(this,cv,!1);A(this,Sc,null);A(this,Eh,null);A(this,Op,null);A(this,Ac,null);A(this,uv,null);A(this,vn,Ae.NONE);A(this,st,new Set);A(this,Da,null);A(this,Tc,null);A(this,Cc,null);A(this,hv,null);A(this,jp,null);A(this,dv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,kc,[0,0]);A(this,Do,null);A(this,Ma,null);A(this,fv,null);A(this,pv,null);A(this,hi,null);const w=this._signal=c(this,kp).signal;b(this,Ma,e),b(this,fv,t),b(this,pv,s),b(this,Ip,r),b(this,ps,i),b(this,Tc,o),b(this,jp,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:w}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),a._on("setpreference",this.onSetPreference.bind(this),{signal:w}),a._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:w}),window.addEventListener("pointerdown",()=>{b(this,Mp,!0)},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{b(this,Mp,!1)},{capture:!0,signal:w}),k(this,ne,c6).call(this),k(this,ne,f6).call(this),k(this,ne,AC).call(this),b(this,li,l.annotationStorage),b(this,lv,l.filterFactory),b(this,Cc,u),b(this,Dp,h||null),b(this,ov,d),b(this,av,f),b(this,Lp,g),b(this,uv,y||null),this.viewParameters={realScale:Ll.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=Xf.prototype,t=o=>c(o,Ma).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new ab([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Ma).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Ma).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,l,u;(e=c(this,hi))==null||e.resolve(),b(this,hi,null),(t=c(this,kp))==null||t.abort(),b(this,kp,null),this._signal=null;for(const h of c(this,Cn).values())h.destroy();c(this,Cn).clear(),c(this,en).clear(),c(this,_h).clear(),(s=c(this,Ac))==null||s.clear(),b(this,br,null),c(this,st).clear(),c(this,ci).destroy(),(r=c(this,Ip))==null||r.destroy(),(i=c(this,ps))==null||i.destroy(),(o=c(this,Tc))==null||o.destroy(),(a=c(this,Lo))==null||a.hide(),b(this,Lo,null),(l=c(this,Op))==null||l.destroy(),b(this,Op,null),b(this,Pp,null),c(this,No)&&(clearTimeout(c(this,No)),b(this,No,null)),c(this,Do)&&(clearTimeout(c(this,Do)),b(this,Do,null)),(u=this._editorUndoBar)==null||u.destroy(),b(this,jp,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,uv)}get useNewAltTextFlow(){return c(this,av)}get useNewAltTextWhenAddingImage(){return c(this,Lp)}get hcmFilter(){return Le(this,"hcmFilter",c(this,Cc)?c(this,lv).addHCMFilter(c(this,Cc).foreground,c(this,Cc).background):"none")}get direction(){return Le(this,"direction",getComputedStyle(c(this,Ma)).direction)}get _highlightColors(){return Le(this,"_highlightColors",c(this,Dp)?new Map(c(this,Dp).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const t=new Map,s=!!c(this,Cc);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return Le(this,"highlightColors",t)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,wc,e)}setMainHighlightColorPicker(e){b(this,Op,e)}editAltText(e,t=!1){var s;(s=c(this,Ip))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!c(this,ps)}editComment(e,t,s,r){var i;(i=c(this,ps))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=c(this,Cn).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,ps))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,ps))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,ps))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=c(this,ps))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=c(this,ps))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,ps))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,Cn).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=c(this,Tc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Tc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Lp,t);break}}onPageChanging({pageNumber:e}){b(this,Np,e-1)}focusMainContainer(){c(this,Ma).focus()}findParent(e,t){for(const s of c(this,Cn).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){c(this,fv).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,_h).add(e)}removeShouldRescale(e){c(this,_h).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ll.PDF_TO_CSS_UNITS;for(const s of c(this,_h))s.onScaleChanging();(t=c(this,wc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=s,l=s.toString(),h=k(this,ne,zx).call(this,s).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;s.empty();const f=k(this,ne,SC).call(this,h),g=c(this,vn)===Ae.NONE,y=()=>{const v=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a,text:l});g&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(g){this.switchToMode(Ae.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,li))return null;const t=`${U0}${e}`,s=c(this,li).getRawValue(t);return s&&c(this,li).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&c(this,li)&&!c(this,li).has(e.id)&&c(this,li).setValue(e.id,e)}a11yAlert(e,t=null){const s=c(this,pv);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,_c)&&(b(this,_c,!1),k(this,ne,Cy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,st))if(t.div.contains(e)){b(this,Eh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Eh))return;const[e,t]=c(this,Eh);b(this,Eh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,ne,AC).call(this),k(this,ne,TC).call(this)}removeEditListeners(){k(this,ne,d6).call(this),k(this,ne,CC).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,ui))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,ui))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,br))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,st)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,ui))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){Te(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const u=await r.deserialize(l);if(!u)return;i.push(u)}const o=()=>{for(const l of i)k(this,ne,kC).call(this,l);k(this,ne,PC).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){Te(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,vn)!==Ae.NONE&&!this.isEditorHandlingKeyboard&&Xf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,_c)&&(b(this,_c,!1),k(this,ne,Cy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(k(this,ne,u6).call(this),k(this,ne,TC).call(this),k(this,ne,Ps).call(this,{isEditing:c(this,vn)!==Ae.NONE,isEmpty:k(this,ne,ky).call(this),hasSomethingToUndo:c(this,ci).hasSomethingToUndo(),hasSomethingToRedo:c(this,ci).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ne,h6).call(this),k(this,ne,CC).call(this),k(this,ne,Ps).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,ui)){b(this,ui,e);for(const t of c(this,ui))k(this,ne,Aa).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,U1).id}get currentLayer(){return c(this,Cn).get(c(this,Np))}getLayer(e){return c(this,Cn).get(e)}get currentPageIndex(){return c(this,Np)}addLayer(e){c(this,Cn).set(e.pageIndex,e),c(this,Ec)?e.enable():e.disable()}removeLayer(e){c(this,Cn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,a,l,u,h,d;if(c(this,vn)!==e&&!(c(this,hi)&&(await c(this,hi).promise,!c(this,hi)))){if(b(this,hi,Promise.withResolvers()),(o=c(this,wc))==null||o.commitOrRemove(),c(this,vn)===Ae.POPUP&&((a=c(this,ps))==null||a.hideSidebar()),(l=c(this,ps))==null||l.destroyPopup(),b(this,vn,e),e===Ae.NONE){this.setEditingState(!1),k(this,ne,m6).call(this);for(const f of c(this,en).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),c(this,hi).resolve();return}for(const f of c(this,en).values())f.addStandaloneCommentButton();e===Ae.SIGNATURE&&await((h=c(this,Tc))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await k(this,ne,p6).call(this),this.unselectAll();for(const f of c(this,Cn).values())f.updateMode(e);if(e===Ae.POPUP){c(this,Pp)||b(this,Pp,await c(this,jp).getAnnotationsByType(new Set(c(this,ui).map(y=>y._editorType))));const f=new Set,g=[];for(const y of c(this,en).values()){const{annotationElementId:v,hasComment:S,deleted:w}=y;v&&f.add(v),S&&!w&&g.push(y.getData())}for(const y of c(this,Pp)){const{id:v,popupRef:S,contentsObj:w}=y;S&&(w!=null&&w.str)&&!f.has(v)&&!c(this,bc).has(v)&&g.push(y)}(d=c(this,ps))==null||d.showSidebar(g)}if(!t){s&&this.addNewEditorFromKeyboard(),c(this,hi).resolve();return}for(const f of c(this,en).values())f.uid===t?(this.setSelected(f),i?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();c(this,hi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,vn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,ui)){switch(e){case ze.CREATE:this.currentLayer.addNewEditor(t);return;case ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,hv)||b(this,hv,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of c(this,st))s.updateParams(e,t);else for(const s of c(this,ui))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of c(this,en).values())o.editorType===e&&o.show(t);(((i=c(this,hv))==null?void 0:i.get(ze.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,ne,Aa).call(this,[[ze.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,cv)!==e){b(this,cv,e);for(const t of c(this,Cn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,en).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,en).get(e)}addEditor(e){c(this,en).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(c(this,No)&&clearTimeout(c(this,No)),b(this,No,setTimeout(()=>{this.focusMainContainer(),b(this,No,null)},0))),c(this,en).delete(e.id),e.annotationElementId&&((t=c(this,Ac))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,bc).has(e.annotationElementId))&&((s=c(this,li))==null||s.remove(e.id))}addDeletedAnnotationElement(e){c(this,bc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,bc).has(e)}removeDeletedAnnotationElement(e){c(this,bc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,br)!==e&&(b(this,br,e),e&&k(this,ne,Aa).call(this,e.propertiesToUpdate))}updateUI(e){c(this,ne,g6)===e&&k(this,ne,Aa).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,ne,Aa).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,st).has(e)){c(this,st).delete(e),e.unselect(),k(this,ne,Ps).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,st).add(e),e.select(),k(this,ne,Aa).call(this,e.propertiesToUpdate),k(this,ne,Ps).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=c(this,wc))==null||t.commitOrRemove();for(const s of c(this,st))s!==e&&s.unselect();c(this,st).clear(),c(this,st).add(e),e.select(),k(this,ne,Aa).call(this,e.propertiesToUpdate),k(this,ne,Ps).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,st).has(e)}get firstSelectedEditor(){return c(this,st).values().next().value}unselect(e){e.unselect(),c(this,st).delete(e),k(this,ne,Ps).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,st).size!==0}get isEnterHandled(){return c(this,st).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,ci).undo(),k(this,ne,Ps).call(this,{hasSomethingToUndo:c(this,ci).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,ne,ky).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,ci).redo(),k(this,ne,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,ci).hasSomethingToRedo(),isEmpty:k(this,ne,ky).call(this)})}addCommands(e){c(this,ci).add(e),k(this,ne,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,ne,ky).call(this)})}cleanUndoStack(e){c(this,ci).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,st)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)k(this,ne,kC).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,br))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,br)||this.hasSelection}selectAll(){for(const e of c(this,st))e.commit();k(this,ne,PC).call(this,c(this,en).values())}unselectAll(){var e;if(!(c(this,br)&&(c(this,br).commitOrRemove(),c(this,vn)!==Ae.NONE))&&!((e=c(this,wc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,st))t.unselect();c(this,st).clear(),k(this,ne,Ps).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,kc)[0]+=e,c(this,kc)[1]+=t;const[r,i]=c(this,kc),o=[...c(this,st)],a=1e3;c(this,Do)&&clearTimeout(c(this,Do)),b(this,Do,setTimeout(()=>{b(this,Do,null),c(this,kc)[0]=c(this,kc)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,en).has(l.id)&&(l.translateInPage(r,i),l.translationDone())},undo:()=>{for(const l of o)c(this,en).has(l.id)&&(l.translateInPage(-r,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Ro,new Map);for(const e of c(this,st))c(this,Ro).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ro))return!1;this.disableUserSelect(!1);const e=c(this,Ro);b(this,Ro,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(c(this,en).has(r.id)){const l=c(this,Cn).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Ro))for(const s of c(this,Ro).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,st).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,br)===e}getActive(){return c(this,br)}getMode(){return c(this,vn)}isEditingMode(){return c(this,vn)!==Ae.NONE}get imageManager(){return Le(this,"imageManager",new _C)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-r)/o,y:1-(u+d-s)/i,width:f/o,height:d/i});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-s)/i,y:1-(h+f-r)/o,width:d/i,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-r)/o,y:(u-s)/i,width:f/o,height:d/i});break;default:a=(u,h,d,f)=>({x:(u-s)/i,y:(h-r)/o,width:d/i,height:f/o});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:y,height:v}of d.getClientRects())y===0||v===0||l.push(a(f,g,y,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Rp)||b(this,Rp,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Rp))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Rp))==null?void 0:r.get(e.data.id);if(!t)return;const s=c(this,li).getRawValue(t);s&&(c(this,vn)===Ae.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=c(this,Ac))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),c(this,Ac).delete(e))}addMissingCanvas(e,t){(c(this,Ac)||b(this,Ac,new Map)).set(e,t)}};kp=new WeakMap,br=new WeakMap,Pp=new WeakMap,en=new WeakMap,Cn=new WeakMap,Ip=new WeakMap,li=new WeakMap,Rp=new WeakMap,ci=new WeakMap,ps=new WeakMap,vc=new WeakMap,wc=new WeakMap,Np=new WeakMap,bc=new WeakMap,Ro=new WeakMap,ui=new WeakMap,_h=new WeakMap,ov=new WeakMap,av=new WeakMap,Lp=new WeakMap,lv=new WeakMap,No=new WeakMap,xc=new WeakMap,Dp=new WeakMap,_c=new WeakMap,Lo=new WeakMap,U1=new WeakMap,Ec=new WeakMap,Mp=new WeakMap,cv=new WeakMap,Sc=new WeakMap,Eh=new WeakMap,Op=new WeakMap,Ac=new WeakMap,uv=new WeakMap,vn=new WeakMap,st=new WeakMap,Da=new WeakMap,Tc=new WeakMap,Cc=new WeakMap,hv=new WeakMap,jp=new WeakMap,dv=new WeakMap,kc=new WeakMap,Do=new WeakMap,Ma=new WeakMap,fv=new WeakMap,pv=new WeakMap,hi=new WeakMap,ne=new WeakSet,zx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},SC=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,Cn).values())if(s.hasTextLayer(e))return s;return null},a6=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=k(this,ne,zx).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(c(this,Lo)||b(this,Lo,new Kee(this)),c(this,Lo).show(s,r,this.direction==="ltr"))},l6=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Da)&&((i=c(this,Lo))==null||i.hide(),b(this,Da,null),k(this,ne,Ps).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Da))return;const r=k(this,ne,zx).call(this,e).closest(".textLayer");if(!r){c(this,Da)&&((o=c(this,Lo))==null||o.hide(),b(this,Da,null),k(this,ne,Ps).call(this,{hasSelectedText:!1}));return}if((a=c(this,Lo))==null||a.hide(),b(this,Da,t),k(this,ne,Ps).call(this,{hasSelectedText:!0}),!(c(this,vn)!==Ae.HIGHLIGHT&&c(this,vn)!==Ae.NONE)&&(c(this,vn)===Ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,_c,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,vn)===Ae.HIGHLIGHT?k(this,ne,SC).call(this,r):null;if(l==null||l.toggleDrawing(),c(this,Mp)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&k(this,ne,Cy).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l==null||l.toggleDrawing(!0),k(this,ne,Cy).call(this,"main_toolbar")}},Cy=function(e=""){c(this,vn)===Ae.HIGHLIGHT?this.highlightSelection(e):c(this,ov)&&k(this,ne,a6).call(this)},c6=function(){document.addEventListener("selectionchange",k(this,ne,l6).bind(this),{signal:this._signal})},u6=function(){if(c(this,xc))return;b(this,xc,new AbortController);const e=this.combinedSignal(c(this,xc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},h6=function(){var e;(e=c(this,xc))==null||e.abort(),b(this,xc,null)},AC=function(){if(c(this,Sc))return;b(this,Sc,new AbortController);const e=this.combinedSignal(c(this,Sc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},d6=function(){var e;(e=c(this,Sc))==null||e.abort(),b(this,Sc,null)},TC=function(){if(c(this,vc))return;b(this,vc,new AbortController);const e=this.combinedSignal(c(this,vc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},CC=function(){var e;(e=c(this,vc))==null||e.abort(),b(this,vc,null)},f6=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ps=function(e){Object.entries(e).some(([s,r])=>c(this,dv)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,dv),e)}),c(this,vn)===Ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,ne,Aa).call(this,[[ze.HIGHLIGHT_FREE,!0]]))},Aa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},p6=async function(){if(!c(this,Ec)){b(this,Ec,!0);const e=[];for(const t of c(this,Cn).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,en).values())t.enable()}},m6=function(){if(this.unselectAll(),c(this,Ec)){b(this,Ec,!1);for(const e of c(this,Cn).values())e.disable();for(const e of c(this,en).values())e.disable()}},kC=function(e){const t=c(this,Cn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},g6=function(){let e=null;for(e of c(this,st));return e},ky=function(){if(c(this,en).size===0)return!0;if(c(this,en).size===1)for(const e of c(this,en).values())return e.isEmpty();return!1},PC=function(e){for(const t of c(this,st))t.unselect();c(this,st).clear();for(const t of e)t.isEmpty()||(c(this,st).add(t),t.select());k(this,ne,Ps).call(this,{hasSelectedEditor:this.hasSelection})},X(Xf,"TRANSLATE_SMALL",1),X(Xf,"TRANSLATE_BIG",10);let Vu=Xf;var jn,Mo,Ui,Fp,Oo,xr,Vp,jo,Ys,Oa,Sh,Fo,Pc,so,Py,$x;const Is=class Is{constructor(e){A(this,so);A(this,jn,null);A(this,Mo,!1);A(this,Ui,null);A(this,Fp,null);A(this,Oo,null);A(this,xr,null);A(this,Vp,!1);A(this,jo,null);A(this,Ys,null);A(this,Oa,null);A(this,Sh,null);A(this,Fo,!1);b(this,Ys,e),b(this,Fo,e._uiManager.useNewAltTextFlow),c(Is,Pc)||b(Is,Pc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Is._l10n??(Is._l10n=e)}async render(){const e=b(this,Ui,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Fp,document.createElement("span"));e.append(t),c(this,Fo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Is,Pc).missing),t.setAttribute("data-l10n-id",c(Is,Pc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,Ys)._uiManager._signal;e.addEventListener("contextmenu",Yr,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),c(this,Ys)._uiManager.editAltText(c(this,Ys)),c(this,Fo)&&c(this,Ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,so,Py)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(b(this,Vp,!0),r(i))},{signal:s}),await k(this,so,$x).call(this),e}finish(){c(this,Ui)&&(c(this,Ui).focus({focusVisible:c(this,Vp)}),b(this,Vp,!1))}isEmpty(){return c(this,Fo)?c(this,jn)===null:!c(this,jn)&&!c(this,Mo)}hasData(){return c(this,Fo)?c(this,jn)!==null||!!c(this,Oa):this.isEmpty()}get guessedText(){return c(this,Oa)}async setGuessedText(e){c(this,jn)===null&&(b(this,Oa,e),b(this,Sh,await Is._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,so,$x).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Fo)||c(this,jn)){(t=c(this,jo))==null||t.remove(),b(this,jo,null);return}if(!c(this,jo)){const s=b(this,jo,document.createElement("div"));s.className="noAltTextBadge",c(this,Ys).div.append(s)}c(this,jo).classList.toggle("hidden",!e)}serialize(e){let t=c(this,jn);return!e&&c(this,Oa)===t&&(t=c(this,Sh)),{altText:t,decorative:c(this,Mo),guessedText:c(this,Oa),textWithDisclaimer:c(this,Sh)}}get data(){return{altText:c(this,jn),decorative:c(this,Mo)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(b(this,Oa,s),b(this,Sh,r)),!(c(this,jn)===e&&c(this,Mo)===t)&&(i||(b(this,jn,e),b(this,Mo,t)),k(this,so,$x).call(this))}toggle(e=!1){c(this,Ui)&&(!e&&c(this,xr)&&(clearTimeout(c(this,xr)),b(this,xr,null)),c(this,Ui).disabled=!e)}shown(){c(this,Ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,so,Py)}})}destroy(){var e,t;(e=c(this,Ui))==null||e.remove(),b(this,Ui,null),b(this,Fp,null),b(this,Oo,null),(t=c(this,jo))==null||t.remove(),b(this,jo,null)}};jn=new WeakMap,Mo=new WeakMap,Ui=new WeakMap,Fp=new WeakMap,Oo=new WeakMap,xr=new WeakMap,Vp=new WeakMap,jo=new WeakMap,Ys=new WeakMap,Oa=new WeakMap,Sh=new WeakMap,Fo=new WeakMap,Pc=new WeakMap,so=new WeakSet,Py=function(){return c(this,jn)&&"added"||c(this,jn)===null&&this.guessedText&&"review"||"missing"},$x=async function(){var r,i,o;const e=c(this,Ui);if(!e)return;if(c(this,Fo)){if(e.classList.toggle("done",!!c(this,jn)),e.setAttribute("data-l10n-id",c(Is,Pc)[c(this,so,Py)]),(r=c(this,Fp))==null||r.setAttribute("data-l10n-id",c(Is,Pc)[`${c(this,so,Py)}-label`]),!c(this,jn)){(i=c(this,Oo))==null||i.remove();return}}else{if(!c(this,jn)&&!c(this,Mo)){e.classList.remove("done"),(o=c(this,Oo))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Oo);if(!t){b(this,Oo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Ys).id}`;const a=100,l=c(this,Ys)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,xr)),b(this,xr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,xr,setTimeout(()=>{b(this,xr,null),c(this,Oo).classList.add("show"),c(this,Ys)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,xr)&&(clearTimeout(c(this,xr)),b(this,xr,null)),(u=c(this,Oo))==null||u.classList.remove("show")},{signal:l})}c(this,Mo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,jn)),t.parentNode||e.append(t);const s=c(this,Ys).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(Is,Pc,null),X(Is,"_l10n",null);let C1=Is;var Yn,di,Ah,xt,mv,Th,zi,Ch,kh,Ph,gv,IC;class nx{constructor(e){A(this,gv);A(this,Yn,null);A(this,di,null);A(this,Ah,!1);A(this,xt,null);A(this,mv,null);A(this,Th,null);A(this,zi,null);A(this,Ch,null);A(this,kh,!1);A(this,Ph,null);b(this,xt,e)}renderForToolbar(){const e=b(this,di,document.createElement("button"));return e.className="comment",k(this,gv,IC).call(this,e,!1)}renderForStandalone(){const e=b(this,Yn,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,xt).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(c(this,xt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,xt).commentButtonColor;r&&(s.backgroundColor=r)}return k(this,gv,IC).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,Yn)??c(this,di))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,Yn))return;const e=c(this,xt).commentButtonColor;e&&(c(this,Yn).style.backgroundColor=e),c(this,xt)._uiManager.updatePopupColor(c(this,xt))}get commentButtonWidth(){var e;return(((e=c(this,Yn))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,xt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Ph))return c(this,Ph);if(!c(this,Yn))return null;const{x:e,y:t,height:s}=c(this,Yn).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=c(this,xt).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/a]}set commentPopupPositionInLayer(e){b(this,Ph,e)}hasDefaultPopupPosition(){return c(this,Ph)===null}removeStandaloneCommentButton(){var e;(e=c(this,Yn))==null||e.remove(),b(this,Yn,null)}removeToolbarCommentButton(){var e;(e=c(this,di))==null||e.remove(),b(this,di,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Yn)&&(c(this,Yn).classList.toggle("selected",e),c(this,Yn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=c(this,xt).commentButtonPosition;const{width:h,height:d,x:f,y:g}=c(this,xt);s=f+s*h,r=g+r*d}const i=c(this,xt).parent.boundingClientRect,{x:o,y:a,width:l,height:u}=i;c(this,xt)._uiManager.editComment(c(this,xt),o+s*l,a+r*u,{...e,parentDimensions:i})}finish(){c(this,di)&&(c(this,di).focus({focusVisible:c(this,Ah)}),b(this,Ah,!1))}isDeleted(){return c(this,kh)||c(this,zi)===""}isEmpty(){return c(this,zi)===null}hasBeenEdited(){return this.isDeleted()||c(this,zi)!==c(this,mv)}serialize(){return this.data}get data(){return{text:c(this,zi),richText:c(this,Th),date:c(this,Ch),deleted:this.isDeleted()}}set data(e){if(e!==c(this,zi)&&b(this,Th,null),e===null){b(this,zi,""),b(this,kh,!0);return}b(this,zi,e),b(this,Ch,new Date),b(this,kh,!1)}setInitialText(e,t=null){b(this,mv,e),this.data=e,b(this,Ch,null),b(this,Th,t)}shown(){}destroy(){var e,t;(e=c(this,di))==null||e.remove(),b(this,di,null),(t=c(this,Yn))==null||t.remove(),b(this,Yn,null),b(this,zi,""),b(this,Th,null),b(this,Ch,null),b(this,xt,null),b(this,Ah,!1),b(this,kh,!1)}}Yn=new WeakMap,di=new WeakMap,Ah=new WeakMap,xt=new WeakMap,mv=new WeakMap,Th=new WeakMap,zi=new WeakMap,Ch=new WeakMap,kh=new WeakMap,Ph=new WeakMap,gv=new WeakSet,IC=function(e,t){if(!c(this,xt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,xt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=c(this,xt)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Yr,{signal:s}),t&&(e.addEventListener("focusin",i=>{c(this,xt)._focusEventsAllowed=!1,Wt(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{c(this,xt)._focusEventsAllowed=!0,Wt(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===c(this,di)?this.edit():c(this,xt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(b(this,Ah,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{c(this,xt).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{c(this,xt).toggleComment(!1,!1)},{signal:s}),e};var Bp,Ih,yv,vv,wv,bv,xv,ja,Rh,Fa,Nh,Va,Bu,y6,v6,w6;const vR=class vR{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){A(this,Bu);A(this,Bp);A(this,Ih,!1);A(this,yv,null);A(this,vv);A(this,wv);A(this,bv);A(this,xv);A(this,ja,null);A(this,Rh);A(this,Fa,null);A(this,Nh);A(this,Va,null);b(this,Bp,e),b(this,yv,s),b(this,vv,t),b(this,wv,r),b(this,bv,i),b(this,xv,o),b(this,Nh,new AbortController),b(this,Rh,AbortSignal.any([a,c(this,Nh).signal])),e.addEventListener("touchstart",k(this,Bu,y6).bind(this),{passive:!1,signal:c(this,Rh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/uo.pixelRatio}destroy(){var e,t;(e=c(this,Nh))==null||e.abort(),b(this,Nh,null),(t=c(this,ja))==null||t.abort(),b(this,ja,null)}};Bp=new WeakMap,Ih=new WeakMap,yv=new WeakMap,vv=new WeakMap,wv=new WeakMap,bv=new WeakMap,xv=new WeakMap,ja=new WeakMap,Rh=new WeakMap,Fa=new WeakMap,Nh=new WeakMap,Va=new WeakMap,Bu=new WeakSet,y6=function(e){var r,i,o;if((r=c(this,vv))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,ja))return;const a=b(this,ja,new AbortController),l=AbortSignal.any([c(this,Rh),a.signal]),u=c(this,Bp),h={capture:!0,signal:l,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=c(this,ja))==null||g.abort(),b(this,ja,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Wt(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!c(this,Va)){b(this,Va,new AbortController);const a=AbortSignal.any([c(this,Rh),c(this,Va).signal]),l=c(this,Bp),u={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",k(this,Bu,v6).bind(this),u);const h=k(this,Bu,w6).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",Wt,u),l.addEventListener("pointermove",Wt,u),l.addEventListener("pointercancel",Wt,u),l.addEventListener("pointerup",Wt,u),(i=c(this,wv))==null||i.call(this)}if(Wt(e),e.touches.length!==2||(o=c(this,yv))!=null&&o.call(this)){b(this,Fa,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),b(this,Fa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},v6=function(e){var I;if(!c(this,Fa)||e.touches.length!==2)return;Wt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,l=c(this,Fa),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=l,g=d-u,y=f-h,v=o-r,S=a-i,w=Math.hypot(v,S)||1,_=Math.hypot(g,y)||1;if(!c(this,Ih)&&Math.abs(_-w)<=vR.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!c(this,Ih)){b(this,Ih,!0);return}const E=[(r+o)/2,(i+a)/2];(I=c(this,bv))==null||I.call(this,E,_,w)},w6=function(e){var t;e.touches.length>=2||(c(this,Va)&&(c(this,Va).abort(),b(this,Va,null),(t=c(this,xv))==null||t.call(this)),c(this,Fa)&&(Wt(e),b(this,Fa,null),b(this,Ih,!1)))};let W0=vR;var Lh,$i,jt,mt,Ba,Up,Ic,_v,Xn,Dh,Ua,Vo,Rc,Ev,Mh,_r,Sv,Oh,za,Bo,zp,$p,fi,jh,Av,z1,ve,RC,Tv,NC,Hx,b6,x6,LC,Wx,DC,_6,E6,S6,MC,A6,OC,T6,C6,k6,jC,Iy;const ke=class ke{constructor(e){A(this,ve);A(this,Lh,null);A(this,$i,null);A(this,jt,null);A(this,mt,null);A(this,Ba,null);A(this,Up,!1);A(this,Ic,null);A(this,_v,"");A(this,Xn,null);A(this,Dh,null);A(this,Ua,null);A(this,Vo,null);A(this,Rc,null);A(this,Ev,"");A(this,Mh,!1);A(this,_r,null);A(this,Sv,!1);A(this,Oh,!1);A(this,za,!1);A(this,Bo,null);A(this,zp,0);A(this,$p,0);A(this,fi,null);A(this,jh,null);X(this,"isSelected",!1);X(this,"_isCopy",!1);X(this,"_editToolbar",null);X(this,"_initialOptions",Object.create(null));X(this,"_initialData",null);X(this,"_isVisible",!0);X(this,"_uiManager",null);X(this,"_focusEventsAllowed",!0);A(this,Av,!1);A(this,z1,ke._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ke.prototype._resizeWithKeyboard,t=Vu.TRANSLATE_SMALL,s=Vu.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new ab([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ke.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Qee({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ke._l10n??(ke._l10n=e),ke._l10nResizer||(ke._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ke._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ke._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){vt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Av)}set _isDraggable(e){var t;b(this,Av,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,z1)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(k(this,ve,Iy).call(this),(t=c(this,Vo))==null||t.remove(),b(this,Vo,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Mh)?b(this,Mh,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){k(this,ve,RC).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,_r)||b(this,_r,[this.x,this.y,this.width,this.height]),k(this,ve,RC).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,_r)||b(this,_r,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,_r)&&(c(this,_r)[0]!==this.x||c(this,_r)[1]!==this.y)}get _hasBeenResized(){return!!c(this,_r)&&(c(this,_r)[2]!==this.width||c(this,_r)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ke,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=s,l*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=ws(i,0,s-a),o=ws(o,0,r-l);break;case 90:i=ws(i,0,s-l),o=ws(o,a,r);break;case 180:i=ws(i,a,s),o=ws(o,l,r);break;case 270:i=ws(i,l,s),o=ws(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[u,h]=this.getBaseTranslation();i+=u,o+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return k(s=ke,Tv,NC).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return k(s=ke,Tv,NC).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,jt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Oh))return this._editToolbar;this._editToolbar=new bC(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,jt))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,jt)||(C1.initialize(ke._l10n),b(this,jt,new C1(this)),c(this,Lh)&&(c(this,jt).data=c(this,Lh),b(this,Lh,null))),c(this,jt)}get altTextData(){var e;return(e=c(this,jt))==null?void 0:e.data}set altTextData(e){c(this,jt)&&(c(this,jt).data=e)}get guessedAltText(){var e;return(e=c(this,jt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,jt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,jt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,jt)&&!c(this,jt).isEmpty()}hasAltTextData(){var e;return((e=c(this,jt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,mt))==null||e.focusButton()}addCommentButton(){return c(this,mt)||b(this,mt,new nx(this))}addStandaloneCommentButton(){if(c(this,Ba)){this._uiManager.isEditingMode()&&c(this,Ba).classList.remove("hidden");return}this.hasComment&&(b(this,Ba,c(this,mt).renderForStandalone()),this.div.append(c(this,Ba)))}removeStandaloneCommentButton(){c(this,mt).removeStandaloneCommentButton(),b(this,Ba,null)}hideStandaloneCommentButton(){var e;(e=c(this,Ba))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=c(this,mt);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,mt)||b(this,mt,new nx(this)),c(this,mt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(c(this,mt)||b(this,mt,new nx(this)),c(this,mt).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,mt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,mt))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,mt)&&!c(this,mt).isEmpty()&&!c(this,mt).isDeleted()}async editComment(e){c(this,mt)||b(this,mt,new nx(this)),c(this,mt).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,mt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,l=r-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,mt).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Up)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,ve,OC).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),i6(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,jh)||b(this,jh,new W0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,ve,_6).bind(this),onPinching:k(this,ve,E6).bind(this),onPinchEnd:k(this,ve,S6).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,Mh,!0),this._isDraggable){k(this,ve,A6).call(this,e);return}k(this,ve,MC).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Bo)&&clearTimeout(c(this,Bo)),b(this,Bo,setTimeout(()=>{var e;b(this,Bo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/r,h=t/r,d=this.x*i,f=this.y*o,g=this.width*i,y=this.height*o;switch(s){case 0:return[d+u+a,o-f-h-y+l,d+u+g+a,o-f-h+l];case 90:return[d+h+a,o-f+u+l,d+h+y+a,o-f+u+g+l];case 180:return[d-u-g+a,o-f+h+l,d-u+a,o-f+h+y+l];case 270:return[d-h-y+a,o-f-u-g+l,d-h+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-r,l,a];case 180:return[i,t-r,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ke._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,mt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:a,pageIndex:l,creationDate:u,modificationDate:h}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||h,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,Oh,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,Oh,!1),!0):!1}isInEditMode(){return c(this,Oh)}shouldGetKeyboardEvents(){return c(this,za)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){k(this,ve,OC).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,b(r,Lh,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,l,u,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=u/i,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,Rc))==null||e.abort(),b(this,Rc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Bo)&&(clearTimeout(c(this,Bo)),b(this,Bo,null)),k(this,ve,Iy).call(this),this.removeEditToolbar(),c(this,fi)){for(const s of c(this,fi).values())clearTimeout(s);b(this,fi,null)}this.parent=null,(t=c(this,jh))==null||t.destroy(),b(this,jh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,ve,b6).call(this),c(this,Xn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[ke._round(s+(i-s)*e),ke._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,mt).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,mt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,mt).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,mt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){c(this,mt).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Xn).children;if(!c(this,$i)){b(this,$i,Array.from(t));const o=k(this,ve,T6).bind(this),a=k(this,ve,C6).bind(this),l=this._uiManager._signal;for(const u of c(this,$i)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",k(this,ve,k6).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",ke._l10nResizer[h])}}const s=c(this,$i)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,$i).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)c(this,Xn).append(c(this,Xn).firstChild);else if(i>r)for(let a=0;a<i-r;a++)c(this,Xn).firstChild.before(c(this,Xn).lastChild);let o=0;for(const a of t){const u=c(this,$i)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ke._l10nResizer[u])}}k(this,ve,jC).call(this,0),b(this,za,!0),c(this,Xn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,za)&&k(this,ve,DC).call(this,c(this,Ev),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,ve,Iy).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,jt))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,Xn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,jt))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Sv)}set isEditing(e){b(this,Sv,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,fi)||b(this,fi,new Map);const{action:s}=e;let r=c(this,fi).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,fi).delete(s),c(this,fi).size===0&&b(this,fi,null)},ke._telemetryTimeout),c(this,fi).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Up,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Up,!0)}updateFakeAnnotationElement(e){if(!c(this,Vo)&&!this.deleted){b(this,Vo,e.addFakeAnnotation(this));return}if(this.deleted){c(this,Vo).remove(),b(this,Vo,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Vo).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Lh=new WeakMap,$i=new WeakMap,jt=new WeakMap,mt=new WeakMap,Ba=new WeakMap,Up=new WeakMap,Ic=new WeakMap,_v=new WeakMap,Xn=new WeakMap,Dh=new WeakMap,Ua=new WeakMap,Vo=new WeakMap,Rc=new WeakMap,Ev=new WeakMap,Mh=new WeakMap,_r=new WeakMap,Sv=new WeakMap,Oh=new WeakMap,za=new WeakMap,Bo=new WeakMap,zp=new WeakMap,$p=new WeakMap,fi=new WeakMap,jh=new WeakMap,Av=new WeakMap,z1=new WeakMap,ve=new WeakSet,RC=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Tv=new WeakSet,NC=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Hx=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},b6=function(){if(c(this,Xn))return;b(this,Xn,document.createElement("div")),c(this,Xn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");c(this,Xn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",k(this,ve,x6).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Yr,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Xn))},x6=function(e,t){var h;t.preventDefault();const{isMac:s}=qn.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=c(this,jt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,b(this,Dh,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,ve,DC).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Wt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Yr,{signal:o}),b(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;i.abort(),this.parent.togglePointerEvents(!0),(d=c(this,jt))==null||d.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,k(this,ve,Wx).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},LC=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Wx=function(){if(!c(this,Ua))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=c(this,Ua);b(this,Ua,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===s&&l===r||this.addCommands({cmd:k(this,ve,LC).bind(this,i,o,a,l),undo:k(this,ve,LC).bind(this,e,t,s,r),mustExec:!0})},DC=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,u=ke.MIN_SIZE/s,h=ke.MIN_SIZE/r,d=k(this,ve,Hx).call(this,this.rotation),f=(U,W)=>[d[0]*U+d[2]*W,d[1]*U+d[3]*W],g=k(this,ve,Hx).call(this,360-this.rotation),y=(U,W)=>[g[0]*U+g[2]*W,g[1]*U+g[3]*W];let v,S,w=!1,_=!1;switch(e){case"topLeft":w=!0,v=(U,W)=>[0,0],S=(U,W)=>[U,W];break;case"topMiddle":v=(U,W)=>[U/2,0],S=(U,W)=>[U/2,W];break;case"topRight":w=!0,v=(U,W)=>[U,0],S=(U,W)=>[0,W];break;case"middleRight":_=!0,v=(U,W)=>[U,W/2],S=(U,W)=>[0,W/2];break;case"bottomRight":w=!0,v=(U,W)=>[U,W],S=(U,W)=>[0,0];break;case"bottomMiddle":v=(U,W)=>[U/2,W],S=(U,W)=>[U/2,0];break;case"bottomLeft":w=!0,v=(U,W)=>[0,W],S=(U,W)=>[U,0];break;case"middleLeft":_=!0,v=(U,W)=>[0,W/2],S=(U,W)=>[U,W/2];break}const E=v(a,l),I=S(a,l);let D=f(...I);const M=ke._round(i+D[0]),T=ke._round(o+D[1]);let C=1,N=1,L,R;if(t.fromKeyboard)({deltaX:L,deltaY:R}=t);else{const{screenX:U,screenY:W}=t,[G,q]=c(this,Dh);[L,R]=this.screenToPageTranslation(U-G,W-q),c(this,Dh)[0]=U,c(this,Dh)[1]=W}if([L,R]=y(L/s,R/r),w){const U=Math.hypot(a,l);C=N=Math.max(Math.min(Math.hypot(I[0]-E[0]-L,I[1]-E[1]-R)/U,1/a,1/l),u/a,h/l)}else _?C=ws(Math.abs(I[0]-E[0]-L),u,1)/a:N=ws(Math.abs(I[1]-E[1]-R),h,1)/l;const O=ke._round(a*C),j=ke._round(l*N);D=f(...S(O,j));const V=M-D[0],$=T-D[1];c(this,_r)||b(this,_r,[this.x,this.y,this.width,this.height]),this.width=O,this.height=j,this.x=V,this.y=$,this.setDims(),this.fixAndSetPosition(),this._onResizing()},_6=function(){var e;b(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,jt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},E6=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=k(this,ve,Hx).call(this,this.rotation),a=(M,T)=>[o[0]*M+o[2]*T,o[1]*M+o[3]*T],[l,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,g=this.height,y=ke.MIN_SIZE/l,v=ke.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/g),y/f,v/g);const S=ke._round(f*i),w=ke._round(g*i);if(S===f&&w===g)return;c(this,_r)||b(this,_r,[h,d,f,g]);const _=a(f/2,g/2),E=ke._round(h+_[0]),I=ke._round(d+_[1]),D=a(S/2,w/2);this.x=E-D[0],this.y=I-D[1],this.width=S,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()},S6=function(){var e;(e=c(this,jt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,ve,Wx).call(this)},MC=function(e){const{isMac:t}=qn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},A6=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=u=>{r.abort(),b(this,Ic,null),b(this,Mh,!1),this._uiManager.endDragSession()||k(this,ve,MC).call(this,u),s&&this._onStopDragging()};t&&(b(this,zp,e.clientX),b(this,$p,e.clientY),b(this,Ic,e.pointerId),b(this,_v,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==c(this,Ic)){Wt(u);return}const[g,y]=this.screenToPageTranslation(h-c(this,zp),d-c(this,$p));b(this,zp,h),b(this,$p,d),this._uiManager.dragSelectedEditors(g,y)},o),window.addEventListener("touchmove",Wt,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,_v)&&(c(this,jh)||u.isPrimary)&&a(u),Wt(u)},o));const l=u=>{if(!c(this,Ic)||c(this,Ic)===u.pointerId){a(u);return}Wt(u)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},OC=function(){if(c(this,Rc)||!this.div)return;b(this,Rc,new AbortController);const e=this._uiManager.combinedSignal(c(this,Rc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},T6=function(e){ke._resizerKeyboardManager.exec(this,e)},C6=function(e){var t;c(this,za)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Xn)&&k(this,ve,Iy).call(this)},k6=function(e){b(this,Ev,c(this,za)?e:"")},jC=function(e){if(c(this,$i))for(const t of c(this,$i))t.tabIndex=e},Iy=function(){b(this,za,!1),k(this,ve,jC).call(this,-1),k(this,ve,Wx).call(this)},A(ke,Tv),X(ke,"_l10n",null),X(ke,"_l10nResizer",null),X(ke,"_borderLineWidth",-1),X(ke,"_colorManager",new EC),X(ke,"_zIndex",1),X(ke,"_telemetryTimeout",1e3);let St=ke;class Qee extends St{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const JD=3285377520,ei=4294901760,_o=65535;class P6{constructor(e){this.h1=e?e&4294967295:JD,this.h2=e?e&4294967295:JD}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,S=e.length;v<S;v++){const w=e.charCodeAt(v);w<=255?t[s++]=w:(t[s++]=w>>>8,t[s++]=w&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&_o,y=f&_o;for(let v=0;v<r;v++)v&1?(a=o[v],a=a*d&ei|a*g&_o,a=a<<15|a>>>17,a=a*f&ei|a*y&_o,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[v],l=l*d&ei|l*g&_o,l=l<<15|l>>>17,l=l*f&ei|l*y&_o,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*d&ei|a*g&_o,a=a<<15|a>>>17,a=a*f&ei|a*y&_o,r&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ei|e*36045&_o,t=t*4283543511&ei|((t<<16|e>>>16)*2950163797&ei)>>>16,e^=t>>>1,e=e*444984403&ei|e*60499&_o,t=t*3301882366&ei|((t<<16|e>>>16)*3120437893&ei)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const FC=Object.freeze({map:null,hash:"",transfer:void 0});var Fh,Vh,$a,Qn,$1,I6;class oR{constructor(){A(this,$1);A(this,Fh,!1);A(this,Vh,null);A(this,$a,null);A(this,Qn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,Qn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,Qn).get(e)}remove(e){const t=c(this,Qn).get(e);if(t!==void 0&&(t instanceof St&&c(this,$a).delete(t.annotationElementId),c(this,Qn).delete(e),c(this,Qn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of c(this,Qn).values())if(s instanceof St)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,Qn).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,c(this,Qn).set(e,t);r&&k(this,$1,I6).call(this),t instanceof St&&((c(this,$a)||b(this,$a,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,Qn).has(e)}get size(){return c(this,Qn).size}resetModified(){c(this,Fh)&&(b(this,Fh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R6(this)}get serializable(){if(c(this,Qn).size===0)return FC;const e=new Map,t=new P6,s=[],r=Object.create(null);let i=!1;for(const[o,a]of c(this,Qn)){const l=a instanceof St?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:FC}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of c(this,Qn).values()){if(!(i instanceof St)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=l.get(u);d||(d=new Map,l.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){b(this,Vh,null)}updateEditor(e,t){var r;const s=(r=c(this,$a))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,$a))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,Vh))return c(this,Vh);const e=[];if(c(this,$a))for(const t of c(this,$a).values())t.serialize()&&e.push(t.annotationElementId);return b(this,Vh,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,Qn).entries()}}Fh=new WeakMap,Vh=new WeakMap,$a=new WeakMap,Qn=new WeakMap,$1=new WeakSet,I6=function(){c(this,Fh)||(b(this,Fh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Cv;class R6 extends oR{constructor(t){super();A(this,Cv);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);b(this,Cv,{map:o,hash:r,transfer:i})}get print(){vt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Cv)}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}Cv=new WeakMap;var Hp;class Jee{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Hp,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Hp).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||c(this,Hp).has(e.loadedName))){if(We(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),c(this,Hp).add(r),s==null||s(e)}catch{Te(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}vt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw Te(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",Ms||qn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(We(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(I,D){return I.charCodeAt(D)<<24|I.charCodeAt(D+1)<<16|I.charCodeAt(D+2)<<8|I.charCodeAt(D+3)&255}function r(I,D,M,T){const C=I.substring(0,D),N=I.substring(D+M);return C+T+N}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(I,D){if(++u>30){Te("Load test font never loaded."),D();return}if(l.font="30px "+I,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(h.bind(null,I,D))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const y=16,v=1482184792;let S=s(f,y);for(i=0,o=d.length-3;i<o;i+=4)S=S-v+s(d,i)|0;i<d.length&&(S=S-v+s(d+"XXX",i)|0),f=r(f,y,4,Vee(S));const w=`url(data:font/opentype;base64,${btoa(f)});`,_=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(_);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const I of[e.loadedName,d]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=I,E.append(D)}this._document.body.append(E),h(d,()=>{E.remove(),t.complete()})}}Hp=new WeakMap;var at;class Zee{constructor(e,t=null,s,r){A(this,at);this.compiledGlyphs=Object.create(null),b(this,at,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${qV(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){Te(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return c(this,at).black}get bold(){return c(this,at).bold}get disableFontFace(){return c(this,at).disableFontFace??!1}get fontExtraProperties(){return c(this,at).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,at).isInvalidPDFjsFont}get isType3Font(){return c(this,at).isType3Font}get italic(){return c(this,at).italic}get missingFile(){return c(this,at).missingFile}get remeasure(){return c(this,at).remeasure}get vertical(){return c(this,at).vertical}get ascent(){return c(this,at).ascent}get defaultWidth(){return c(this,at).defaultWidth}get descent(){return c(this,at).descent}get bbox(){return c(this,at).bbox}get fontMatrix(){return c(this,at).fontMatrix}get fallbackName(){return c(this,at).fallbackName}get loadedName(){return c(this,at).loadedName}get mimetype(){return c(this,at).mimetype}get name(){return c(this,at).name}get data(){return c(this,at).data}clearData(){c(this,at).clearData()}get cssFontInfo(){return c(this,at).cssFontInfo}get systemFontInfo(){return c(this,at).systemFontInfo}get defaultVMetrics(){return c(this,at).defaultVMetrics}}at=new WeakMap;function ete(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ms)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function tte(n){if(Ms&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return rb(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function sx(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const VC=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,nte=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",N6=$ee.bind(null,VC,nte);var Ha,H1;class ste{constructor(){A(this,Ha,new Map);A(this,H1,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,H1).then(()=>{for(const[r]of c(this,Ha))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){Te("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,Ha).set(t,r)}removeEventListener(e,t){const s=c(this,Ha).get(t);s==null||s(),c(this,Ha).delete(t)}terminate(){for(const[,e]of c(this,Ha))e==null||e();c(this,Ha).clear()}}Ha=new WeakMap,H1=new WeakMap;const rx={DATA:1,ERROR:2},gn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ZD(){}function qs(n){if(n instanceof Nl||n instanceof A1||n instanceof WD||n instanceof z0||n instanceof TA)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||vt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Nl(n.message);case"InvalidPDFException":return new A1(n.message);case"PasswordException":return new WD(n.message,n.code);case"ResponseException":return new z0(n.message,n.status,n.missing);case"UnknownErrorException":return new TA(n.message,n.details)}return new TA(n.message,n.toString())}var Wp,Ti,L6,D6,M6,Gx;class Ry{constructor(e,t,s){A(this,Ti);A(this,Wp,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",k(this,Ti,L6).bind(this),{signal:c(this,Wp).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:gn.PULL,streamId:i,desiredSize:u.desiredSize}),h.promise},cancel:u=>{We(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:gn.CANCEL,streamId:i,reason:qs(u)}),h.promise}},s)}destroy(){var e;(e=c(this,Wp))==null||e.abort(),b(this,Wp,null)}}Wp=new WeakMap,Ti=new WeakSet,L6=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,Ti,M6).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===rx.DATA)r.resolve(e.data);else if(e.callback===rx.ERROR)r.reject(qs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:rx.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:rx.ERROR,callbackId:e.callbackId,reason:qs(o)})});return}if(e.streamId){k(this,Ti,D6).call(this,e);return}t(e.data)},D6=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:gn.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:gn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){We(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:gn.ERROR,streamId:t,reason:qs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:gn.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:gn.START_COMPLETE,streamId:t,reason:qs(u)})})},M6=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case gn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(qs(e.reason));break;case gn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(qs(e.reason));break;case gn.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:gn.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||ZD).then(function(){i.postMessage({sourceName:s,targetName:r,stream:gn.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:gn.PULL_COMPLETE,streamId:t,reason:qs(u)})});break;case gn.ENQUEUE:if(We(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case gn.CLOSE:if(We(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,Ti,Gx).call(this,o,t);break;case gn.ERROR:We(o,"error should have stream controller"),o.controller.error(qs(e.reason)),k(this,Ti,Gx).call(this,o,t);break;case gn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(qs(e.reason)),k(this,Ti,Gx).call(this,o,t);break;case gn.CANCEL:if(!a)break;const l=qs(e.reason);Promise.try(a.onCancel||ZD,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:gn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:gn.CANCEL_COMPLETE,streamId:t,reason:qs(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Gx=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var kv;class O6{constructor({enableHWA:e=!1}){A(this,kv,!1);b(this,kv,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,kv)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){vt("Abstract method `_createCanvas` called.")}}kv=new WeakMap;class rte extends O6{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class j6{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){vt("Abstract method `_fetch` called.")}}class eM extends j6{async _fetch(e){const t=await Ig(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):rb(t)}}class F6{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Bh,Gp,Wa,Ga,ms,Uh,zh,ae,ds,Ny,Cf,qx,kf,V6,BC,Pf,Ly,Dy,UC,My;class ite extends F6{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,ae);A(this,Bh);A(this,Gp);A(this,Wa);A(this,Ga);A(this,ms);A(this,Uh);A(this,zh,0);b(this,Ga,t),b(this,ms,s)}addFilter(t){if(!t)return"none";let s=c(this,ae,ds).get(t);if(s)return s;const[r,i,o]=k(this,ae,qx).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=c(this,ae,ds).get(a),s)return c(this,ae,ds).set(t,s),s;const l=`g_${c(this,Ga)}_transfer_map_${Jt(this,zh)._++}`,u=k(this,ae,kf).call(this,l);c(this,ae,ds).set(t,u),c(this,ae,ds).set(a,u);const h=k(this,ae,Pf).call(this,l);return k(this,ae,Dy).call(this,r,i,o,h),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=c(this,ae,Ny).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,ae,Ny).set(i,o)),!t||!s))return o.url;const a=k(this,ae,My).call(this,t);t=ce.makeHexColor(...a);const l=k(this,ae,My).call(this,s);if(s=ce.makeHexColor(...l),c(this,ae,Cf).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const S=v/255;u[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,Ga)}_hcm_filter`,f=o.filter=k(this,ae,Pf).call(this,d);k(this,ae,Dy).call(this,h,h,h,f),k(this,ae,BC).call(this,f);const g=(v,S)=>{const w=a[v]/255,_=l[v]/255,E=new Array(S+1);for(let I=0;I<=S;I++)E[I]=w+I/S*(_-w);return E.join(",")};return k(this,ae,Dy).call(this,g(0,5),g(1,5),g(2,5),f),o.url=k(this,ae,kf).call(this,d),o.url}addAlphaFilter(t){let s=c(this,ae,ds).get(t);if(s)return s;const[r]=k(this,ae,qx).call(this,[t]),i=`alpha_${r}`;if(s=c(this,ae,ds).get(i),s)return c(this,ae,ds).set(t,s),s;const o=`g_${c(this,Ga)}_alpha_map_${Jt(this,zh)._++}`,a=k(this,ae,kf).call(this,o);c(this,ae,ds).set(t,a),c(this,ae,ds).set(i,a);const l=k(this,ae,Pf).call(this,o);return k(this,ae,UC).call(this,r,l),a}addLuminosityFilter(t){let s=c(this,ae,ds).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=k(this,ae,qx).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=c(this,ae,ds).get(i),s)return c(this,ae,ds).set(t,s),s;const o=`g_${c(this,Ga)}_luminosity_map_${Jt(this,zh)._++}`,a=k(this,ae,kf).call(this,o);c(this,ae,ds).set(t,a),c(this,ae,ds).set(i,a);const l=k(this,ae,Pf).call(this,o);return k(this,ae,V6).call(this,l),t&&k(this,ae,UC).call(this,r,l),a}addHighlightHCMFilter(t,s,r,i,o){var _;const a=`${s}-${r}-${i}-${o}`;let l=c(this,ae,Ny).get(t);if((l==null?void 0:l.key)===a||(l?((_=l.filter)==null||_.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,ae,Ny).set(t,l)),!s||!r))return l.url;const[u,h]=[s,r].map(k(this,ae,My).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,y]=[i,o].map(k(this,ae,My).bind(this));f<d&&([d,f,g,y]=[f,d,y,g]),c(this,ae,Cf).style.color="";const v=(E,I,D)=>{const M=new Array(256),T=(f-d)/D,C=E/255,N=(I-E)/(255*D);let L=0;for(let R=0;R<=D;R++){const O=Math.round(d+R*T),j=C+R*N;for(let V=L;V<=O;V++)M[V]=j;L=O+1}for(let R=L;R<256;R++)M[R]=M[L-1];return M.join(",")},S=`g_${c(this,Ga)}_hcm_${t}_filter`,w=l.filter=k(this,ae,Pf).call(this,S);return k(this,ae,BC).call(this,w),k(this,ae,Dy).call(this,v(g[0],y[0],5),v(g[1],y[1],5),v(g[2],y[2],5),w),l.url=k(this,ae,kf).call(this,S),l.url}destroy(t=!1){var s,r,i,o;t&&((s=c(this,Uh))!=null&&s.size)||((r=c(this,Wa))==null||r.parentNode.parentNode.remove(),b(this,Wa,null),(i=c(this,Gp))==null||i.clear(),b(this,Gp,null),(o=c(this,Uh))==null||o.clear(),b(this,Uh,null),b(this,zh,0))}}Bh=new WeakMap,Gp=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,ms=new WeakMap,Uh=new WeakMap,zh=new WeakMap,ae=new WeakSet,ds=function(){return c(this,Gp)||b(this,Gp,new Map)},Ny=function(){return c(this,Uh)||b(this,Uh,new Map)},Cf=function(){if(!c(this,Wa)){const t=c(this,ms).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=c(this,ms).createElementNS(Sa,"svg");r.setAttribute("width",0),r.setAttribute("height",0),b(this,Wa,c(this,ms).createElementNS(Sa,"defs")),t.append(r),r.append(c(this,Wa)),c(this,ms).body.append(t)}return c(this,Wa)},qx=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,r,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=r[u]/255,l[u]=i[u]/255;return[o.join(","),a.join(","),l.join(",")]},kf=function(t){if(c(this,Bh)===void 0){b(this,Bh,"");const s=c(this,ms).URL;s!==c(this,ms).baseURI&&(ob(s)?Te('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Bh,tR(s,"")))}return`url(${c(this,Bh)}#${t})`},V6=function(t){const s=c(this,ms).createElementNS(Sa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},BC=function(t){const s=c(this,ms).createElementNS(Sa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Pf=function(t){const s=c(this,ms).createElementNS(Sa,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,ae,Cf).append(s),s},Ly=function(t,s,r){const i=c(this,ms).createElementNS(Sa,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Dy=function(t,s,r,i){const o=c(this,ms).createElementNS(Sa,"feComponentTransfer");i.append(o),k(this,ae,Ly).call(this,o,"feFuncR",t),k(this,ae,Ly).call(this,o,"feFuncG",s),k(this,ae,Ly).call(this,o,"feFuncB",r)},UC=function(t,s){const r=c(this,ms).createElementNS(Sa,"feComponentTransfer");s.append(r),k(this,ae,Ly).call(this,r,"feFuncA",t)},My=function(t){return c(this,ae,Cf).style.color=t,Rg(getComputedStyle(c(this,ae,Cf)).getPropertyValue("color"))};class B6{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){vt("Abstract method `_fetch` called.")}}class tM extends B6{async _fetch(e){const t=await Ig(e,"arraybuffer");return new Uint8Array(t)}}class U6{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){vt("Abstract method `_fetch` called.")}}class nM extends U6{async _fetch(e){const t=await Ig(e,"arraybuffer");return new Uint8Array(t)}}Ms&&Te("Please use the `legacy` build in Node.js environments.");async function aR(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class ote extends F6{}class ate extends O6{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class lte extends j6{async _fetch(e){return aR(e)}}class cte extends B6{async _fetch(e){return aR(e)}}class ute extends U6{async _fetch(e){return aR(e)}}const wf="__forcedDependency",{floor:sM,ceil:rM}=Math;function ix(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const zC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var qp,Nc;class hte{constructor(e,t){A(this,qp);A(this,Nc);b(this,qp,e),b(this,Nc,t)}get length(){return c(this,qp).length}isEmpty(e){return c(this,qp)[e]===zC}minX(e){return c(this,Nc)[e*4+0]/256}minY(e){return c(this,Nc)[e*4+1]/256}maxX(e){return(c(this,Nc)[e*4+2]+1)/256}maxY(e){return(c(this,Nc)[e*4+3]+1)/256}}qp=new WeakMap,Nc=new WeakMap;const ox=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Xs,Qs,$h,Hi,Hh,qa,rt,lt,Ka,Js,Pv,Kp,Wh,Gh,Ya,gs,Uo,Iv,$C;class dte{constructor(e,t,s=!1){A(this,Iv);A(this,Xs,{__proto__:null});A(this,Qs,{__proto__:null,transform:[],moveText:[],sameLineText:[],[wf]:[]});A(this,$h,new Map);A(this,Hi,[]);A(this,Hh,[]);A(this,qa,[[1,0,0,1,0,0]]);A(this,rt,[-1/0,-1/0,1/0,1/0]);A(this,lt,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Ka,-1);A(this,Js,new Set);A(this,Pv,new Map);A(this,Kp,new Map);A(this,Wh);A(this,Gh);A(this,Ya);A(this,gs);A(this,Uo);b(this,Wh,e.width),b(this,Gh,e.height),k(this,Iv,$C).call(this,t),s&&b(this,Uo,new Map)}growOperationsCount(e){e>=c(this,gs).length&&k(this,Iv,$C).call(this,e,c(this,gs))}save(e){return b(this,Xs,{__proto__:c(this,Xs)}),b(this,Qs,{__proto__:c(this,Qs),transform:{__proto__:c(this,Qs).transform},moveText:{__proto__:c(this,Qs).moveText},sameLineText:{__proto__:c(this,Qs).sameLineText},[wf]:{__proto__:c(this,Qs)[wf]}}),b(this,rt,{__proto__:c(this,rt)}),c(this,Hi).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,Xs));if(t===null)return this;b(this,Xs,t),b(this,Qs,Object.getPrototypeOf(c(this,Qs))),b(this,rt,Object.getPrototypeOf(c(this,rt)));const s=c(this,Hi).pop();return s!==void 0&&((r=ox(c(this,Uo),e))==null||r.dependencies.add(s),c(this,gs)[e]=c(this,gs)[s]),this}recordOpenMarker(e){return c(this,Hi).push(e),this}getOpenMarker(){return c(this,Hi).length===0?null:c(this,Hi).at(-1)}recordCloseMarker(e){var s;const t=c(this,Hi).pop();return t!==void 0&&((s=ox(c(this,Uo),e))==null||s.dependencies.add(t),c(this,gs)[e]=c(this,gs)[t]),this}beginMarkedContent(e){return c(this,Hh).push(e),this}endMarkedContent(e){var s;const t=c(this,Hh).pop();return t!==void 0&&((s=ox(c(this,Uo),e))==null||s.dependencies.add(t),c(this,gs)[e]=c(this,gs)[t]),this}pushBaseTransform(e){return c(this,qa).push(ce.multiplyByDOMMatrix(c(this,qa).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,qa).length>1&&c(this,qa).pop(),this}recordSimpleData(e,t){return c(this,Xs)[e]=t,this}recordIncrementalData(e,t){return c(this,Qs)[e].push(t),this}resetIncrementalData(e,t){return c(this,Qs)[e].length=0,this}recordNamedData(e,t){return c(this,$h).set(e,t),this}recordSimpleDataFromNamed(e,t,s){c(this,Xs)[e]=c(this,$h).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(wf,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,Xs)&&this.recordFutureForcedDependency(t,c(this,Xs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,Js))this.recordFutureForcedDependency(wf,e);return this}resetBBox(e){return c(this,Ka)!==e&&(b(this,Ka,e),c(this,lt)[0]=1/0,c(this,lt)[1]=1/0,c(this,lt)[2]=-1/0,c(this,lt)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const a=ce.multiplyByDOMMatrix(c(this,qa).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];ce.axialAlignedBoundingBox([s,i,r,o],a,l);const u=ce.intersect(c(this,rt),l);return u?(c(this,rt)[0]=u[0],c(this,rt)[1]=u[1],c(this,rt)[2]=u[2],c(this,rt)[3]=u[3]):(c(this,rt)[0]=c(this,rt)[1]=1/0,c(this,rt)[2]=c(this,rt)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const a=c(this,rt);if(a[0]===1/0)return this;const l=ce.multiplyByDOMMatrix(c(this,qa).at(-1),t.getTransform());if(a[0]===-1/0)return ce.axialAlignedBoundingBox([s,i,r,o],l,c(this,lt)),this;const u=[1/0,1/0,-1/0,-1/0];return ce.axialAlignedBoundingBox([s,i,r,o],l,u),c(this,lt)[0]=Math.min(c(this,lt)[0],Math.max(u[0],a[0])),c(this,lt)[1]=Math.min(c(this,lt)[1],Math.max(u[1],a[1])),c(this,lt)[2]=Math.max(c(this,lt)[2],Math.min(u[2],a[2])),c(this,lt)[3]=Math.max(c(this,lt)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,a){const l=s.bbox;let u,h;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&c(this,Kp).get(s),u!==!1&&(h=[0,0,0,0],ce.axialAlignedBoundingBox(l,s.fontMatrix,h),(r!==1||i!==0||o!==0)&&ce.scaleMinMax([r,0,0,-r,i,o],h),u)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return l&&h&&u===void 0&&(u=h[0]<=i-d.actualBoundingBoxLeft&&h[2]>=i+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,c(this,Kp).set(s,u),u)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,i-d.actualBoundingBoxLeft,i+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,lt)[0]=Math.max(0,c(this,rt)[0]),c(this,lt)[1]=Math.max(0,c(this,rt)[1]),c(this,lt)[2]=Math.min(c(this,Wh),c(this,rt)[2]),c(this,lt)[3]=Math.min(c(this,Gh),c(this,rt)[3]),this}getSimpleIndex(e){return c(this,Xs)[e]}recordDependencies(e,t){const s=c(this,Js),r=c(this,Xs),i=c(this,Qs);for(const o of t)o in c(this,Xs)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return c(this,$h).has(t)&&c(this,Js).add(c(this,$h).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[wf]),c(this,Uo)){const s=ox(c(this,Uo),e),{dependencies:r}=s;c(this,Js).forEach(r.add,r),c(this,Hi).forEach(r.add,r),c(this,Hh).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(c(this,Ka)===e){const s=sM(c(this,lt)[0]*256/c(this,Wh)),r=sM(c(this,lt)[1]*256/c(this,Gh)),i=rM(c(this,lt)[2]*256/c(this,Wh)),o=rM(c(this,lt)[3]*256/c(this,Gh));ix(c(this,Ya),e,s,r,i,o);for(const a of c(this,Js))a!==e&&ix(c(this,Ya),a,s,r,i,o);for(const a of c(this,Hi))a!==e&&ix(c(this,Ya),a,s,r,i,o);for(const a of c(this,Hh))a!==e&&ix(c(this,Ya),a,s,r,i,o);t||(c(this,Js).clear(),b(this,Ka,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(c(this,Js));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Ka)===e&&(b(this,Ka,-1),c(this,rt)[0]=Math.max(c(this,rt)[0],c(this,lt)[0]),c(this,rt)[1]=Math.max(c(this,rt)[1],c(this,lt)[1]),c(this,rt)[2]=Math.min(c(this,rt)[2],c(this,lt)[2]),c(this,rt)[3]=Math.min(c(this,rt)[3],c(this,lt)[3]),t||c(this,Js).clear()),this}_takePendingDependencies(){const e=c(this,Js);return b(this,Js,new Set),e}_extractOperation(e){const t=c(this,Pv).get(e);return c(this,Pv).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,Js).add(t)}take(){return c(this,Kp).clear(),new hte(c(this,gs),c(this,Ya))}takeDebugMetadata(){return c(this,Uo)}}Xs=new WeakMap,Qs=new WeakMap,$h=new WeakMap,Hi=new WeakMap,Hh=new WeakMap,qa=new WeakMap,rt=new WeakMap,lt=new WeakMap,Ka=new WeakMap,Js=new WeakMap,Pv=new WeakMap,Kp=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,Ya=new WeakMap,gs=new WeakMap,Uo=new WeakMap,Iv=new WeakSet,$C=function(e,t){const s=new ArrayBuffer(e*4);b(this,Ya,new Uint8ClampedArray(s)),b(this,gs,new Uint32Array(s)),t&&t.length>0?(c(this,gs).set(t),c(this,gs).fill(zC,t.length)):c(this,gs).fill(zC)};var gt,tn,Wi,Yp,Xp;const wR=class wR{constructor(e,t,s){A(this,gt);A(this,tn);A(this,Wi);A(this,Yp,0);A(this,Xp,0);if(e instanceof wR&&c(e,Wi)===!!s)return e;b(this,gt,e),b(this,tn,t),b(this,Wi,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Jt(this,Xp)._++,c(this,gt).save(c(this,tn)),this}restore(e){return c(this,Xp)>0&&(c(this,gt).restore(c(this,tn)),Jt(this,Xp)._--),this}recordOpenMarker(e){return Jt(this,Yp)._++,this}getOpenMarker(){return c(this,Yp)>0?c(this,tn):c(this,gt).getOpenMarker()}recordCloseMarker(e){return Jt(this,Yp)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,gt).pushBaseTransform(e),this}popBaseTransform(){return c(this,gt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,gt).recordSimpleData(e,c(this,tn)),this}recordIncrementalData(e,t){return c(this,gt).recordIncrementalData(e,c(this,tn)),this}resetIncrementalData(e,t){return c(this,gt).resetIncrementalData(e,c(this,tn)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return c(this,gt).recordSimpleDataFromNamed(e,t,c(this,tn)),this}recordFutureForcedDependency(e,t){return c(this,gt).recordFutureForcedDependency(e,c(this,tn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,gt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,gt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,Wi)||c(this,gt).resetBBox(c(this,tn)),this}recordClipBox(e,t,s,r,i,o){return c(this,Wi)||c(this,gt).recordClipBox(c(this,tn),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return c(this,Wi)||c(this,gt).recordBBox(c(this,tn),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,a){return c(this,Wi)||c(this,gt).recordCharacterBBox(c(this,tn),t,s,r,i,o,a),this}recordFullPageBBox(e){return c(this,Wi)||c(this,gt).recordFullPageBBox(c(this,tn)),this}getSimpleIndex(e){return c(this,gt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,gt).recordDependencies(c(this,tn),t),this}recordNamedDependency(e,t){return c(this,gt).recordNamedDependency(c(this,tn),t),this}recordOperation(e){return c(this,gt).recordOperation(c(this,tn),!0),this}recordShowTextOperation(e){return c(this,gt).recordShowTextOperation(c(this,tn),!0),this}bboxToClipBoxDropOperation(e){return c(this,Wi)||c(this,gt).bboxToClipBoxDropOperation(c(this,tn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};gt=new WeakMap,tn=new WeakMap,Wi=new WeakMap,Yp=new WeakMap,Xp=new WeakMap;let k1=wR;const ti={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ns={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function HC(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class lR{isModifyingCurrentTransform(){return!1}getPattern(){vt("Abstract method `getPattern` called.")}}class fte extends lR{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===ns.STROKE||r===ns.FILL){const o=t.current.getClippedPathBoundingBox(r,$t(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=ce.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),HC(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);i.setTransform(d)}else HC(e,this._bbox),i=this._createGradient(e);return i}}function PA(n,e,t,s,r,i,o,a){const l=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f),l[s+1]>l[r+1]&&(f=s,s=r,r=f,f=o,o=a,a=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f);const g=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,S=(l[s+1]+e.offsetY)*e.scaleY,w=(l[r]+e.offsetX)*e.scaleX,_=(l[r+1]+e.offsetY)*e.scaleY;if(y>=_)return;const E=u[i],I=u[i+1],D=u[i+2],M=u[o],T=u[o+1],C=u[o+2],N=u[a],L=u[a+1],R=u[a+2],O=Math.round(y),j=Math.round(_);let V,$,U,W,G,q,ee,ue;for(let J=O;J<=j;J++){if(J<S){const ie=J<y?0:(y-J)/(y-S);V=g-(g-v)*ie,$=E-(E-M)*ie,U=I-(I-T)*ie,W=D-(D-C)*ie}else{let ie;J>_?ie=1:S===_?ie=0:ie=(S-J)/(S-_),V=v-(v-w)*ie,$=M-(M-N)*ie,U=T-(T-L)*ie,W=C-(C-R)*ie}let se;J<y?se=0:J>_?se=1:se=(y-J)/(y-_),G=g-(g-w)*se,q=E-(E-N)*se,ee=I-(I-L)*se,ue=D-(D-R)*se;const pe=Math.round(Math.min(V,G)),_e=Math.round(Math.max(V,G));let Se=d*J+pe*4;for(let ie=pe;ie<=_e;ie++)se=(V-ie)/(V-G),se<0?se=0:se>1&&(se=1),h[Se++]=$-($-q)*se|0,h[Se++]=U-(U-ee)*se|0,h[Se++]=W-(W-ue)*se|0,h[Se++]=255}}function pte(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,u=a-1;for(i=0;i<l;i++){let h=i*a;for(let d=0;d<u;d++,h++)PA(n,t,s[h],s[h+1],s[h+a],r[h],r[h+1],r[h+a]),PA(n,t,s[h+a+1],s[h+1],s[h+a],r[h+a+1],r[h+1],r[h+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)PA(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class mte extends lR{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),g=u/d,y=h/f,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/y},S=d+2*2,w=f+2*2,_=s.getCanvas("mesh",S,w),E=_.context,I=E.createImageData(d,f);if(t){const M=I.data;for(let T=0,C=M.length;T<C;T+=4)M[T]=t[0],M[T+1]=t[1],M[T+2]=t[2],M[T+3]=255}for(const M of this._figures)pte(I,M,v);return E.putImageData(I,2,2),{canvas:_.canvas,offsetX:a-2*g,offsetY:l-2*y,scaleX:g,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){HC(e,this._bbox);const i=new Float32Array(2);if(r===ns.SHADING)ce.singularValueDecompose2dScale($t(e),i);else if(this.matrix){ce.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;ce.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=l}else ce.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===ns.SHADING?null:this._background,t.cachedCanvases);return r!==ns.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class gte extends lR{getPattern(){return"hotpink"}}function yte(n){switch(n[0]){case"RadialAxial":return new fte(n);case"Mesh":return new mte(n);case"Dummy":return new gte}throw new Error(`Unknown IR type: ${n[0]}`)}const iM={COLORED:1,UNCOLORED:2},W1=class W1{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var q,ee;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),JE("TilingType: "+o);const d=s[0],f=s[1],g=s[2],y=s[3],v=g-d,S=y-f,w=new Float32Array(2);ce.singularValueDecompose2dScale(this.matrix,w);const[_,E]=w;ce.singularValueDecompose2dScale(this.baseTransform,w);const I=_*w[0],D=E*w[1];let M=v,T=S,C=!1,N=!1;const L=Math.ceil(u*I),R=Math.ceil(h*D),O=Math.ceil(v*I),j=Math.ceil(S*D);L>=O?M=u:C=!0,R>=j?T=h:N=!0;const V=this.getSizeAndScale(M,this.ctx.canvas.width,I),$=this.getSizeAndScale(T,this.ctx.canvas.height,D),U=e.cachedCanvases.getCanvas("pattern",V.size,$.size),W=U.context,G=l.createCanvasGraphics(W,t);if(G.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(G,i,a),W.translate(-V.scale*d,-$.scale*f),G.transform(0,V.scale,0,0,$.scale,0,0),W.save(),(q=G.dependencyTracker)==null||q.save(),this.clipBbox(G,d,f,g,y),G.baseTransform=$t(G.ctx),G.executeOperatorList(r),G.endDrawing(),(ee=G.dependencyTracker)==null||ee.restore(),W.restore(),C||N){const ue=U.canvas;C&&(M=u),N&&(T=h);const J=this.getSizeAndScale(M,this.ctx.canvas.width,I),se=this.getSizeAndScale(T,this.ctx.canvas.height,D),pe=J.size,_e=se.size,Se=e.cachedCanvases.getCanvas("pattern-workaround",pe,_e),ie=Se.context,Xt=C?Math.floor(v/u):0,At=N?Math.floor(S/h):0;for(let Lt=0;Lt<=Xt;Lt++)for(let Ie=0;Ie<=At;Ie++)ie.drawImage(ue,pe*Lt,_e*Ie,pe,_e,0,0,pe,_e);return{canvas:Se.canvas,scaleX:J.scale,scaleY:se.scale,offsetX:d,offsetY:f}}return{canvas:U.canvas,scaleX:V.scale,scaleY:$.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(W1.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),ce.axialAlignedBoundingBox([t,s,r,i],$t(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case iM.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case iM.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new Fee(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==ns.SHADING&&(o=ce.transform(o,t.baseTransform),this.matrix&&(o=ce.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};X(W1,"MAX_PATTERN_SIZE",3e3);let WC=W1;function vte({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=qn.isLittleEndian?4278190080:255,[l,u]=o?[i,a]:[a,i],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let g=0;for(let y=0;y<r;y++){for(const S=e+h;e<S;e++){const w=e<f?n[e]:255;t[g++]=w&128?u:l,t[g++]=w&64?u:l,t[g++]=w&32?u:l,t[g++]=w&16?u:l,t[g++]=w&8?u:l,t[g++]=w&4?u:l,t[g++]=w&2?u:l,t[g++]=w&1?u:l}if(d===0)continue;const v=e<f?n[e++]:255;for(let S=0;S<d;S++)t[g++]=v&1<<7-S?u:l}return{srcPos:e,destPos:g}}const oM=16,aM=100,wte=15,lM=10,sr=16,IA=new DOMMatrix,Br=new Float32Array(2),Yf=new Float32Array([1/0,1/0,-1/0,-1/0]);function bte(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class xte{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ax(n,e,t,s,r,i,o,a,l,u){const[h,d,f,g,y,v]=$t(n);if(d===0&&f===0){const _=o*h+y,E=Math.round(_),I=a*g+v,D=Math.round(I),M=(o+l)*h+y,T=Math.abs(Math.round(M)-E)||1,C=(a+u)*g+v,N=Math.abs(Math.round(C)-D)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),E,D),n.drawImage(e,t,s,r,i,0,0,T,N),n.setTransform(h,d,f,g,y,v),[T,N]}if(h===0&&g===0){const _=a*f+y,E=Math.round(_),I=o*d+v,D=Math.round(I),M=(a+u)*f+y,T=Math.abs(Math.round(M)-E)||1,C=(o+l)*d+v,N=Math.abs(Math.round(C)-D)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,E,D),n.drawImage(e,t,s,r,i,0,0,N,T),n.setTransform(h,d,f,g,y,v),[N,T]}n.drawImage(e,t,s,r,i,o,a,l,u);const S=Math.hypot(h,d),w=Math.hypot(f,g);return[S*l,w*u]}class cM{constructor(e,t,s){X(this,"alphaIsShape",!1);X(this,"fontSize",0);X(this,"fontSizeScale",1);X(this,"textMatrix",null);X(this,"textMatrixScale",1);X(this,"fontMatrix",yC);X(this,"leading",0);X(this,"x",0);X(this,"y",0);X(this,"lineX",0);X(this,"lineY",0);X(this,"charSpacing",0);X(this,"wordSpacing",0);X(this,"textHScale",1);X(this,"textRenderingMode",Kn.FILL);X(this,"textRise",0);X(this,"fillColor","#000000");X(this,"strokeColor","#000000");X(this,"patternFill",!1);X(this,"patternStroke",!1);X(this,"fillAlpha",1);X(this,"strokeAlpha",1);X(this,"lineWidth",1);X(this,"activeSMask",null);X(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Yf.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ns.FILL,t=null){const s=this.minMax.slice();if(e===ns.STROKE){t||vt("Stroke bounding box must include transform."),ce.singularValueDecompose2dScale(t,Br);const r=Br[0]*this.lineWidth/2,i=Br[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=ce.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Yf,0)}getClippedPathBoundingBox(e=ns.FILL,t=null){return ce.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function uM(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%sr,i=(t-r)/sr,o=r===0?i:i+1,a=n.createImageData(s,sr);let l=0,u;const h=e.data,d=a.data;let f,g,y,v;if(e.kind===f0.GRAYSCALE_1BPP){const S=h.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),_=w.length,E=s+7>>3,I=4294967295,D=qn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<i?sr:r,u=0,g=0;g<y;g++){const M=S-l;let T=0;const C=M>E?s:M*8-7,N=C&-8;let L=0,R=0;for(;T<N;T+=8)R=h[l++],w[u++]=R&128?I:D,w[u++]=R&64?I:D,w[u++]=R&32?I:D,w[u++]=R&16?I:D,w[u++]=R&8?I:D,w[u++]=R&4?I:D,w[u++]=R&2?I:D,w[u++]=R&1?I:D;for(;T<C;T++)L===0&&(R=h[l++],L=128),w[u++]=R&L?I:D,L>>=1}for(;u<_;)w[u++]=0;n.putImageData(a,0,f*sr)}}else if(e.kind===f0.RGBA_32BPP){for(g=0,v=s*sr*4,f=0;f<i;f++)d.set(h.subarray(l,l+v)),l+=v,n.putImageData(a,0,g),g+=sr;f<o&&(v=s*r*4,d.set(h.subarray(l,l+v)),n.putImageData(a,0,g))}else if(e.kind===f0.RGB_24BPP)for(y=sr,v=s*y,f=0;f<o;f++){for(f>=i&&(y=r,v=s*y),u=0,g=v;g--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(a,0,f*sr)}else throw new Error(`bad image kind: ${e.kind}`)}function hM(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%sr,i=(t-r)/sr,o=r===0?i:i+1,a=n.createImageData(s,sr);let l=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<i?sr:r;({srcPos:l}=vte({src:u,srcPos:l,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,d*sr)}}function iy(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function lx(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function dM(n,e){if(e)return!0;ce.singularValueDecompose2dScale(n,Br);const t=Math.fround(uo.pixelRatio*Ll.PDF_TO_CSS_UNITS);return Br[0]<=t&&Br[1]<=t}const _te=["butt","round","square"],Ete=["miter","round","bevel"],Ste={},fM={};var ho,GC,qC,KC;const bR=class bR{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,u,h){A(this,ho);this.ctx=e,this.current=new cM(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new xte(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...$t(this.compositeCtx))}this.ctx.save(),lx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=$t(this.ctx)}executeOperatorList(e,t,s,r,i){var w;const o=e.argsArray,a=e.fnArray;let l=t||0;const u=o.length;if(u===l)return l;const h=u-l>lM&&typeof s=="function",d=h?Date.now()+wte:0;let f=0;const g=this.commonObjs,y=this.objs;let v,S;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,s),l;if(!i||i(l))if(v=a[l],S=o[l]??null,v!==gg.dependency)S===null?this[v](l):this[v](l,...S);else for(const _ of S){(w=this.dependencyTracker)==null||w.recordNamedData(_,l);const E=_.startsWith("g_")?g:y;if(!E.has(_))return E.get(_,s),l}if(l++,l===u)return l;if(h&&++f>lM){if(Date.now()>d)return s(),l;f=0}}}endDrawing(){k(this,ho,GC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,ho,qC).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=r,u="prescale1",h,d;for(;i>2&&a>1||o>2&&l>1;){let f=a,g=l;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(e,0,0,a,l,0,0,f,g),e=h.canvas,a=f,l=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){var L,R;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,l=$t(s);let u,h,d,f;if((t.bitmap||t.data)&&t.count>1){const O=t.bitmap||t.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),o]),u=this._cachedBitmapsMap.get(O),u||(u=new Map,this._cachedBitmapsMap.set(O,u));const j=u.get(h);if(j&&!a){const V=Math.round(Math.min(l[0],l[2])+l[4]),$=Math.round(Math.min(l[1],l[3])+l[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(e,ti.transformAndFill),{canvas:j,offsetX:V,offsetY:$}}d=j}d||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),hM(f.context,t));let g=ce.transform(l,[1/r,0,0,-1/i,0,0]);g=ce.transform(g,[1,0,0,1,0,-i]);const y=Yf.slice();ce.axialAlignedBoundingBox([0,0,r,i],g,y);const[v,S,w,_]=y,E=Math.round(w-v)||1,I=Math.round(_-S)||1,D=this.cachedCanvases.getCanvas("fillCanvas",E,I),M=D.context,T=v,C=S;M.translate(-T,-C),M.transform(...g),d||(d=this._scaleImage(f.canvas,xo(M)),d=d.img,u&&a&&u.set(h,d)),M.imageSmoothingEnabled=dM($t(M),t.interpolate),ax(M,d,0,0,d.width,d.height,0,0,r,i),M.globalCompositeOperation="source-in";const N=ce.transform(xo(M),[1,0,0,1,-T,-C]);return M.fillStyle=a?o.getPattern(s,this,N,ns.FILL,e):o,M.fillRect(0,0,r,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,D.canvas)),(R=this.dependencyTracker)==null||R.recordDependencies(e,ti.transformAndFill),{canvas:D.canvas,offsetX:Math.round(T),offsetY:Math.round(C)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=_te[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Ete[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,a;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),iy(this.suspendedCtx,o),bte(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),iy(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,l,u,h,d){let f=e.canvas,g=l-h,y=u-d;if(o)if(g<0||y<0||g+s>f.width||y+r>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,r),w=S.context;w.drawImage(f,-g,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",f=S.canvas,g=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,y,s,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,u,s,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(f,g,y,s,r,l,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&iy(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&iy(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===gg.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=s[0]=new Path2D;for(let a=0,l=i.length;a<l;)switch(i[a++]){case tx.moveTo:o.moveTo(i[a++],i[a++]);break;case tx.lineTo:o.lineTo(i[a++],i[a++]);break;case tx.curveTo:o.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case tx.closePath:o.closePath();break;default:Te(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=o}ce.axialAlignedBoundingBox(r,$t(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,xo(r),ns.STROKE,e),a){const l=new Path2D;l.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,ti.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ns.STROKE,$t(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,h,d;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,xo(r),ns.FILL,e),f){const g=new Path2D;g.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=g}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,ti.fill),a&&(r.restore(),(d=this.dependencyTracker)==null||d.restore(e)),s&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,ti.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Ste}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=fM}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:u,path:h}of t)h&&r.addPath(h,new DOMMatrix(o).preMultiplySelf(i).translate(a,l).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||yC,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Te("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((f=r.systemFontInfo)==null?void 0:f.css)||`"${o}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const u=r.italic?"italic":"normal";let h=s;s<oM?h=oM:s>aM&&(h=aM),this.current.fontSizeScale=s/h,this.ctx.font=`${u} ${l} ${h}px ${a}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var w,_,E,I;const a=this.ctx,l=this.current,u=l.font,h=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=h&Kn.FILL_STROKE_MASK,g=!!(h&Kn.ADD_TO_PATH_FLAG),y=l.patternFill&&!u.missingFile,v=l.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||g||y||v)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,t)),S&&(u.disableFontFace||y||v)){a.save(),a.translate(s,r),a.scale(d,-d),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,a,u);let D;if(f===Kn.FILL||f===Kn.FILL_STROKE)if(i){D=a.getTransform(),a.setTransform(...i);const M=k(this,ho,KC).call(this,S,D,i);a.fill(M)}else a.fill(S);if(f===Kn.STROKE||f===Kn.FILL_STROKE)if(o){D||(D=a.getTransform()),a.setTransform(...o);const{a:M,b:T,c:C,d:N}=D,L=ce.inverseTransform(o),R=ce.transform([M,T,C,N,0,0],L);ce.singularValueDecompose2dScale(R,Br),a.lineWidth*=Math.max(Br[0],Br[1])/d,a.stroke(k(this,ho,KC).call(this,S,D,o))}else a.lineWidth/=d,a.stroke(S);a.restore()}else(f===Kn.FILL||f===Kn.FILL_STROKE)&&(a.fillText(t,s,r),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,a,u,d,s,r,()=>a.measureText(t))),(f===Kn.STROKE||f===Kn.FILL_STROKE)&&(this.dependencyTracker&&((E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,u,d,s,r,()=>a.measureText(t)).recordDependencies(e,ti.stroke)),a.strokeText(t,s,r));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:$t(a),x:s,y:r,fontSize:d,path:S}),(I=this.dependencyTracker)==null||I.recordCharacterBBox(e,a,u,d,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Le(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var C,N,L,R;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ti.showText).resetBBox(e),this.current.textRenderingMode&Kn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(C=this.dependencyTracker)==null||C.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(N=this.dependencyTracker)==null||N.recordOperation(e);return}const o=this.ctx,a=s.fontSizeScale,l=s.charSpacing,u=s.wordSpacing,h=s.fontDirection,d=s.textHScale*h,f=t.length,g=r.vertical,y=g?1:-1,v=r.defaultVMetrics,S=i*s.fontMatrix[0],w=s.textRenderingMode===Kn.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),h>0?o.scale(d,-1):o.scale(d,1);let _,E;if(s.patternFill){o.save();const O=s.fillColor.getPattern(o,this,xo(o),ns.FILL,e);_=$t(o),o.restore(),o.fillStyle=O}if(s.patternStroke){o.save();const O=s.strokeColor.getPattern(o,this,xo(o),ns.STROKE,e);E=$t(o),o.restore(),o.strokeStyle=O}let I=s.lineWidth;const D=s.textMatrixScale;if(D===0||I===0){const O=s.textRenderingMode&Kn.FILL_STROKE_MASK;(O===Kn.STROKE||O===Kn.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=D;if(a!==1&&(o.scale(a,a),I/=a),o.lineWidth=I,r.isInvalidPDFjsFont){const O=[];let j=0;for(const $ of t)O.push($.unicode),j+=$.width;const V=O.join("");if(o.fillText(V,0,0),this.dependencyTracker!==null){const $=o.measureText(V);this.dependencyTracker.recordBBox(e,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=j*S*d,o.restore(),this.compose();return}let M=0,T;for(T=0;T<f;++T){const O=t[T];if(typeof O=="number"){M+=y*O*i/1e3;continue}let j=!1;const V=(O.isSpace?u:0)+l,$=O.fontChar,U=O.accent;let W,G,q=O.width;if(g){const J=O.vmetric||v,se=-(O.vmetric?J[1]:q*.5)*S,pe=J[2]*S;q=J?-J[0]:q,W=se/a,G=(M+pe)/a}else W=M/a,G=0;let ee;if(r.remeasure&&q>0){ee=o.measureText($);const J=ee.width*1e3/i*a;if(q<J&&this.isFontSubpixelAAEnabled){const se=q/J;j=!0,o.save(),o.scale(se,1),W/=se}else q!==J&&(W+=(q-J)/2e3*i/a)}if(this.contentVisible&&(O.isInFont||r.missingFile)){if(w&&!U)o.fillText($,W,G),(L=this.dependencyTracker)==null||L.recordCharacterBBox(e,o,ee?{bbox:null}:r,i/a,W,G,()=>ee??o.measureText($));else if(this.paintChar(e,$,W,G,_,E),U){const J=W+i*U.offset.x/a,se=G-i*U.offset.y/a;this.paintChar(e,U.fontChar,J,se,_,E)}}const ue=g?q*S-V*h:q*S+V*h;M+=ue,j&&o.restore()}g?s.y-=M:s.x+=M*d,o.restore(),this.compose(),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,a=r.fontDirection,l=i.vertical?1:-1,u=r.charSpacing,h=r.wordSpacing,d=r.textHScale*a,f=r.fontMatrix||yC,g=t.length,y=r.textRenderingMode===Kn.INVISIBLE;let v,S,w,_;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(d,a);const E=this.dependencyTracker;for(this.dependencyTracker=E?new k1(E,e):null,v=0;v<g;++v){if(S=t[v],typeof S=="number"){_=l*S*o/1e3,this.ctx.translate(_,0),r.x+=_*d;continue}const I=(S.isSpace?h:0)+u,D=i.charProcOperatorList[S.operatorListId];D?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(D),this.restore()):Te(`Type3 character "${S.operatorListId}" is not available.`);const M=[S.width,0];ce.applyTransform(M,f),w=M[0]*o+I,s.translate(w,0),r.x+=w*d}s.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,a){var u;const l=new Path2D;l.rect(r,i,o-r,a-i),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,o,i,a).recordClipBox(e,this.ctx,r,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||$t(this.ctx),i={createCanvasGraphics:(o,a)=>new bR(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new k1(this.dependencyTracker,a,!0):null)};s=new WC(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=yte(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,xo(s),ns.SHADING,e);const i=xo(s);if(i){const{width:a,height:l}=s.canvas,u=Yf.slice();ce.axialAlignedBoundingBox([0,0,a,l],i,u);const[h,d,f,g]=u;this.ctx.fillRect(h,d,f-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ti.transform).recordDependencies(e,ti.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){vt("Should not call beginInlineImage")}beginImageData(){vt("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=$t(this.ctx),s)){ce.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,a,l]=s,u=new Path2D;u.rect(i,o,a-i,l-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,a,o,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var E;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||JE("TODO: Support non-isolated groups."),t.knockout&&Te("Knockout groups not supported.");const r=$t(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Yf.slice();ce.axialAlignedBoundingBox(t.bbox,$t(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=ce.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),h=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),g=f.context;g.translate(-a,-l),g.transform(...r);let y=new Path2D;const[v,S,w,_]=t.bbox;if(y.rect(v,S,w-v,_-S),t.matrix){const I=new Path2D;I.addPath(y,new DOMMatrix(t.matrix)),y=I}g.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:g,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,l),s.save()),iy(s,g),this.ctx=g,(E=this.dependencyTracker)==null||E.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=$t(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Yf.slice();ce.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,a),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,s,r,i,o){if(k(this,ho,GC).call(this),lx(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],l=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=l,ce.singularValueDecompose2dScale($t(this.ctx),Br);const{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),d=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(Br[0],0,0,-Br[1],0,l*Br[1]),lx(this.ctx)}else{lx(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],a,l),this.ctx.clip(u)}}this.current=new cM(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),k(this,ho,qC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,a){var d,f,g;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=$t(l);l.transform(s,r,i,o,0,0);const h=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let y=0,v=a.length;y<v;y+=2){const S=ce.transform(u,[s,r,i,o,a[y],a[y+1]]);l.drawImage(h.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,S[4],S[4]+h.canvas.width,S[5],S[5]+h.canvas.height)}l.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,l;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,ti.transformAndFill);for(const u of t){const{data:h,width:d,height:f,transform:g}=u,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=y.context;v.save();const S=this.getObject(e,h,u);hM(v,S),v.globalCompositeOperation="source-in",v.fillStyle=i?r.getPattern(v,this,xo(s),ns.FILL,e):r,v.fillRect(0,0,d,f),v.restore(),s.save(),s.transform(...g),s.scale(1,-1),ax(s,y.canvas,0,0,d,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,d,0,f),s.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Te("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Te("Dependent image isn't ready yet");return}const a=o.width,l=o.height,u=[];for(let h=0,d=i.length;h<d;h+=2)u.push({transform:[s,0,0,r,i[h],i[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",s,r).context;uM(d,t),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,xo(i));i.imageSmoothingEnabled=dM($t(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,ti.imageXObject).recordOperation(e),ax(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,a,l;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;uM(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),ax(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ti.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===fM?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=$t(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(t),u=Math.abs(i);if(l===u)if(e===0)o=a=1/l;else{const h=l*e;o=a=h<1?1/h:1}else if(e===0)o=1/l,a=1/u;else{const h=l*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const l=Math.abs(t*i-s*r),u=Math.hypot(t,s),h=Math.hypot(r,i);if(e===0)o=h/l,a=u/l;else{const d=e*l;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),IA.a=1/i,IA.d=1/o;const l=new Path2D;if(l.addPath(e,IA),a.length>0){const u=Math.max(i,o);s.setLineDash(a.map(h=>h/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ho=new WeakSet,GC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},KC=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let fp=bR;for(const n in gg)fp.prototype[n]!==void 0&&(fp.prototype[gg[n]]=fp.prototype[n]);var Qp,Jp,Rv,Zp,Kx;const Qf=class Qf{constructor(e){A(this,Zp);A(this,Qp);A(this,Jp);A(this,Rv);b(this,Qp,e),b(this,Jp,new DataView(c(this,Qp))),b(this,Rv,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of Qf.strings){const h=t.encode(e[u]);s[u]=h,r+=4+h.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),a=new DataView(i);let l=0;for(const u of Qf.strings){const h=s[u],d=h.length;a.setUint32(l,d),o.set(h,l+4),l+=4+d}return We(l===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return k(this,Zp,Kx).call(this,0)}get fontWeight(){return k(this,Zp,Kx).call(this,1)}get italicAngle(){return k(this,Zp,Kx).call(this,2)}};Qp=new WeakMap,Jp=new WeakMap,Rv=new WeakMap,Zp=new WeakSet,Kx=function(e){We(e<Qf.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,Jp).getUint32(t)+4;const s=c(this,Jp).getUint32(t);return c(this,Rv).decode(new Uint8Array(c(this,Qp),t+4,s))},X(Qf,"strings",["fontFamily","fontWeight","italicAngle"]);let P1=Qf;var Lc,zo,qh,Kh,Oy;const Jf=class Jf{constructor(e){A(this,Kh);A(this,Lc);A(this,zo);A(this,qh);b(this,Lc,e),b(this,zo,new DataView(c(this,Lc))),b(this,qh,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const f of Jf.strings){const g=t.encode(e[f]);s[f]=g,r+=4+g.length}r+=4;let i,o,a=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const l=new ArrayBuffer(a),u=new Uint8Array(l),h=new DataView(l);let d=0;h.setUint8(d++,e.guessFallback?1:0),h.setUint32(d,0),d+=4,r=0;for(const f of Jf.strings){const g=s[f],y=g.length;r+=4+y,h.setUint32(d,y),u.set(g,d+4),d+=4+y}return h.setUint32(d-r-4,r),e.style&&(h.setUint32(d,i.length),u.set(i,d+4),d+=4+i.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),We(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}get guessFallback(){return c(this,zo).getUint8(0)!==0}get css(){return k(this,Kh,Oy).call(this,0)}get loadedName(){return k(this,Kh,Oy).call(this,1)}get baseFontName(){return k(this,Kh,Oy).call(this,2)}get src(){return k(this,Kh,Oy).call(this,3)}get style(){let e=1;e+=4+c(this,zo).getUint32(e);const t=c(this,zo).getUint32(e),s=c(this,qh).decode(new Uint8Array(c(this,Lc),e+4,t));e+=4+t;const r=c(this,zo).getUint32(e),i=c(this,qh).decode(new Uint8Array(c(this,Lc),e+4,r));return{style:s,weight:i}}};Lc=new WeakMap,zo=new WeakMap,qh=new WeakMap,Kh=new WeakSet,Oy=function(e){We(e<Jf.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,zo).getUint32(t)+4;const s=c(this,zo).getUint32(t);return c(this,qh).decode(new Uint8Array(c(this,Lc),t+4,s))},X(Jf,"strings",["css","loadedName","baseFontName","src"]);let I1=Jf;var em,tm,nm,sm,Er,$o,Nv,ct,rn,Di,Yx,jy;const Pe=class Pe{constructor({data:e,extra:t}){A(this,rn);A(this,$o);A(this,Nv);A(this,ct);b(this,$o,e),b(this,Nv,new TextDecoder),b(this,ct,new DataView(c(this,$o))),t&&Object.assign(this,t)}get black(){return k(this,rn,Di).call(this,0)}get bold(){return k(this,rn,Di).call(this,1)}get disableFontFace(){return k(this,rn,Di).call(this,2)}get fontExtraProperties(){return k(this,rn,Di).call(this,3)}get isInvalidPDFjsFont(){return k(this,rn,Di).call(this,4)}get isType3Font(){return k(this,rn,Di).call(this,5)}get italic(){return k(this,rn,Di).call(this,6)}get missingFile(){return k(this,rn,Di).call(this,7)}get remeasure(){return k(this,rn,Di).call(this,8)}get vertical(){return k(this,rn,Di).call(this,9)}get ascent(){return k(this,rn,Yx).call(this,0)}get defaultWidth(){return k(this,rn,Yx).call(this,1)}get descent(){return k(this,rn,Yx).call(this,2)}get bbox(){let e=c(Pe,tm);if(c(this,ct).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(c(this,ct).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=c(Pe,nm);if(c(this,ct).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(c(this,ct).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=c(Pe,sm);if(c(this,ct).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(c(this,ct).getInt16(e,!0)),e+=2;return s}get fallbackName(){return k(this,rn,jy).call(this,0)}get loadedName(){return k(this,rn,jy).call(this,1)}get mimetype(){return k(this,rn,jy).call(this,2)}get name(){return k(this,rn,jy).call(this,3)}get data(){let e=c(Pe,Er);const t=c(this,ct).getUint32(e);e+=4+t;const s=c(this,ct).getUint32(e);e+=4+s;const r=c(this,ct).getUint32(e);e+=4+r;const i=c(this,ct).getUint32(e);if(i!==0)return new Uint8Array(c(this,$o),e+4,i)}clearData(){let e=c(Pe,Er);const t=c(this,ct).getUint32(e);e+=4+t;const s=c(this,ct).getUint32(e);e+=4+s;const r=c(this,ct).getUint32(e);e+=4+r;const i=c(this,ct).getUint32(e);new Uint8Array(c(this,$o),e+4,i).fill(0),c(this,ct).setUint32(e,0)}get cssFontInfo(){let e=c(Pe,Er);const t=c(this,ct).getUint32(e);e+=4+t;const s=c(this,ct).getUint32(e);e+=4+s;const r=c(this,ct).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,$o),e+4,r)),new P1(i.buffer)}get systemFontInfo(){let e=c(Pe,Er);const t=c(this,ct).getUint32(e);e+=4+t;const s=c(this,ct).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(c(this,$o),e+4,s)),new I1(r.buffer)}static write(e){const t=e.systemFontInfo?I1.write(e.systemFontInfo):null,s=e.cssFontInfo?P1.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const v of Pe.strings)i[v]=r.encode(e[v]),o+=4+i[v].length;const a=c(Pe,Er)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),u=new Uint8Array(l),h=new DataView(l);let d=0;const f=Pe.bools.length;let g=0,y=0;for(let v=0;v<f;v++){const S=e[Pe.bools[v]];g|=(S===void 0?0:S?2:1)<<y,y+=2,(y===8||v===f-1)&&(h.setUint8(d++,g),g=0,y=0)}We(d===c(Pe,em),"FontInfo.write: Boolean properties offset mismatch");for(const v of Pe.numbers)h.setFloat64(d,e[v]),d+=8;if(We(d===c(Pe,tm),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(d++,4);for(const v of e.bbox)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(We(d===c(Pe,nm),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(d++,6);for(const v of e.fontMatrix)h.setFloat64(d,v,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(We(d===c(Pe,sm),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(d++,1);for(const v of e.defaultVMetrics)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=3*2;We(d===c(Pe,Er),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(c(Pe,Er),0),d+=4;for(const v of Pe.strings){const S=i[v],w=S.length;h.setUint32(d,w),u.set(S,d+4),d+=4+w}if(h.setUint32(c(Pe,Er),d-c(Pe,Er)-4),!t)h.setUint32(d,0),d+=4;else{const v=t.byteLength;h.setUint32(d,v),We(d+4+v<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),d+4),d+=4+v}if(!s)h.setUint32(d,0),d+=4;else{const v=s.byteLength;h.setUint32(d,v),We(d+4+v<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),d+4),d+=4+v}return e.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,e.data.length),u.set(e.data,d+4),d+=4+e.data.length),We(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}};em=new WeakMap,tm=new WeakMap,nm=new WeakMap,sm=new WeakMap,Er=new WeakMap,$o=new WeakMap,Nv=new WeakMap,ct=new WeakMap,rn=new WeakSet,Di=function(e){We(e<Pe.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=c(this,ct).getUint8(t)>>s&3;return r===0?void 0:r===2},Yx=function(e){return We(e<Pe.numbers.length,"Invalid number index"),c(this,ct).getFloat64(c(Pe,em)+e*8)},jy=function(e){We(e<Pe.strings.length,"Invalid string index");let t=c(Pe,Er)+4;for(let i=0;i<e;i++)t+=c(this,ct).getUint32(t)+4;const s=c(this,ct).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(c(this,$o),t+4,s)),c(this,Nv).decode(r)},X(Pe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),X(Pe,"numbers",["ascent","defaultWidth","descent"]),X(Pe,"strings",["fallbackName","loadedName","mimetype","name"]),A(Pe,em,Math.ceil(Pe.bools.length*2/8)),A(Pe,tm,c(Pe,em)+Pe.numbers.length*8),A(Pe,nm,c(Pe,tm)+1+2*4),A(Pe,sm,c(Pe,nm)+1+8*6),A(Pe,Er,c(Pe,sm)+1+2*3);let YC=Pe;var Lv,Dv;class bi{static get workerPort(){return c(this,Lv)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,Lv,e)}static get workerSrc(){return c(this,Dv)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,Dv,e)}}Lv=new WeakMap,Dv=new WeakMap,A(bi,Lv,null),A(bi,Dv,"");var rm,Mv;class Ate{constructor({parsedData:e,rawData:t}){A(this,rm);A(this,Mv);b(this,rm,e),b(this,Mv,t)}getRaw(){return c(this,Mv)}get(e){return c(this,rm).get(e)??null}[Symbol.iterator](){return c(this,rm).entries()}}rm=new WeakMap,Mv=new WeakMap;const If=Symbol("INTERNAL");var Ov,jv,Fv,im;class Tte{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){A(this,Ov,!1);A(this,jv,!1);A(this,Fv,!1);A(this,im,!0);b(this,Ov,!!(e&jr.DISPLAY)),b(this,jv,!!(e&jr.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(c(this,Fv))return c(this,im);if(!c(this,im))return!1;const{print:e,view:t}=this.usage;return c(this,Ov)?(t==null?void 0:t.viewState)!=="OFF":c(this,jv)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==If&&vt("Internal method `_setVisible` called."),b(this,Fv,s),b(this,im,t)}}Ov=new WeakMap,jv=new WeakMap,Fv=new WeakMap,im=new WeakMap;var Dc,ut,om,am,Vv,XC;class Cte{constructor(e,t=jr.DISPLAY){A(this,Vv);A(this,Dc,null);A(this,ut,new Map);A(this,om,null);A(this,am,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,am,e.order);for(const s of e.groups)c(this,ut).set(s.id,new Tte(t,s));if(e.baseState==="OFF")for(const s of c(this,ut).values())s._setVisible(If,!1);for(const s of e.on)c(this,ut).get(s)._setVisible(If,!0);for(const s of e.off)c(this,ut).get(s)._setVisible(If,!1);b(this,om,this.getHash())}}isVisible(e){if(c(this,ut).size===0)return!0;if(!e)return JE("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,ut).has(e.id)?c(this,ut).get(e.id).visible:(Te(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,Vv,XC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,ut).has(t))return Te(`Optional content group not found: ${t}`),!0;if(c(this,ut).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,ut).has(t))return Te(`Optional content group not found: ${t}`),!0;if(!c(this,ut).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,ut).has(t))return Te(`Optional content group not found: ${t}`),!0;if(!c(this,ut).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,ut).has(t))return Te(`Optional content group not found: ${t}`),!0;if(c(this,ut).get(t).visible)return!1}return!0}return Te(`Unknown optional content policy ${e.policy}.`),!0}return Te(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=c(this,ut).get(e);if(!r){Te(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=c(this,ut).get(a))==null||i._setVisible(If,!1,!0));r._setVisible(If,!!t,!0),b(this,Dc,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=c(this,ut).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}b(this,Dc,null)}get hasInitialVisibility(){return c(this,om)===null||this.getHash()===c(this,om)}getOrder(){return c(this,ut).size?c(this,am)?c(this,am).slice():[...c(this,ut).keys()]:null}getGroup(e){return c(this,ut).get(e)||null}getHash(){if(c(this,Dc)!==null)return c(this,Dc);const e=new P6;for(const[t,s]of c(this,ut))e.update(`${t}:${s.visible}`);return b(this,Dc,e.hexdigest())}[Symbol.iterator](){return c(this,ut).entries()}}Dc=new WeakMap,ut=new WeakMap,om=new WeakMap,am=new WeakMap,Vv=new WeakSet,XC=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=k(this,Vv,XC).call(this,i);else if(c(this,ut).has(i))o=c(this,ut).get(i).visible;else return Te(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class kte{constructor(e,{disableRange:t=!1,disableStream:s=!1}){We(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});We(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){We(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Pte(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Ite(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class Pte{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=eS(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ite{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Rte(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=l(h),h=u(h),i(h)}if(t=o(n),t){const h=u(t);return i(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),i(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=rb(d);d=f.decode(g),e=!1}catch{}}return d}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const d=[];let f;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,v,S,w]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[S,w]}const y=[];for(let v=0;v<d.length&&v in d;++v){let[S,w]=d[v];w=a(w),S&&(w=unescape(w),v===0&&(w=l(w))),y.push(w)}return y.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return r(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,y){if(g==="q"||g==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function z6(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function tS(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function $6({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function H6(n){const e=n.get("Content-Disposition");if(e){let t=Rte(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(eS(t))return t}return null}function lb(n,e){return new z0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function W6(n){return n===200||n===206}function G6(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function q6(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Te(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Nte{constructor(e){X(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=z6(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return We(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Lte(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Dte(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Lte{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,G6(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=tS(i.url),!W6(i.status))throw lb(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=$6({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=H6(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:q6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Dte{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,G6(i,this._withCredentials,this._abortController)).then(a=>{const l=tS(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!W6(a.status))throw lb(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:q6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const RA=200,NA=206;function Mte(n){const e=n.response;return typeof e!="string"?e:rb(e).buffer}class Ote{constructor({url:e,httpHeaders:t,withCredentials:s}){X(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=z6(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=NA):r.expectedStatus=RA,t.responseType="arraybuffer",We(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||RA;if(!(i===RA&&s.expectedStatus===NA)&&i!==s.expectedStatus){s.onError(r.status);return}const a=Mte(r);if(i===NA){const l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?s.onDone({begin:parseInt(u[1],10),chunk:a}):(Te('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class jte{constructor(e){this._source=e,this._manager=new Ote(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return We(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Fte(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new Vte(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Fte{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=tS(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=$6({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=H6(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=lb(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Vte{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=tS((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=lb(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Bte=/^[a-z][a-z0-9\-+.]+:/i;function Ute(n){if(Bte.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class zte{constructor(e){this.source=e,this.url=Ute(e.url),We(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return We(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $te(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Hte(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class $te{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=lb(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Hte{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const oy=Symbol("INITIAL_DATA");var Sr,Bv,QC;class K6{constructor(){A(this,Bv);A(this,Sr,Object.create(null))}get(e,t=null){if(t){const r=k(this,Bv,QC).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=c(this,Sr)[e];if(!s||s.data===oy)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,Sr)[e];return!!t&&t.data!==oy}delete(e){const t=c(this,Sr)[e];return!t||t.data===oy?!1:(delete c(this,Sr)[e],!0)}resolve(e,t=null){const s=k(this,Bv,QC).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,Sr)){const{data:s}=c(this,Sr)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}b(this,Sr,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Sr)){const{data:t}=c(this,Sr)[e];t!==oy&&(yield[e,t])}}}Sr=new WeakMap,Bv=new WeakSet,QC=function(e){var t;return(t=c(this,Sr))[e]||(t[e]={...Promise.withResolvers(),data:oy})};const Wte=1e5,pM=30;var MM,Mc,Zs,Uv,zv,Yh,Xa,$v,Hv,Xh,lm,cm,Oc,um,Wv,hm,Qh,Gv,qv,sn,dm,Jh,Kv,jc,fm,Ml,Y6,X6,JC,qr,Xx,ZC,Q6,J6;let G0=(sn=class{constructor({textContentSource:e,container:t,viewport:s}){A(this,Ml);A(this,Mc,Promise.withResolvers());A(this,Zs,null);A(this,Uv,!1);A(this,zv,!!((MM=globalThis.FontInspector)!=null&&MM.enabled));A(this,Yh,null);A(this,Xa,null);A(this,$v,0);A(this,Hv,0);A(this,Xh,null);A(this,lm,null);A(this,cm,0);A(this,Oc,0);A(this,um,Object.create(null));A(this,Wv,[]);A(this,hm,null);A(this,Qh,[]);A(this,Gv,new WeakMap);A(this,qv,null);var l;if(e instanceof ReadableStream)b(this,hm,e);else if(typeof e=="object")b(this,hm,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Zs,b(this,lm,t)),b(this,Oc,s.scale*uo.pixelRatio),b(this,cm,s.rotation),b(this,Xa,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;b(this,qv,[1,0,0,-1,-o,a+i]),b(this,Hv,r),b(this,$v,i),k(l=sn,qr,Q6).call(l),Fu(t,s),c(this,Mc).promise.finally(()=>{c(sn,fm).delete(this),b(this,Xa,null),b(this,um,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qn.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Xh).read().then(({value:t,done:s})=>{if(s){c(this,Mc).resolve();return}c(this,Yh)??b(this,Yh,t.lang),Object.assign(c(this,um),t.styles),k(this,Ml,Y6).call(this,t.items),e()},c(this,Mc).reject)};return b(this,Xh,c(this,hm).getReader()),c(sn,fm).add(this),e(),c(this,Mc).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*uo.pixelRatio,r=e.rotation;if(r!==c(this,cm)&&(t==null||t(),b(this,cm,r),Fu(c(this,lm),{rotation:r})),s!==c(this,Oc)){t==null||t(),b(this,Oc,s);const o={div:null,properties:null,ctx:k(i=sn,qr,Xx).call(i,c(this,Yh))};for(const a of c(this,Qh))o.properties=c(this,Gv).get(a),o.div=a,k(this,Ml,JC).call(this,o)}}cancel(){var t;const e=new Nl("TextLayer task cancelled.");(t=c(this,Xh))==null||t.cancel(e).catch(()=>{}),b(this,Xh,null),c(this,Mc).reject(e)}get textDivs(){return c(this,Qh)}get textContentItemsStr(){return c(this,Wv)}static cleanup(){if(!(c(this,fm).size>0)){c(this,dm).clear();for(const{canvas:e}of c(this,Jh).values())e.remove();c(this,Jh).clear()}}},Mc=new WeakMap,Zs=new WeakMap,Uv=new WeakMap,zv=new WeakMap,Yh=new WeakMap,Xa=new WeakMap,$v=new WeakMap,Hv=new WeakMap,Xh=new WeakMap,lm=new WeakMap,cm=new WeakMap,Oc=new WeakMap,um=new WeakMap,Wv=new WeakMap,hm=new WeakMap,Qh=new WeakMap,Gv=new WeakMap,qv=new WeakMap,dm=new WeakMap,Jh=new WeakMap,Kv=new WeakMap,jc=new WeakMap,fm=new WeakMap,Ml=new WeakSet,Y6=function(e){var r,i;if(c(this,Uv))return;(i=c(this,Xa)).ctx??(i.ctx=k(r=sn,qr,Xx).call(r,c(this,Yh)));const t=c(this,Qh),s=c(this,Wv);for(const o of e){if(t.length>Wte){Te("Ignoring additional textDivs for performance reasons."),b(this,Uv,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,Zs);b(this,Zs,document.createElement("span")),c(this,Zs).classList.add("markedContent"),o.id&&c(this,Zs).setAttribute("id",`${o.id}`),a.append(c(this,Zs))}else o.type==="endMarkedContent"&&b(this,Zs,c(this,Zs).parentNode);continue}s.push(o.str),k(this,Ml,X6).call(this,o)}},X6=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Qh).push(t);const r=ce.transform(c(this,qv),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,um)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=c(this,zv)&&o.fontSubstitution||o.fontFamily;a=sn.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),u=l*k(v=sn,qr,J6).call(v,a,o,c(this,Yh));let h,d;i===0?(h=r[4],d=r[5]-u):(h=r[4]+u*Math.sin(i),d=r[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",g=t.style;c(this,Zs)===c(this,lm)?(g.left=`${(100*h/c(this,Hv)).toFixed(2)}%`,g.top=`${(100*d/c(this,$v)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(c(sn,jc)*l).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,zv)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);S!==w&&Math.max(S,w)/Math.min(S,w)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),c(this,Gv).set(t,s),c(this,Xa).div=t,c(this,Xa).properties=s,k(this,Ml,JC).call(this,c(this,Xa)),s.hasText&&c(this,Zs).append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,Zs).append(S)}},JC=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(c(sn,jc)>1&&(o=`scale(${1/c(sn,jc)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:u,fontSize:h}=s;k(a=sn,qr,ZC).call(a,r,h*c(this,Oc),l);const{width:d}=r.measureText(t.textContent);d>0&&(o=`scaleX(${u*c(this,Oc)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},qr=new WeakSet,Xx=function(e=null){let t=c(this,Jh).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Jh).set(e,t),c(this,Kv).set(t,{size:0,family:""})}return t},ZC=function(e,t,s){const r=c(this,Kv).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},Q6=function(){if(c(this,jc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,jc,e.getBoundingClientRect().height),e.remove()},J6=function(e,t,s){const r=c(this,dm).get(e);if(r)return r;const i=k(this,qr,Xx).call(this,s);i.canvas.width=i.canvas.height=pM,k(this,qr,ZC).call(this,i,pM,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+l):(qn.platform.isFirefox&&Te("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),c(this,dm).set(e,u),u},A(sn,qr),A(sn,dm,new Map),A(sn,Jh,new Map),A(sn,Kv,new WeakMap),A(sn,jc,null),A(sn,fm,new Set),sn);const Gte=100;function cR(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ek,{docId:t}=e,s=n.url?ete(n.url):null,r=n.data?tte(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof uR?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof yg?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!ob(n.docBaseUrl)?n.docBaseUrl:null,g=sx(n.cMapUrl),y=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Ms?lte:eM),S=sx(n.iccUrl),w=sx(n.standardFontDataUrl),_=n.StandardFontDataFactory||(Ms?cte:tM),E=sx(n.wasmUrl),I=n.WasmFactory||(Ms?ute:nM),D=n.stopAtErrors!==!0,M=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ms,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ms&&(qn.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ms,O=n.fontExtraProperties===!0,j=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,$=n.disableRange===!0,U=n.disableStream===!0,W=n.disableAutoFetch===!0,G=n.pdfBug===!0,q=n.CanvasFactory||(Ms?ate:rte),ee=n.FilterFactory||(Ms?ote:ite),ue=n.enableHWA===!0,J=n.useWasm!==!1,se=l?l.length:n.length??NaN,pe=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ms&&!R,_e=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===eM&&_===tM&&I===nM&&g&&w&&E&&Ay(g,document.baseURI)&&Ay(w,document.baseURI)&&Ay(E,document.baseURI)),Se=null;Mee(d);const ie={canvasFactory:new q({ownerDocument:V,enableHWA:ue}),filterFactory:new ee({docId:t,ownerDocument:V}),cMapReaderFactory:_e?null:new v({baseUrl:g,isCompressed:y}),standardFontDataFactory:_e?null:new _({baseUrl:w}),wasmFactory:_e?null:new I({baseUrl:E})};h||(h=yg.create({verbosity:d,port:bi.workerPort}),e._worker=h);const Xt={docId:t,apiVersion:"5.4.296",data:r,password:a,disableAutoFetch:W,rangeChunkSize:u,length:se,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:M,disableFontFace:R,ignoreErrors:D,isEvalSupported:T,isOffscreenCanvasSupported:C,isImageDecoderSupported:N,canvasMaxAreaInBytes:L,fontExtraProperties:O,useSystemFonts:pe,useWasm:J,useWorkerFetch:_e,cMapUrl:g,iccUrl:S,standardFontDataUrl:w,wasmUrl:E}},At={ownerDocument:V,pdfBug:G,styleElement:Se,loadingParams:{disableAutoFetch:W,enableXfa:j}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Lt=h.messageHandler.sendWithPromise("GetDocRequest",Xt,r?[r.buffer]:null);let Ie;if(l)Ie=new kte(l,{disableRange:$,disableStream:U});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Dt=Ay(s)?Nte:Ms?zte:jte;Ie=new Dt({url:s,length:se,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:$,disableStream:U})}return Lt.then(Dt=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const qe=new Ry(t,Dt,h.port),Ke=new Yte(qe,e,Ie,At,ie,ue);e._transport=Ke,qe.send("Ready",null)})}).catch(e._capability.reject),e}var G1;const q1=class q1{constructor(){X(this,"_capability",Promise.withResolvers());X(this,"_transport",null);X(this,"_worker",null);X(this,"docId",`d${Jt(q1,G1)._++}`);X(this,"destroyed",!1);X(this,"onPassword",null);X(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};G1=new WeakMap,A(q1,G1,0);let ek=q1;var Zh,Yv,Xv,Qv,Jv,OM;let uR=(OM=class{constructor(e,t,s=!1,r=null){A(this,Zh,Promise.withResolvers());A(this,Yv,[]);A(this,Xv,[]);A(this,Qv,[]);A(this,Jv,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){c(this,Jv).push(e)}addProgressListener(e){c(this,Qv).push(e)}addProgressiveReadListener(e){c(this,Xv).push(e)}addProgressiveDoneListener(e){c(this,Yv).push(e)}onDataRange(e,t){for(const s of c(this,Jv))s(e,t)}onDataProgress(e,t){c(this,Zh).promise.then(()=>{for(const s of c(this,Qv))s(e,t)})}onDataProgressiveRead(e){c(this,Zh).promise.then(()=>{for(const t of c(this,Xv))t(e)})}onDataProgressiveDone(){c(this,Zh).promise.then(()=>{for(const e of c(this,Yv))e()})}transportReady(){c(this,Zh).resolve()}requestDataRange(e,t){vt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Zh=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,OM);class qte{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Qa,ed,Fy;class Kte{constructor(e,t,s,r=!1){A(this,ed);A(this,Qa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new qD:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new K6,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new ib({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=ta.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:g=!1,operationsFilter:y=null}){var N,L,R;(N=this._stats)==null||N.time("Overall");const v=this._transport.getRenderingIntent(r,i,d,f),{renderingIntent:S,cacheKey:w}=v;b(this,Qa,!1),l||(l=this._transport.getOptionalContentConfig(S));let _=this._intentStates.get(w);_||(_=Object.create(null),this._intentStates.set(w,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const E=!!(S&jr.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(v));const I=!!(this._pdfBug&&((R=globalThis.StepperManager)!=null&&R.enabled)),D=!this.recordedBBoxes&&(g||I),M=O=>{var j,V;if(_.renderTasks.delete(T),D){const $=(j=T.gfx)==null?void 0:j.dependencyTracker.take();$&&(T.stepper&&T.stepper.setOperatorBBoxes($,T.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=$))}E&&b(this,Qa,!0),k(this,ed,Fy).call(this),O?(T.capability.reject(O),this._abortOperatorList({intentState:_,reason:O instanceof Error?O:new Error(O)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new tk({callback:M,params:{canvas:t,canvasContext:e,dependencyTracker:D?new dte(t,_.operatorList.length,I):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(_.renderTasks||(_.renderTasks=new Set)).add(T);const C=T.task;return Promise.all([_.displayReadyCapability.promise,l]).then(([O,j])=>{var V;if(this.destroyed){M();return}if((V=this._stats)==null||V.time("Rendering"),!(j.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:O,optionalContentConfig:j}),T.operatorListChanged()}).catch(M),C}getOperatorList({intent:e="display",annotationMode:t=ta.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>$0.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:u}){if(u){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),b(this,Qa,!1),Promise.all(e)}cleanup(e=!1){b(this,Qa,!0);const t=k(this,ed,Fy).call(this);return e&&t&&this._stats&&(this._stats=new qD),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&k(this,ed,Fy).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();k(this,ed,Fy).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof ZE){let r=Gte;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Nl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Qa=new WeakMap,ed=new WeakSet,Fy=function(){if(!c(this,Qa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Qa,!1),!0};var Fc,Gi,Ja,td,K1,nd,sd,Fs,Qx,Z6,e5,Vy,pm,Jx;const Mt=class Mt{constructor({name:e=null,port:t=null,verbosity:s=Oee()}={}){A(this,Fs);A(this,Fc,Promise.withResolvers());A(this,Gi,null);A(this,Ja,null);A(this,td,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(c(Mt,sd).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Mt,sd).set(t,this),k(this,Fs,Z6).call(this,t)}else k(this,Fs,e5).call(this)}get promise(){return c(this,Fc).promise}get port(){return c(this,Ja)}get messageHandler(){return c(this,Gi)}destroy(){var e,t;this.destroyed=!0,(e=c(this,td))==null||e.terminate(),b(this,td,null),c(Mt,sd).delete(c(this,Ja)),b(this,Ja,null),(t=c(this,Gi))==null||t.destroy(),b(this,Gi,null)}static create(e){const t=c(this,sd).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Mt(e)}static get workerSrc(){if(bi.workerSrc)return bi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>c(this,pm,Jx)?c(this,pm,Jx):(await import(this.workerSrc)).WorkerMessageHandler)())}};Fc=new WeakMap,Gi=new WeakMap,Ja=new WeakMap,td=new WeakMap,K1=new WeakMap,nd=new WeakMap,sd=new WeakMap,Fs=new WeakSet,Qx=function(){c(this,Fc).resolve(),c(this,Gi).send("configure",{verbosity:this.verbosity})},Z6=function(e){b(this,Ja,e),b(this,Gi,new Ry("main","worker",e)),c(this,Gi).on("ready",()=>{}),k(this,Fs,Qx).call(this)},e5=function(){if(c(Mt,nd)||c(Mt,pm,Jx)){k(this,Fs,Vy).call(this);return}let{workerSrc:e}=Mt;try{Mt._isSameOrigin(window.location,e)||(e=Mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Ry("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?c(this,Fc).reject(new Error("Worker was destroyed")):k(this,Fs,Vy).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,td)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}b(this,Gi,s),b(this,Ja,t),b(this,td,t),k(this,Fs,Qx).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{k(this,Fs,Vy).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{JE("The worker has been disabled.")}k(this,Fs,Vy).call(this)},Vy=function(){c(Mt,nd)||(Te("Setting up fake worker."),b(Mt,nd,!0)),Mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Fc).reject(new Error("Worker was destroyed"));return}const t=new ste;b(this,Ja,t);const s=`fake${Jt(Mt,K1)._++}`,r=new Ry(s+"_worker",s,t);e.setup(r,t),b(this,Gi,new Ry(s,s+"_worker",t)),k(this,Fs,Qx).call(this)}).catch(e=>{c(this,Fc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},pm=new WeakSet,Jx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(Mt,pm),A(Mt,K1,0),A(Mt,nd,!1),A(Mt,sd,new WeakMap),Ms&&(b(Mt,nd,!0),bi.workerSrc||(bi.workerSrc="./pdf.worker.mjs")),Mt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},Mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Mt.fromPort=e=>{if(Wee("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Mt.create(e)};let yg=Mt;var Za,Ho,mm,gm,el,rd,By;class Yte{constructor(e,t,s,r,i,o){A(this,rd);A(this,Za,new Map);A(this,Ho,new Map);A(this,mm,new Map);A(this,gm,new Map);A(this,el,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new K6,this.fontLoader=new Jee({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Le(this,"annotationStorage",new oR)}getRenderingIntent(e,t=ta.ENABLE,s=null,r=!1,i=!1){let o=jr.DISPLAY,a=FC;switch(e){case"any":o=jr.ANY;break;case"display":break;case"print":o=jr.PRINT;break;default:Te(`getRenderingIntent - invalid intent: ${e}`)}const l=o&jr.PRINT&&s instanceof R6?s:this.annotationStorage;switch(t){case ta.DISABLE:o+=jr.ANNOTATIONS_DISABLE;break;case ta.ENABLE:break;case ta.ENABLE_FORMS:o+=jr.ANNOTATIONS_FORMS;break;case ta.ENABLE_STORAGE:o+=jr.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Te(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=jr.IS_EDITING),i&&(o+=jr.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,el))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Ho).values())e.push(r._destroy());c(this,Ho).clear(),c(this,mm).clear(),c(this,gm).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Za).clear(),this.filterFactory.destroy(),G0.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Nl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{We(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}We(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{We(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}We(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new qte(s,this))}),e.on("DocException",s=>{t._capability.reject(qs(s))}),e.on("PasswordRequest",s=>{b(this,el,Promise.withResolvers());try{if(!t.onPassword)throw qs(s);const r=i=>{i instanceof Error?c(this,el).reject(i):c(this,el).resolve({password:i})};t.onPassword(r,s.code)}catch(r){c(this,el).reject(r)}return c(this,el).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,Ho).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const d=i.error;Te(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const a=new YC(i),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new Zee(a,l,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=i;We(h,"The imageRef must be defined.");for(const d of c(this,Ho).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=c(this,Ho).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Te("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,mm).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&c(this,gm).set(i.refStr,e);const o=new Kte(t,i,this,this._params.pdfBug);return c(this,Ho).set(t,o),o});return c(this,mm).set(t,r),r}getPageIndex(e){return VC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,rd,By).call(this,"GetFieldObjects")}hasJSActions(){return k(this,rd,By).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return k(this,rd,By).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,rd,By).call(this,"GetOptionalContentConfig").then(t=>new Cte(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Za).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new Ate(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Za).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Ho).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Za).clear(),this.filterFactory.destroy(!0),G0.cleanup()}}cachedPageNumber(e){if(!VC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,gm).get(t)??null}}Za=new WeakMap,Ho=new WeakMap,mm=new WeakMap,gm=new WeakMap,el=new WeakMap,rd=new WeakSet,By=function(e,t=null){const s=c(this,Za).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Za).set(e,r),r};var Vc;class Xte{constructor(e){A(this,Vc,null);X(this,"onContinue",null);X(this,"onError",null);b(this,Vc,e)}get promise(){return c(this,Vc).capability.promise}cancel(e=0){c(this,Vc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Vc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Vc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Vc=new WeakMap;var Bc,id;const ch=class ch{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:g=!1,operationsFilter:y=null}){A(this,Bc,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Xte(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(c(ch,id).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(ch,id).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new fp(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,Bc)&&(window.cancelAnimationFrame(c(this,Bc)),b(this,Bc,null)),c(ch,id).delete(this._canvas),e||(e=new ZE(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,Bc,window.requestAnimationFrame(()=>{b(this,Bc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(ch,id).delete(this._canvas),this.callback())))}};Bc=new WeakMap,id=new WeakMap,A(ch,id,new WeakSet);let tk=ch;const hR="5.4.296",t5="f56dc8601";var Ar,od,ym,kn,Zv,vm,tl,ew,Uc,qi,tw,dt,nk,sk,rk,sh,n5,Zl;const Ks=class Ks{constructor({editor:e=null,uiManager:t=null}){A(this,dt);A(this,Ar,null);A(this,od,null);A(this,ym);A(this,kn,null);A(this,Zv,!1);A(this,vm,!1);A(this,tl,null);A(this,ew);A(this,Uc,null);A(this,qi,null);var s,r;e?(b(this,vm,!1),b(this,tl,e)):b(this,vm,!0),b(this,qi,(e==null?void 0:e._uiManager)||t),b(this,ew,c(this,qi)._eventBus),b(this,ym,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=c(this,qi))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Ks,tw)||b(Ks,tw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Le(this,"_keyboardManager",new ab([[["Escape","mac+Escape"],Ks.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ks.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ks.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ks.prototype._moveToPrevious],[["Home","mac+Home"],Ks.prototype._moveToBeginning],[["End","mac+End"],Ks.prototype._moveToEnd]]))}renderButton(){const e=b(this,Ar,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,tl)&&(e.ariaControls=`${c(this,tl).id}_colorpicker_dropdown`);const t=c(this,qi)._signal;e.addEventListener("click",k(this,dt,sh).bind(this),{signal:t}),e.addEventListener("keydown",k(this,dt,rk).bind(this),{signal:t});const s=b(this,od,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=c(this,ym),e.append(s),e}renderMainDropdown(){const e=b(this,kn,k(this,dt,nk).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,Ar)){k(this,dt,sh).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,dt,sk).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,dt,Zl)){k(this,dt,sh).call(this,e);return}if(e.target===c(this,Ar)){(t=c(this,kn).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,kn))==null?void 0:t.firstChild)||e.target===c(this,Ar)){c(this,dt,Zl)&&this._hideDropdownFromKeyboard();return}c(this,dt,Zl)||k(this,dt,sh).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,dt,Zl)){k(this,dt,sh).call(this,e);return}(t=c(this,kn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,dt,Zl)){k(this,dt,sh).call(this,e);return}(t=c(this,kn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,kn))==null||e.classList.add("hidden"),c(this,Ar).ariaExpanded="false",(t=c(this,Uc))==null||t.abort(),b(this,Uc,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,vm)){if(!c(this,dt,Zl)){(e=c(this,tl))==null||e.unselect();return}this.hideDropdown(),c(this,Ar).focus({preventScroll:!0,focusVisible:c(this,Zv)})}}updateColor(e){if(c(this,od)&&(c(this,od).style.backgroundColor=e),!c(this,kn))return;const t=c(this,qi).highlightColors.values();for(const s of c(this,kn).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,Ar))==null||e.remove(),b(this,Ar,null),b(this,od,null),(t=c(this,kn))==null||t.remove(),b(this,kn,null)}};Ar=new WeakMap,od=new WeakMap,ym=new WeakMap,kn=new WeakMap,Zv=new WeakMap,vm=new WeakMap,tl=new WeakMap,ew=new WeakMap,Uc=new WeakMap,qi=new WeakMap,tw=new WeakMap,dt=new WeakSet,nk=function(){const e=document.createElement("div"),t=c(this,qi)._signal;e.addEventListener("contextmenu",Yr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,tl)&&(e.id=`${c(this,tl).id}_colorpicker_dropdown`);for(const[s,r]of c(this,qi).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",c(Ks,tw)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===c(this,ym),i.addEventListener("click",k(this,dt,sk).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,dt,rk).bind(this),{signal:t}),e},sk=function(e,t){t.stopPropagation(),c(this,ew).dispatch("switchannotationeditorparams",{source:this,type:ze.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},rk=function(e){Ks._keyboardManager.exec(this,e)},sh=function(e){if(c(this,dt,Zl)){this.hideDropdown();return}if(b(this,Zv,e.detail===0),c(this,Uc)||(b(this,Uc,new AbortController),window.addEventListener("pointerdown",k(this,dt,n5).bind(this),{signal:c(this,qi).combinedSignal(c(this,Uc))})),c(this,Ar).ariaExpanded="true",c(this,kn)){c(this,kn).classList.remove("hidden");return}const t=b(this,kn,k(this,dt,nk).call(this));c(this,Ar).append(t)},n5=function(e){var t;(t=c(this,kn))!=null&&t.contains(e.target)||this.hideDropdown()},Zl=function(){return c(this,kn)&&!c(this,kn).classList.contains("hidden")},A(Ks,tw,null);let q0=Ks;var Wo,nw,wm,sw;const uh=class uh{constructor(e){A(this,Wo,null);A(this,nw,null);A(this,wm,null);b(this,nw,e),b(this,wm,e._uiManager),c(uh,sw)||b(uh,sw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Wo))return c(this,Wo);const{editorType:e,colorType:t,colorValue:s}=c(this,nw),r=b(this,Wo,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(uh,sw)[e]),r.addEventListener("input",()=>{c(this,wm).updateParams(t,r.value)},{signal:c(this,wm)._signal}),r}update(e){c(this,Wo)&&(c(this,Wo).value=e)}destroy(){var e;(e=c(this,Wo))==null||e.remove(),b(this,Wo,null)}hideDropdown(){}};Wo=new WeakMap,nw=new WeakMap,wm=new WeakMap,sw=new WeakMap,A(uh,sw,null);let R1=uh;function mM(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ay(n){return Math.max(0,Math.min(255,255*n))}class gM{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ay(e),[e,e,e]}static G_HTML([e]){const t=mM(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ay)}static RGB_HTML(e){return`#${e.map(mM).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[ay(1-Math.min(1,e+r)),ay(1-Math.min(1,s+r)),ay(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class Qte{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){vt("Abstract method `_createSVG` called.")}}class K0 extends Qte{_createSVG(e){return document.createElementNS(Sa,e)}}const Jte=9,Qd=new WeakSet,Zte=new Date().getTimezoneOffset()*60*1e3;class yM{static create(e){switch(e.data.annotationType){case ln.LINK:return new dR(e);case ln.TEXT:return new tne(e);case ln.WIDGET:switch(e.data.fieldType){case"Tx":return new nne(e);case"Btn":return e.data.radioButton?new i5(e):e.data.checkBox?new rne(e):new ine(e);case"Ch":return new one(e);case"Sig":return new sne(e)}return new uf(e);case ln.POPUP:return new ok(e);case ln.FREETEXT:return new u5(e);case ln.LINE:return new lne(e);case ln.SQUARE:return new cne(e);case ln.CIRCLE:return new une(e);case ln.POLYLINE:return new h5(e);case ln.CARET:return new dne(e);case ln.INK:return new fR(e);case ln.POLYGON:return new hne(e);case ln.HIGHLIGHT:return new d5(e);case ln.UNDERLINE:return new fne(e);case ln.SQUIGGLY:return new pne(e);case ln.STRIKEOUT:return new mne(e);case ln.STAMP:return new f5(e);case ln.FILEATTACHMENT:return new gne(e);default:return new qt(e)}}}var ad,bm,pi,rw,ik;const xR=class xR{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){A(this,rw);A(this,ad,null);A(this,bm,!1);A(this,pi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xR._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>o?(o=t[l+1],i=t[l+2]):t[l+1]===o&&(i=Math.max(i,t[l+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const l of s)for(let u=0,h=l.length;u<h;u+=2)l[u+1]>o?(o=l[u+1],i=l[u]):l[u+1]===o&&(i=Math.max(i,l[u]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${U0}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${U0}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,pi))==null?void 0:e.popup)||this.popup)==null||t.remove(),b(this,pi,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,ad)||b(this,ad,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&k(this,rw,ik).call(this,t);let r=((i=c(this,pi))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=c(this,pi).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),b(this,pi,null),this.popup=null))}resetEdited(){var e;c(this,ad)&&(k(this,rw,ik).call(this,c(this,ad).rect),(e=c(this,pi))==null||e.popup.resetEdited(),b(this,ad,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof uf)&&!(this instanceof dR)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof ok){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(v>0||S>0){const _=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof i5){const _=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=_}switch(t.borderStyle.style){case Af.SOLID:o.borderStyle="solid";break;case Af.DASHED:o.borderStyle="dashed";break;case Af.BEVELED:Te("Unimplemented border style: beveled");break;case Af.INSET:Te("Unimplemented border style: inset");break;case Af.UNDERLINE:o.borderBottomStyle="solid";break}const w=t.borderColor||null;w?(b(this,bm,!0),o.borderColor=ce.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const u=ce.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=r.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-g)/d}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/h}%`,o.height=`${100*l/d}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=gM[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:gM[`${o}_rgb`](a)})};return Le(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,S,w,_]=e.subarray(2,6);if(r===v&&i===S&&t===w&&s===_)return}const{style:o}=this.container;let a;if(c(this,bm)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=r-t,u=i-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),y=`clippath_${this.data.id}`;g.setAttribute("id",y),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let v=2,S=e.length;v<S;v+=8){const w=e[v],_=e[v+1],E=e[v+2],I=e[v+3],D=h.createElement("rect"),M=(E-t)/l,T=(i-_)/u,C=(w-E)/l,N=(_-I)/u;D.setAttribute("x",M),D.setAttribute("y",T),D.setAttribute("width",C),D.setAttribute("height",N),g.append(D),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${T}" width="${C}" height="${N}"/>`)}c(this,bm)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=b(this,pi,new ok({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(c(this,pi)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,pi)}render(){vt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Qd.has(u)){Te(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Qd.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ad=new WeakMap,bm=new WeakMap,pi=new WeakMap,rw=new WeakSet,ik=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let qt=xR;class ene extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Ur,rh,s5,r5;class dR extends qt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,Ur);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(k(this,Ur,s5).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,Ur,r5).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&k(this,Ur,rh).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),k(this,Ur,rh).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,Ur,rh).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,Ur,rh).call(this),!this._fieldObjects){Te('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var d;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const g of i){const y=this._fieldObjects[g]||[];for(const{id:v}of y)f.add(v)}for(const g of Object.values(this._fieldObjects))for(const y of g)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:g}=f;switch(h.push(g),f.type){case"text":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Qd.has(y)){Te(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ur=new WeakSet,rh=function(){this.container.setAttribute("data-internal-link","")},s5=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},k(this,Ur,rh).call(this)},r5=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),k(this,Ur,rh).call(this)};class tne extends qt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class uf extends qt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[l,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ce.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Jte,i=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(AA*r))||1,d=u/h;o=Math.min(r,l(d/AA))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(u/AA))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ce.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class nne extends uf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Qd.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:g}=this.data,y=!!f&&this.enableScripting;d&&(s.title=d),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(s,"value",S.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",S=>{const w=this.data.defaultFieldValue??"";s.value=h.userValue=w,h.formattedValue=null});let v=S=>{const{formattedValue:w}=h;w!=null&&(S.target.value=w),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{var E;if(h.focused)return;const{target:_}=w;if(y&&(_.type=f,g&&(_.step=g)),h.userValue){const I=h.userValue;if(y)if(f==="time"){const D=new Date(I),M=[D.getHours(),D.getMinutes(),D.getSeconds()];_.value=M.map(T=>T.toString().padStart(2,"0")).join(":")}else _.value=new Date(I-Zte).toISOString().split(f==="date"?"T":".",1)[0];else _.value=I}h.lastCommittedValue=_.value,h.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const _={value(E){h.userValue=E.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:I}=E.detail;h.formattedValue=I,I!=null&&E.target!==document.activeElement&&(E.target.value=I);const D={formattedValue:I};y&&(D.value=I),e.setValue(t,D)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var T;const{charLimit:I}=E.detail,{target:D}=E;if(I===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",I);let M=h.userValue;!M||M.length<=I||(M=M.slice(0,I),D.value=h.userValue=M,e.setValue(t,{value:M}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(_,w)}),s.addEventListener("keydown",w=>{var I;h.commitKey=1;let _=-1;if(w.key==="Escape"?_=0:w.key==="Enter"&&!this.data.multiLine?_=2:w.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:E}=w.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:_,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const S=v;v=null,s.addEventListener("blur",w=>{var I,D;if(!h.focused||!w.relatedTarget)return;(I=this.data.actions)!=null&&I.Blur||(h.focused=!1);const{target:_}=w;let{value:E}=_;if(y){if(E&&f==="time"){const M=E.split(":").map(T=>parseInt(T,10));E=new Date(2e3,0,1,M[0],M[1],M[2]||0).valueOf(),_.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();_.type="text"}h.userValue=E,h.lastCommittedValue!==E&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),S(w)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",w=>{var N;h.lastCommittedValue=null;const{data:_,target:E}=w,{value:I,selectionStart:D,selectionEnd:M}=E;let T=D,C=M;switch(w.inputType){case"deleteWordBackward":{const L=I.substring(0,D).match(/\w*[^\w]*$/);L&&(T-=L[0].length);break}case"deleteWordForward":{const L=I.substring(D).match(/^[^\w]*\w*/);L&&(C+=L[0].length);break}case"deleteContentBackward":D===M&&(T-=1);break;case"deleteContentForward":D===M&&(C+=1);break}w.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,change:_||"",willCommit:!1,selStart:T,selEnd:C}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class sne extends uf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class rne extends uf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Qd.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class i5 extends uf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Qd.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ine extends dR{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class one extends uf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Qd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),i=!1),r.append(d)}let o=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=r;return g?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const g=f.detail.value,y=new Set(Array.isArray(g)?g:[g]);for(const v of r.options)v.selected=y.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const g=r.options,y=f.detail.remove;g[y].selected=!1,r.remove(y),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:g,displayValue:y,exportValue:v}=f.detail.insert,S=r.children[g],w=document.createElement("option");w.textContent=y,w.value=v,S?S.before(w):r.append(w),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:g}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of g){const{displayValue:v,exportValue:S}=y,w=document.createElement("option");w.textContent=v,w.value=S,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const g=new Set(f.detail.indices);for(const y of f.target.options)y.selected=g.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),r.addEventListener("input",h=>{var g;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var iw,ak;class ok extends qt{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&qt._hasPopupData(s)});A(this,iw);if(this.elements=r,o&&qt._hasPopupData(s)){const a=this.popup=k(this,iw,ak).call(this);for(const l of r)l.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=k(this,iw,ak).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${sR}${i}`).join(",")),this.container}}iw=new WeakSet,ak=function(){return new ane({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Tr,zc,Y1,X1,xm,_m,nn,Go,$c,ld,Em,Sm,qo,Cr,nl,sl,Fn,rl,Hc,ow,il,Am,cd,Wc,ys,Gc,Me,Zx,lk,ck,uk,e_,hk,o5,a5,l5,c5,t_,n_,dk;class ane{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:u,parentRect:h,open:d,commentManager:f=null}){A(this,Me);A(this,Tr,null);A(this,zc,k(this,Me,l5).bind(this));A(this,Y1,k(this,Me,dk).bind(this));A(this,X1,k(this,Me,n_).bind(this));A(this,xm,k(this,Me,t_).bind(this));A(this,_m,null);A(this,nn,null);A(this,Go,null);A(this,$c,null);A(this,ld,null);A(this,Em,null);A(this,Sm,null);A(this,qo,!1);A(this,Cr,null);A(this,nl,null);A(this,sl,null);A(this,Fn,null);A(this,rl,null);A(this,Hc,null);A(this,ow,null);A(this,il,null);A(this,Am,null);A(this,cd,null);A(this,Wc,!1);A(this,ys,null);A(this,Gc,null);b(this,nn,e),b(this,Am,r),b(this,Go,o),b(this,il,a),b(this,Em,l),b(this,_m,t),b(this,ow,u),b(this,Sm,h),b(this,ld,s),b(this,Tr,f),b(this,ys,s[0]),b(this,$c,H0.toDateObject(i)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup()),f?this.renderCommentButton():(k(this,Me,Zx).call(this),c(this,nn).hidden=!0,d&&k(this,Me,t_).call(this))}renderCommentButton(){if(c(this,Fn)||(c(this,rl)||k(this,Me,lk).call(this),!c(this,rl)))return;const{signal:e}=b(this,nl,new AbortController),t=!!c(this,ys).extraPopupElement,s=()=>{c(this,Tr).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,Tr).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,Tr).toggleCommentPopup(this,!1,!1)};if(t){b(this,Fn,c(this,ys).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,zc),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=b(this,Fn,document.createElement("button"));o.className="annotationCommentButton";const a=c(this,ys).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),k(this,Me,uk).call(this),k(this,Me,ck).call(this),o.addEventListener("keydown",c(this,zc),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,ys).commentData;return e?c(this,Em)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,Fn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=c(this,ys).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,Fn)}get comment(){return c(this,Gc)||b(this,Gc,c(this,ys).commentText),c(this,Gc)}set comment(e){e!==this.comment&&(c(this,ys).commentText=b(this,Gc,e))}get parentBoundingClientRect(){return c(this,ys).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Fn)&&(c(this,Fn).classList.toggle("selected",e),c(this,Fn).ariaExpanded=t)}setSelectedCommentButton(e){c(this,Fn).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,Hc))return c(this,Hc);const{x:e,y:t,height:s}=c(this,Fn).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=c(this,ys).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/a]}set commentPopupPosition(e){b(this,Hc,e)}hasDefaultPopupPosition(){return c(this,Hc)===null}get commentButtonPosition(){return c(this,rl)}get commentButtonWidth(){return c(this,Fn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=c(this,Hc)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:o,width:a,height:l}=r;c(this,Tr).showDialog(null,this,i+t*a,o+s*l,{...e,parentDimensions:r})}render(){var s,r;if(c(this,Cr))return;const e=b(this,Cr,document.createElement("div"));if(e.className="popup",c(this,_m)){const i=e.style.outlineColor=ce.makeHexColor(...c(this,_m));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=c(this,Am))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,Am)}if(e.append(t),c(this,$c)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,$c).valueOf()})),i.dateTime=c(this,$c).toISOString(),t.append(i)}iR({html:c(this,Me,e_)||c(this,Go).str,dir:(r=c(this,Go))==null?void 0:r.dir,className:"popupContent"},e),c(this,nn).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(c(this,Tr)){s?(this.remove(),b(this,Gc,null)):t&&(t.deleted?this.remove():(k(this,Me,uk).call(this),b(this,Gc,t.text))),e&&(b(this,rl,null),k(this,Me,lk).call(this),k(this,Me,ck).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}k(this,Me,Zx).call(this),c(this,cd)||b(this,cd,{contentsObj:c(this,Go),richText:c(this,il)}),e&&b(this,sl,null),t&&t.text&&(b(this,il,k(this,Me,a5).call(this,t.text)),b(this,$c,H0.toDateObject(t.date)),b(this,Go,null)),(r=c(this,Cr))==null||r.remove(),b(this,Cr,null)}resetEdited(){var e;c(this,cd)&&({contentsObj:Jt(this,Go)._,richText:Jt(this,il)._}=c(this,cd),b(this,cd,null),(e=c(this,Cr))==null||e.remove(),b(this,Cr,null),b(this,sl,null))}remove(){var e,t,s;if((e=c(this,nl))==null||e.abort(),b(this,nl,null),(t=c(this,Cr))==null||t.remove(),b(this,Cr,null),b(this,Wc,!1),b(this,qo,!1),(s=c(this,Fn))==null||s.remove(),b(this,Fn,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){b(this,Wc,this.isVisible),c(this,Wc)&&(c(this,nn).hidden=!0)}maybeShow(){c(this,Tr)||(k(this,Me,Zx).call(this),c(this,Wc)&&(c(this,Cr)||k(this,Me,n_).call(this),b(this,Wc,!1),c(this,nn).hidden=!1))}get isVisible(){return c(this,Tr)?!1:c(this,nn).hidden===!1}}Tr=new WeakMap,zc=new WeakMap,Y1=new WeakMap,X1=new WeakMap,xm=new WeakMap,_m=new WeakMap,nn=new WeakMap,Go=new WeakMap,$c=new WeakMap,ld=new WeakMap,Em=new WeakMap,Sm=new WeakMap,qo=new WeakMap,Cr=new WeakMap,nl=new WeakMap,sl=new WeakMap,Fn=new WeakMap,rl=new WeakMap,Hc=new WeakMap,ow=new WeakMap,il=new WeakMap,Am=new WeakMap,cd=new WeakMap,Wc=new WeakMap,ys=new WeakMap,Gc=new WeakMap,Me=new WeakSet,Zx=function(){var t;if(c(this,nl))return;b(this,nl,new AbortController);const{signal:e}=c(this,nl);for(const s of this.trigger)s.addEventListener("click",c(this,xm),{signal:e}),s.addEventListener("pointerenter",c(this,X1),{signal:e}),s.addEventListener("pointerleave",c(this,Y1),{signal:e}),s.classList.add("popupTriggerArea");for(const s of c(this,ld))(t=s.container)==null||t.addEventListener("keydown",c(this,zc),{signal:e})},lk=function(){const e=c(this,ld).find(t=>t.hasCommentButton);e&&b(this,rl,e._normalizePoint(e.commentButtonPosition))},ck=function(){if(c(this,ys).extraPopupElement&&!c(this,ys).editor)return;this.renderCommentButton();const[e,t]=c(this,rl),{style:s}=c(this,Fn);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},uk=function(){c(this,ys).extraPopupElement||(this.renderCommentButton(),c(this,Fn).style.backgroundColor=this.commentButtonColor||"")},e_=function(){const e=c(this,il),t=c(this,Go);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,il).html||null},hk=function(){var e,t,s;return((s=(t=(e=c(this,Me,e_))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},o5=function(){var e,t,s;return((s=(t=(e=c(this,Me,e_))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},a5=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Me,o5),fontSize:c(this,Me,hk)?`calc(${c(this,Me,hk)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},l5=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,qo))&&k(this,Me,t_).call(this)},c5=function(){if(c(this,sl)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=c(this,Em);let o=!!c(this,Sm),a=o?c(this,Sm):c(this,ow);for(const y of c(this,ld))if(!a||ce.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=ce.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=l[0]+h,f=l[1];b(this,sl,[100*(d-r)/t,100*(f-i)/s]);const{style:g}=c(this,nn);g.left=`${c(this,sl)[0]}%`,g.top=`${c(this,sl)[1]}%`},t_=function(){if(c(this,Tr)){c(this,Tr).toggleCommentPopup(this,!1);return}b(this,qo,!c(this,qo)),c(this,qo)?(k(this,Me,n_).call(this),c(this,nn).addEventListener("click",c(this,xm)),c(this,nn).addEventListener("keydown",c(this,zc))):(k(this,Me,dk).call(this),c(this,nn).removeEventListener("click",c(this,xm)),c(this,nn).removeEventListener("keydown",c(this,zc)))},n_=function(){c(this,Cr)||this.render(),this.isVisible?c(this,qo)&&c(this,nn).classList.add("focused"):(k(this,Me,c5).call(this),c(this,nn).hidden=!1,c(this,nn).style.zIndex=parseInt(c(this,nn).style.zIndex)+1e3)},dk=function(){c(this,nn).classList.remove("focused"),!(c(this,qo)||!this.isVisible)&&(c(this,nn).hidden=!0,c(this,nn).style.zIndex=parseInt(c(this,nn).style.zIndex)-1e3)};class u5 extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var aw;class lne extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,aw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=b(this,aw,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,aw)}addHighlightArea(){this.container.classList.add("highlightArea")}}aw=new WeakMap;var lw;class cne extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,lw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=b(this,lw,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,lw)}addHighlightArea(){this.container.classList.add("highlightArea")}}lw=new WeakMap;var cw;class une extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,cw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=b(this,cw,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,cw)}addHighlightArea(){this.container.classList.add("highlightArea")}}cw=new WeakMap;var uw;class h5 extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,uw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const g=s[d]-t[0],y=t[3]-s[d+1];u.push(`${g},${y}`)}u=u.join(" ");const h=b(this,uw,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,uw)}addHighlightArea(){this.container.classList.add("highlightArea")}}uw=new WeakMap;class hne extends h5{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dne extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var hw,ud,dw,fk;class fR extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,dw);A(this,hw,null);A(this,ud,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ae.HIGHLIGHT:Ae.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:u}=k(this,dw,fk).call(this,s,t),h=this.svgFactory.create(l,u,!0),d=b(this,hw,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,g=r.length;f<g;f++){const y=this.svgFactory.createElement(this.svgElementName);c(this,ud).push(y),y.setAttribute("points",r[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=c(this,hw);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,l=c(this,ud).length;a<l;a++)c(this,ud)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:u}=k(this,dw,fk).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}hw=new WeakMap,ud=new WeakMap,dw=new WeakSet,fk=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class d5 extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ae.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class fne extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class pne extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class mne extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class f5 extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ae.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fw,pw,pk;class gne extends qt{constructor(t){var r;super(t,{isRenderable:!0});A(this,pw);A(this,fw,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,pw,pk).bind(this)),b(this,fw,r);const{isMac:i}=qn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,pw,pk).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,fw)}addHighlightArea(){this.container.classList.add("highlightArea")}}fw=new WeakMap,pw=new WeakSet,pk=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Tm,hd,Cm,qc,mw,dd,Uu,mk,gk,km;let pR=(km=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a,commentManager:l,linkService:u,annotationStorage:h}){A(this,Uu);A(this,Tm,null);A(this,hd,null);A(this,Cm,null);A(this,qc,new Map);A(this,mw,null);A(this,dd,null);this.div=e,b(this,Tm,t),b(this,hd,s),b(this,mw,a||null),b(this,dd,u||null),b(this,Cm,h||new oR),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return c(this,qc).size>0}async render(e){var o,a,l;const{annotations:t}=e,s=this.div;Fu(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:c(this,dd),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new K0,annotationStorage:c(this,Cm),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===ln.POPUP;if(h){const g=r.get(u.id);if(!g)continue;i.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const d=yM.create(i);if(!d.isRenderable)continue;if(!h&&u.popupRef){const g=r.get(u.popupRef);g?g.push(d):r.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await k(this,Uu,mk).call(this,f,u.id,i.elements),(a=(o=d.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),d._isEditable&&(c(this,qc).set(d.data.id,d),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(d))}k(this,Uu,gk).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,dd),svgFactory:new K0,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=km._defaultBorderStyle),t.data=s;const r=yM.create(t);if(!r.isRenderable)continue;const i=r.render();await k(this,Uu,mk).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Fu(t,{rotation:e.rotation}),k(this,Uu,gk).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,qc).values())}getEditableAnnotation(e){return c(this,qc).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:s,rotation:r}=e,i=new ene({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,dd),annotationStorage:c(this,Cm)}),o=i.render();return t.append(o),(a=c(this,Tm))==null||a.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Af.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Tm=new WeakMap,hd=new WeakMap,Cm=new WeakMap,qc=new WeakMap,mw=new WeakMap,dd=new WeakMap,Uu=new WeakSet,mk=async function(e,t,s){var a,l;const r=e.firstChild||e,i=r.id=`${sR}${t}`,o=await((a=c(this,mw))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,h]of o)r.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),(l=c(this,Tm))==null||l.moveElementInDOM(this.div,e,r,!1))},gk=function(){var t;if(!c(this,hd))return;const e=this.div;for(const[s,r]of c(this,hd)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=c(this,qc).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}c(this,hd).clear()},km);const cx=/\r\n?|\n/g;var kr,gw,fd,Pr,_n,p5,m5,g5,s_,_l,r_,i_,y5,vk,v5;const It=class It extends St{constructor(t){super({...t,name:"freeTextEditor"});A(this,_n);A(this,kr,"");A(this,gw,`${this.id}-editor`);A(this,fd,null);A(this,Pr);X(this,"_colorPicker",null);this.color=t.color||It._defaultColor||St._defaultLineColor,b(this,Pr,t.fontSize||It._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=It.prototype,s=o=>o.isEmpty(),r=Vu.TRANSLATE_SMALL,i=Vu.TRANSLATE_BIG;return Le(this,"_keyboardManager",new ab([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){St.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ze.FREETEXT_SIZE:It._defaultFontSize=s;break;case ze.FREETEXT_COLOR:It._defaultColor=s;break}}updateParams(t,s){switch(t){case ze.FREETEXT_SIZE:k(this,_n,p5).call(this,s);break;case ze.FREETEXT_COLOR:k(this,_n,m5).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ze.FREETEXT_SIZE,It._defaultFontSize],[ze.FREETEXT_COLOR,It._defaultColor||St._defaultLineColor]]}get propertiesToUpdate(){return[[ze.FREETEXT_SIZE,c(this,Pr)],[ze.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new R1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ze.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-It._internalPadding*t,-(It._internalPadding+c(this,Pr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,fd,new AbortController);const t=this._uiManager.combinedSignal(c(this,fd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,gw)),this._isDraggable=!0,(t=c(this,fd))==null||t.abort(),b(this,fd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,kr),s=b(this,kr,k(this,_n,g5).call(this).trimEnd());if(t===s)return;const r=i=>{if(b(this,kr,i),!i){this.remove();return}k(this,_n,i_).call(this),this._uiManager.rebuild(this),k(this,_n,s_).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),k(this,_n,s_).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){It._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,gw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Pr)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let y,v;switch(this.rotation){case 0:y=t+(a[0]-f)/h,v=s+this.height-(a[1]-g)/d;break;case 90:y=t+(a[0]-f)/h,v=s-(a[1]-g)/d,[l,u]=[u,-l];break;case 180:y=t-this.width+(a[0]-f)/h,v=s-(a[1]-g)/d,[l,u]=[-l,-u];break;case 270:y=t+(a[0]-f-this.height*d)/h,v=s+(a[1]-g-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(y*i,v*o,l,u)}else this._moveAfterPaste(t,s);k(this,_n,i_).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,v,S;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(y=It,_l,vk).call(y,s.getData("text")||"").replaceAll(cx,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(cx,"")),w!==this.editorDiv){let _=h;for(const E of this.editorDiv.childNodes){if(E===w){_=d;continue}_.push(k(v=It,_l,r_).call(v,E))}}h.push(l.nodeValue.slice(0,u).replaceAll(cx,""))}else if(l===this.editorDiv){let w=h,_=0;for(const E of this.editorDiv.childNodes)_++===u&&(w=d),w.push(k(S=It,_l,r_).call(S,E))}b(this,kr,`${h.join(`
`)}${i}${d.join(`
`)}`),k(this,_n,i_).call(this);const f=new Range;let g=Math.sumPrecise(h.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const _=w.nodeValue.length;if(g<=_){f.setStart(w,g),f.setEnd(w,g);break}g-=_}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=It._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var a;let i=null;if(t instanceof u5){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:g,richText:y,contentsObj:v,creationDate:S,modificationDate:w},textContent:_,textPosition:E,parent:{page:{pageNumber:I}}}=t;if(!_||_.length===0)return null;i=t={annotationType:Ae.FREETEXT,color:Array.from(u),fontSize:l,value:_.join(`
`),position:E,pageIndex:I-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:(v==null?void 0:v.str)||null,richText:y,creationDate:S,modificationDate:w}}const o=await super.deserialize(t,s,r);return b(o,Pr,t.fontSize),o.color=ce.makeHexColor(...t.color),b(o,kr,k(a=It,_l,vk).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=St._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:c(this,Pr),value:k(this,_n,y5).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!k(this,_n,v5).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${c(this,Pr)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of c(this,kr).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,kr)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};kr=new WeakMap,gw=new WeakMap,fd=new WeakMap,Pr=new WeakMap,_n=new WeakSet,p5=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,Pr))*this.parentScale),b(this,Pr,i),k(this,_n,s_).call(this)},r=c(this,Pr);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},m5=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g5=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=It,_l,r_).call(r,i)),s=i);return t.join(`
`)},s_=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},_l=new WeakSet,r_=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cx,"")},i_=function(){if(this.editorDiv.replaceChildren(),!!c(this,kr))for(const t of c(this,kr).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},y5=function(){return c(this,kr).replaceAll(""," ")},vk=function(t){return t.replaceAll(" ","")},v5=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},A(It,_l),X(It,"_freeTextDefaultContent",""),X(It,"_internalPadding",0),X(It,"_defaultColor",null),X(It,"_defaultFontSize",10),X(It,"_type","freetext"),X(It,"_editorType",Ae.FREETEXT);let yk=It;class le{toSVGPath(){vt("Abstract method `toSVGPath` must be implemented.")}get box(){vt("Abstract getter `box` must be implemented.")}serialize(e,t){vt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}X(le,"PRECISION",1e-4);var Ir,Ki,Pm,Im,Ko,je,pd,md,yw,vw,Rm,Nm,Kc,ww,Q1,J1,Nn,Uy,w5,b5,x5,_5,E5,S5;const Pa=class Pa{constructor({x:e,y:t},s,r,i,o,a=0){A(this,Nn);A(this,Ir);A(this,Ki,[]);A(this,Pm);A(this,Im);A(this,Ko,[]);A(this,je,new Float32Array(18));A(this,pd);A(this,md);A(this,yw);A(this,vw);A(this,Rm);A(this,Nm);A(this,Kc,[]);b(this,Ir,s),b(this,Nm,i*r),b(this,Im,o),c(this,je).set([NaN,NaN,NaN,NaN,e,t],6),b(this,Pm,a),b(this,vw,c(Pa,ww)*r),b(this,yw,c(Pa,J1)*r),b(this,Rm,r),c(this,Kc).push(e,t)}isEmpty(){return isNaN(c(this,je)[8])}add({x:e,y:t}){var N;b(this,pd,e),b(this,md,t);const[s,r,i,o]=c(this,Ir);let[a,l,u,h]=c(this,je).subarray(8,12);const d=e-u,f=t-h,g=Math.hypot(d,f);if(g<c(this,yw))return!1;const y=g-c(this,vw),v=y/g,S=v*d,w=v*f;let _=a,E=l;a=u,l=h,u+=S,h+=w,(N=c(this,Kc))==null||N.push(e,t);const I=-w/y,D=S/y,M=I*c(this,Nm),T=D*c(this,Nm);return c(this,je).set(c(this,je).subarray(2,8),0),c(this,je).set([u+M,h+T],4),c(this,je).set(c(this,je).subarray(14,18),12),c(this,je).set([u-M,h-T],16),isNaN(c(this,je)[6])?(c(this,Ko).length===0&&(c(this,je).set([a+M,l+T],2),c(this,Ko).push(NaN,NaN,NaN,NaN,(a+M-s)/i,(l+T-r)/o),c(this,je).set([a-M,l-T],14),c(this,Ki).push(NaN,NaN,NaN,NaN,(a-M-s)/i,(l-T-r)/o)),c(this,je).set([_,E,a,l,u,h],6),!this.isEmpty()):(c(this,je).set([_,E,a,l,u,h],6),Math.abs(Math.atan2(E-l,_-a)-Math.atan2(w,S))<Math.PI/2?([a,l,u,h]=c(this,je).subarray(2,6),c(this,Ko).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/i,((l+h)/2-r)/o),[a,l,_,E]=c(this,je).subarray(14,18),c(this,Ki).push(NaN,NaN,NaN,NaN,((_+a)/2-s)/i,((E+l)/2-r)/o),!0):([_,E,a,l,u,h]=c(this,je).subarray(0,6),c(this,Ko).push(((_+5*a)/6-s)/i,((E+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+h)/6-r)/o,((a+u)/2-s)/i,((l+h)/2-r)/o),[u,h,a,l,_,E]=c(this,je).subarray(12,18),c(this,Ki).push(((_+5*a)/6-s)/i,((E+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+h)/6-r)/o,((a+u)/2-s)/i,((l+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Ko),t=c(this,Ki);if(isNaN(c(this,je)[6])&&!this.isEmpty())return k(this,Nn,w5).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,Nn,x5).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,Nn,b5).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new A5(e,t,s,r,i,o)}getOutlines(){var d;const e=c(this,Ko),t=c(this,Ki),s=c(this,je),[r,i,o,a]=c(this,Ir),l=new Float32Array((((d=c(this,Kc))==null?void 0:d.length)??0)+2);for(let f=0,g=l.length-2;f<g;f+=2)l[f]=(c(this,Kc)[f]-r)/o,l[f+1]=(c(this,Kc)[f+1]-i)/a;if(l[l.length-2]=(c(this,pd)-r)/o,l[l.length-1]=(c(this,md)-i)/a,isNaN(s[6])&&!this.isEmpty())return k(this,Nn,_5).call(this,l);const u=new Float32Array(c(this,Ko).length+24+c(this,Ki).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=k(this,Nn,S5).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+g],u[h+1]=t[f+g+1],h+=2}return k(this,Nn,E5).call(this,u,h),this.newFreeDrawOutline(u,l,c(this,Ir),c(this,Rm),c(this,Pm),c(this,Im))}};Ir=new WeakMap,Ki=new WeakMap,Pm=new WeakMap,Im=new WeakMap,Ko=new WeakMap,je=new WeakMap,pd=new WeakMap,md=new WeakMap,yw=new WeakMap,vw=new WeakMap,Rm=new WeakMap,Nm=new WeakMap,Kc=new WeakMap,ww=new WeakMap,Q1=new WeakMap,J1=new WeakMap,Nn=new WeakSet,Uy=function(){const e=c(this,je).subarray(4,6),t=c(this,je).subarray(16,18),[s,r,i,o]=c(this,Ir);return[(c(this,pd)+(e[0]-t[0])/2-s)/i,(c(this,md)+(e[1]-t[1])/2-r)/o,(c(this,pd)+(t[0]-e[0])/2-s)/i,(c(this,md)+(t[1]-e[1])/2-r)/o]},w5=function(){const[e,t,s,r]=c(this,Ir),[i,o,a,l]=k(this,Nn,Uy).call(this);return`M${(c(this,je)[2]-e)/s} ${(c(this,je)[3]-t)/r} L${(c(this,je)[4]-e)/s} ${(c(this,je)[5]-t)/r} L${i} ${o} L${a} ${l} L${(c(this,je)[16]-e)/s} ${(c(this,je)[17]-t)/r} L${(c(this,je)[14]-e)/s} ${(c(this,je)[15]-t)/r} Z`},b5=function(e){const t=c(this,Ki);e.push(`L${t[4]} ${t[5]} Z`)},x5=function(e){const[t,s,r,i]=c(this,Ir),o=c(this,je).subarray(4,6),a=c(this,je).subarray(16,18),[l,u,h,d]=k(this,Nn,Uy).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${l} ${u} L${h} ${d} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},_5=function(e){const t=c(this,je),[s,r,i,o]=c(this,Ir),[a,l,u,h]=k(this,Nn,Uy).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(d,e,c(this,Ir),c(this,Rm),c(this,Pm),c(this,Im))},E5=function(e,t){const s=c(this,Ki);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},S5=function(e,t){const s=c(this,je).subarray(4,6),r=c(this,je).subarray(16,18),[i,o,a,l]=c(this,Ir),[u,h,d,f]=k(this,Nn,Uy).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],t),t+=24},A(Pa,ww,8),A(Pa,Q1,2),A(Pa,J1,c(Pa,ww)+c(Pa,Q1));let N1=Pa;var Lm,gd,ol,bw,Rr,xw,un,Z1,T5;class A5 extends le{constructor(t,s,r,i,o,a){super();A(this,Z1);A(this,Lm);A(this,gd,new Float32Array(4));A(this,ol);A(this,bw);A(this,Rr);A(this,xw);A(this,un);b(this,un,t),b(this,Rr,s),b(this,Lm,r),b(this,xw,i),b(this,ol,o),b(this,bw,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],k(this,Z1,T5).call(this,a);const[l,u,h,d]=c(this,gd);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-l)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,g=s.length;f<g;f+=2)s[f]=(s[f]-l)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${c(this,un)[4]} ${c(this,un)[5]}`];for(let s=6,r=c(this,un).length;s<r;s+=6){if(isNaN(c(this,un)[s])){t.push(`L${c(this,un)[s+4]} ${c(this,un)[s+5]}`);continue}t.push(`C${c(this,un)[s]} ${c(this,un)[s+1]} ${c(this,un)[s+2]} ${c(this,un)[s+3]} ${c(this,un)[s+4]} ${c(this,un)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,l=i-s;let u,h;switch(o){case 0:u=le._rescale(c(this,un),t,i,a,-l),h=le._rescale(c(this,Rr),t,i,a,-l);break;case 90:u=le._rescaleAndSwap(c(this,un),t,s,a,l),h=le._rescaleAndSwap(c(this,Rr),t,s,a,l);break;case 180:u=le._rescale(c(this,un),r,s,-a,l),h=le._rescale(c(this,Rr),r,s,-a,l);break;case 270:u=le._rescaleAndSwap(c(this,un),r,i,-a,-l),h=le._rescaleAndSwap(c(this,Rr),r,i,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,gd)}newOutliner(t,s,r,i,o,a=0){return new N1(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=c(this,gd),[l,u,h,d]=c(this,Lm),f=o*h,g=a*d,y=r*h+l,v=i*d+u,S=this.newOutliner({x:c(this,Rr)[0]*f+y,y:c(this,Rr)[1]*g+v},c(this,Lm),c(this,xw),t,c(this,bw),s??c(this,ol));for(let w=2;w<c(this,Rr).length;w+=2)S.add({x:c(this,Rr)[w]*f+y,y:c(this,Rr)[w+1]*g+v});return S.getOutlines()}}Lm=new WeakMap,gd=new WeakMap,ol=new WeakMap,bw=new WeakMap,Rr=new WeakMap,xw=new WeakMap,un=new WeakMap,Z1=new WeakSet,T5=function(t){const s=c(this,un);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,l=i,u=r,h=i;const d=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,v=s.length;y<v;y+=6){const S=s[y+4],w=s[y+5];isNaN(s[y])?(ce.pointBoundingBox(S,w,o),l>w?(a=S,l=w):l===w&&(a=d(a,S)),h<w?(u=S,h=w):h===w&&(u=d(u,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,ce.bezierBoundingBox(r,i,...s.slice(y,y+6),f),ce.rectBoundingBox(f[0],f[1],f[2],f[3],o),l>f[1]?(a=f[0],l=f[1]):l===f[1]&&(a=d(a,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),r=S,i=w}const g=c(this,gd);g[0]=o[0]-c(this,ol),g[1]=o[1]-c(this,ol),g[2]=o[2]-o[0]+2*c(this,ol),g[3]=o[3]-o[1]+2*c(this,ol),this.firstPoint=[a,l],this.lastPoint=[u,h]};var _w,Ew,Sw,Yc,Yi,Bs,C5,o_,k5,P5,bk;class wk{constructor(e,t=0,s=0,r=!0){A(this,Bs);A(this,_w);A(this,Ew);A(this,Sw);A(this,Yc,[]);A(this,Yi,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:v,y:S,width:w,height:_}of e){const E=Math.floor((v-t)/o)*o,I=Math.ceil((v+w+t)/o)*o,D=Math.floor((S-t)/o)*o,M=Math.ceil((S+_+t)/o)*o,T=[E,D,M,!0],C=[I,D,M,!1];c(this,Yc).push(T,C),ce.rectBoundingBox(E,D,I,M,i)}const a=i[2]-i[0]+2*s,l=i[3]-i[1]+2*s,u=i[0]-s,h=i[1]-s;let d=r?-1/0:1/0,f=1/0;const g=c(this,Yc).at(r?-1:-2),y=[g[0],g[2]];for(const v of c(this,Yc)){const[S,w,_,E]=v;!E&&r?w<f?(f=w,d=S):w===f&&(d=Math.max(d,S)):E&&!r&&(w<f?(f=w,d=S):w===f&&(d=Math.min(d,S))),v[0]=(S-u)/a,v[1]=(w-h)/l,v[2]=(_-h)/l}b(this,_w,new Float32Array([u,h,a,l])),b(this,Ew,[d,f]),b(this,Sw,y)}getOutlines(){c(this,Yc).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,Yc))t[3]?(e.push(...k(this,Bs,bk).call(this,t)),k(this,Bs,k5).call(this,t)):(k(this,Bs,P5).call(this,t),e.push(...k(this,Bs,bk).call(this,t)));return k(this,Bs,C5).call(this,e)}}_w=new WeakMap,Ew=new WeakMap,Sw=new WeakMap,Yc=new WeakMap,Yi=new WeakMap,Bs=new WeakSet,C5=function(e){const t=[],s=new Set;for(const o of e){const[a,l,u]=o;t.push([a,l,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],u=t[o+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,u,h,d]=o;s.delete(o);let f=a,g=l;for(i=[a,u],r.push(i);;){let y;if(s.has(h))y=h;else if(s.has(d))y=d;else break;s.delete(y),[a,l,u,h,d]=y,f!==a&&(i.push(f,g,a,g===l?l:u),f=a),g=g===l?u:l}i.push(f,g)}return new yne(r,c(this,_w),c(this,Ew),c(this,Sw))},o_=function(e){const t=c(this,Yi);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},k5=function([,e,t]){const s=k(this,Bs,o_).call(this,e);c(this,Yi).splice(s,0,[e,t])},P5=function([,e,t]){const s=k(this,Bs,o_).call(this,e);for(let r=s;r<c(this,Yi).length;r++){const[i,o]=c(this,Yi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Yi).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=c(this,Yi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Yi).splice(r,1);return}}},bk=function(e){const[t,s,r]=e,i=[[t,s,r]],o=k(this,Bs,o_).call(this,r);for(let a=0;a<o;a++){const[l,u]=c(this,Yi)[a];for(let h=0,d=i.length;h<d;h++){const[,f,g]=i[h];if(!(u<=f||g<=l)){if(f>=l){if(g>u)i[h][1]=u;else{if(d===1)return[];i.splice(h,1),h--,d--}continue}i[h][2]=l,g>u&&i.push([t,u,g])}}}return i};var Aw,Dm;class yne extends le{constructor(t,s,r,i){super();A(this,Aw);A(this,Dm);b(this,Dm,t),b(this,Aw,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of c(this,Dm)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],l=r-t,u=i-s;for(const h of c(this,Dm)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*l,d[f+1]=i-h[f+1]*u;a.push(d)}return a}get box(){return c(this,Aw)}get classNamesForOutlining(){return["highlightOutline"]}}Aw=new WeakMap,Dm=new WeakMap;class xk extends N1{newFreeDrawOutline(e,t,s,r,i,o){return new vne(e,t,s,r,i,o)}}class vne extends A5{newOutliner(e,t,s,r,i,o=0){return new xk(e,t,s,r,i,o)}}var Mm,Tw,al,yd,Cw,er,kw,Pw,vd,Nr,Lr,Jn,Om,jm,vs,Fm,mi,Iw,De,_k,a_,I5,R5,N5,Ek,ih,xi,Rf,L5,l_,c_,D5,M5,O5,j5,F5;const Je=class Je extends St{constructor(t){super({...t,name:"highlightEditor"});A(this,De);A(this,Mm,null);A(this,Tw,0);A(this,al);A(this,yd,null);A(this,Cw,null);A(this,er,null);A(this,kw,null);A(this,Pw,0);A(this,vd,null);A(this,Nr,null);A(this,Lr,null);A(this,Jn,!1);A(this,Om,null);A(this,jm,null);A(this,vs,null);A(this,Fm,"");A(this,mi);A(this,Iw,"");this.color=t.color||Je._defaultColor,b(this,mi,t.thickness||Je._defaultThickness),this.opacity=t.opacity||Je._defaultOpacity,b(this,al,t.boxes||null),b(this,Iw,t.methodOfCreation||""),b(this,Fm,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(b(this,Jn,!0),k(this,De,a_).call(this,t),k(this,De,ih).call(this)):c(this,al)&&(b(this,Mm,t.anchorNode),b(this,Tw,t.anchorOffset),b(this,kw,t.focusNode),b(this,Pw,t.focusOffset),k(this,De,_k).call(this),k(this,De,ih).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Je.prototype;return Le(this,"_keyboardManager",new ab([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Jn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,mi),methodOfCreation:c(this,Iw)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;St.initialize(t,s),Je._defaultColor||(Je._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ze.HIGHLIGHT_COLOR:Je._defaultColor=s;break;case ze.HIGHLIGHT_THICKNESS:Je._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,jm)}get commentButtonPosition(){return c(this,Om)}updateParams(t,s){switch(t){case ze.HIGHLIGHT_COLOR:k(this,De,I5).call(this,s);break;case ze.HIGHLIGHT_THICKNESS:k(this,De,R5).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,Je._defaultColor],[ze.HIGHLIGHT_THICKNESS,Je._defaultThickness]]}get propertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,this.color||Je._defaultColor],[ze.HIGHLIGHT_THICKNESS,c(this,mi)||Je._defaultThickness],[ze.HIGHLIGHT_FREE,c(this,Jn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Lr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=c(this,Cw))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,Cw,new q0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,De,c_).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,k(this,De,c_).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,De,Ek).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,De,ih).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?k(this,De,Ek).call(this):t&&(k(this,De,ih).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;c(this,Jn)?(t=(t-this.rotation+360)%360,r=k(i=Je,xi,Rf).call(i,c(this,Nr).box,t)):r=k(o=Je,xi,Rf).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(c(this,Lr),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(c(this,vs),{bbox:k(a=Je,xi,Rf).call(a,c(this,er).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Fm)&&(t.setAttribute("aria-label",c(this,Fm)),t.setAttribute("role","mark")),c(this,Jn)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,De,L5).bind(this),{signal:this._uiManager._signal});const s=b(this,vd,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,yd),this.setDims(this.width,this.height),i6(this,c(this,vd),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,vs),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,vs),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,De,l_).call(this,!0);break;case 1:case 3:k(this,De,l_).call(this,!1);break}}select(){var t;super.select(),c(this,vs)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,vs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,vs)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,vs),{rootClass:{selected:!1}}),c(this,Jn)||k(this,De,l_).call(this,!1))}get _mustFixPosition(){return!c(this,Jn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Lr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,vs),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:l,width:u,height:h}=r.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),g=y=>{d.abort(),k(this,xi,j5).call(this,t,y)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",Wt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Yr,{signal:f}),r.addEventListener("pointermove",k(this,xi,O5).bind(this,t),{signal:f}),this._freeHighlight=new xk({x:i,y:o},[a,l,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var v,S,w,_;let i=null;if(t instanceof d5){const{data:{quadPoints:E,rect:I,rotation:D,id:M,color:T,opacity:C,popupRef:N,richText:L,contentsObj:R,creationDate:O,modificationDate:j},parent:{page:{pageNumber:V}}}=t;i=t={annotationType:Ae.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:E,boxes:null,pageIndex:V-1,rect:I.slice(0),rotation:D,annotationElementId:M,id:M,deleted:!1,popupRef:N,richText:L,comment:(R==null?void 0:R.str)||null,creationDate:O,modificationDate:j}}else if(t instanceof fR){const{data:{inkLists:E,rect:I,rotation:D,id:M,color:T,borderStyle:{rawWidth:C},popupRef:N,richText:L,contentsObj:R,creationDate:O,modificationDate:j},parent:{page:{pageNumber:V}}}=t;i=t={annotationType:Ae.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:E,boxes:null,pageIndex:V-1,rect:I.slice(0),rotation:D,annotationElementId:M,id:M,deleted:!1,popupRef:N,richText:L,comment:(R==null?void 0:R.str)||null,creationDate:O,modificationDate:j}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=t,h=await super.deserialize(t,s,r);h.color=ce.makeHexColor(...o),h.opacity=u||1,l&&b(h,mi,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[d,f]=h.pageDimensions,[g,y]=h.pageTranslation;if(a){const E=b(h,al,[]);for(let I=0;I<a.length;I+=8)E.push({x:(a[I]-g)/d,y:1-(a[I+1]-y)/f,width:(a[I+2]-a[I])/d,height:(a[I+1]-a[I+5])/f});k(v=h,De,_k).call(v),k(S=h,De,ih).call(S),h.rotate(h.rotation)}else if(l){b(h,Jn,!0);const E=l[0],I={x:E[0]-g,y:f-(E[1]-y)},D=new xk(I,[0,0,d,f],1,c(h,mi)/2,!0,.001);for(let C=0,N=E.length;C<N;C+=2)I.x=E[C]-g,I.y=f-(E[C+1]-y),D.add(I);const{id:M,clipPathId:T}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);k(w=h,De,a_).call(w,{highlightOutlines:D.getOutlines(),highlightId:M,clipPathId:T}),k(_=h,De,ih).call(_),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=St._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:c(this,mi),quadPoints:k(this,De,D5).call(this),outlines:k(this,De,M5).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!k(this,De,F5).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Mm=new WeakMap,Tw=new WeakMap,al=new WeakMap,yd=new WeakMap,Cw=new WeakMap,er=new WeakMap,kw=new WeakMap,Pw=new WeakMap,vd=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,Jn=new WeakMap,Om=new WeakMap,jm=new WeakMap,vs=new WeakMap,Fm=new WeakMap,mi=new WeakMap,Iw=new WeakMap,De=new WeakSet,_k=function(){const t=new wk(c(this,al),.001);b(this,Nr,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Nr).box;const s=new wk(c(this,al),.0025,.001,this._uiManager.direction==="ltr");b(this,er,s.getOutlines());const{firstPoint:r}=c(this,Nr);b(this,Om,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,er);b(this,jm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},a_=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,g;if(b(this,Nr,t),b(this,er,t.getNewOutline(c(this,mi)/2+1.5,.0025)),s>=0)b(this,Lr,s),b(this,yd,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,vs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,er).box,path:{d:c(this,er).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Lr),{bbox:k(f=Je,xi,Rf).call(f,c(this,Nr).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,vs),{bbox:k(g=Je,xi,Rf).call(g,c(this,er).box,y),path:{d:c(this,er).toSVGPath()}})}const[o,a,l,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[y,v]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*v/y,this.height=u*y/v;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[y,v]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*v/y,this.height=u*y/v;break}}const{firstPoint:h}=t;b(this,Om,[(h[0]-o)/l,(h[1]-a)/u]);const{lastPoint:d}=c(this,er);b(this,jm,[(d[0]-o)/l,(d[1]-a)/u])},I5=function(t){const s=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Je._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},R5=function(t){const s=c(this,mi),r=i=>{b(this,mi,i),k(this,De,N5).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},N5=function(t){c(this,Jn)&&(k(this,De,a_).call(this,{highlightOutlines:c(this,Nr).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},Ek=function(){c(this,Lr)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Lr)),b(this,Lr,null),this.parent.drawLayer.remove(c(this,vs)),b(this,vs,null))},ih=function(t=this.parent){c(this,Lr)===null&&({id:Jt(this,Lr)._,clipPathId:Jt(this,yd)._}=t.drawLayer.draw({bbox:c(this,Nr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,Jn)},path:{d:c(this,Nr).toSVGPath()}},!1,!0),b(this,vs,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Jn)},bbox:c(this,er).box,path:{d:c(this,er).toSVGPath()}},c(this,Jn))),c(this,vd)&&(c(this,vd).style.clipPath=c(this,yd)))},xi=new WeakSet,Rf=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},L5=function(t){Je._keyboardManager.exec(this,t)},l_=function(t){if(!c(this,Mm))return;const s=window.getSelection();t?s.setPosition(c(this,Mm),c(this,Tw)):s.setPosition(c(this,kw),c(this,Pw))},c_=function(){return c(this,Jn)?this.rotation:0},D5=function(){if(c(this,Jn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,al),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of o){const g=u*t+r,y=(1-h)*s+i;a[l]=a[l+4]=g,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=g+d*t,a[l+5]=a[l+7]=y-f*s,l+=8}return a},M5=function(t){return c(this,Nr).serialize(t,k(this,De,c_).call(this))},O5=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},j5=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},F5=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},A(Je,xi),X(Je,"_defaultColor",null),X(Je,"_defaultOpacity",1),X(Je,"_defaultThickness",12),X(Je,"_type","highlight"),X(Je,"_editorType",Ae.HIGHLIGHT),X(Je,"_freeHighlightId",-1),X(Je,"_freeHighlight",null),X(Je,"_freeHighlightClipId","");let L1=Je;var wd;class V5{constructor(){A(this,wd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){c(this,wd)[e]=t}toSVGProperties(){const e=c(this,wd);return b(this,wd,Object.create(null)),{root:e}}reset(){b(this,wd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){vt("Not implemented")}}wd=new WeakMap;var Dr,Vm,Vn,bd,xd,Xc,Qc,Jc,_d,Xe,Sk,Ak,Tk,zy,B5,u_,$y,Nf;const de=class de extends St{constructor(t){super(t);A(this,Xe);A(this,Dr,null);A(this,Vm);X(this,"_colorPicker",null);X(this,"_drawId",null);b(this,Vm,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(k(this,Xe,Sk).call(this,t),k(this,Xe,zy).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){vt("Not implemented")}static get typesMap(){vt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(c(de,Vn).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=l=>{var h;i.updateProperty(s,l);const u=c(this,Dr).updateProperty(s,l);u&&k(this,Xe,$y).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(c(this,Dr).getPathResizingSVGProperties(k(this,Xe,u_).call(this)),{bbox:k(this,Xe,Nf).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(c(this,Dr).getPathResizedSVGProperties(k(this,Xe,u_).call(this)),{bbox:k(this,Xe,Nf).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,Xe,Nf).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(c(this,Dr).getPathTranslatedSVGProperties(k(this,Xe,u_).call(this),this.parentDimensions),{bbox:k(this,Xe,Nf).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Vm)&&(b(this,Vm,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,Xe,Tk).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Xe,zy).call(this),k(this,Xe,$y).call(this,c(this,Dr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,Xe,Tk).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,Xe,zy).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties({bbox:k(this,Xe,Nf).call(this)},c(this,Dr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,Xe,$y).call(this,c(this,Dr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){vt("Not implemented")}static startDrawing(t,s,r,i){var S;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:h}=i;if(c(de,Qc)&&c(de,Qc)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:g}=o.getBoundingClientRect(),y=b(de,bd,new AbortController),v=t.combinedSignal(y);if(c(de,Xc)||b(de,Xc,u),c(de,Qc)??b(de,Qc,h),window.addEventListener("pointerup",w=>{var _;c(de,Xc)===w.pointerId?this._endDraw(w):(_=c(de,Jc))==null||_.delete(w.pointerId)},{signal:v}),window.addEventListener("pointercancel",w=>{var _;c(de,Xc)===w.pointerId?this._currentParent.endDrawingSession():(_=c(de,Jc))==null||_.delete(w.pointerId)},{signal:v}),window.addEventListener("pointerdown",w=>{c(de,Qc)===w.pointerType&&((c(de,Jc)||b(de,Jc,new Set)).add(w.pointerId),c(de,Vn).isCancellable()&&(c(de,Vn).removeLastElement(),c(de,Vn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Yr,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",w=>{w.timeStamp===c(de,_d)&&Wt(w)},{signal:v}),t.toggleDrawing(),(S=s._editorUndoBar)==null||S.hide(),c(de,Vn)){t.drawLayer.updateProperties(this._currentDrawId,c(de,Vn).startNew(a,l,f,g,d));return}s.updateUIForDefaultProperties(this),b(de,Vn,this.createDrawerInstance(a,l,f,g,d)),b(de,xd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(de,xd).toSVGProperties(),c(de,Vn).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(b(de,_d,-1),!c(de,Vn))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(c(de,Xc)===i){if(((o=c(de,Jc))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(de,Vn).add(s,r)),b(de,_d,t.timeStamp),Wt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(de,Vn,null),b(de,xd,null),b(de,Qc,null),b(de,_d,NaN)),c(de,bd)&&(c(de,bd).abort(),b(de,bd,null),b(de,Xc,NaN),b(de,Jc,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(de,Vn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(de,Vn),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:ze.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ze.DRAW_STEP),!c(de,Vn).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(de,Vn).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:c(de,xd),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){vt("Not implemented")}static async deserialize(t,s,r){var d,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=s.viewport,u=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,r);return h.createDrawingOptions(t),k(d=h,Xe,Sk).call(d,{drawOutlines:u}),k(f=h,Xe,zy).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return c(this,Dr).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Dr=new WeakMap,Vm=new WeakMap,Vn=new WeakMap,bd=new WeakMap,xd=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,_d=new WeakMap,Xe=new WeakSet,Sk=function({drawOutlines:t,drawId:s,drawingOptions:r}){b(this,Dr,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=k(this,Xe,Ak).call(this,t,this.parent),k(this,Xe,$y).call(this,t.box)},Ak=function(t,s){const{id:r}=s.drawLayer.draw(de._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Tk=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},zy=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,Xe,Ak).call(this,c(this,Dr),t)}},B5=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},u_=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},$y=function(t){[this.x,this.y,this.width,this.height]=k(this,Xe,B5).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Nf=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(l/u),i*(u/l),r*(l/u)];case 5:return[1-s,t,r*(l/u),i*(u/l)];case 6:return[1-t-i*(u/l),1-s,i*(u/l),r*(l/u)];case 7:return[s-r*(l/u),1-t-i*(u/l),r*(l/u),i*(u/l)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/l),s,i*(u/l),r*(l/u)];case 13:return[1-s-r*(l/u),t-i*(u/l),r*(l/u),i*(u/l)];case 14:return[1-t,1-s-r*(l/u),i*(u/l),r*(l/u)];case 15:return[s,1-t,r*(l/u),i*(u/l)];default:return[t,s,r,i]}},X(de,"_currentDrawId",-1),X(de,"_currentParent",null),A(de,Vn,null),A(de,bd,null),A(de,xd,null),A(de,Xc,NaN),A(de,Qc,null),A(de,Jc,null),A(de,_d,NaN),X(de,"_INNER_MARGIN",3);let D1=de;var Yo,Bn,Un,Ed,Bm,Ns,Zn,gi,Sd,Ad,Td,Um,h_;class wne{constructor(e,t,s,r,i,o){A(this,Um);A(this,Yo,new Float64Array(6));A(this,Bn);A(this,Un);A(this,Ed);A(this,Bm);A(this,Ns);A(this,Zn,"");A(this,gi,0);A(this,Sd,new cb);A(this,Ad);A(this,Td);b(this,Ad,s),b(this,Td,r),b(this,Ed,i),b(this,Bm,o),[e,t]=k(this,Um,h_).call(this,e,t);const a=b(this,Bn,[NaN,NaN,NaN,NaN,e,t]);b(this,Ns,[e,t]),b(this,Un,[{line:a,points:c(this,Ns)}]),c(this,Yo).set(a,0)}updateProperty(e,t){e==="stroke-width"&&b(this,Bm,t)}isEmpty(){return!c(this,Un)||c(this,Un).length===0}isCancellable(){return c(this,Ns).length<=10}add(e,t){[e,t]=k(this,Um,h_).call(this,e,t);const[s,r,i,o]=c(this,Yo).subarray(2,6),a=e-i,l=t-o;return Math.hypot(c(this,Ad)*a,c(this,Td)*l)<=2?null:(c(this,Ns).push(e,t),isNaN(s)?(c(this,Yo).set([i,o,e,t],2),c(this,Bn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Yo)[0])&&c(this,Bn).splice(6,6),c(this,Yo).set([s,r,i,o,e,t],0),c(this,Bn).push(...le.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(c(this,Ns).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){b(this,Ad,s),b(this,Td,r),b(this,Ed,i),[e,t]=k(this,Um,h_).call(this,e,t);const o=b(this,Bn,[NaN,NaN,NaN,NaN,e,t]);b(this,Ns,[e,t]);const a=c(this,Un).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,Un).push({line:o,points:c(this,Ns)}),c(this,Yo).set(o,0),b(this,gi,0),this.toSVGPath(),null}getLastElement(){return c(this,Un).at(-1)}setLastElement(e){return c(this,Un)?(c(this,Un).push(e),b(this,Bn,e.line),b(this,Ns,e.points),b(this,gi,0),{path:{d:this.toSVGPath()}}):c(this,Sd).setLastElement(e)}removeLastElement(){if(!c(this,Un))return c(this,Sd).removeLastElement();c(this,Un).pop(),b(this,Zn,"");for(let e=0,t=c(this,Un).length;e<t;e++){const{line:s,points:r}=c(this,Un)[e];b(this,Bn,s),b(this,Ns,r),b(this,gi,0),this.toSVGPath()}return{path:{d:c(this,Zn)}}}toSVGPath(){const e=le.svgRound(c(this,Bn)[4]),t=le.svgRound(c(this,Bn)[5]);if(c(this,Ns).length===2)return b(this,Zn,`${c(this,Zn)} M ${e} ${t} Z`),c(this,Zn);if(c(this,Ns).length<=6){const r=c(this,Zn).lastIndexOf("M");b(this,Zn,`${c(this,Zn).slice(0,r)} M ${e} ${t}`),b(this,gi,6)}if(c(this,Ns).length===4){const r=le.svgRound(c(this,Bn)[10]),i=le.svgRound(c(this,Bn)[11]);return b(this,Zn,`${c(this,Zn)} L ${r} ${i}`),b(this,gi,12),c(this,Zn)}const s=[];c(this,gi)===0&&(s.push(`M ${e} ${t}`),b(this,gi,6));for(let r=c(this,gi),i=c(this,Bn).length;r<i;r+=6){const[o,a,l,u,h,d]=c(this,Bn).slice(r,r+6).map(le.svgRound);s.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}return b(this,Zn,c(this,Zn)+s.join(" ")),b(this,gi,c(this,Bn).length),c(this,Zn)}getOutlines(e,t,s,r){const i=c(this,Un).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Sd).build(c(this,Un),e,t,s,c(this,Ed),c(this,Bm),r),b(this,Yo,null),b(this,Bn,null),b(this,Un,null),b(this,Zn,null),c(this,Sd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Yo=new WeakMap,Bn=new WeakMap,Un=new WeakMap,Ed=new WeakMap,Bm=new WeakMap,Ns=new WeakMap,Zn=new WeakMap,gi=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,Td=new WeakMap,Um=new WeakSet,h_=function(e,t){return le._normalizePoint(e,t,c(this,Ad),c(this,Td),c(this,Ed))};var Ls,Rw,Nw,Mr,Xo,Qo,zm,$m,Cd,ss,Ta,U5,z5,$5;class cb extends le{constructor(){super(...arguments);A(this,ss);A(this,Ls);A(this,Rw,0);A(this,Nw);A(this,Mr);A(this,Xo);A(this,Qo);A(this,zm);A(this,$m);A(this,Cd)}build(t,s,r,i,o,a,l){b(this,Xo,s),b(this,Qo,r),b(this,zm,i),b(this,$m,o),b(this,Cd,a),b(this,Nw,l??0),b(this,Mr,t),k(this,ss,z5).call(this)}get thickness(){return c(this,Cd)}setLastElement(t){return c(this,Mr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Mr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of c(this,Mr)){if(t.push(`M${le.svgRound(s[4])} ${le.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${le.svgRound(s[10])} ${le.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,l,u,h,d]=s.subarray(r,r+6).map(le.svgRound);t.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],l=[],[u,h,d,f]=k(this,ss,U5).call(this);let g,y,v,S,w,_,E,I,D;switch(c(this,$m)){case 0:D=le._rescale,g=t,y=s+i,v=r,S=-i,w=t+u*r,_=s+(1-h-f)*i,E=t+(u+d)*r,I=s+(1-h)*i;break;case 90:D=le._rescaleAndSwap,g=t,y=s,v=r,S=i,w=t+h*r,_=s+u*i,E=t+(h+f)*r,I=s+(u+d)*i;break;case 180:D=le._rescale,g=t+r,y=s,v=-r,S=i,w=t+(1-u-d)*r,_=s+h*i,E=t+(1-u)*r,I=s+(h+f)*i;break;case 270:D=le._rescaleAndSwap,g=t+r,y=s+i,v=-r,S=-i,w=t+(1-h-f)*r,_=s+(1-u-d)*i,E=t+(1-h)*r,I=s+(1-u)*i;break}for(const{line:M,points:T}of c(this,Mr))a.push(D(M,g,y,v,S,o?new Array(M.length):null)),l.push(D(T,g,y,v,S,o?new Array(T.length):null));return{lines:a,points:l,rect:[w,_,E,I]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:l},rotation:u,thickness:h}){const d=[];let f,g,y,v,S;switch(u){case 0:S=le._rescale,f=-t/r,g=s/i+1,y=1/r,v=-1/i;break;case 90:S=le._rescaleAndSwap,f=-s/i,g=-t/r,y=1/i,v=1/r;break;case 180:S=le._rescale,f=t/r+1,g=-s/i,y=-1/r,v=1/i;break;case 270:S=le._rescaleAndSwap,f=s/i+1,g=t/r+1,y=-1/i,v=-1/r;break}if(!a){a=[];for(const _ of l){const E=_.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const I=new Float32Array(3*(E-2));a.push(I);let[D,M,T,C]=_.subarray(0,4);I.set([NaN,NaN,NaN,NaN,D,M],0);for(let N=4;N<E;N+=2){const L=_[N],R=_[N+1];I.set(le.createBezierPoints(D,M,T,C,L,R),(N-2)*3),[D,M,T,C]=[T,C,L,R]}}}for(let _=0,E=a.length;_<E;_++)d.push({line:S(a[_].map(I=>I??NaN),f,g,y,v),points:S(l[_].map(I=>I??NaN),f,g,y,v)});const w=new this.prototype.constructor;return w.build(d,r,i,1,u,h,o),w}get box(){return c(this,Ls)}updateProperty(t,s){return t==="stroke-width"?k(this,ss,$5).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=k(this,ss,Ta).call(this);b(this,Xo,t),b(this,Qo,s),b(this,zm,r);const[a,l]=k(this,ss,Ta).call(this),u=a-i,h=l-o,d=c(this,Ls);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return b(this,Rw,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Ls).map(le.svgRound).join(" ")}get defaultProperties(){const[t,s]=c(this,Ls);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=c(this,Ls);let r=0,i=0,o=0,a=0,l=0,u=0;switch(c(this,Rw)){case 90:i=s/t,o=-t/s,l=t;break;case 180:r=-1,a=-1,l=t,u=s;break;case 270:i=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${le.svgRound(l)} ${le.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=k(this,ss,Ta).call(this),[l,u,h,d]=c(this,Ls);if(Math.abs(h-o)<=le.PRECISION||Math.abs(d-a)<=le.PRECISION){const S=t+r/2-(l+h/2),w=s+i/2-(u+d/2);return{path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(s)}`,transform:`${this.rotationTransform} translate(${S} ${w})`}}}const f=(r-2*o)/(h-2*o),g=(i-2*a)/(d-2*a),y=h/r,v=d/i;return{path:{"transform-origin":`${le.svgRound(l)} ${le.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${v}) translate(${le.svgRound(o)} ${le.svgRound(a)}) scale(${f} ${g}) translate(${le.svgRound(-o)} ${le.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=k(this,ss,Ta).call(this),l=c(this,Ls),[u,h,d,f]=l;if(l[0]=t,l[1]=s,l[2]=r,l[3]=i,Math.abs(d-o)<=le.PRECISION||Math.abs(f-a)<=le.PRECISION){const w=t+r/2-(u+d/2),_=s+i/2-(h+f/2);for(const{line:E,points:I}of c(this,Mr))le._translate(E,w,_,E),le._translate(I,w,_,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*o)/(d-2*o),y=(i-2*a)/(f-2*a),v=-g*(u+o)+t+o,S=-y*(h+a)+s+a;if(g!==1||y!==1||v!==0||S!==0)for(const{line:w,points:_}of c(this,Mr))le._rescale(w,v,S,g,y,w),le._rescale(_,v,S,g,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=c(this,Ls),l=t-a[0],u=s-a[1];if(c(this,Xo)===i&&c(this,Qo)===o)for(const{line:h,points:d}of c(this,Mr))le._translate(h,l,u,h),le._translate(d,l,u,d);else{const h=c(this,Xo)/i,d=c(this,Qo)/o;b(this,Xo,i),b(this,Qo,o);for(const{line:f,points:g}of c(this,Mr))le._rescale(f,l,u,h,d,f),le._rescale(g,l,u,h,d,g);a[2]*=h,a[3]*=d}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(t)} ${le.svgRound(s)}`}}}get defaultSVGProperties(){const t=c(this,Ls);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(t[0])} ${le.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Ls=new WeakMap,Rw=new WeakMap,Nw=new WeakMap,Mr=new WeakMap,Xo=new WeakMap,Qo=new WeakMap,zm=new WeakMap,$m=new WeakMap,Cd=new WeakMap,ss=new WeakSet,Ta=function(t=c(this,Cd)){const s=c(this,Nw)+t/2*c(this,zm);return c(this,$m)%180===0?[s/c(this,Xo),s/c(this,Qo)]:[s/c(this,Qo),s/c(this,Xo)]},U5=function(){const[t,s,r,i]=c(this,Ls),[o,a]=k(this,ss,Ta).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},z5=function(){const t=b(this,Ls,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,Mr)){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6)ce.pointBoundingBox(i[l],i[l+1],t);continue}let o=i[4],a=i[5];for(let l=6,u=i.length;l<u;l+=6){const[h,d,f,g,y,v]=i.subarray(l,l+6);ce.bezierBoundingBox(o,a,h,d,f,g,y,v,t),o=y,a=v}}const[s,r]=k(this,ss,Ta).call(this);t[0]=ws(t[0]-s,0,1),t[1]=ws(t[1]-r,0,1),t[2]=ws(t[2]+s,0,1),t[3]=ws(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},$5=function(t){const[s,r]=k(this,ss,Ta).call(this);b(this,Cd,t);const[i,o]=k(this,ss,Ta).call(this),[a,l]=[i-s,o-r],u=c(this,Ls);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};class nS extends V5{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:St._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new nS(this._viewParameters);return e.updateAll(this),e}}var eE,H5;const Zf=class Zf extends D1{constructor(t){super({...t,name:"inkEditor"});A(this,eE);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){St.initialize(t,s),this._defaultDrawingOptions=new nS(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[ze.INK_THICKNESS,"stroke-width"],[ze.INK_COLOR,"stroke"],[ze.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new wne(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return cb.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof fR){const{data:{inkLists:a,rect:l,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:y,richText:v,contentsObj:S,creationDate:w,modificationDate:_},parent:{page:{pageNumber:E}}}=t;i=t={annotationType:Ae.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:a},boxes:null,pageIndex:E-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:v,comment:(S==null?void 0:S.str)||null,creationDate:w,modificationDate:_}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new R1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ze.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=Zf.getDefaultDrawingOptions({stroke:ce.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{color:St._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:s,points:r}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!k(this,eE,H5).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};eE=new WeakSet,H5=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},X(Zf,"_type","ink"),X(Zf,"_editorType",Ae.INK),X(Zf,"_defaultDrawingOptions",null);let Ck=Zf;class kk extends cb{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ux=8,ly=3;var kd,nt,Pk,Xi,W5,G5,Ik,d_,q5,K5,Y5,Rk,Nk,X5;class na{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${s} ${r} ${d}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:y,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:w,fontBoundingBoxDescent:_,width:E}=h.measureText(e),I=1.5,D=Math.ceil(Math.max(Math.abs(g)+Math.abs(y)||0,E)*I),M=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||d,Math.abs(w)+Math.abs(_)||d)*I);u=new OffscreenCanvas(D,M),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,D,M),h.fillStyle="black",h.fillText(e,D*(I-1)/2,M*(3-I)/2);const T=k(this,nt,Rk).call(this,h.getImageData(0,0,D,M).data),C=k(this,nt,Y5).call(this,T),N=k(this,nt,Nk).call(this,C),L=k(this,nt,Ik).call(this,T,D,M,N);return this.processDrawnLines({lines:{curves:L,width:D,height:M},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,l]=k(this,nt,X5).call(this,e),[u,h]=k(this,nt,K5).call(this,o,a,l,Math.hypot(a,l)*c(this,kd).sigmaSFactor,c(this,kd).sigmaR,c(this,kd).kernelSize),d=k(this,nt,Nk).call(this,h),f=k(this,nt,Ik).call(this,u,a,l,d);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:l,width:u,height:h}=e,d=e.thickness??0,f=[],g=Math.min(t/u,s/h),y=g/t,v=g/s,S=[];for(const{points:_}of l){const E=o?k(this,nt,q5).call(this,_):_;if(!E)continue;S.push(E);const I=E.length,D=new Float32Array(I),M=new Float32Array(3*(I===2?2:I-2));if(f.push({line:M,points:D}),I===2){D[0]=E[0]*y,D[1]=E[1]*v,M.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[T,C,N,L]=E;T*=y,C*=v,N*=y,L*=v,D.set([T,C,N,L],0),M.set([NaN,NaN,NaN,NaN,T,C],0);for(let R=4;R<I;R+=2){const O=D[R]=E[R]*y,j=D[R+1]=E[R+1]*v;M.set(le.createBezierPoints(T,C,N,L,O,j),(R-2)*3),[T,C,N,L]=[N,L,O,j]}}if(f.length===0)return null;const w=a?new kk:new cb;return w.build(f,t,s,1,r,a?0:d,i),{outline:w,newCurves:S,areContours:a,thickness:d,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,l=0;for(const E of e){l+=E.length;for(let I=2,D=E.length;I<D;I++){const M=E[I]-E[I-2];o=Math.min(o,M),a=Math.max(a,M)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const h=e.length,d=ux+ly*h,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=r,f[g++]=i,f[g++]=t?0:1,f[g++]=Math.max(0,Math.floor(s??0)),f[g++]=h,f[g++]=u.BYTES_PER_ELEMENT;for(const E of e)f[g++]=E.length-2,f[g++]=E[0],f[g++]=E[1];const y=new CompressionStream("deflate-raw"),v=y.writable.getWriter();await v.ready,v.write(f);const S=u.prototype.constructor;for(const E of e){const I=new S(E.length-2);for(let D=2,M=E.length;D<M;D++)I[D-2]=E[D]-E[D-2];v.write(I)}v.close();const w=await new Response(y.readable).arrayBuffer(),_=new Uint8Array(w);return qV(_)}static async decompressSignature(e){try{const t=Hee(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const E of s)o||(o=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),o.set(E,a),a+=E.length;const l=new Uint32Array(o.buffer,0,o.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],d=l[3],f=l[4]===0,g=l[5],y=l[6],v=l[7],S=[],w=(ux+ly*y)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,w);break}a=0;for(let E=0;E<y;E++){const I=l[ly*E+ux],D=new Float32Array(I+2);S.push(D);for(let M=0;M<ly-1;M++)D[M]=l[ly*E+ux+M+1];for(let M=0;M<I;M++)D[M+2]=D[M]+_[a++]}return{areContours:f,thickness:g,outlines:S,width:h,height:d}}catch(t){return Te(`decompressSignature: ${t}`),null}}}kd=new WeakMap,nt=new WeakSet,Pk=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},Xi=new WeakMap,W5=function(e,t,s,r,i,o,a){const l=k(this,nt,Pk).call(this,s,r,i,o);for(let u=0;u<8;u++){const h=(-u+l-a+16)%8,d=c(this,Xi)[2*h],f=c(this,Xi)[2*h+1];if(e[(s+d)*t+(r+f)]!==0)return h}return-1},G5=function(e,t,s,r,i,o,a){const l=k(this,nt,Pk).call(this,s,r,i,o);for(let u=0;u<8;u++){const h=(u+l+a+16)%8,d=c(this,Xi)[2*h],f=c(this,Xi)[2*h+1];if(e[(s+d)*t+(r+f)]!==0)return h}return-1},Ik=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let h=0;h<i;h++)o[h]=e[h]<=r?1:0;for(let h=1;h<s-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*s-1-h]=0;let a=1,l;const u=[];for(let h=1;h<s-1;h++){l=1;for(let d=1;d<t-1;d++){const f=h*t+d,g=o[f];if(g===0)continue;let y=h,v=d;if(g===1&&o[f-1]===0)a+=1,v-=1;else if(g>=1&&o[f+1]===0)a+=1,v+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const S=[d,h],w=v===d+1,_={isHole:w,points:S,id:a,parent:0};u.push(_);let E;for(const R of u)if(R.id===l){E=R;break}E?E.isHole?_.parent=w?E.parent:l:_.parent=w?l:E.parent:_.parent=w?l:0;const I=k(this,nt,W5).call(this,o,t,h,d,y,v,0);if(I===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let D=c(this,Xi)[2*I],M=c(this,Xi)[2*I+1];const T=h+D,C=d+M;y=T,v=C;let N=h,L=d;for(;;){const R=k(this,nt,G5).call(this,o,t,N,L,y,v,1);D=c(this,Xi)[2*R],M=c(this,Xi)[2*R+1];const O=N+D,j=L+M;S.push(j,O);const V=N*t+L;if(o[V+1]===0?o[V]=-a:o[V]===1&&(o[V]=a),O===h&&j===d&&N===T&&L===C){o[f]!==1&&(l=Math.abs(o[f]));break}else y=N,v=L,N=O,L=j}}}return u},d_=function(e,t,s,r){if(s-t<=4){for(let T=t;T<s-2;T+=2)r.push(e[T],e[T+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,l=e[s-3]-o,u=Math.hypot(a,l),h=a/u,d=l/u,f=h*o-d*i,g=l/a,y=1/u,v=Math.atan(g),S=Math.cos(v),w=Math.sin(v),_=y*(Math.abs(S)+Math.abs(w)),E=y*(1-_+_**2),I=Math.max(Math.atan(Math.abs(w+S)*E),Math.atan(Math.abs(w-S)*E));let D=0,M=t;for(let T=t+2;T<s-2;T+=2){const C=Math.abs(f-h*e[T+1]+d*e[T]);C>D&&(M=T,D=C)}D>(u*I)**2?(k(this,nt,d_).call(this,e,t,M+2,r),k(this,nt,d_).call(this,e,M,s,r)):r.push(i,o)},q5=function(e){const t=[],s=e.length;return k(this,nt,d_).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},K5=function(e,t,s,r,i,o){const a=new Float32Array(o**2),l=-2*r**2,u=o>>1;for(let v=0;v<o;v++){const S=(v-u)**2;for(let w=0;w<o;w++)a[v*o+w]=Math.exp((S+(w-u)**2)/l)}const h=new Float32Array(256),d=-2*i**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/d);const f=e.length,g=new Uint8Array(f),y=new Uint32Array(256);for(let v=0;v<s;v++)for(let S=0;S<t;S++){const w=v*t+S,_=e[w];let E=0,I=0;for(let M=0;M<o;M++){const T=v+M-u;if(!(T<0||T>=s))for(let C=0;C<o;C++){const N=S+C-u;if(N<0||N>=t)continue;const L=e[T*t+N],R=a[M*o+C]*h[Math.abs(L-_)];E+=L*R,I+=R}}const D=g[w]=Math.round(E/I);y[D]++}return[g,y]},Y5=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Rk=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,l=s.length;a<l;a++){const u=s[a]=e[a<<2];r=Math.max(r,u),i=Math.min(i,u)}const o=255/(r-i);for(let a=0,l=s.length;a<l;a++)s[a]=(s[a]-i)*o;return s},Nk=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(t=i;t<256;t++){const l=e[t];l>s&&(t-o>r&&(r=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},X5=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=c(this,kd);let o=s,a=r;if(s>i||r>i){let f=s,g=r,y=Math.log2(Math.max(s,r)/i);const v=Math.floor(y);y=y===v?v-1:v;for(let w=0;w<y;w++){o=Math.ceil(f/2),a=Math.ceil(g/2);const _=new OffscreenCanvas(o,a);_.getContext("2d").drawImage(e,0,0,f,g,0,0,o,a),f=o,g=a,e!==t&&e.close(),e=_.transferToImageBitmap()}const S=Math.min(i/o,i/a);o=Math.round(o*S),a=Math.round(a*S)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const h=u.getImageData(0,0,o,a).data;return[k(this,nt,Rk).call(this,h),o,a]},A(na,nt),A(na,kd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(na,Xi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class mR extends V5{constructor(){super(),super.updateProperties({fill:St._defaultLineColor,"stroke-width":0})}clone(){const e=new mR;return e.updateAll(this),e}}class gR extends nS{constructor(e){super(e),super.updateProperties({stroke:St._defaultLineColor,"stroke-width":1})}clone(){const e=new gR(this._viewParameters);return e.updateAll(this),e}}var Zc,Jo,eu,Pd;const vr=class vr extends D1{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,Zc,!1);A(this,Jo,null);A(this,eu,null);A(this,Pd,null);this._willKeepAspectRatio=!0,b(this,eu,t.signatureData||null),b(this,Jo,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){St.initialize(t,s),this._defaultDrawingOptions=new mR,this._defaultDrawnSignatureOptions=new gR(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Jo)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,eu)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:u,heightInPage:h}=c(this,eu),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,y=na.processDrawnLines({lines:i,pageWidth:d,pageHeight:f,rotation:g,innerMargin:vr._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Jo)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){b(this,Pd,t),this.addEditToolbar()}getUuid(){return c(this,Pd)}get description(){return c(this,Jo)}set description(t){b(this,Jo,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=c(this,eu),a=Math.max(i,o),l=na.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:l}=b(this,eu,t);b(this,Zc,l instanceof kk),this.description=r;let u;c(this,Zc)?u=vr.getDefaultDrawingOptions():(u=vr._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,h]=this.pageDimensions;let d=s/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return na.process(t,s,r,i,vr._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return na.extractContoursFromText(t,s,r,i,o,vr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return na.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:vr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=vr.getDefaultDrawingOptions():(this._drawingOptions=vr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,Zc),color:[0,0,0],thickness:c(this,Zc)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=c(this,Pd),o.isCopy=!0):o.lines=s,c(this,Jo)&&(o.accessibilityData={type:"Figure",alt:c(this,Jo)}),o}static deserializeDraw(t,s,r,i,o,a){return a.areContours?kk.deserialize(t,s,r,i,o,a):cb.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return b(i,Zc,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",b(i,Pd,t.uuid),i}};Zc=new WeakMap,Jo=new WeakMap,eu=new WeakMap,Pd=new WeakMap,X(vr,"_type","signature"),X(vr,"_editorType",Ae.SIGNATURE),X(vr,"_defaultDrawingOptions",null);let Lk=vr;var Ft,zn,tu,ll,nu,Hm,cl,Id,Zo,Or,Wm,Qe,Hy,Wy,f_,p_,m_,Mk,g_,Q5;class Dk extends St{constructor(t){super({...t,name:"stampEditor"});A(this,Qe);A(this,Ft,null);A(this,zn,null);A(this,tu,null);A(this,ll,null);A(this,nu,null);A(this,Hm,"");A(this,cl,null);A(this,Id,!1);A(this,Zo,null);A(this,Or,!1);A(this,Wm,!1);b(this,ll,t.bitmapUrl),b(this,nu,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){St.initialize(t,s)}static isHandlingMimeForPasting(t){return T1.includes(t)}static paste(t,s){s.pasteEditor({mode:Ae.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,zn)&&(b(this,Ft,null),this._uiManager.imageManager.deleteId(c(this,zn)),(t=c(this,cl))==null||t.remove(),b(this,cl,null),c(this,Zo)&&(clearTimeout(c(this,Zo)),b(this,Zo,null))),super.remove()}rebuild(){if(!this.parent){c(this,zn)&&k(this,Qe,f_).call(this);return}super.rebuild(),this.div!==null&&(c(this,zn)&&c(this,cl)===null&&k(this,Qe,f_).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,tu)||c(this,Ft)||c(this,ll)||c(this,nu)||c(this,zn)||c(this,Id))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Id)||(c(this,Ft)?k(this,Qe,p_).call(this):k(this,Qe,f_).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(b(this,zn,r),i&&b(this,Ft,i),b(this,Id,!1),k(this,Qe,p_).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Zo)!==null&&clearTimeout(c(this,Zo)),b(this,Zo,setTimeout(()=>{b(this,Zo,null),k(this,Qe,Mk).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=c(this,Ft),a=new uo;let l=c(this,Ft),u=i,h=o,d=null;if(s){if(i>s||o>s){const T=Math.min(s/i,s/o);u=Math.floor(i*T),h=Math.floor(o*T)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*a.sx),y=d.height=Math.ceil(h*a.sy);c(this,Or)||(l=k(this,Qe,m_).call(this,g,y));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let S="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":qee.isDarkMode&&(S="#8f8f9d",w="#42414d");const _=15,E=_*a.sx,I=_*a.sy,D=new OffscreenCanvas(E*2,I*2),M=D.getContext("2d");M.fillStyle=S,M.fillRect(0,0,E*2,I*2),M.fillStyle=w,M.fillRect(0,0,E,I),M.fillRect(E,I,E,I),v.fillStyle=v.createPattern(D,"repeat"),v.fillRect(0,0,g,y),v.drawImage(l,0,0,l.width,l.height,0,0,g,y)}let f=null;if(r){let g,y;if(a.symmetric&&l.width<t&&l.height<t)g=l.width,y=l.height;else if(l=c(this,Ft),i>t||o>t){const w=Math.min(t/i,t/o);g=Math.floor(i*w),y=Math.floor(o*w),c(this,Or)||(l=k(this,Qe,m_).call(this,g,y))}const S=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});S.drawImage(l,0,0,l.width,l.height,0,0,g,y),f={width:g,height:y,data:S.getImageData(0,0,g,y).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(t,s,r){var S;let i=null,o=!1;if(t instanceof f5){const{data:{rect:w,rotation:_,id:E,structParent:I,popupRef:D,richText:M,contentsObj:T,creationDate:C,modificationDate:N},container:L,parent:{page:{pageNumber:R}},canvas:O}=t;let j,V;O?(delete t.canvas,{id:j,bitmap:V}=r.imageManager.getFromCanvas(L.id,O),O.remove()):(o=!0,t._hasNoCanvas=!0);const $=((S=await s._structTree.getAriaAttributes(`${sR}${E}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:Ae.STAMP,bitmapId:j,bitmap:V,pageIndex:R-1,rect:w.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:I,popupRef:D,richText:M,comment:(T==null?void 0:T.str)||null,creationDate:C,modificationDate:N}}const a=await super.deserialize(t,s,r),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:g}=t;o?(r.addMissingCanvas(t.id,a),b(a,Id,!0)):d&&r.imageManager.isValidId(d)?(b(a,zn,d),u&&b(a,Ft,u)):b(a,ll,h),b(a,Or,f);const[y,v]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/v,g&&(a.altTextData=g),a._initialData=i,t.comment&&a.setCommentData(t),b(a,Wm,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,zn),isSvg:c(this,Or)});if(this.addComment(r),t)return r.bitmapUrl=k(this,Qe,g_).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=k(this,Qe,Q5).call(this,r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const a=c(this,Or)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(c(this,zn)))s.stamps.set(c(this,zn),{area:a,serialized:r}),r.bitmap=k(this,Qe,g_).call(this,!1);else if(c(this,Or)){const l=s.stamps.get(c(this,zn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=k(this,Qe,g_).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ft=new WeakMap,zn=new WeakMap,tu=new WeakMap,ll=new WeakMap,nu=new WeakMap,Hm=new WeakMap,cl=new WeakMap,Id=new WeakMap,Zo=new WeakMap,Or=new WeakMap,Wm=new WeakMap,Qe=new WeakSet,Hy=function(t,s=!1){if(!t){this.remove();return}b(this,Ft,t.bitmap),s||(b(this,zn,t.id),b(this,Or,t.isSvg)),t.file&&b(this,Hm,t.file.name),k(this,Qe,p_).call(this)},Wy=function(){if(b(this,tu,null),this._uiManager.enableWaiting(!1),!!c(this,cl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ft)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ft)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},f_=function(){if(c(this,zn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,zn)).then(r=>k(this,Qe,Hy).call(this,r,!0)).finally(()=>k(this,Qe,Wy).call(this));return}if(c(this,ll)){const r=c(this,ll);b(this,ll,null),this._uiManager.enableWaiting(!0),b(this,tu,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,Qe,Hy).call(this,i)).finally(()=>k(this,Qe,Wy).call(this)));return}if(c(this,nu)){const r=c(this,nu);b(this,nu,null),this._uiManager.enableWaiting(!0),b(this,tu,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,Qe,Hy).call(this,i)).finally(()=>k(this,Qe,Wy).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=T1.join(",");const s=this._uiManager._signal;b(this,tu,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Qe,Hy).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>k(this,Qe,Wy).call(this))),t.click()},p_=function(){var u;const{div:t}=this;let{width:s,height:r}=c(this,Ft);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const h=Math.min(a*i/s,a*o/r);s*=h,r*=h}this._uiManager.enableWaiting(!1);const l=b(this,cl,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=s/i,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Qe,Mk).call(this),c(this,Wm)||(this.parent.addUndoableEditor(this),b(this,Wm,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Hm)&&this.div.setAttribute("aria-description",c(this,Hm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},m_=function(t,s){const{width:r,height:i}=c(this,Ft);let o=r,a=i,l=c(this,Ft);for(;o>2*t||a>2*s;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,h,0,0,o,a),l=d.transferToImageBitmap()}return l},Mk=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new uo,a=Math.ceil(r*t*o.sx),l=Math.ceil(i*s*o.sy),u=c(this,cl);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const h=c(this,Or)?c(this,Ft):k(this,Qe,m_).call(this,a,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,l)},g_=function(t){if(t){if(c(this,Or)){const i=this._uiManager.imageManager.getSvgUrl(c(this,zn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Ft),s.getContext("2d").drawImage(c(this,Ft),0,0),s.toDataURL()}if(c(this,Or)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*Ll.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Ll.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(c(this,Ft),0,0,c(this,Ft).width,c(this,Ft).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(c(this,Ft))},Q5=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},X(Dk,"_type","stamp"),X(Dk,"_editorType",Ae.STAMP);var Rd,Gm,su,ru,ul,tr,iu,qm,Km,Qi,hl,$n,dl,ou,Ym,fe,au,yt,Ok,J5,So,jk,Fk,y_;const Mi=class Mi{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:h}){A(this,yt);A(this,Rd);A(this,Gm,!1);A(this,su,null);A(this,ru,null);A(this,ul,null);A(this,tr,new Map);A(this,iu,!1);A(this,qm,!1);A(this,Km,!1);A(this,Qi,null);A(this,hl,null);A(this,$n,null);A(this,dl,null);A(this,ou,null);A(this,Ym,-1);A(this,fe);const d=[...c(Mi,au).values()];if(!Mi._initialized){Mi._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),b(this,fe,e),this.pageIndex=t,this.div=s,b(this,Rd,i),b(this,su,o),this.viewport=u,b(this,$n,l),this.drawLayer=a,this._structTree=r,c(this,fe).addLayer(this)}get isEmpty(){return c(this,tr).size===0}get isInvisible(){return this.isEmpty&&c(this,fe).getMode()===Ae.NONE}updateToolbar(e){c(this,fe).updateToolbar(e)}updateMode(e=c(this,fe).getMode()){switch(k(this,yt,y_).call(this),e){case Ae.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ae.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ae.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of c(Mi,au).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,$n))==null?void 0:t.div)}setEditingState(e){c(this,fe).setEditingState(e)}addCommands(e){c(this,fe).addCommands(e)}cleanUndoStack(e){c(this,fe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,su))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;b(this,Km,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=c(this,ou))==null||s.abort(),b(this,ou,null);const e=new Set;for(const r of c(this,yt,Ok))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,fe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,su);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,fe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}b(this,Km,!1),c(this,fe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(b(this,qm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,$n)&&!c(this,ou)){b(this,ou,new AbortController);const r=c(this,fe).combinedSignal(c(this,ou));c(this,$n).div.addEventListener("pointerdown",i=>{const{clientX:a,clientY:l,timeStamp:u}=i,h=c(this,Ym);if(u-h>500){b(this,Ym,u);return}b(this,Ym,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(a,l);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let g;const y=new RegExp(`^${U0}[0-9]+$`);for(const S of f)if(y.test(S.id)){g=S.id;break}if(!g)return;const v=c(this,tr).get(g);(v==null?void 0:v.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),v.dblclick(i))},{signal:r,capture:!0})}const e=c(this,su);if(e){const r=new Map,i=new Map;for(const a of c(this,yt,Ok)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){r.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:l}=a.data;if(c(this,fe).isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let u=i.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=r.get(l),u&&(c(this,fe).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}k(this,yt,y_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of c(Mi,au).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,qm,!1)}getEditableAnnotation(e){var t;return((t=c(this,su))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,fe).getActive()!==e&&c(this,fe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,$n))!=null&&e.div&&!c(this,dl)){b(this,dl,new AbortController);const t=c(this,fe).combinedSignal(c(this,dl));c(this,$n).div.addEventListener("pointerdown",k(this,yt,J5).bind(this),{signal:t}),c(this,$n).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,$n))!=null&&e.div&&c(this,dl)&&(c(this,dl).abort(),b(this,dl,null),c(this,$n).div.classList.remove("highlighting"))}enableClick(){if(c(this,ru))return;b(this,ru,new AbortController);const e=c(this,fe).combinedSignal(c(this,ru));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,ru))==null||e.abort(),b(this,ru,null)}attach(e){c(this,tr).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,fe).isDeletedAnnotationElement(t)&&c(this,fe).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,tr).delete(e.id),(t=c(this,Rd))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,qm)&&e.annotationElementId&&c(this,fe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,fe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,fe).addDeletedAnnotationElement(e.annotationElementId),St.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,fe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Km)),c(this,fe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,ul)&&(e._focusEventsAllowed=!1,b(this,ul,setTimeout(()=>{b(this,ul,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,fe)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,Rd))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of c(this,tr).values())if(t.uid===e)return t;return null}getNextId(){return c(this,fe).getId()}combinedSignal(e){return c(this,fe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,yt,So))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,fe).updateMode(e.mode);const{offsetX:s,offsetY:r}=k(this,yt,Fk).call(this),i=this.getNextId(),o=k(this,yt,jk).call(this,{parent:this,id:i,x:s,y:r,uiManager:c(this,fe),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(Mi,au).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,fe)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=k(this,yt,jk).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,fe),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(k(this,yt,Fk).call(this),!0,e)}setSelected(e){c(this,fe).setSelected(e)}toggleSelected(e){c(this,fe).toggleSelected(e)}unselect(e){c(this,fe).unselect(e)}pointerup(e){var r;const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,iu)||(b(this,iu,!1),(r=c(this,yt,So))!=null&&r.isDrawer&&c(this,yt,So).supportMultipleDrawings))return;if(!c(this,Gm)){b(this,Gm,!0);return}const s=c(this,fe).getMode();if(s===Ae.STAMP||s===Ae.SIGNATURE){c(this,fe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,fe).getMode()===Ae.HIGHLIGHT&&this.enableTextSelection(),c(this,iu)){b(this,iu,!1);return}const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,iu,!0),(r=c(this,yt,So))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=c(this,fe).getActive();b(this,Gm,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,Qi)){c(this,yt,So).startDrawing(this,c(this,fe),!1,e);return}c(this,fe).setCurrentDrawingSession(this),b(this,Qi,new AbortController);const t=c(this,fe).combinedSignal(c(this,Qi));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,hl,null),this.commitOrRemove())},{signal:t}),c(this,yt,So).startDrawing(this,c(this,fe),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,hl,t);return}c(this,hl)&&setTimeout(()=>{var t;(t=c(this,hl))==null||t.focus(),b(this,hl,null)},0)}endDrawingSession(e=!1){return c(this,Qi)?(c(this,fe).setCurrentDrawingSession(null),c(this,Qi).abort(),b(this,Qi,null),b(this,hl,null),c(this,yt,So).endDrawing(e)):null}findNewParent(e,t,s){const r=c(this,fe).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,Qi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Qi)&&c(this,yt,So).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,fe).getActive())==null?void 0:e.parent)===this&&(c(this,fe).commitOrRemove(),c(this,fe).setActiveEditor(null)),c(this,ul)&&(clearTimeout(c(this,ul)),b(this,ul,null));for(const s of c(this,tr).values())(t=c(this,Rd))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,tr).clear(),c(this,fe).removeLayer(this)}render({viewport:e}){this.viewport=e,Fu(this.div,e);for(const t of c(this,fe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,fe).commitOrRemove(),k(this,yt,y_).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Fu(this.div,{rotation:s}),t!==s)for(const r of c(this,tr).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,fe).viewParameters.realScale}};Rd=new WeakMap,Gm=new WeakMap,su=new WeakMap,ru=new WeakMap,ul=new WeakMap,tr=new WeakMap,iu=new WeakMap,qm=new WeakMap,Km=new WeakMap,Qi=new WeakMap,hl=new WeakMap,$n=new WeakMap,dl=new WeakMap,ou=new WeakMap,Ym=new WeakMap,fe=new WeakMap,au=new WeakMap,yt=new WeakSet,Ok=function(){return c(this,tr).size!==0?c(this,tr).values():c(this,fe).getEditors(this.pageIndex)},J5=function(e){c(this,fe).unselectAll();const{target:t}=e;if(t===c(this,$n).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,$n).div.contains(t)){const{isMac:s}=qn.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,fe).showAllEditors("highlight",!0,!0),c(this,$n).div.classList.add("free"),this.toggleDrawing(),L1.startHighlighting(this,c(this,fe).direction==="ltr",{target:c(this,$n).div,x:e.x,y:e.y}),c(this,$n).div.addEventListener("pointerup",()=>{c(this,$n).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,fe)._signal}),e.preventDefault()}},So=function(){return c(Mi,au).get(c(this,fe).getMode())},jk=function(e){const t=c(this,yt,So);return t?new t.prototype.constructor(e):null},Fk=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+r),u=(i+a)/2-e,h=(o+l)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},y_=function(){for(const e of c(this,tr).values())e.isEmpty()&&e.remove()},X(Mi,"_initialized",!1),A(Mi,au,new Map([yk,Ck,Dk,L1,Lk].map(e=>[e._editorType,e])));let M1=Mi;var Ji,Ds,Nd,Lw,tE,Z5,ga,Vk,eB,Bk;const Tn=class Tn{constructor({pageIndex:e}){A(this,ga);A(this,Ji,null);A(this,Ds,new Map);A(this,Nd,new Map);this.pageIndex=e}setParent(e){if(!c(this,Ji)){b(this,Ji,e);return}if(c(this,Ji)!==e){if(c(this,Ds).size>0)for(const t of c(this,Ds).values())t.remove(),e.append(t);b(this,Ji,e)}}static get _svgFactory(){return Le(this,"_svgFactory",new K0)}draw(e,t=!1,s=!1){const r=Jt(Tn,Lw)._++,i=k(this,ga,Vk).call(this),o=Tn._svgFactory.createElement("defs");i.append(o);const a=Tn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,Nd).set(r,a);const u=s?k(this,ga,eB).call(this,o,l):null,h=Tn._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(i,e),c(this,Ds).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Jt(Tn,Lw)._++,r=k(this,ga,Vk).call(this),i=Tn._svgFactory.createElement("defs");r.append(i);const o=Tn._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=Tn._svgFactory.createElement("mask");i.append(d),l=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Tn._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=Tn._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=Tn._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return r.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,Ds).set(s,r),s}finalizeDraw(e,t){c(this,Nd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?c(this,Ds).get(e):e;if(a){if(s&&k(this,ga,Bk).call(this,a,s),r&&k(l=Tn,tE,Z5).call(l,a,r),i){const{classList:u}=a;for(const[h,d]of Object.entries(i))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;k(this,ga,Bk).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=c(this,Ds).get(e);s&&(c(t,Ji).append(s),c(this,Ds).delete(e),c(t,Ds).set(e,s))}remove(e){c(this,Nd).delete(e),c(this,Ji)!==null&&(c(this,Ds).get(e).remove(),c(this,Ds).delete(e))}destroy(){b(this,Ji,null);for(const e of c(this,Ds).values())e.remove();c(this,Ds).clear(),c(this,Nd).clear()}};Ji=new WeakMap,Ds=new WeakMap,Nd=new WeakMap,Lw=new WeakMap,tE=new WeakSet,Z5=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},ga=new WeakSet,Vk=function(){const e=Tn._svgFactory.create(1,1,!0);return c(this,Ji).append(e),e.setAttribute("aria-hidden",!0),e},eB=function(e,t){const s=Tn._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Tn._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},Bk=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},A(Tn,tE),A(Tn,Lw,0);let O1=Tn;globalThis._pdfjsTestingUtils={HighlightOutliner:wk};globalThis.pdfjsLib={AbortException:Nl,AnnotationEditorLayer:M1,AnnotationEditorParamsType:ze,AnnotationEditorType:Ae,AnnotationEditorUIManager:Vu,AnnotationLayer:pR,AnnotationMode:ta,AnnotationType:ln,applyOpacity:JV,build:t5,ColorPicker:q0,createValidAbsoluteUrl:eR,CSSConstants:QV,DOMSVGFactory:K0,DrawLayer:O1,FeatureTest:qn,fetchData:Ig,findContrastColor:ZV,getDocument:cR,getFilenameFromUrl:KV,getPdfFilenameFromUrl:YV,getRGB:Rg,getUuid:nR,getXfaPageViewport:XV,GlobalWorkerOptions:bi,ImageKind:f0,InvalidPDFException:A1,isDataScheme:ob,isPdfFile:eS,isValidExplicitDest:N6,MathClamp:ws,noContextMenu:Yr,normalizeUnicode:GV,OPS:gg,OutputScale:uo,PasswordResponses:HV,PDFDataRangeTransport:uR,PDFDateString:H0,PDFWorker:yg,PermissionFlag:$V,PixelsPerInch:Ll,RenderingCancelledException:ZE,renderRichText:iR,ResponseException:z0,setLayerDimensions:Fu,shadow:Le,SignatureExtractor:na,stopEvent:Wt,SupportedImageMimeTypes:T1,TextLayer:G0,TouchManager:W0,updateUrlHash:tR,Util:ce,VerbosityLevel:sb,version:hR,XfaLayer:rR};const bne=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Nl,AnnotationEditorLayer:M1,AnnotationEditorParamsType:ze,AnnotationEditorType:Ae,AnnotationEditorUIManager:Vu,AnnotationLayer:pR,AnnotationMode:ta,AnnotationType:ln,CSSConstants:QV,ColorPicker:q0,DOMSVGFactory:K0,DrawLayer:O1,FeatureTest:qn,GlobalWorkerOptions:bi,ImageKind:f0,InvalidPDFException:A1,MathClamp:ws,OPS:gg,OutputScale:uo,PDFDataRangeTransport:uR,PDFDateString:H0,PDFWorker:yg,PasswordResponses:HV,PermissionFlag:$V,PixelsPerInch:Ll,RenderingCancelledException:ZE,ResponseException:z0,SignatureExtractor:na,SupportedImageMimeTypes:T1,TextLayer:G0,TouchManager:W0,Util:ce,VerbosityLevel:sb,XfaLayer:rR,applyOpacity:JV,build:t5,createValidAbsoluteUrl:eR,fetchData:Ig,findContrastColor:ZV,getDocument:cR,getFilenameFromUrl:KV,getPdfFilenameFromUrl:YV,getRGB:Rg,getUuid:nR,getXfaPageViewport:XV,isDataScheme:ob,isPdfFile:eS,isValidExplicitDest:N6,noContextMenu:Yr,normalizeUnicode:GV,renderRichText:iR,setLayerDimensions:Fu,shadow:Le,stopEvent:Wt,updateUrlHash:tR,version:hR},Symbol.toStringTag,{value:"Module"}));var vM=Object.prototype.hasOwnProperty;function wM(n,e,t){for(t of n.keys())if(pp(t,e))return t}function pp(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&pp(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=wM(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=wM(e,r),!r)||!pp(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(vM.call(n,t)&&++s&&!vM.call(e,t)||!(t in e)||!pp(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function ub(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const xne=["onCopy","onCut","onPaste"],_ne=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Ene=["onFocus","onBlur"],Sne=["onInput","onInvalid","onReset","onSubmit"],Ane=["onLoad","onError"],Tne=["onKeyDown","onKeyPress","onKeyUp"],Cne=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],kne=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Pne=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Ine=["onSelect"],Rne=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Nne=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Lne=["onScroll"],Dne=["onWheel"],Mne=["onAnimationStart","onAnimationEnd","onAnimationIteration"],One=["onTransitionEnd"],jne=["onToggle"],Fne=["onChange"],Vne=[...xne,..._ne,...Ene,...Sne,...Ane,...Tne,...Cne,...kne,...Pne,...Ine,...Rne,...Nne,...Lne,...Dne,...Mne,...One,...Fne,...jne];function tB(n,e){const t={};for(const s of Vne){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var Bne=function(){},Une=Bne;const Es=Hk(Une),nB=B.createContext(null),zne="noopener noreferrer nofollow";class $ne{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Be(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Be(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||zne,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Be(this.pdfDocument),Be(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Be(Array.isArray(t));const s=t[0];new Promise(r=>{Be(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{Be(!1)}):typeof s=="number"?r(s):Be(!1)}).then(r=>{const i=r+1;Be(this.pdfViewer),Be(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;Be(this.pdfViewer),Be(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function mp({children:n,type:e}){return p.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const bM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function Hne(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function vg(){return B.useReducer(Hne,{value:void 0,error:void 0})}const sS=typeof window<"u",sB=sS&&window.location.protocol==="file:";function Wne(n){return typeof n<"u"}function Zu(n){return Wne(n)&&n!==null}function Gne(n){return typeof n=="string"}function qne(n){return n instanceof ArrayBuffer}function Kne(n){return Be(sS),n instanceof Blob}function Uk(n){return Gne(n)&&/^data:/.test(n)}function xM(n){Be(Uk(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function Yne(){return sS&&window.devicePixelRatio||1}const rB="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function _M(){Es(!sB,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${rB}`)}function Xne(){Es(!sB,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${rB}`)}function Jd(n){n!=null&&n.cancel&&n.cancel()}function zk(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function iB(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function Qne(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:Jne}=bne,Zne=(n,e)=>{switch(e){case bM.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case bM.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function EM(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const ese=B.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:a,imageResourcesPath:l,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:g,onLoadSuccess:y,onPassword:v=Zne,onSourceError:S,onSourceSuccess:w,options:_,renderMode:E,rotate:I,scale:D,...M},T){const[C,N]=vg(),{value:L,error:R}=C,[O,j]=vg(),{value:V,error:$}=O,U=B.useRef(new $ne),W=B.useRef([]),G=B.useRef(void 0),q=B.useRef(void 0);o&&o!==G.current&&EM(o)&&(Es(!pp(o,G.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),G.current=o),_&&_!==q.current&&(Es(!pp(_,q.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),q.current=_);const ee=B.useRef({scrollPageIntoView:qe=>{const{dest:Ke,pageNumber:ot,pageIndex:Bt=ot-1}=qe;if(d){d({dest:Ke,pageIndex:Bt,pageNumber:ot});return}const wt=W.current[Bt];if(wt){wt.scrollIntoView();return}Es(!1,`An internal link leading to page ${ot} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});B.useImperativeHandle(T,()=>({linkService:U,pages:W,viewer:ee}),[]);function ue(){w&&w()}function J(){R&&(Es(!1,R.toString()),S&&S(R))}function se(){N({type:"RESET"})}B.useEffect(se,[o,N]);const pe=B.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Uk(o)?{data:xM(o)}:(_M(),{url:o});if(o instanceof Jne)return{range:o};if(qne(o))return{data:o};if(sS&&Kne(o))return{data:await Qne(o)};if(Be(typeof o=="object"),Be(EM(o)),"url"in o&&typeof o.url=="string"){if(Uk(o.url)){const{url:qe,...Ke}=o;return{data:xM(qe),...Ke}}_M()}return o},[o]);B.useEffect(()=>{const qe=ub(pe());return qe.promise.then(Ke=>{N({type:"RESOLVE",value:Ke})}).catch(Ke=>{N({type:"REJECT",error:Ke})}),()=>{Jd(qe)}},[pe,N]),B.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){J();return}ue()}},[L]);function _e(){V&&(y&&y(V),W.current=new Array(V.numPages),U.current.setDocument(V))}function Se(){$&&(Es(!1,$.toString()),f&&f($))}B.useEffect(function(){j({type:"RESET"})},[j,L]),B.useEffect(function(){if(!L)return;const Ke=_?{...L,..._}:L,ot=cR(Ke);g&&(ot.onProgress=g),v&&(ot.onPassword=v);const Bt=ot;return Bt.promise.then(wt=>{Bt.destroyed||j({type:"RESOLVE",value:wt})}).catch(wt=>{Bt.destroyed||j({type:"REJECT",error:wt})}),()=>{Bt.destroy()}},[_,j,L]),B.useEffect(()=>{if(!(typeof V>"u")){if(V===!1){Se();return}_e()}},[V]),B.useEffect(function(){U.current.setViewer(ee.current),U.current.setExternalLinkRel(r),U.current.setExternalLinkTarget(i)},[r,i]);const ie=B.useCallback((qe,Ke)=>{W.current[qe]=Ke},[]),Xt=B.useCallback(qe=>{delete W.current[qe]},[]),At=B.useMemo(()=>({imageResourcesPath:l,linkService:U.current,onItemClick:d,pdf:V,registerPage:ie,renderMode:E,rotate:I,scale:D,unregisterPage:Xt}),[l,d,V,ie,E,I,D,Xt]),Lt=B.useMemo(()=>tB(M,()=>V),[M,V]);function Ie(){function qe(ot){return!!(ot!=null&&ot.pdf)}if(!qe(At))throw new Error("pdf is undefined");const Ke=typeof e=="function"?e(At):e;return p.jsx(nB.Provider,{value:At,children:Ke})}function Dt(){return o?V==null?p.jsx(mp,{type:"loading",children:typeof u=="function"?u():u}):V===!1?p.jsx(mp,{type:"error",children:typeof s=="function"?s():s}):Ie():p.jsx(mp,{type:"no-data",children:typeof h=="function"?h():h})}return p.jsx("div",{className:kg("react-pdf__Document",t),ref:a,...Lt,children:Dt()})});function oB(){return B.useContext(nB)}function aB(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,a=t;o<a.length;o++){var l=a[o];typeof l=="function"?l(i):l&&(l.current=i)}}}const lB=B.createContext(null);function rS(){return B.useContext(lB)}function tse(){const n=oB(),e=rS();Be(e);const t={...n,...e},{filterAnnotations:s,imageResourcesPath:r,linkService:i,onGetAnnotationsError:o,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:h,pdf:d,renderForms:f,rotate:g,scale:y=1}=t;Be(d),Be(h),Be(i);const[v,S]=vg(),{value:w,error:_}=v,E=B.useRef(null);Es(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function I(){w&&a&&a(w)}function D(){_&&(Es(!1,_.toString()),o&&o(_))}B.useEffect(function(){S({type:"RESET"})},[S,h]),B.useEffect(function(){if(!h)return;const L=ub(h.getAnnotations()),R=L;return L.promise.then(O=>{S({type:"RESOLVE",value:O})}).catch(O=>{S({type:"REJECT",error:O})}),()=>{Jd(R)}},[S,h]),B.useEffect(()=>{if(w!==void 0){if(w===!1){D();return}I()}},[w]);function M(){u&&u()}function T(N){Es(!1,`${N}`),l&&l(N)}const C=B.useMemo(()=>h.getViewport({scale:y,rotation:g}),[h,g,y]);return B.useEffect(function(){if(!d||!h||!i||!w)return;const{current:L}=E;if(!L)return;const R=C.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:L,l10n:null,linkService:i,page:h,structTreeLayer:null,viewport:R},j={annotations:s?s({annotations:w}):w,annotationStorage:d.annotationStorage,div:L,imageResourcesPath:r,linkService:i,page:h,renderForms:f,viewport:R};L.innerHTML="";try{new pR(O).render(j),M()}catch(V){T(V)}return()=>{}},[w,s,r,i,h,d,f,C]),p.jsx("div",{className:kg("react-pdf__Page__annotations","annotationLayer"),ref:E})}const cB={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},nse=/^H(\d+)$/;function sse(n){return n in cB}function iS(n){return"children"in n}function uB(n){return iS(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function rse(n){const e={};if(iS(n)){const{role:t}=n,s=t.match(nse);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(sse(t)){const r=cB[t];r&&(e.role=r)}}return e}function hB(n){const e={};if(iS(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),uB(n)){const[t]=n.children;if(t){const s=hB(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function ise(n){return n?{...rse(n),...hB(n)}:null}function dB({className:n,node:e}){const t=B.useMemo(()=>ise(e),[e]),s=B.useMemo(()=>!iS(e)||uB(e)?null:e.children.map((r,i)=>p.jsx(dB,{node:r},i)),[e]);return p.jsx("span",{className:n,...t,children:s})}function ose(){const n=rS();Be(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=vg(),{value:i,error:o}=s,{customTextRenderer:a,page:l}=n;function u(){i&&t&&t(i)}function h(){o&&(Es(!1,o.toString()),e&&e(o))}return B.useEffect(function(){r({type:"RESET"})},[r,l]),B.useEffect(function(){if(a||!l)return;const f=ub(l.getStructTree()),g=f;return f.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>Jd(g)},[a,l,r]),B.useEffect(()=>{if(i!==void 0){if(i===!1){h();return}u()}},[i]),i?p.jsx(dB,{className:"react-pdf__Page__structTree structTree",node:i}):null}const SM=ta;function ase(n){const e=rS();Be(e);const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=Yne(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:g}=n;Be(l);const y=B.useRef(null);function v(){l&&a&&a(zk(l,f))}function S(I){iB(I)||(Es(!1,I.toString()),o&&o(I))}const w=B.useMemo(()=>l.getViewport({scale:f*i,rotation:d}),[i,l,d,f]),_=B.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);B.useEffect(function(){if(!l)return;l.cleanup();const{current:D}=y;if(!D)return;D.width=w.width,D.height=w.height,D.style.width=`${Math.floor(_.width)}px`,D.style.height=`${Math.floor(_.height)}px`,D.style.visibility="hidden";const M={annotationMode:u?SM.ENABLE_FORMS:SM.ENABLE,canvas:D,canvasContext:D.getContext("2d",{alpha:!1}),viewport:w};r&&(M.background=r);const T=l.render(M),C=T;return T.promise.then(()=>{D.style.visibility="",v()}).catch(S),()=>Jd(C)},[r,l,u,w,_]);const E=B.useCallback(()=>{const{current:I}=y;I&&(I.width=0,I.height=0)},[]);return B.useEffect(()=>E,[E]),p.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:aB(g,y),style:{display:"block",userSelect:"none"},children:h?p.jsx(ose,{}):null})}function lse(n){return"str"in n}function cse(){const n=rS();Be(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:u,scale:h}=n;Be(o);const[d,f]=vg(),{value:g,error:y}=d,v=B.useRef(null);Es(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){g&&s&&s(g)}function w(){y&&(Es(!1,y.toString()),t&&t(y))}B.useEffect(function(){f({type:"RESET"})},[o,f]),B.useEffect(function(){if(!o)return;const C=ub(o.getTextContent()),N=C;return C.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>Jd(N)},[o,f]),B.useEffect(()=>{if(g!==void 0){if(g===!1){w();return}S()}},[g]);const _=B.useCallback(()=>{i&&i()},[i]),E=B.useCallback(T=>{iB(T)||(Es(!1,T.toString()),r&&r(T))},[r]);function I(){const T=v.current;T&&T.classList.add("selecting")}function D(){const T=v.current;T&&T.classList.remove("selecting")}const M=B.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return B.useLayoutEffect(function(){if(!o||!g)return;const{current:C}=v;if(!C)return;C.innerHTML="";const N=o.streamTextContent({includeMarkedContent:!0}),L={container:C,textContentSource:N,viewport:M},R=new G0(L),O=R;return R.render().then(()=>{const j=document.createElement("div");j.className="endOfContent",C.append(j);const V=C.querySelectorAll('[role="presentation"]');if(e){let $=0;g.items.forEach((U,W)=>{if(!lse(U))return;const G=V[$];if(!G)return;const q=e({pageIndex:a,pageNumber:l,itemIndex:W,...U});G.innerHTML=q,$+=U.str&&U.hasEOL?2:1})}_()}).catch(E),()=>Jd(O)},[e,E,_,o,a,l,g,M]),p.jsx("div",{className:kg("react-pdf__Page__textContent","textLayer"),onMouseUp:D,onMouseDown:I,ref:v})}const AM=1;function use(n){const t={...oB(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",filterAnnotations:g,height:y,inputRef:v,loading:S="Loading page",noData:w="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:I,onGetStructTreeSuccess:D,onGetTextError:M,onGetTextSuccess:T,onLoadError:C,onLoadSuccess:N,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:R,onRenderError:O,onRenderSuccess:j,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,pageIndex:U,pageNumber:W,pdf:G,registerPage:q,renderAnnotationLayer:ee=!0,renderForms:ue=!1,renderMode:J="canvas",renderTextLayer:se=!0,rotate:pe,scale:_e=AM,unregisterPage:Se,width:ie,...Xt}=t,[At,Lt]=vg(),{value:Ie,error:Dt}=At,qe=B.useRef(null);Be(G);const Ke=Zu(W)?W-1:U??null,ot=W??(Zu(U)?U+1:null),Bt=pe??(Ie?Ie.rotate:null),wt=B.useMemo(()=>{if(!Ie)return null;let Hs=1;const mo=_e??AM;if(ie||y){const Cs=Ie.getViewport({scale:1,rotation:Bt});ie?Hs=ie/Cs.width:y&&(Hs=y/Cs.height)}return mo*Hs},[y,Ie,Bt,_e,ie]);B.useEffect(function(){return()=>{Zu(Ke)&&r&&Se&&Se(Ke)}},[r,G,Ke,Se]);function po(){if(N){if(!Ie||!wt)return;N(zk(Ie,wt))}if(r&&q){if(!Zu(Ke)||!qe.current)return;q(Ke,qe.current)}}function Tt(){Dt&&(Es(!1,Dt.toString()),C&&C(Dt))}B.useEffect(function(){Lt({type:"RESET"})},[Lt,G,Ke]),B.useEffect(function(){if(!G||!ot)return;const mo=ub(G.getPage(ot)),Cs=mo;return mo.promise.then(Fl=>{Lt({type:"RESOLVE",value:Fl})}).catch(Fl=>{Lt({type:"REJECT",error:Fl})}),()=>Jd(Cs)},[Lt,G,ot]),B.useEffect(()=>{if(Ie!==void 0){if(Ie===!1){Tt();return}po()}},[Ie,wt]);const ft=B.useMemo(()=>Zu(Ke)&&ot&&Zu(Bt)&&Zu(wt)?{_className:s,canvasBackground:i,customTextRenderer:h,devicePixelRatio:d,filterAnnotations:g,onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:I,onGetStructTreeSuccess:D,onGetTextError:M,onGetTextSuccess:T,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:R,onRenderError:O,onRenderSuccess:j,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,page:Ie,pageIndex:Ke,pageNumber:ot,renderForms:ue,renderTextLayer:se,rotate:Bt,scale:wt}:null,[s,i,h,d,g,_,E,I,D,M,T,L,R,O,j,V,$,Ie,Ke,ot,ue,se,Bt,wt]),Ts=B.useMemo(()=>tB(Xt,()=>Ie&&(wt?zk(Ie,wt):void 0)),[Xt,Ie,wt]),Jr=`${Ke}@${wt}/${Bt}`;function Re(){switch(J){case"custom":return Be(u),p.jsx(u,{},`${Jr}_custom`);case"none":return null;case"canvas":default:return p.jsx(ase,{canvasRef:o},`${Jr}_canvas`)}}function Ut(){return se?p.jsx(cse,{},`${Jr}_text`):null}function an(){return ee?p.jsx(tse,{},`${Jr}_annotations`):null}function mn(){function Hs(Cs){return!!(Cs!=null&&Cs.page)}if(!Hs(ft))throw new Error("page is undefined");const mo=typeof a=="function"?a(ft):a;return p.jsxs(lB.Provider,{value:ft,children:[Re(),Ut(),an(),mo]})}function Pi(){return ot?G===null||Ie===void 0||Ie===null?p.jsx(mp,{type:"loading",children:typeof S=="function"?S():S}):G===!1||Ie===!1?p.jsx(mp,{type:"error",children:typeof f=="function"?f():f}):mn():p.jsx(mp,{type:"no-data",children:typeof w=="function"?w():w})}return p.jsx("div",{className:kg(s,l),"data-page-number":ot,ref:aB(v,qe),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${wt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ts,children:Pi()})}Xne();bi.workerSrc="pdf.worker.mjs";bi.workerSrc=`//unpkg.com/pdfjs-dist@${hR}/build/pdf.worker.min.mjs`;const hse=()=>p.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Caveat:wght@400;700&display=swap');

    .grid-background {
      background-color: #ecfdf5;
      background-image: 
        linear-gradient(#a7f3d0 1px, transparent 1px),
        linear-gradient(90deg, #a7f3d0 1px, transparent 1px);
      background-size: 24px 24px;
    }

    .handwritten-title { font-family: 'Caveat', cursive, sans-serif; }
    .handwritten-body { font-family: 'Architects Daughter', cursive, sans-serif; }

    .module-card {
      background: white;
      border: 2px solid #0f766e;
      box-shadow: 4px 4px 0px #0f766e;
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.2s ease;
    }
    .module-card:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0px #0f766e; }
    
    .module-card.locked {
      opacity: 0.8;
      border-color: #94a3b8;
      box-shadow: 4px 4px 0px #94a3b8;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: white;
      color: #0f766e;
      border: 2px solid #0f766e;
      box-shadow: 3px 3px 0px #0f766e;
      transition: all 0.1s ease;
    }
    .btn-secondary:hover { transform: translate(-2px, -2px); box-shadow: 5px 5px 0px #0f766e; background: #f0fdfa; }

    .btn-primary {
      background: #14b8a6; color: white;
      border: 2px solid #065f46;
      box-shadow: 3px 3px 0px #065f46;
      transition: all 0.1s ease;
    }
    .btn-primary:hover { transform: translate(-2px, -2px); box-shadow: 5px 5px 0px #065f46; background: #0d9488; }

    .nav-tab {
      cursor: pointer;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: bold;
      transition: all 0.2s;
      border: 2px solid transparent;
    }
    .nav-tab.active {
      background: #0f766e;
      color: white;
      border-color: #065f46;
      box-shadow: 3px 3px 0px #065f46;
    }
    .nav-tab:hover:not(.active) {
      background: #d1fae5;
      color: #065f46;
    }
    
    /* PDF CANVAS OVERRIDES */
    .react-pdf__Page__canvas {
        margin: 0 auto;
        box-shadow: 0px 4px 20px rgba(0,0,0,0.1);
        border-radius: 8px;
    }
    .react-pdf__Page__textContent {
        display: none !important; /* Disable text selection layer */
    }
    .react-pdf__Page__annotationLayer {
        display: none !important; /* Disable link layer */
    }
  `}),hx=[{id:"module-1",title:"Introduction to Petroleum",icon:"",lessons:[{id:"m1l1",title:"History of Petroleum Industry",type:"note",pages:15,duration:"10m"},{id:"m1l2",title:"Basic Concepts & Terminology",type:"note",pages:0,duration:"15m"},{id:"m1l3",title:"Career Opportunities",type:"note",pages:12,duration:"8m"}],quiz:[{q:"Who drilled the first commercial oil well?",options:["Drake","Rockefeller","Ford"],answer:0},{q:"What constitutes the majority of natural gas?",options:["Methane","Ethane","Propane"],answer:0}]},{id:"module-2",title:"Geology & Geophysics",icon:"",lessons:[{id:"m2l1",title:"Sedimentary Rocks",type:"note",pages:20,duration:"25m"},{id:"m2l2",title:"Structural Geology",type:"note",pages:0,duration:"30m"},{id:"m2l3",title:"Seismic Interpretation",type:"note",pages:16,duration:"20m"}],quiz:[{q:"Which rock type is most associated with oil?",options:["Igneous","Sedimentary","Metamorphic"],answer:1},{q:"What is used to measure formation resistivity?",options:["Sonic Log","Gamma Ray","Laterolog"],answer:2}]},{id:"module-3",title:"Reservoir Engineering",icon:"",lessons:[{id:"m3l1",title:"Fluid Properties",type:"note",pages:22,duration:"30m"},{id:"m3l2",title:"Material Balance",type:"note",pages:24,duration:"40m"}],quiz:[{q:"PVT stands for?",options:["Pressure Volume Temp","Petroleum Viscosity Time"],answer:0}]},{id:"module-4",title:"Drilling Engineering",icon:"",lessons:[{id:"m4l1",title:"Drilling Rigs",type:"note",pages:26,duration:"45m"},{id:"m4l2",title:"Drilling Fluids",type:"note",pages:24,duration:"40m"}],quiz:[{q:"Function of mud?",options:["Cooling","Heating","None"],answer:0}]}],dse=[{id:"test-1",title:"GATE 2025 Mock Test 1",questions:65,time:"180 mins",price:"Free"},{id:"test-2",title:"Reservoir Subject Test",questions:30,time:"90 mins",price:"99"},{id:"test-3",title:"GATE 2026 Full Length",questions:65,time:"180 mins",price:"149"}];function fse(){const{user:n,logout:e,loading:t,userProfile:s}=lf(),r=ya();B.useEffect(()=>{!t&&n&&s&&(s.onboardingComplete||(console.log("Onboarding incomplete. Redirecting..."),r({to:"/onboarding"})))},[t,n,s,r]);const[i,o]=B.useState(new Set),[a,l]=B.useState(new Set),[u,h]=B.useState(new Set),[d,f]=B.useState(new Set(["module-1"])),[g,y]=B.useState(""),[v,S]=B.useState("Modules"),[w,_]=B.useState(null),[E,I]=B.useState(null),[D,M]=B.useState(!1),T=[{id:"Modules",icon:p.jsx(RZ,{size:18}),label:"Course Modules",type:"internal"},{id:"Test Series",icon:p.jsx(IV,{size:18}),label:"Test Series",type:"internal"},{id:"Quizzes",icon:p.jsx(qf,{size:18}),label:"Module Quizzes",type:"internal"},{id:"Saved",icon:p.jsx(OD,{size:18}),label:"Saved Items",type:"internal"},{id:"Analytics",icon:p.jsx(CV,{size:18}),label:"Performance",type:"link",path:"/analytics"},{id:"Flashcards",icon:p.jsx(E1,{size:18}),label:"Formula Blitz",type:"link",path:"/flashcards"}],C=(s==null?void 0:s.isPaid)||!1;B.useEffect(()=>{n&&(async()=>{const $=In(ht,"users",n.uid),U=await HI($);if(U.exists()){const W=U.data();W.completedLessons&&o(new Set(W.completedLessons)),W.bookmarks&&l(new Set(W.bookmarks)),W.masteryBadges&&h(new Set(W.masteryBadges))}})()},[n]);const N=async(V,$)=>{if(!C&&$!=="module-1"){M(!0);return}if(_(V),n&&!i.has(V.id))try{await w1(In(ht,"users",n.uid),{completedLessons:c0(V.id)},{merge:!0}),o(U=>new Set(U).add(V.id))}catch(U){console.error("Error saving progress",U)}},L=async V=>{if(!n)return;const $=a.has(V),U=new Set(a);$?U.delete(V):U.add(V),l(U);try{await da(In(ht,"users",n.uid),{bookmarks:$?IX(V):c0(V)}),Fe.success($?"Removed from Saved Items":"Saved to Bookmarks ")}catch(W){console.error("Error updating bookmark",W),Fe.error("Failed to update bookmark")}},R=async(V,$)=>{V/$*100>=80?(Fe.success(`You scored ${V}/${$}! Mastery Badge Earned! `),n&&E&&(await w1(In(ht,"users",n.uid),{masteryBadges:c0(E.id)},{merge:!0}),h(W=>new Set(W).add(E.id)))):Fe.error(`You scored ${V}/${$}. Try again to earn the badge!`),I(null)},O=B.useMemo(()=>g?hx.map(V=>{const $=V.title.toLowerCase().includes(g.toLowerCase()),U=V.lessons.some(W=>W.title.toLowerCase().includes(g.toLowerCase()));return $||U?V:null}).filter(Boolean):hx,[g]),j=B.useMemo(()=>{const V=[];return hx.forEach($=>{$.lessons.forEach(U=>{a.has(U.id)&&V.push({...U,moduleTitle:$.title,moduleId:$.id})})}),V},[a]);return t?p.jsx("div",{className:"h-screen flex items-center justify-center text-2xl font-handwritten",children:"Loading Dashboard..."}):n?p.jsxs("div",{className:"min-h-screen grid-background handwritten-body flex flex-col",children:[p.jsx(hse,{}),p.jsx("header",{className:"bg-white border-b-[3px] border-[#0f766e] sticky top-0 z-40 px-4 py-3 shadow-sm",children:p.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h1",{className:"handwritten-title text-3xl font-bold text-gray-800",children:"PE 2026"}),!C&&p.jsx("span",{className:"bg-orange-100 text-orange-700 text-xs px-2 py-1 rounded-full font-bold border border-orange-200",children:"Free Plan"})]}),p.jsxs("div",{className:"relative w-full md:w-96",children:[p.jsx(NV,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search topics, lessons...",value:g,onChange:V=>y(V.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border-2 border-[#0f766e] focus:outline-none focus:ring-2 focus:ring-[#14b8a6] font-sans"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:()=>r({to:"/settings"}),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Settings",children:p.jsx(OZ,{size:20})}),p.jsxs("div",{className:"hidden md:block text-right",children:[p.jsx("div",{className:"font-bold text-gray-800",children:n.displayName}),p.jsx("div",{className:"text-xs text-gray-500",children:n.email})]}),p.jsx("button",{onClick:()=>e().then(()=>r({to:"/"})),className:"btn-secondary px-4 py-2 rounded-lg font-bold text-sm",children:"Logout"})]})]})}),p.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full p-6",children:[p.jsx("div",{className:"mb-6",children:p.jsx("h2",{className:"handwritten-title text-4xl font-bold text-gray-800 mb-2",children:"My Learning Dashboard"})}),p.jsx("div",{className:"flex flex-wrap gap-3 mb-8 border-b border-gray-200 pb-4",children:T.map(V=>p.jsxs("div",{onClick:()=>{V.type==="link"&&V.path?r({to:V.path}):S(V.id)},className:`nav-tab flex items-center gap-2 ${v===V.id?"active":"text-gray-600"}`,children:[V.icon," ",V.label]},V.id))}),v==="Modules"&&p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:O.map(V=>{var ee;const $=!C&&V.id!=="module-1",U=u.has(V.id),W=d.has(V.id),G=V.lessons.filter(ue=>i.has(ue.id)).length,q=Math.round(G/V.lessons.length*100);return p.jsxs("div",{className:`module-card ${$?"locked":""}`,children:[p.jsxs("div",{onClick:()=>{$?M(!0):f(ue=>{const J=new Set(ue);return W?J.delete(V.id):J.add(V.id),J})},className:"p-5 cursor-pointer bg-white relative",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"text-4xl bg-teal-50 p-2 rounded-lg border border-teal-100",children:V.icon}),p.jsxs("div",{children:[p.jsxs("h4",{className:"handwritten-title text-2xl font-bold text-gray-800 flex items-center gap-2",children:[V.title,U&&p.jsx(qf,{className:"text-yellow-500 fill-yellow-100",size:20})]}),p.jsxs("p",{className:"text-sm text-gray-500 font-sans",children:[V.lessons.length," lessons  ",((ee=V.quiz)==null?void 0:ee.length)||0," quiz Qs"]})]})]}),$?p.jsx(yl,{className:"text-gray-400"}):p.jsx("div",{className:`transform transition-transform ${W?"rotate-180":""}`,children:p.jsx(kV,{className:"text-[#0f766e]"})})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-1",children:p.jsx("div",{className:"bg-[#14b8a6] h-2.5 rounded-full transition-all duration-500",style:{width:`${q}%`}})}),p.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-sans",children:[p.jsxs("span",{children:[q,"% Completed"]}),U&&p.jsx("span",{className:"text-yellow-600 font-bold",children:"Mastered!"})]})]}),p.jsxs("div",{className:`bg-gray-50 border-t border-[#0f766e] transition-all duration-300 ${W&&!$?"max-h-[500px] opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:[V.lessons.map(ue=>{const J=i.has(ue.id),se=a.has(ue.id);return p.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 hover:bg-teal-50 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>N(ue,V.id),children:[J?p.jsx(u0,{size:18,className:"text-teal-600"}):p.jsx("div",{className:"w-[18px] h-[18px] rounded-full border-2 border-gray-300"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-gray-700 text-sm",children:ue.title}),p.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[p.jsx(Kf,{size:12})," Note  ",ue.duration]})]})]}),p.jsx("button",{onClick:()=>L(ue.id),className:"text-gray-400 hover:text-yellow-500 p-2",children:se?p.jsx(ex,{size:18,className:"text-yellow-500 fill-yellow-500"}):p.jsx(ex,{size:18})})]},ue.id)}),p.jsx("div",{className:"p-3 bg-teal-100 flex justify-center",children:p.jsxs("button",{onClick:()=>I(V),className:"w-full btn-secondary py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[p.jsx(qf,{size:18})," Take Module Quiz"]})})]})]},V.id)})}),v==="Test Series"&&p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in fade-in duration-300",children:dse.map(V=>p.jsxs("div",{className:"module-card p-6 bg-white flex flex-col justify-between h-full",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsx("h4",{className:"font-bold text-xl text-gray-800 font-handwritten",children:V.title}),p.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${V.price==="Free"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:V.price})]}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Kf,{size:14})," ",V.questions," Qs"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(XE,{size:14})," ",V.time]})]})]}),V.price!=="Free"&&!C?p.jsxs("button",{onClick:()=>M(!0),className:"w-full btn-secondary py-2 rounded-lg font-bold flex items-center justify-center gap-2 text-gray-500 border-gray-300 shadow-none",children:[p.jsx(yl,{size:14})," Unlock"]}):p.jsx("button",{onClick:()=>r({to:"/test/$testId",params:{testId:V.id}}),className:"w-full btn-primary py-2 rounded-lg font-bold",children:"Start Test"})]},V.id))}),v==="Quizzes"&&p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in duration-300",children:hx.map(V=>{var W;const $=!C&&V.id!=="module-1",U=u.has(V.id);return p.jsxs("div",{className:`module-card p-6 ${$?"locked":""} bg-white relative`,children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"text-3xl bg-teal-50 p-2 rounded-lg",children:V.icon}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-lg",children:V.title}),p.jsxs("p",{className:"text-xs text-gray-500",children:[((W=V.quiz)==null?void 0:W.length)||0," Questions"]})]})]}),U?p.jsx("div",{className:"bg-yellow-50 text-yellow-700 p-3 rounded-lg text-center font-bold border border-yellow-200 mb-2",children:" Mastery Earned!"}):p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Score 80% or more to earn your mastery badge."}),p.jsxs("button",{onClick:()=>$?M(!0):I(V),className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-2 ${$?"btn-secondary text-gray-400":"btn-primary"}`,children:[$?p.jsx(yl,{size:16}):p.jsx(qf,{size:16}),$?"Unlock Quiz":"Take Quiz"]})]},V.id)})}),v==="Saved"&&p.jsx("div",{className:"animate-in fade-in duration-300",children:j.length===0?p.jsxs("div",{className:"text-center py-20 text-gray-500",children:[p.jsx(OD,{size:48,className:"mx-auto mb-4 text-gray-300"}),p.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Saved Items Yet"}),p.jsxs("p",{children:["Click the ",p.jsx(ex,{size:14,className:"inline"})," icon on any lesson to bookmark it here."]})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(V=>p.jsxs("div",{className:"module-card p-4 bg-white flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",onClick:()=>N(V,V.moduleId),children:[p.jsx("div",{className:"bg-teal-50 p-3 rounded-lg text-[#0f766e] cursor-pointer",children:p.jsx(Kf,{size:24})}),p.jsxs("div",{className:"cursor-pointer",children:[p.jsx("h4",{className:"font-bold text-lg text-gray-800",children:V.title}),p.jsxs("p",{className:"text-xs text-gray-500",children:["From: ",V.moduleTitle]})]})]}),p.jsx("button",{onClick:()=>L(V.id),className:"p-2 text-yellow-500 hover:bg-yellow-50 rounded-full",children:p.jsx(ex,{size:20,className:"fill-yellow-500"})})]},V.id))})})]}),w&&p.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-0 overflow-hidden",onContextMenu:V=>V.preventDefault(),children:[p.jsx("button",{onClick:()=>_(null),className:"absolute top-4 right-6 text-white/50 hover:text-white transition-colors z-[120]",children:p.jsx(ju,{size:32})}),p.jsxs("div",{className:"w-full h-full flex flex-col",children:[p.jsxs("div",{className:"h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6 shrink-0 z-[110]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(QI,{className:"text-green-500",size:18}),p.jsx("span",{className:"text-gray-300 font-mono text-sm",children:"SECURE VIEWER  LOGGED SESSION"})]}),p.jsx("div",{className:"text-gray-400 font-bold",children:w.title}),p.jsx("div",{className:"w-20"})," "]}),p.jsxs("div",{className:"flex-1 relative bg-gray-900 flex items-center justify-center overflow-auto p-4 md:p-8",children:[p.jsx("div",{className:"absolute inset-0 pointer-events-none z-[100] overflow-hidden select-none flex flex-wrap content-center justify-center gap-32 opacity-[0.05]",children:Array.from({length:20}).map((V,$)=>p.jsxs("div",{className:"transform -rotate-45 text-white font-black text-2xl whitespace-nowrap",children:[n.email," ",p.jsx("br",{})," ",p.jsxs("span",{className:"text-sm font-mono",children:[n.uid.slice(0,8),"  ",new Date().toLocaleDateString()]})]},$))}),p.jsx("div",{className:"bg-white shadow-2xl relative z-10 max-w-4xl w-full min-h-[80vh] flex flex-col items-center",children:w.contentUrl?p.jsx("div",{className:"w-full h-full bg-gray-100 overflow-auto flex justify-center",children:p.jsx(ese,{file:w.contentUrl,loading:p.jsx("div",{className:"p-10 text-gray-500",children:"Loading Document..."}),error:p.jsx("div",{className:"p-10 text-red-500",children:"Failed to load PDF."}),className:"shadow-lg",children:p.jsx(use,{pageNumber:1,renderTextLayer:!1,renderAnnotationLayer:!1,width:800,className:"border-b border-gray-200"})})}):p.jsxs("div",{className:"p-12 text-center text-gray-400",children:[p.jsx(Kf,{size:64,className:"mx-auto mb-4 opacity-20"}),p.jsx("h3",{className:"text-xl font-bold mb-2",children:"Content Not Available"}),p.jsx("p",{children:"The secure content for this lesson hasn't been uploaded yet."})]})})]}),p.jsxs("div",{className:"h-10 bg-red-900/90 text-red-100 text-xs flex items-center justify-center gap-2 shrink-0 z-[110]",children:[p.jsx(xZ,{size:14}),p.jsx("span",{className:"font-bold tracking-wider uppercase",children:" DO NOT SHARE  IP ADDRESS LOGGED  ACCOUNT WILL BE BANNED FOR LEAKS"})]})]})]}),E&&p.jsx(pse,{module:E,onClose:()=>I(null),onSubmit:R}),D&&p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:p.jsxs("div",{className:"bg-white max-w-md w-full rounded-2xl p-8 text-center shadow-2xl border-4 border-orange-100 relative",children:[p.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:p.jsx(ju,{})}),p.jsx("div",{className:"w-16 h-16 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(yl,{size:32})}),p.jsx("h2",{className:"handwritten-title text-3xl font-bold text-gray-800 mb-2",children:"Unlock Full Access"}),p.jsxs("p",{className:"text-gray-600 mb-6",children:["You are on the Free Plan. Upgrade to ",p.jsx("strong",{children:"Premium"})," to unlock all 12 modules, videos, and test series."]}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-lg",children:"Maybe Later"}),p.jsx("button",{onClick:()=>r({to:"/enroll"}),className:"btn-primary px-6 py-2 rounded-lg font-bold shadow-lg",children:"Upgrade for 1499"})]})]})})]}):p.jsx(Vw,{to:"/login"})}function pse({module:n,onClose:e,onSubmit:t}){var a;const[s,r]=B.useState(new Array(((a=n.quiz)==null?void 0:a.length)||0).fill(-1)),i=()=>{let l=0;return n.quiz.forEach((u,h)=>{s[h]===u.answer&&l++}),l},o=()=>{if(s.includes(-1)){Fe.error("Please answer all questions!");return}const l=i();t(l,n.quiz.length)};return!n.quiz||n.quiz.length===0?null:p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:p.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsxs("div",{className:"p-6 bg-[#0f766e] text-white flex justify-between items-center",children:[p.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[p.jsx(qf,{})," Quiz: ",n.title]}),p.jsx("button",{onClick:e,className:"hover:bg-white/20 p-1 rounded-full",children:p.jsx(ju,{})})]}),p.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:n.quiz.map((l,u)=>p.jsxs("div",{className:"mb-8",children:[p.jsxs("p",{className:"font-bold text-lg text-gray-800 mb-4",children:[u+1,". ",l.q]}),p.jsx("div",{className:"space-y-2",children:l.options.map((h,d)=>p.jsxs("div",{onClick:()=>{const f=[...s];f[u]=d,r(f)},className:`p-3 rounded-lg border-2 cursor-pointer transition-all flex items-center gap-3
                           ${s[u]===d?"border-[#0f766e] bg-teal-50 text-[#0f766e] font-bold shadow-md":"border-gray-200 hover:border-teal-200"}`,children:[p.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${s[u]===d?"border-[#0f766e]":"border-gray-300"}`,children:s[u]===d&&p.jsx("div",{className:"w-2 h-2 bg-[#0f766e] rounded-full"})}),h]},d))})]},u))}),p.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 font-bold hover:bg-gray-200 rounded-lg",children:"Cancel"}),p.jsx("button",{onClick:o,className:"btn-primary px-6 py-2 rounded-lg font-bold",children:"Submit Quiz"})]})]})})}const mse=()=>p.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Caveat:wght@400;700&display=swap');

    .handwritten-title { font-family: 'Caveat', cursive, sans-serif; }
    .handwritten-body { font-family: 'Architects Daughter', cursive, sans-serif; }

    .admin-card {
      background: white;
      border: 3px solid #0f766e;
      box-shadow: 4px 4px 0px #0f766e;
      border-radius: 12px;
      overflow: hidden;
    }

    .btn-action {
      transition: all 0.2s;
    }
    .btn-action:hover { transform: scale(1.1); }
    
    .nav-tab {
      cursor: pointer;
      padding: 10px 20px;
      font-weight: bold;
      border-bottom: 4px solid transparent;
      transition: all 0.2s;
    }
    .nav-tab.active {
      border-bottom-color: #0f766e;
      color: #0f766e;
      background: #f0fdfa;
    }
    .nav-tab:hover:not(.active) { background: #f0fdfa; }

    .input-handwritten {
      font-family: 'Architects Daughter', cursive, sans-serif;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      padding: 8px 12px;
      width: 100%;
    }
    .input-handwritten:focus {
      border-color: #0f766e;
      outline: none;
      box-shadow: 0 0 0 2px rgba(15, 118, 110, 0.1);
    }
  `});function gse(){var j;const{user:n,loading:e}=lf(),[t,s]=B.useState("students"),[r,i]=B.useState([]),[o,a]=B.useState([]),[l,u]=B.useState([]),[h,d]=B.useState(""),[f,g]=B.useState(null),[y,v]=B.useState(!1),[S,w]=B.useState(null),[_,E]=B.useState(null);B.useEffect(()=>{(async()=>{if(n)try{const $=await ah(To(ht,"users"));i($.docs.map(q=>({id:q.id,...q.data()})));const W=(await ah(To(ht,"modules"))).docs.map(q=>({id:q.id,...q.data()}));a(W.sort((q,ee)=>(q.order||0)-(ee.order||0)));const G=await ah(To(ht,"testSeries"));u(G.docs.map(q=>({id:q.id,...q.data()})))}catch($){console.error("Error loading data:",$)}})()},[n]);const I=async V=>{V.preventDefault();const $=V.target,U=new FormData($),W={name:U.get("name"),email:U.get("email"),phone:U.get("phone"),college:U.get("college"),isPaid:U.get("isPaid")==="on",enrolledAt:new Date().toISOString(),role:"student",completedLessons:[]};try{await vA(To(ht,"users"),W),i(G=>[...G,{...W,id:"temp-"+Date.now()}]),Fe.success("Student added!"),v(!1)}catch{Fe.error("Failed to add.")}},D=async(V,$)=>{await da(In(ht,"users",V),{isPaid:!$}),i(U=>U.map(W=>W.id===V?{...W,isPaid:!$}:W)),Fe.success("Updated premium status.")},M=async V=>{confirm("Delete user?")&&(await yA(In(ht,"users",V)),i($=>$.filter(U=>U.id!==V)),Fe.success("User deleted."))},T=async V=>{try{if(V.id.startsWith("new-")){const{id:U,...W}=V;await vA(To(ht,"modules"),W)}else await da(In(ht,"modules",V.id),V);Fe.success("Module saved!"),w(null);const $=await ah(To(ht,"modules"));a($.docs.map(U=>({id:U.id,...U.data()})).sort((U,W)=>(U.order||0)-(W.order||0)))}catch{Fe.error("Save failed.")}},C=async V=>{confirm("Delete module?")&&(await yA(In(ht,"modules",V)),a($=>$.filter(U=>U.id!==V)))},N=async V=>{try{if(V.id.startsWith("new-")){const{id:U,...W}=V;await vA(To(ht,"testSeries"),W)}else await da(In(ht,"testSeries",V.id),V);Fe.success("Test Series saved!"),E(null);const $=await ah(To(ht,"testSeries"));u($.docs.map(U=>({id:U.id,...U.data()})))}catch{Fe.error("Save failed.")}},L=async V=>{confirm("Delete test series?")&&(await yA(In(ht,"testSeries",V)),u($=>$.filter(U=>U.id!==V)))},R=r.filter(V=>{var $,U;return(($=V.name)==null?void 0:$.toLowerCase().includes(h.toLowerCase()))||((U=V.email)==null?void 0:U.toLowerCase().includes(h.toLowerCase()))}),O=B.useMemo(()=>{const V=r.length,$=r.filter(U=>U.isPaid).length;return{total:V,premium:$,revenue:$*1499}},[r]);return e?p.jsx("div",{children:"Loading..."}):n?p.jsxs("div",{className:"min-h-screen bg-[#ecfdf5] handwritten-body flex flex-col font-sans",children:[p.jsx(mse,{}),p.jsx("header",{className:"bg-white border-b-4 border-[#0f766e] p-6 sticky top-0 z-30",children:p.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-teal-100 p-2 rounded-lg border-2 border-teal-600",children:p.jsx(QI,{size:24,className:"text-teal-700"})}),p.jsx("h1",{className:"handwritten-title text-3xl font-bold text-gray-800",children:"Admin Panel"})]}),p.jsx("div",{className:"flex gap-4",children:["students","content","tests"].map(V=>p.jsx("div",{onClick:()=>s(V),className:`nav-tab capitalize ${t===V?"active":"text-gray-500"}`,children:V==="content"?"Modules":V==="tests"?"Tests":"Students"},V))})]})}),p.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full p-6",children:[t==="students"&&p.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"admin-card p-6 flex items-center gap-4 bg-white",children:[p.jsx("div",{className:"bg-blue-100 p-4 rounded-full text-blue-600",children:p.jsx(UZ,{size:24})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-3xl font-bold",children:O.total}),p.jsx("div",{className:"text-gray-500",children:"Total"})]})]}),p.jsxs("div",{className:"admin-card p-6 flex items-center gap-4 bg-white",children:[p.jsx("div",{className:"bg-green-100 p-4 rounded-full text-green-600",children:p.jsx(jD,{size:24})}),p.jsxs("div",{children:[p.jsxs("div",{className:"text-3xl font-bold",children:["",O.revenue.toLocaleString()]}),p.jsx("div",{className:"text-gray-500",children:"Revenue"})]})]}),p.jsxs("div",{className:"admin-card p-6 flex items-center gap-4 bg-white",children:[p.jsx("div",{className:"bg-purple-100 p-4 rounded-full text-purple-600",children:p.jsx(bZ,{size:24})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-3xl font-bold",children:O.premium}),p.jsx("div",{className:"text-gray-500",children:"Premium"})]})]})]}),p.jsxs("div",{className:"flex justify-between gap-4",children:[p.jsxs("div",{className:"relative w-full max-w-md",children:[p.jsx(NV,{className:"absolute left-3 top-2.5 text-gray-400 h-5 w-5"}),p.jsx("input",{type:"text",placeholder:"Search students...",className:"input-handwritten pl-10 bg-white",value:h,onChange:V=>d(V.target.value)})]}),p.jsxs("button",{onClick:()=>v(!0),className:"bg-[#0f766e] text-white px-6 py-2 rounded-lg font-bold shadow-[4px_4px_0px_#065f46] hover:translate-y-[-2px] hover:shadow-[6px_6px_0px_#065f46] transition-all flex items-center gap-2",children:[p.jsx(EA,{size:20})," Add Student"]})]}),p.jsx("div",{className:"admin-card bg-white overflow-hidden",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{className:"bg-teal-50 border-b-2 border-teal-100 text-teal-800",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-4",children:"Name"}),p.jsx("th",{className:"p-4",children:"Status"}),p.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100",children:R.map(V=>p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsxs("td",{className:"p-4",children:[p.jsx("div",{className:"font-bold",children:V.name}),p.jsx("div",{className:"text-sm text-gray-500",children:V.email})]}),p.jsx("td",{className:"p-4",children:V.isPaid?p.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded font-bold border border-green-200",children:"Premium"}):p.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded font-bold border border-yellow-200",children:"Free"})}),p.jsxs("td",{className:"p-4 flex justify-center gap-2",children:[p.jsx("button",{onClick:()=>g(V),className:"btn-action p-2 bg-gray-100 rounded text-gray-600",children:p.jsx(FD,{size:16})}),p.jsx("button",{onClick:()=>D(V.id,V.isPaid),className:`btn-action p-2 rounded text-white ${V.isPaid?"bg-orange-500":"bg-green-500"}`,children:V.isPaid?p.jsx(jD,{size:16}):p.jsx(DV,{size:16})}),p.jsx("button",{onClick:()=>M(V.id),className:"btn-action p-2 bg-red-100 text-red-600 rounded",children:p.jsx(d0,{size:16})})]})]},V.id))})]})})]}),t==="content"&&p.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h2",{className:"handwritten-title text-3xl font-bold text-gray-800",children:"Modules Manager"}),p.jsxs("button",{onClick:()=>w({id:"new-"+Date.now(),title:"",icon:"",lessons:[]}),className:"bg-[#0f766e] text-white px-4 py-2 rounded-lg font-bold flex gap-2 items-center",children:[p.jsx(EA,{size:18})," New Module"]})]}),p.jsx("div",{className:"grid gap-4",children:o.map(V=>{var $;return p.jsxs("div",{className:"admin-card bg-white p-4 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"text-3xl bg-teal-50 p-2 rounded",children:V.icon}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-xl",children:V.title}),p.jsxs("p",{className:"text-sm text-gray-500",children:[(($=V.lessons)==null?void 0:$.length)||0," Lessons"]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>w(V),className:"btn-action px-4 py-2 border-2 border-[#0f766e] text-[#0f766e] rounded-lg font-bold",children:"Edit"}),p.jsx("button",{onClick:()=>C(V.id),className:"btn-action p-2 text-red-500 hover:bg-red-50 rounded-lg",children:p.jsx(d0,{size:20})})]})]},V.id)})})]}),t==="tests"&&p.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h2",{className:"handwritten-title text-3xl font-bold text-gray-800",children:"Test Series Manager"}),p.jsxs("button",{onClick:()=>E({id:"new-"+Date.now(),title:"",price:"Free",time:"180 mins",questions:[]}),className:"bg-[#0f766e] text-white px-4 py-2 rounded-lg font-bold flex gap-2 items-center",children:[p.jsx(EA,{size:18})," New Test"]})]}),l.length===0?p.jsxs("div",{className:"p-10 text-center border-2 border-dashed border-gray-300 rounded-xl bg-white",children:[p.jsx(IV,{size:48,className:"mx-auto text-gray-300 mb-4"}),p.jsx("p",{className:"font-bold text-gray-500",children:"No mock tests created yet."})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(V=>{var $;return p.jsxs("div",{className:"admin-card bg-white p-6 relative group",children:[p.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:()=>E(V),className:"p-1.5 bg-gray-100 rounded hover:bg-teal-50 hover:text-teal-600",children:p.jsx(FD,{size:16})}),p.jsx("button",{onClick:()=>L(V.id),className:"p-1.5 bg-red-50 text-red-500 rounded hover:bg-red-100",children:p.jsx(d0,{size:16})})]}),p.jsx("h3",{className:"font-bold text-xl text-gray-800 mb-2",children:V.title}),p.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[p.jsxs("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold border border-blue-100",children:[(($=V.questions)==null?void 0:$.length)||0," Qs"]}),p.jsx("span",{className:"text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded font-bold border border-purple-100",children:V.time}),p.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold border ${V.price==="Free"?"bg-green-50 text-green-700 border-green-100":"bg-orange-50 text-orange-700 border-orange-100"}`,children:V.price})]}),p.jsx("button",{onClick:()=>E(V),className:"w-full py-2 border-2 border-[#0f766e] text-[#0f766e] rounded-lg font-bold hover:bg-teal-50 text-sm",children:"Manage Questions"})]},V.id)})})]})]}),y&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl w-full max-w-md shadow-2xl border-4 border-[#0f766e]",children:[p.jsx("h2",{className:"handwritten-title text-3xl font-bold mb-6",children:"Add Student"}),p.jsxs("form",{onSubmit:I,className:"space-y-4",children:[p.jsx("input",{name:"name",required:!0,className:"input-handwritten",placeholder:"Full Name"}),p.jsx("input",{name:"email",type:"email",required:!0,className:"input-handwritten",placeholder:"Email"}),p.jsx("input",{name:"college",className:"input-handwritten",placeholder:"College"}),p.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[p.jsx("input",{name:"isPaid",type:"checkbox",className:"w-5 h-5 text-teal-600"}),p.jsx("label",{className:"font-bold text-gray-700",children:"Premium?"})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 py-2 font-bold text-gray-500 hover:bg-gray-100 rounded-lg",children:"Cancel"}),p.jsx("button",{type:"submit",className:"flex-1 py-2 bg-[#0f766e] text-white font-bold rounded-lg",children:"Add"})]})]})]})}),f&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl w-full max-w-lg shadow-2xl relative",children:[p.jsx("button",{onClick:()=>g(null),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500",children:p.jsx(ju,{})}),p.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b pb-4",children:[p.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center text-teal-700 text-2xl font-bold",children:(j=f.name)==null?void 0:j.charAt(0)}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:f.name}),p.jsx("p",{className:"text-gray-500",children:f.email})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400",children:"PHONE"}),p.jsx("p",{className:"font-bold",children:f.phone||"N/A"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400",children:"COLLEGE"}),p.jsx("p",{className:"font-bold",children:f.college||"N/A"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400",children:"DEVICE ID"}),p.jsx("code",{className:"text-xs bg-gray-100 p-1 rounded block truncate",children:f.primaryDeviceID||"None"})]})]})]})}),S&&p.jsx(yse,{module:S,onClose:()=>w(null),onSave:T}),_&&p.jsx(vse,{test:_,onClose:()=>E(null),onSave:N})]}):p.jsx(Vw,{to:"/login"})}function yse({module:n,onClose:e,onSave:t}){var u;const[s,r]=B.useState(n),[i,o]=B.useState(!1),a=(h,d,f)=>{const g=[...s.lessons];g[h]={...g[h],[d]:f},r({...s,lessons:g})},l=async(h,d)=>{if(!d)return;o(!0);const f=new FormData;f.append("file",d),f.append("upload_preset","gate_petroleum_preset");try{const y=await(await fetch("https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/auto/upload",{method:"POST",body:f})).json();if(y.secure_url)a(h,"contentUrl",y.secure_url),Fe.success("Uploaded!");else throw new Error("Upload failed")}catch{Fe.error("Upload failed")}finally{o(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 overflow-y-auto py-10",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl shadow-2xl flex flex-col max-h-full",children:[p.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50 rounded-t-xl",children:[p.jsx("h2",{className:"font-bold text-2xl",children:n.id.startsWith("new")?"Create Module":"Edit Module"}),p.jsx("button",{onClick:e,children:p.jsx(ju,{className:"text-gray-400 hover:text-red-500"})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"font-bold text-sm",children:"Title"}),p.jsx("input",{className:"input-handwritten",value:s.title,onChange:h=>r({...s,title:h.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"font-bold text-sm",children:"Icon"}),p.jsx("input",{className:"input-handwritten text-center",value:s.icon,onChange:h=>r({...s,icon:h.target.value})})]})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsx("h3",{className:"font-bold text-lg mb-4",children:"Lessons"}),p.jsxs("div",{className:"space-y-4",children:[(u=s.lessons)==null?void 0:u.map((h,d)=>p.jsxs("div",{className:"border p-4 rounded bg-gray-50 flex gap-3 items-start",children:[p.jsxs("span",{className:"mt-2 text-gray-400",children:[d+1,"."]}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{className:"input-handwritten flex-1",value:h.title,onChange:f=>a(d,"title",f.target.value),placeholder:"Lesson Title"}),p.jsxs("select",{className:"input-handwritten w-32",value:h.type,onChange:f=>a(d,"type",f.target.value),children:[p.jsx("option",{value:"note",children:"Note"}),p.jsx("option",{value:"video",children:"Video"})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{className:"input-handwritten text-sm font-mono flex-1",value:h.contentUrl,onChange:f=>a(d,"contentUrl",f.target.value),placeholder:"URL"}),p.jsxs("label",{className:`cursor-pointer bg-gray-200 px-3 py-2 rounded flex gap-2 items-center text-sm font-bold ${i?"opacity-50":""}`,children:[p.jsx("span",{children:""})," ",p.jsx("input",{type:"file",className:"hidden",onChange:f=>f.target.files&&l(d,f.target.files[0])})]})]})]}),p.jsx("button",{onClick:()=>r({...s,lessons:s.lessons.filter((f,g)=>g!==d)}),className:"text-red-400 hover:text-red-600",children:p.jsx(d0,{})})]},d)),p.jsx("button",{onClick:()=>r({...s,lessons:[...s.lessons||[],{id:Date.now(),title:"",type:"note",contentUrl:""}]}),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded font-bold text-gray-500 hover:border-teal-500 hover:text-teal-600",children:"+ Add Lesson"})]})]})]}),p.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3 rounded-b-xl",children:[p.jsx("button",{onClick:e,className:"px-6 py-2 font-bold text-gray-500 hover:bg-gray-200 rounded-lg",children:"Cancel"}),p.jsxs("button",{onClick:()=>t(s),disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 flex items-center gap-2",children:[p.jsx(XI,{size:18})," Save"]})]})]})})}function vse({test:n,onClose:e,onSave:t}){var l,u;const[s,r]=B.useState(n),i=()=>{r({...s,questions:[...s.questions||[],{q:"",options:["","","",""],answer:0}]})},o=(h,d,f)=>{const g=[...s.questions];g[h]={...g[h],[d]:f},r({...s,questions:g})},a=(h,d,f)=>{const g=[...s.questions];g[h].options[d]=f,r({...s,questions:g})};return p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 overflow-y-auto py-10",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl shadow-2xl flex flex-col max-h-full",children:[p.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50 rounded-t-xl",children:[p.jsx("h2",{className:"font-bold text-2xl",children:n.id.startsWith("new")?"Create Test Series":"Edit Test"}),p.jsx("button",{onClick:e,children:p.jsx(ju,{className:"text-gray-400 hover:text-red-500"})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"font-bold text-sm",children:"Test Title"}),p.jsx("input",{className:"input-handwritten",value:s.title,onChange:h=>r({...s,title:h.target.value}),placeholder:"e.g. GATE Full Length Mock 1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"font-bold text-sm",children:"Price"}),p.jsxs("select",{className:"input-handwritten",value:s.price,onChange:h=>r({...s,price:h.target.value}),children:[p.jsx("option",{value:"Free",children:"Free"}),p.jsx("option",{value:"99",children:"99"}),p.jsx("option",{value:"149",children:"149"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"font-bold text-sm",children:"Duration"}),p.jsx("input",{className:"input-handwritten",value:s.time,onChange:h=>r({...s,time:h.target.value}),placeholder:"e.g. 180 mins"})]})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[p.jsx(PV,{size:20})," Questions (",((l=s.questions)==null?void 0:l.length)||0,")"]}),p.jsxs("div",{className:"space-y-6",children:[(u=s.questions)==null?void 0:u.map((h,d)=>p.jsxs("div",{className:"border-2 border-gray-100 p-4 rounded-xl bg-gray-50 relative",children:[p.jsxs("div",{className:"absolute top-2 right-2 text-gray-300 font-bold text-4xl opacity-20",children:["#",d+1]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Question Text"}),p.jsx("textarea",{className:"input-handwritten w-full",rows:2,value:h.q,onChange:f=>o(d,"q",f.target.value)})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.options.map((f,g)=>p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("input",{type:"radio",name:`ans-${d}`,checked:h.answer===g,onChange:()=>o(d,"answer",g),className:"w-4 h-4 text-teal-600"}),p.jsx("input",{className:`input-handwritten flex-1 ${h.answer===g?"border-green-500 bg-green-50":""}`,value:f,onChange:y=>a(d,g,y.target.value),placeholder:`Option ${String.fromCharCode(65+g)}`})]},g))}),p.jsxs("button",{onClick:()=>r({...s,questions:s.questions.filter((f,g)=>g!==d)}),className:"mt-4 text-xs text-red-500 font-bold hover:underline flex items-center gap-1",children:[p.jsx(d0,{size:12})," Remove Question"]})]},d)),p.jsx("button",{onClick:i,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded font-bold text-gray-500 hover:border-teal-500 hover:text-teal-600",children:"+ Add Question"})]})]})]}),p.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3 rounded-b-xl",children:[p.jsx("button",{onClick:e,className:"px-6 py-2 font-bold text-gray-500 hover:bg-gray-200 rounded-lg",children:"Cancel"}),p.jsxs("button",{onClick:()=>t(s),className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 flex items-center gap-2",children:[p.jsx(XI,{size:18})," Save Test"]})]})]})})}const wse=()=>{const{user:n,loading:e}=lf(),t=ya(),[s,r]=B.useState(!1),[i,o]=B.useState("upi");if(e)return p.jsx("div",{className:"min-h-screen bg-[#ecfdf5] flex items-center justify-center",children:p.jsx(mg,{className:"animate-spin text-teal-700"})});if(!n)return p.jsx(Vw,{to:"/login"});const a=async u=>{try{await da(In(ht,"users",n.uid),{isPaid:!0,role:"premium_student",transactions:c0({id:u.razorpay_payment_id,date:new Date().toISOString(),amount:499,status:"success"})}),Fe.success("Welcome to the Batch of 2026! "),t({to:"/dashboard"})}catch(h){console.error(h),Fe.error("Payment successful but account activation failed. Please contact support.")}finally{r(!1)}},l=u=>{u.preventDefault(),r(!0);const h=document.createElement("script");h.src="https://checkout.razorpay.com/v1/checkout.js",h.onload=()=>{const d={key:"YOUR_RAZORPAY_KEY_ID",amount:49900,currency:"INR",name:"GATE Petroleum",description:"Premium Course Access 2026",image:"https://cdn-icons-png.flaticon.com/512/2083/2083256.png",handler:function(g){a(g)},prefill:{name:n.displayName||"",email:n.email||"",contact:""},theme:{color:"#0f766e"},modal:{ondismiss:function(){r(!1),Fe.info("Payment cancelled")}}},f=new window.Razorpay(d);f.on("payment.failed",function(g){Fe.error(g.error.description),r(!1)}),f.open()},h.onerror=()=>{Fe.error("Razorpay SDK failed to load. Check internet connection."),r(!1)},document.body.appendChild(h)};return p.jsxs("div",{className:"w-full h-full overflow-auto bg-[#ecfdf5]",children:[p.jsx("header",{className:"nav-header p-4",children:p.jsxs("nav",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[p.jsx("h1",{className:"handwritten-title text-3xl md:text-4xl font-bold text-gray-800",children:"Petroleum Engineering 2026"}),p.jsx(dn,{to:"/",className:"handwritten-body text-lg text-teal-700 hover:text-teal-900",children:" Back to Home"})]})}),p.jsxs("main",{className:"grid-background py-12 px-6 relative overflow-hidden min-h-screen",children:[p.jsx("div",{className:"floating-element absolute top-10 left-10 text-6xl opacity-20 select-none",children:""}),p.jsx("div",{className:"floating-element absolute bottom-20 right-20 text-6xl opacity-20 select-none",children:""}),p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("div",{className:"inline-block bg-teal-100 text-teal-800 px-4 py-1 rounded-full text-sm font-bold mb-4 border border-teal-200",children:"Final Step"}),p.jsx("h1",{className:"handwritten-title text-5xl md:text-6xl font-bold text-gray-800 mb-4",children:"Secure Your Seat"}),p.jsx("p",{className:"handwritten-body text-xl text-gray-600",children:"Complete your enrollment to unlock instant access."})]}),p.jsxs("div",{className:"flex items-center justify-center mb-12",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-600 text-white flex items-center justify-center font-bold",children:""}),p.jsx("div",{className:"h-1 bg-teal-600 w-20 mx-2"}),p.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-600 text-white flex items-center justify-center font-bold",children:"2"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border-2 border-teal-100 h-fit",children:[p.jsx("h3",{className:"handwritten-title text-2xl font-bold text-gray-800 mb-6",children:"Order Summary"}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-teal-50 p-2 rounded",children:p.jsx(u0,{className:"text-teal-600",size:20})}),p.jsx("span",{className:"font-bold text-gray-700",children:"Complete GATE Syllabus"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-teal-50 p-2 rounded",children:p.jsx(u0,{className:"text-teal-600",size:20})}),p.jsx("span",{className:"font-bold text-gray-700",children:"65+ Mock Tests"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-teal-50 p-2 rounded",children:p.jsx(u0,{className:"text-teal-600",size:20})}),p.jsx("span",{className:"font-bold text-gray-700",children:"Handwritten Notes PDF"})]})]}),p.jsxs("div",{className:"border-t border-dashed border-gray-300 my-6 pt-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-gray-500",children:"Original Price"}),p.jsx("span",{className:"text-gray-400 line-through",children:"5,000"})]}),p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("span",{className:"text-teal-600 font-bold",children:"Discount"}),p.jsx("span",{className:"text-teal-600 font-bold",children:"-90%"})]}),p.jsxs("div",{className:"flex justify-between items-center text-2xl font-black text-gray-800",children:[p.jsx("span",{children:"Total"}),p.jsx("span",{children:"499"})]})]})]}),p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border-2 border-teal-100",children:[p.jsx("h3",{className:"handwritten-title text-2xl font-bold text-gray-800 mb-6",children:"Select Payment"}),p.jsxs("form",{onSubmit:l,children:[p.jsx("div",{className:"space-y-4 mb-8",children:["upi","card","netbanking"].map(u=>p.jsxs("div",{className:`cursor-pointer p-4 rounded-xl border-2 transition-all flex items-center gap-4
                                                ${i===u?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-teal-200"}
                                            `,onClick:()=>o(u),children:[p.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${i===u?"border-teal-600":"border-gray-300"}`,children:i===u&&p.jsx("div",{className:"w-2.5 h-2.5 bg-teal-600 rounded-full"})}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-gray-800 uppercase",children:u}),p.jsx("div",{className:"text-xs text-gray-500",children:u==="upi"?"GPay, PhonePe, Paytm":u==="card"?"Credit & Debit Cards":"All Major Banks"})]})]},u))}),p.jsx("button",{type:"submit",disabled:s,className:"w-full bg-[#0f766e] hover:bg-[#0d9488] text-white font-bold text-xl py-4 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-2 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?p.jsxs(p.Fragment,{children:["Processing ",p.jsx(mg,{className:"animate-spin"})]}):p.jsxs(p.Fragment,{children:["Pay 499 Now ",p.jsx(mC,{className:"group-hover:scale-110 transition-transform"})]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsxs("p",{className:"text-xs text-gray-400 flex items-center justify-center gap-1",children:[p.jsx(mC,{size:12})," Secured by Razorpay  256-bit Encryption"]})})]})]})]}),p.jsx("div",{className:"mt-12 text-center text-sm text-gray-500",children:p.jsx(dn,{to:"/dashboard",className:"underline hover:text-teal-700",children:"Skip to Dashboard (Free Plan)"})})]})]})]})};function bse(){const[n,e]=B.useState(!1),t=ya(),s=async r=>{r.preventDefault(),e(!0);const i=new FormData(r.target);let o=i.get("identifier").trim();const a=i.get("password");try{if(!o.includes("@")){const l=iV(To(ht,"users"),oV("username","==",o.toLowerCase())),u=await ah(l);if(u.empty)throw new Error("Username not found.");o=u.docs[0].data().email}await m4(Cu,o,a),t(o==="admin@gatepetroleum.com"?{to:"/admin"}:{to:"/dashboard"}),Fe.success("Welcome back!")}catch(l){console.error(l),l.message.includes("Username")?Fe.error(l.message):Fe.error("Invalid credentials. Please try again.")}finally{e(!1)}};return p.jsxs("div",{className:"min-h-screen bg-[#ecfdf5] flex items-center justify-center p-4 font-sans relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-200 rounded-full blur-3xl opacity-30 translate-x-1/2 -translate-y-1/2"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-teal-200 rounded-full blur-3xl opacity-30 -translate-x-1/2 translate-y-1/2"}),p.jsxs(dn,{to:"/",className:"absolute top-6 left-6 flex items-center gap-2 text-teal-700 font-bold hover:underline z-20",children:[p.jsx(YI,{size:20})," Back to Home"]}),p.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-3xl shadow-xl border-4 border-white relative z-10",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"font-handwritten text-4xl font-bold text-gray-800 mb-2",children:"Welcome Back! "}),p.jsx("p",{className:"text-gray-500",children:"Continue your journey to GATE 2026."})]}),p.jsxs("form",{onSubmit:s,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Email or Username"}),p.jsxs("div",{className:"relative",children:[p.jsx(JI,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"identifier",type:"text",required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"student@example.com or username"})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1 ml-1",children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Password"}),p.jsx("a",{href:"#",className:"text-xs font-bold text-[#0f766e] hover:underline",children:"Forgot?"})]}),p.jsxs("div",{className:"relative",children:[p.jsx(yl,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"password",type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:""})]})]}),p.jsx("button",{type:"submit",disabled:n,className:"w-full bg-[#0f766e] hover:bg-[#0d9488] text-white font-bold text-lg py-3 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-2 mt-6",children:n?p.jsx(mg,{className:"animate-spin"}):p.jsxs(p.Fragment,{children:["Login ",p.jsx(nb,{size:20})]})})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-gray-500 font-bold",children:["New here?"," ",p.jsx(dn,{to:"/signup",className:"text-[#0f766e] hover:underline",children:"Create an account"})]})})]})]})}function xse(){const[n,e]=B.useState(!1),t=ya(),s=async r=>{r.preventDefault(),e(!0);const i=new FormData(r.target),o=i.get("name"),a=i.get("username").trim().toLowerCase(),l=i.get("email"),u=i.get("password");try{const h=iV(To(ht,"users"),oV("username","==",a));if(!(await ah(h)).empty)throw new Error("Username already taken. Please choose another.");const g=(await tG(Cu,l,u)).user;await g4(g,{displayName:o}),await w1(In(ht,"users",g.uid),{name:o,username:a,email:l,role:"student",isPaid:!1,enrolledAt:new Date().toISOString(),completedLessons:[],bookmarks:[],testResults:[]}),Fe.success("Account created! Welcome to the platform."),t({to:"/onboarding"})}catch(h){console.error(h),h.code==="auth/email-already-in-use"?Fe.error("Email already exists. Try logging in."):h.message.includes("Username")?Fe.error(h.message):Fe.error("Signup failed. Please try again.")}finally{e(!1)}};return p.jsxs("div",{className:"min-h-screen bg-[#ecfdf5] flex items-center justify-center p-4 font-sans relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-teal-200 rounded-full blur-3xl opacity-30 -translate-x-1/2 -translate-y-1/2"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-yellow-200 rounded-full blur-3xl opacity-30 translate-x-1/2 translate-y-1/2"}),p.jsxs(dn,{to:"/",className:"absolute top-6 left-6 flex items-center gap-2 text-teal-700 font-bold hover:underline z-20",children:[p.jsx(YI,{size:20})," Back to Home"]}),p.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-3xl shadow-xl border-4 border-white relative z-10",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"font-handwritten text-4xl font-bold text-gray-800 mb-2",children:"Join the Squad! "}),p.jsx("p",{className:"text-gray-500",children:"Create your free account to start learning."})]}),p.jsxs("form",{onSubmit:s,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Full Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(JI,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"name",type:"text",required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"John Doe"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Username"}),p.jsxs("div",{className:"relative",children:[p.jsx(EZ,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"username",type:"text",required:!0,pattern:"^[a-zA-Z0-9_]+$",title:"Letters, numbers and underscores only",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"johndoe123"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx(RV,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"email",type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"student@example.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(yl,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"password",type:"password",required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:""})]})]}),p.jsx("button",{type:"submit",disabled:n,className:"w-full bg-[#0f766e] hover:bg-[#0d9488] text-white font-bold text-lg py-3 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-2 mt-6",children:n?p.jsx(mg,{className:"animate-spin"}):p.jsxs(p.Fragment,{children:["Create Account ",p.jsx(nb,{size:20})]})})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-gray-500 font-bold",children:["Already have an account?"," ",p.jsx(dn,{to:"/login",className:"text-[#0f766e] hover:underline",children:"Login here"})]})})]})]})}const _se=()=>p.jsx("style",{children:`
    .gate-palette-btn {
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      font-weight: bold;
      font-size: 14px;
      border: 1px solid #ccc;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    /* Live Test Colors */
    .gate-palette-btn.answered { background: #22c55e; color: white; border-color: #16a34a; clip-path: circle(50%); } 
    .gate-palette-btn.not-answered { background: #ef4444; color: white; border-color: #dc2626; clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%); }
    .gate-palette-btn.review { background: #a855f7; color: white; border-color: #9333ea; border-radius: 50%; } 
    .gate-palette-btn.ans-review { background: #6366f1; color: white; border-color: #4f46e5; position: relative; } 

    /* Solutions Mode Colors */
    .gate-palette-btn.sol-correct { background: #22c55e; color: white; border-color: #15803d; }
    .gate-palette-btn.sol-wrong { background: #ef4444; color: white; border-color: #b91c1c; }
    .gate-palette-btn.sol-skipped { background: #e5e7eb; color: #6b7280; border-color: #d1d5db; }
    
    .gate-option { transition: all 0.2s; }
    .gate-option:hover:not(.disabled) { background-color: #f0fdfa; }
    
    /* Selection States */
    .gate-option.selected { background-color: #e0f2fe; border-color: #3b82f6; }
    
    /* Solution States */
    .gate-option.correct-ans { background-color: #dcfce7; border-color: #22c55e; color: #14532d; }
    .gate-option.wrong-ans { background-color: #fee2e2; border-color: #ef4444; color: #7f1d1d; }
  `});function Ese(){const{testId:n}=AE({from:"/test/$testId"}),e=ya(),{user:t}=lf(),[s,r]=B.useState(null),[i,o]=B.useState(0),[a,l]=B.useState({}),[u,h]=B.useState({}),[d,f]=B.useState(0),[g,y]=B.useState(!1),[v,S]=B.useState(!0),[w,_]=B.useState(!1),[E,I]=B.useState(!1);B.useEffect(()=>{(async()=>{try{const O=In(ht,"testSeries",n),j=await HI(O);if(j.exists()){const V=j.data();r({id:j.id,...V}),f((V.time?parseInt(V.time):180)*60)}else r({id:"test-demo",title:"GATE 2026 Demo Test",duration:180,questions:Array.from({length:10}).map((V,$)=>({id:$,text:`Sample Question ${$+1}: Which of the following is a primary property of reservoir rock?`,options:["Porosity","Color","Taste","Smell"],correct:0,marks:1,explanation:"Porosity is the measure of void spaces in a material."}))}),f(10800)}catch(O){console.error("Error fetching test:",O),Fe.error("Failed to load test.")}finally{S(!1)}})()},[n]),B.useEffect(()=>{if(!s||g||E)return;const R=setInterval(()=>{f(O=>O<=1?(clearInterval(R),N(!0),0):O-1)},1e3);return()=>clearInterval(R)},[s,g,E]);const D=R=>{E||l(O=>({...O,[i]:R}))},M=()=>{if(!E){const R={...u};a[i]!==void 0?R[i]="answered":R[i]||(R[i]="not-answered"),h(R)}i<s.questions.length-1&&o(R=>R+1)},T=()=>{if(E)return;const R={...u};R[i]=a[i]!==void 0?"ans-review":"review",h(R),i<s.questions.length-1&&o(O=>O+1)},C=()=>{if(E)return;const R={...a};delete R[i],l(R);const O={...u};O[i]="not-answered",h(O)},N=async(R=!1)=>{if(!R&&!confirm("Are you sure you want to submit the test?"))return;y(!0);let O=0;if(s.questions.forEach((j,V)=>{a[V]===j.correct?O+=j.marks||1:a[V]!==void 0&&(O-=(j.marks||1)/3)}),t)try{await da(In(ht,"users",t.uid),{testResults:c0({testId:s.id,title:s.title,score:O.toFixed(2),totalQ:s.questions.length,date:new Date().toISOString()})}),Fe.success("Test Submitted Successfully!")}catch(j){console.error(j)}},L=R=>{const O=Math.floor(R/3600),j=Math.floor(R%3600/60),V=R%60;return`${O}:${j<10?"0":""}${j}:${V<10?"0":""}${V}`};if(v)return p.jsx("div",{className:"h-screen flex items-center justify-center",children:"Loading Test..."});if(g&&!E){const R=s.questions.length,O=Object.keys(a).length,j=s.questions.filter(($,U)=>a[U]===$.correct).length,V=s.questions.reduce(($,U,W)=>a[W]===U.correct?$+(U.marks||1):a[W]!==void 0?$-(U.marks||1)/3:$,0);return p.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4 font-sans",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl max-w-2xl w-full text-center border-t-4 border-[#0f766e]",children:[p.jsx("div",{className:"text-6xl mb-4",children:""}),p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Test Summary"}),p.jsx("p",{className:"text-gray-500 mb-8",children:s.title}),p.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[p.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[p.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[O," / ",R]}),p.jsx("div",{className:"text-xs text-blue-800 uppercase font-bold",children:"Attempted"})]}),p.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-green-600",children:j}),p.jsx("div",{className:"text-xs text-green-800 uppercase font-bold",children:"Correct"})]}),p.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-purple-600",children:V.toFixed(2)}),p.jsx("div",{className:"text-xs text-purple-800 uppercase font-bold",children:"Total Score"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx("button",{onClick:()=>{I(!0),o(0),y(!1)},className:"bg-white border-2 border-[#0f766e] text-[#0f766e] px-8 py-3 rounded-lg font-bold hover:bg-teal-50",children:"Review Solutions"}),p.jsx("button",{onClick:()=>e({to:"/dashboard"}),className:"bg-[#0f766e] text-white px-8 py-3 rounded-lg font-bold hover:bg-[#0d9488]",children:"Back to Dashboard"})]})]})})}return p.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 font-sans overflow-hidden select-none",children:[p.jsx(_se,{}),p.jsxs("header",{className:`h-16 border-b flex items-center justify-between px-4 shrink-0 shadow-sm z-20 ${E?"bg-teal-50 border-teal-200":"bg-white"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[E&&p.jsx("button",{onClick:()=>e({to:"/dashboard"}),className:"p-2 hover:bg-teal-100 rounded-full",children:p.jsx(_Z,{size:20})}),p.jsxs("div",{className:"font-bold text-lg text-gray-800 truncate",children:[s.title," ",E&&p.jsx("span",{className:"text-teal-600 text-sm ml-2 bg-teal-100 px-2 py-1 rounded",children:"SOLUTIONS MODE"})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[!E&&p.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1.5 rounded text-gray-700 font-mono font-bold",children:[p.jsx(XE,{size:18,className:d<300?"text-red-500 animate-pulse":""}),L(d)]}),p.jsx("button",{onClick:()=>_(!w),className:"lg:hidden p-2 hover:bg-gray-100 rounded",children:p.jsx(NZ,{})})]})]}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"h-12 bg-white border-b flex items-center justify-between px-6 shrink-0",children:[p.jsxs("div",{className:"font-bold text-[#0f766e]",children:["Question ",i+1]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"text-sm font-bold flex items-center gap-2",children:[p.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs",children:["+",s.questions[i].marks||1]}),p.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-0.5 rounded text-xs",children:["-",((s.questions[i].marks||1)/3).toFixed(2)]})]}),E&&p.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded flex items-center gap-1 ${a[i]===s.questions[i].correct?"bg-green-100 text-green-700":a[i]!==void 0?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:a[i]===s.questions[i].correct?p.jsxs(p.Fragment,{children:[p.jsx(h0,{size:12})," Correct"]}):a[i]!==void 0?p.jsxs(p.Fragment,{children:[p.jsx(zZ,{size:12})," Incorrect"]}):"Skipped"})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-10",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("p",{className:"text-lg md:text-xl text-gray-800 font-serif leading-relaxed mb-8",children:s.questions[i].text}),p.jsx("div",{className:"space-y-3",children:s.questions[i].options.map((R,O)=>{const j=a[i]===O,V=s.questions[i].correct===O;let $="border-gray-200";return E?V?$="correct-ans":j?$="wrong-ans":$="opacity-60":j&&($="selected"),p.jsxs("div",{onClick:()=>D(O),className:`gate-option p-4 border-2 rounded-lg cursor-pointer flex items-start gap-3 ${$} ${E?"cursor-default":""}`,children:[p.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 mt-0.5
                                 ${j?"border-blue-500":"border-gray-400"}
                                 ${E&&V?"border-green-600 bg-green-600 text-white":""}
                                 ${E&&j&&!V?"border-red-500 bg-red-500 text-white":""}
                              `,children:E&&V?p.jsx(h0,{size:14}):E&&j?p.jsx(ju,{size:14}):j&&p.jsx("div",{className:"w-2.5 h-2.5 bg-blue-500 rounded-full"})}),p.jsx("span",{className:"text-gray-700 font-medium",children:R})]},O)})}),E&&p.jsxs("div",{className:"mt-8 p-6 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg animate-in fade-in slide-in-from-bottom-4",children:[p.jsxs("h4",{className:"font-bold text-blue-800 mb-2 flex items-center gap-2",children:[p.jsx(PV,{size:18})," Explanation:"]}),p.jsx("p",{className:"text-blue-900 leading-relaxed",children:s.questions[i].explanation||"No explanation provided for this question."})]})]})}),p.jsxs("div",{className:"h-16 bg-white border-t flex items-center justify-between px-4 md:px-8 shrink-0",children:[p.jsx("div",{className:"flex gap-2",children:!E&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 border-2 border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 font-bold text-sm",children:[p.jsx(PZ,{size:16})," ",p.jsx("span",{className:"hidden md:inline",children:"Mark for Review"})]}),p.jsx("button",{onClick:C,className:"px-4 py-2 text-gray-500 hover:text-red-500 font-bold text-sm",children:"Clear"})]})}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>o(R=>Math.max(0,R-1)),disabled:i===0,className:"px-4 py-2 border border-gray-300 text-gray-600 rounded-lg font-bold disabled:opacity-50",children:"Previous"}),p.jsxs("button",{onClick:M,className:"bg-[#0f766e] hover:bg-[#0d9488] text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2",children:[i===s.questions.length-1?E?"Finish Review":"Submit":"Next"," ",p.jsx(AZ,{size:18})]})]})]})]}),p.jsx("aside",{className:`
            fixed inset-y-0 right-0 w-80 bg-white border-l shadow-2xl transform transition-transform duration-300 z-30
            lg:relative lg:translate-x-0 lg:shadow-none
            ${w?"translate-x-0":"translate-x-full"}
         `,children:p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[p.jsx("h3",{className:"font-bold text-gray-700",children:"Question Palette"}),p.jsx("button",{onClick:()=>_(!1),className:"lg:hidden",children:p.jsx(ju,{})})]}),p.jsx("div",{className:"p-4 grid grid-cols-2 gap-2 text-xs bg-gray-50 border-b",children:E?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-green-500 rounded border"})," Correct"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-red-500 rounded border"})," Wrong"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-gray-200 rounded border"})," Skipped"]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-green-500 rounded-sm clip-circle"})," Answered"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-red-500 rounded-sm"})," Not Ans"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-4 h-4 bg-purple-500 rounded-full"})," Review"]})]})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p.jsx("div",{className:"grid grid-cols-5 gap-3",children:s.questions.map((R,O)=>{let j="";if(E)a[O]===R.correct?j="sol-correct":a[O]!==void 0?j="sol-wrong":j="sol-skipped";else{const V=u[O];V==="answered"?j="answered":V==="review"?j="review":V==="ans-review"?j="ans-review":V==="not-answered"&&(j="not-answered")}return p.jsx("button",{onClick:()=>{o(O),_(!1)},className:`gate-palette-btn ${j} ${i===O?"ring-2 ring-black":""}`,children:O+1},O)})})}),p.jsx("div",{className:"p-4 border-t bg-gray-50",children:p.jsx("button",{onClick:()=>E?e({to:"/dashboard"}):N(!1),className:"w-full bg-teal-100 text-teal-800 border-2 border-teal-600 py-3 rounded-lg font-bold hover:bg-teal-200 transition-colors",children:E?"Exit Review":"Submit Test"})})]})})]})]})}const Sse=()=>p.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Caveat:wght@400;700&display=swap');
    .handwritten-title { font-family: 'Caveat', cursive, sans-serif; }
    .legal-content h3 { font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.5rem; color: #0f766e; }
    .legal-content p { margin-bottom: 1rem; color: #4b5563; line-height: 1.6; }
    .legal-content ul { list-style: disc; padding-left: 1.5rem; margin-bottom: 1rem; color: #4b5563; }
  `});function Ase(){return p.jsxs("div",{className:"min-h-screen bg-[#ecfdf5] font-sans",children:[p.jsx(Sse,{}),p.jsx("header",{className:"bg-white border-b-4 border-[#0f766e] p-6 sticky top-0 z-10",children:p.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[p.jsx("h1",{className:"handwritten-title text-3xl font-bold text-gray-800",children:"GATE Petroleum 2026"}),p.jsx(dn,{to:"/",className:"text-[#0f766e] font-bold hover:underline",children:" Back Home"})]})}),p.jsx("main",{className:"max-w-4xl mx-auto py-12 px-6",children:p.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-xl border-2 border-[#0f766e] legal-content",children:[p.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8 font-handwritten text-center",children:"Terms, Policies & Support"}),p.jsx("hr",{className:"my-8 border-gray-200"}),p.jsxs("section",{id:"contact",className:"mb-12",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(RV,{className:"text-[#0f766e]",size:28}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Contact Us"})]}),p.jsx("p",{children:"For any queries, support, or complaints, please contact us at:"}),p.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Operating Address:"}),p.jsx("br",{})," [YOUR FULL ADDRESS HERE] ",p.jsx("br",{})," [CITY, STATE, ZIP CODE]"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," ",p.jsx("a",{href:"mailto:support@gatepetroleum.com",className:"text-blue-600 hover:underline",children:"support@gatepetroleum.com"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Phone:"})," +91 [YOUR PHONE NUMBER]"]})]})]}),p.jsx("hr",{className:"my-8 border-gray-200"}),p.jsxs("section",{id:"terms",className:"mb-12",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(Kf,{className:"text-[#0f766e]",size:28}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Terms & Conditions"})]}),p.jsx("p",{children:"Welcome to GATE Petroleum 2026. By accessing this website and purchasing our courses, you agree to the following terms:"}),p.jsx("h3",{children:"1. Course Access"}),p.jsx("p",{children:"Upon purchase, you grant a non-exclusive, non-transferable license to access the course materials. Sharing your login credentials or course content is strictly prohibited and will result in immediate account termination."}),p.jsx("h3",{children:"2. Intellectual Property"}),p.jsx("p",{children:"All content (videos, PDFs, notes) is the intellectual property of GATE Petroleum 2026. You may not reproduce, redistribute, or sell any material without prior written consent."}),p.jsx("h3",{children:"3. Usage Policy"}),p.jsx("p",{children:"We log IP addresses and device IDs. Accounts showing suspicious activity (e.g., logins from multiple distant locations or excessive downloads) may be blocked automatically."})]}),p.jsx("hr",{className:"my-8 border-gray-200"}),p.jsxs("section",{id:"refund",className:"mb-12",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(DZ,{className:"text-[#0f766e]",size:28}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Refund & Cancellation Policy"})]}),p.jsx("p",{children:"We strive to provide the highest quality education. However, we understand that circumstances may change."}),p.jsx("h3",{children:"1. Refund Eligibility"}),p.jsx("p",{children:"You are eligible for a full refund if:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["You request the refund within ",p.jsx("strong",{children:"5 days"})," of purchase."]}),p.jsxs("li",{children:["You have accessed less than ",p.jsx("strong",{children:"20%"})," of the course content."]})]}),p.jsx("h3",{children:"2. Process"}),p.jsx("p",{children:"To request a refund, email us at support@gatepetroleum.com with your Transaction ID. Refunds are processed within 5-7 business days back to the original payment method."}),p.jsx("h3",{children:"3. Cancellations"}),p.jsx("p",{children:"Once a refund is processed, your access to the course will be revoked immediately."})]}),p.jsx("hr",{className:"my-8 border-gray-200"}),p.jsxs("section",{id:"privacy",className:"mb-12",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(QI,{className:"text-[#0f766e]",size:28}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Privacy Policy"})]}),p.jsx("p",{children:"We value your privacy and are committed to protecting your personal data."}),p.jsx("h3",{children:"1. Information We Collect"}),p.jsx("p",{children:"We collect your name, email, phone number, and payment information (processed securely via Razorpay) to provide our services."}),p.jsx("h3",{children:"2. How We Use Your Data"}),p.jsx("p",{children:"Your data is used solely for course delivery, communication, and support. We do not sell your data to third parties."}),p.jsx("h3",{children:"3. Cookies"}),p.jsx("p",{children:"We use cookies to maintain your login session and analyze site traffic."})]})]})}),p.jsx("footer",{className:"bg-teal-900 text-teal-100 py-8 text-center",children:p.jsx("p",{children:" 2026 GATE Petroleum. All rights reserved."})})]})}const Tse=()=>p.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Caveat:wght@400;700&display=swap');
    
    html { scroll-behavior: smooth; }

    .grid-background {
      background-color: #ecfdf5;
      background-image: 
        linear-gradient(#a7f3d0 1px, transparent 1px),
        linear-gradient(90deg, #a7f3d0 1px, transparent 1px);
      background-size: 30px 30px;
    }
    
    .handwritten-title { font-family: 'Caveat', cursive; }
    .handwritten-body { font-family: 'Architects Daughter', cursive; }

    .blob {
      position: absolute;
      filter: blur(60px);
      z-index: 0;
      opacity: 0.6;
    }
    .blob-1 { top: -10%; left: -10%; width: 500px; height: 500px; background: #ccfbf1; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; }
    .blob-2 { bottom: -10%; right: -10%; width: 600px; height: 600px; background: #ffe4e6; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }

    /* GATE Interface Simulator CSS */
    .gate-sim-header { background: #3b82f6; color: white; padding: 10px; font-size: 12px; font-weight: bold; }
    .gate-sim-body { background: white; height: 300px; display: flex; }
    .gate-sim-q { flex: 1; padding: 20px; border-right: 1px solid #ddd; }
    .gate-sim-palette { width: 100px; background: #eef2f6; padding: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; align-content: start; }
    .gate-btn-mock { height: 25px; width: 25px; background: #ddd; border-radius: 2px; }
    .gate-btn-mock.green { background: #22c55e; clip-path: circle(50%); }
    .gate-btn-mock.red { background: #ef4444; clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%); }
  `});function Cse(){return p.jsxs("div",{className:"min-h-screen bg-white overflow-hidden font-sans text-gray-800",children:[p.jsx(Tse,{}),p.jsx("nav",{className:"fixed w-full bg-white/90 backdrop-blur-md border-b border-teal-100 z-50 transition-all",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-[#0f766e] text-white p-1.5 rounded-lg font-bold text-xl shadow-sm",children:"PE"}),p.jsx("span",{className:"font-bold text-xl tracking-tight text-gray-900",children:"GATE Petroleum"})]}),p.jsxs("div",{className:"hidden md:flex items-center gap-8 text-sm font-bold text-gray-600",children:[p.jsx("a",{href:"#features",className:"hover:text-[#0f766e] transition-colors",children:"Features"}),p.jsx("a",{href:"#test-series",className:"hover:text-[#0f766e] transition-colors",children:"Test Series"}),p.jsx("a",{href:"#animations",className:"hover:text-[#0f766e] transition-colors",children:"Visual Learning"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(dn,{to:"/login",className:"text-gray-600 font-bold hover:text-[#0f766e] text-sm hidden sm:block",children:"Login"}),p.jsx(dn,{to:"/enroll",className:"bg-[#0f766e] text-white px-5 py-2 rounded-full font-bold text-sm hover:bg-[#0d9488] transition-all shadow-lg shadow-teal-200/50",children:"Get Started"})]})]})}),p.jsxs("header",{className:"relative pt-36 pb-20 px-6 grid-background",children:[p.jsx("div",{className:"blob blob-1"}),p.jsxs("div",{className:"max-w-7xl mx-auto relative z-10 text-center",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 bg-white border border-teal-200 rounded-full px-4 py-1.5 mb-8 shadow-sm animate-in fade-in zoom-in duration-500",children:[p.jsxs("span",{className:"flex h-2.5 w-2.5 relative",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"})]}),p.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Revolution in Petroleum Engineering"})]}),p.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-gray-900 mb-6 tracking-tight leading-[1.1]",children:["Notes that actually ",p.jsx("br",{}),p.jsxs("span",{className:"text-[#0f766e] handwritten-title relative",children:["make sense.",p.jsx("svg",{className:"absolute w-full h-3 -bottom-2 left-0 text-[#0f766e] opacity-40",viewBox:"0 0 200 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M2.00026 6.99996C18.4424 4.58232 75.9002 -0.844781 198.001 2.99996",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})]})]}),p.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed font-handwritten",children:"Stop reading 1000-page textbooks. Master Petroleum Engineering with concise handwritten notes, visual animations, and real GATE-style mock tests."}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[p.jsxs(dn,{to:"/enroll",className:"w-full sm:w-auto px-8 py-4 bg-[#0f766e] text-white rounded-xl font-bold text-lg shadow-[6px_6px_0px_#065f46] hover:translate-y-[-2px] hover:shadow-[8px_8px_0px_#065f46] transition-all flex items-center justify-center gap-2",children:["Start Free Trial ",p.jsx(nb,{size:20})]}),p.jsxs(dn,{to:"/explore",className:"w-full sm:w-auto px-8 py-4 bg-white text-gray-700 border-2 border-gray-200 rounded-xl font-bold text-lg hover:border-teal-500 hover:text-teal-600 transition-all flex items-center justify-center gap-2",children:[p.jsx(E1,{size:20})," Explore Now (Free)"]})]}),p.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-3 gap-8 max-w-4xl mx-auto border-t border-teal-100 pt-10",children:[p.jsx(LA,{label:"Concise Material",value:"Handwritten Notes",icon:p.jsx(LZ,{className:"text-teal-600 mb-2"})}),p.jsx(LA,{label:"Real Exam Feel",value:"TCS iON Interface",icon:p.jsx(Vx,{className:"text-teal-600 mb-2"})}),p.jsx(LA,{label:"Visual Learning",value:"3D Animations",icon:p.jsx(VD,{className:"text-teal-600 mb-2"})})]})]})]}),p.jsx("div",{id:"features",children:p.jsxs("section",{className:"py-20 px-6 bg-gray-900 text-white overflow-hidden relative",children:[p.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-600 rounded-full blur-[100px] opacity-20"}),p.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-center gap-12 relative z-10",children:[p.jsxs("div",{className:"flex-1 space-y-6",children:[p.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-300 border border-blue-500/30 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest",children:"Exam Day Ready"}),p.jsxs("h2",{className:"text-4xl md:text-5xl font-black leading-tight",children:["Train on the ",p.jsx("br",{}),p.jsx("span",{className:"text-blue-400",children:"Actual GATE Interface"})]}),p.jsxs("p",{className:"text-gray-400 text-lg leading-relaxed max-w-lg",children:["Don't let the interface surprise you on exam day. Our test engine is a pixel-perfect replica of the ",p.jsx("strong",{children:"TCS iON"})," interface used in GATE."]}),p.jsxs("ul",{className:"space-y-4",children:[p.jsx(Ql,{text:"Same Button Layout (Save & Next)",dark:!0}),p.jsx(Ql,{text:"Virtual Calculator Integrated",dark:!0}),p.jsx(Ql,{text:"Question Palette Color Codes",dark:!0}),p.jsx(Ql,{text:"Real-time Timer & Auto-Submit",dark:!0})]})]}),p.jsx("div",{className:"flex-1 w-full",children:p.jsxs("div",{className:"rounded-xl overflow-hidden shadow-2xl border-4 border-gray-700 bg-gray-800 transform rotate-1 hover:rotate-0 transition-transform duration-500",children:[p.jsxs("div",{className:"bg-gray-700 p-3 flex gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),p.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),p.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),p.jsxs("div",{className:"gate-sim-header flex justify-between",children:[p.jsx("span",{children:"GATE Petroleum Engineering 2026"}),p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(XE,{size:12})," 179:45 Remaining"]})]}),p.jsxs("div",{className:"gate-sim-body font-sans text-gray-800",children:[p.jsxs("div",{className:"gate-sim-q p-6 relative",children:[p.jsx("div",{className:"font-bold text-blue-800 mb-2 border-b pb-2",children:"Question No. 15"}),p.jsx("p",{className:"text-sm mb-4",children:"A reservoir rock has a porosity of 20% and water saturation of 30%. Calculate the hydrocarbon pore volume..."}),p.jsx("div",{className:"space-y-2",children:["A. 0.14","B. 0.20","C. 0.15","D. 0.35"].map(n=>p.jsxs("div",{className:"flex gap-2 items-center text-xs p-2 border rounded bg-gray-50",children:[p.jsx("input",{type:"radio",disabled:!0})," ",n]},n))}),p.jsx("div",{className:"absolute bottom-4 right-4 bg-blue-600 text-white px-4 py-1 text-xs font-bold rounded shadow-sm",children:"Save & Next"})]}),p.jsx("div",{className:"gate-sim-palette border-l",children:Array.from({length:12}).map((n,e)=>p.jsx("div",{className:`gate-btn-mock ${e<4?"green":e===4?"red":""}`},e))})]})]})})]})]})}),p.jsx("section",{id:"animations",className:"py-24 px-6 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-center gap-16",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-1 rounded-2xl shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-500",children:p.jsxs("div",{className:"bg-gray-900 rounded-xl overflow-hidden aspect-video flex items-center justify-center relative",children:[p.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[p.jsx("div",{className:"w-32 h-32 border-4 border-blue-400 rounded-full animate-ping opacity-20 absolute"}),p.jsx("div",{className:"w-24 h-24 border-4 border-blue-500 rounded-full animate-ping delay-100 opacity-40 absolute"}),p.jsx(CZ,{className:"text-white w-16 h-16 relative z-10 animate-bounce"})]}),p.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 px-3 py-1 rounded text-white text-xs font-mono",children:"Resevoir_Simulation.mp4"})]})})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("h2",{className:"text-4xl font-black text-gray-900 mb-6",children:["Learn with ",p.jsx("span",{className:"text-purple-600 handwritten-title",children:"Visuals."})]}),p.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:"Petroleum Engineering involves complex subsurface machinery and fluid dynamics. We don't just write about it; we show it."}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(DA,{title:"Drilling Rig Operations",desc:"See how the drill string, mud circulation, and BOP stack work in 3D.",icon:p.jsx(VD,{size:20,className:"text-purple-600"})}),p.jsx(DA,{title:"Reservoir Phase Behavior",desc:"Visualize PVT diagrams and phase envelopes changing with pressure.",icon:p.jsx(kse,{size:20,className:"text-purple-600"})}),p.jsx(DA,{title:"Enhanced Oil Recovery",desc:"Understand waterflooding and gas injection sweep efficiency visually.",icon:p.jsx(E1,{size:20,className:"text-purple-600"})})]})]})]})}),p.jsxs("section",{className:"py-24 px-6 bg-[#ecfdf5] relative overflow-hidden",children:[p.jsx("div",{className:"blob blob-2 opacity-50"}),p.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row-reverse items-center gap-12 relative z-10",children:[p.jsxs("div",{className:"flex-1 text-left",children:[p.jsxs("h2",{className:"text-4xl font-black text-gray-900 mb-6",children:["Notes that actually ",p.jsx("br",{})," ",p.jsx("span",{className:"text-[#0f766e] handwritten-title",children:"make sense."})]}),p.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:"Stop reading 1000-page textbooks. Our handwritten notes are concise, colorful, and cover 100% of the GATE syllabus. Optimized for quick revision."}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx(Ql,{text:"Flowcharts & Diagrams"}),p.jsx(Ql,{text:"Formula Sheets Included"}),p.jsx(Ql,{text:"Highlighting Key Concepts"}),p.jsx(Ql,{text:"Downloadable PDF Format"})]})]}),p.jsx("div",{className:"flex-1 w-full",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-0 bg-[#0f766e] rounded-2xl rotate-6 group-hover:rotate-3 transition-transform"}),p.jsxs("div",{className:"relative bg-white p-6 rounded-2xl shadow-xl border border-gray-200",children:[p.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded mb-4"}),p.jsx("div",{className:"h-2 w-full bg-gray-100 rounded mb-2"}),p.jsx("div",{className:"h-2 w-full bg-gray-100 rounded mb-2"}),p.jsx("div",{className:"h-2 w-2/3 bg-gray-100 rounded mb-6"}),p.jsx("div",{className:"h-40 bg-yellow-50 rounded border border-yellow-100 flex items-center justify-center text-yellow-600 font-handwritten text-2xl rotate-[-2deg]",children:p.jsx("span",{className:"border-b-2 border-yellow-300 pb-1",children:"Reservoir Diagram"})})]})]})})]})]}),p.jsx("section",{id:"test-series",className:"py-24 px-6 bg-gray-50",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-4xl font-black text-gray-900 mb-4",children:"Comprehensive Test Series"}),p.jsx("p",{className:"text-gray-500 max-w-xl mx-auto font-handwritten text-xl",children:"Practice makes perfect. Tests for every stage of preparation."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsx(MA,{title:"20+ Topic Tests",count:"20 Tests",desc:"Short 30-min tests to master specific concepts like Porosity, Darcy's Law, or Drilling Fluids.",icon:p.jsx(SZ,{size:24}),color:"bg-yellow-50 text-yellow-700 border-yellow-200"}),p.jsx(MA,{title:"15+ Subject Tests",count:"15 Tests",desc:"90-min tests covering entire subjects like Reservoir, Production, or Math.",icon:p.jsx(Kf,{size:24}),color:"bg-teal-50 text-teal-700 border-teal-200"}),p.jsx(MA,{title:"10 Full Length Mocks",count:"10 Tests",desc:"180-min standard GATE simulation. 65 Questions. Exact exam difficulty level.",icon:p.jsx(qf,{size:24}),color:"bg-purple-50 text-purple-700 border-purple-200"})]})]})}),p.jsx("section",{className:"py-20 px-6 bg-white",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("h2",{className:"text-center text-3xl font-black text-gray-900 mb-10",children:"Frequently Asked Questions"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(dx,{q:"Can I access the course on Mobile?",a:"Yes! Our platform works perfectly on both Desktop (for tests) and Mobile (for notes/videos)."}),p.jsx(dx,{q:"How long is the validity?",a:"The course is valid until the GATE 2026 exam date. You have lifetime access to notes."}),p.jsx(dx,{q:"Is the test interface exactly like GATE?",a:"Yes. We have replicated the TCS iON interface pixel-by-pixel, including the Virtual Calculator and Color Palette."}),p.jsx(dx,{q:"Can I get a refund?",a:"Yes, we offer a 7-day money-back guarantee if you are not satisfied with the content."})]})]})}),p.jsx("section",{className:"py-20 px-6",children:p.jsxs("div",{className:"max-w-5xl mx-auto bg-[#0f766e] rounded-3xl p-10 md:p-16 text-center text-white relative overflow-hidden shadow-2xl",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),p.jsxs("div",{className:"relative z-10",children:[p.jsx("h2",{className:"text-3xl md:text-5xl font-black mb-6 handwritten-title",children:"Ready to top GATE 2026?"}),p.jsx("p",{className:"text-teal-100 text-lg mb-10 max-w-xl mx-auto",children:"Join the new batch today. Early bird pricing ends soon."}),p.jsx(dn,{to:"/enroll",className:"inline-block bg-white text-[#0f766e] px-10 py-4 rounded-xl font-bold text-xl hover:bg-teal-50 transition-colors shadow-lg",children:"Enroll for 1499"}),p.jsxs("p",{className:"mt-6 text-sm text-teal-200 font-bold flex items-center justify-center gap-2",children:[p.jsx(mC,{size:16})," 100% Secure Payment  7-Day Refund Policy"]})]})]})}),p.jsxs("footer",{className:"bg-white border-t border-gray-100 py-12 text-center",children:[p.jsxs("div",{className:"flex justify-center items-center gap-2 mb-4 text-gray-400 font-bold",children:[p.jsx("div",{className:"bg-gray-200 p-1 rounded",children:"PE"})," GATE Petroleum 2026"]}),p.jsx("p",{className:"text-gray-500 text-sm",children:" 2026. Made for Engineers, by Engineers."}),p.jsxs("div",{className:"mt-4 flex justify-center gap-6 text-sm font-bold text-gray-400",children:[p.jsx(dn,{to:"/legal",className:"hover:text-[#0f766e]",children:"Privacy Policy"}),p.jsx(dn,{to:"/legal",className:"hover:text-[#0f766e]",children:"Terms of Use"})]})]})]})}function LA({label:n,value:e,icon:t}){return p.jsxs("div",{className:"flex flex-col items-center",children:[t,p.jsx("div",{className:"text-xl font-black text-gray-800",children:e}),p.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:n})]})}function Ql({text:n,dark:e}){return p.jsxs("div",{className:`flex items-center gap-3 font-bold ${e?"text-gray-300":"text-gray-700"}`,children:[p.jsx(u0,{className:e?"text-blue-400":"text-[#0f766e]",size:20}),n]})}function DA({title:n,desc:e,icon:t}){return p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center shrink-0",children:t}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:n}),p.jsx("p",{className:"text-gray-600 text-sm",children:e})]})]})}function kse({size:n,className:e}){return p.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:p.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}function MA({title:n,count:e,desc:t,icon:s,color:r}){return p.jsxs("div",{className:`p-8 rounded-2xl border-2 hover:-translate-y-1 transition-transform ${r} bg-opacity-30 bg-white`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsx("div",{className:"p-3 bg-white rounded-xl shadow-sm",children:s}),p.jsx("span",{className:"text-xs font-black uppercase tracking-wider bg-white px-2 py-1 rounded border border-gray-100",children:e})]}),p.jsx("h3",{className:"text-xl font-black text-gray-900 mb-2",children:n}),p.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t})]})}function dx({q:n,a:e}){const[t,s]=B.useState(!1);return p.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[p.jsxs("button",{onClick:()=>s(!t),className:"w-full flex justify-between items-center p-4 text-left font-bold text-gray-800 hover:bg-gray-50",children:[n,p.jsx(kV,{className:`transform transition-transform ${t?"rotate-180":""}`,size:18})]}),t&&p.jsx("div",{className:"p-4 pt-0 text-gray-600 text-sm leading-relaxed border-t border-gray-100 bg-gray-50",children:e})]})}function Pse(){var a;const{user:n,userProfile:e}=lf(),[t,s]=B.useState(!1);if(!n)return p.jsx(Vw,{to:"/login"});const r=async l=>{l.preventDefault(),s(!0);const u=new FormData(l.target);try{Cu.currentUser&&await g4(Cu.currentUser,{displayName:u.get("name")}),await da(In(ht,"users",n.uid),{name:u.get("name"),phone:u.get("phone"),college:u.get("college")}),Fe.success("Profile updated successfully!")}catch{Fe.error("Failed to update profile.")}finally{s(!1)}},i=async()=>{if(n.email)try{await eG(Cu,n.email),Fe.success(`Reset link sent to ${n.email}`)}catch{Fe.error("Could not send reset link.")}},o=async()=>{if(confirm("Unlink your current device? You will be logged out."))try{await da(In(ht,"users",n.uid),{primaryDeviceID:null}),Fe.success("Device unlinked.")}catch{Fe.error("Failed to reset device.")}};return p.jsx("div",{className:"min-h-screen bg-gray-50 p-6 font-sans",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-handwritten",children:"Account Settings"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"md:col-span-2 space-y-6",children:[p.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[p.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[p.jsx(JI,{size:20,className:"text-teal-600"})," Personal Details"]}),p.jsxs("form",{onSubmit:r,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"Full Name"}),p.jsx("input",{name:"name",defaultValue:n.displayName||"",className:"w-full p-2 border rounded-lg font-bold"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"Phone"}),p.jsx("input",{name:"phone",defaultValue:(e==null?void 0:e.phone)||"",placeholder:"+91...",className:"w-full p-2 border rounded-lg"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1",children:"College"}),p.jsx("input",{name:"college",defaultValue:(e==null?void 0:e.college)||"",placeholder:"IIT...",className:"w-full p-2 border rounded-lg"})]})]}),p.jsxs("button",{disabled:t,className:"bg-teal-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-teal-700 flex items-center gap-2",children:[p.jsx(XI,{size:16})," ",t?"Saving...":"Save Changes"]})]})]}),p.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[p.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[p.jsx(TZ,{size:20,className:"text-teal-600"})," Billing History"]}),((a=e==null?void 0:e.transactions)==null?void 0:a.length)>0?p.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:p.jsxs("table",{className:"w-full text-left text-sm",children:[p.jsx("thead",{className:"bg-gray-50 text-gray-500",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-3",children:"Date"}),p.jsx("th",{className:"p-3",children:"Amount"}),p.jsx("th",{className:"p-3",children:"Status"}),p.jsx("th",{className:"p-3",children:"Invoice"})]})}),p.jsx("tbody",{className:"divide-y",children:e.transactions.map((l,u)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-3",children:new Date(l.date).toLocaleDateString()}),p.jsxs("td",{className:"p-3 font-bold",children:["",l.amount]}),p.jsx("td",{className:"p-3 text-green-600 font-bold uppercase",children:l.status}),p.jsx("td",{className:"p-3",children:p.jsxs("button",{className:"text-blue-600 hover:underline flex items-center gap-1",children:[p.jsx(kZ,{size:14})," PDF"]})})]},u))})]})}):p.jsx("p",{className:"text-gray-500 italic",children:"No payment history found."})]})]}),p.jsx("div",{className:"space-y-6",children:p.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[p.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[p.jsx(yl,{size:20,className:"text-teal-600"})," Security"]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Logged in as ",p.jsx("strong",{children:n.email})]}),p.jsx("button",{onClick:i,className:"text-sm text-blue-600 font-bold hover:underline",children:"Change Password"})]}),p.jsx("hr",{className:"my-4"}),p.jsxs("div",{children:[p.jsxs("h3",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(LV,{size:16})," Device Lock"]}),p.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Your account is locked to: ",p.jsx("br",{}),p.jsx("code",{className:"bg-gray-100 p-1 rounded",children:(e==null?void 0:e.primaryDeviceID)||"No device linked"})]}),p.jsx("button",{onClick:o,className:"w-full border border-red-200 text-red-600 bg-red-50 py-2 rounded-lg text-sm font-bold hover:bg-red-100",children:"Reset Device Lock"})]})]})})]})]})})}const OA=[{id:1,title:"Darcy's Law (Linear)",front:"q = ?",back:"q = (k * A * P) / ( * L)"},{id:2,title:"Formation Volume Factor (Bo)",front:"Definition?",back:"Bo = (Vol of Oil at Res Cond) / (Vol of Oil at Std Cond)"},{id:3,title:"Archie's Equation",front:"Sw = ?",back:"Sw = ( (a * Rw) / (^m * Rt) ) ^ (1/n)"},{id:4,title:"API Gravity",front:"Formula?",back:"API = (141.5 / SG) - 131.5"}];function Ise(){const[n,e]=B.useState(0),[t,s]=B.useState(!1),r=()=>{s(!1),setTimeout(()=>e(o=>(o+1)%OA.length),200)},i=OA[n];return p.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[p.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-purple-500 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-20 right-20 w-64 h-64 bg-teal-500 rounded-full blur-3xl"})]}),p.jsxs("div",{className:"z-10 text-center mb-8",children:[p.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white mb-2 flex items-center justify-center gap-3",children:[p.jsx(E1,{className:"text-yellow-400 fill-yellow-400"})," Formula Blitz"]}),p.jsxs("p",{className:"text-slate-400",children:["Master ",OA.length," essential formulas"]})]}),p.jsx("div",{className:"relative w-full max-w-md h-80 perspective-1000 group cursor-pointer",onClick:()=>s(!t),children:p.jsxs("div",{className:`w-full h-full relative transition-all duration-500 transform-style-3d ${t?"rotate-y-180":""}`,children:[p.jsxs("div",{className:"absolute inset-0 backface-hidden bg-white rounded-3xl shadow-2xl flex flex-col items-center justify-center p-8 border-b-8 border-teal-500",children:[p.jsx("span",{className:"text-teal-600 font-bold text-sm tracking-widest uppercase mb-4",children:i.title}),p.jsx("h2",{className:"text-4xl font-black text-gray-800 text-center",children:i.front}),p.jsx("p",{className:"absolute bottom-6 text-gray-400 text-xs font-bold animate-pulse",children:"TAP TO REVEAL"})]}),p.jsxs("div",{className:"absolute inset-0 backface-hidden bg-slate-800 rounded-3xl shadow-2xl flex flex-col items-center justify-center p-8 border-b-8 border-purple-500 rotate-y-180 text-white",children:[p.jsx("span",{className:"text-purple-400 font-bold text-sm tracking-widest uppercase mb-4",children:"Formula"}),p.jsx("h2",{className:"text-2xl md:text-3xl font-mono font-bold text-center leading-relaxed",children:i.back})]})]})}),p.jsxs("div",{className:"mt-10 flex gap-6",children:[p.jsx("button",{onClick:r,className:"p-4 bg-red-500/20 text-red-400 rounded-full hover:bg-red-500 hover:text-white transition-all border-2 border-red-500/50",children:p.jsx(FZ,{size:32})}),p.jsx("button",{onClick:()=>s(!t),className:"p-4 bg-white/10 text-white rounded-full hover:bg-white/20 transition-all backdrop-blur-sm",children:p.jsx(MZ,{size:32})}),p.jsx("button",{onClick:r,className:"p-4 bg-green-500/20 text-green-400 rounded-full hover:bg-green-500 hover:text-white transition-all border-2 border-green-500/50",children:p.jsx(VZ,{size:32})})]}),p.jsx("p",{className:"mt-6 text-slate-500 text-sm",children:"Swipe left if forgotten, right if mastered."}),p.jsx("style",{children:`
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
      `})]})}function Rse(){return p.jsx("div",{className:"min-h-screen bg-gray-50 p-6 font-sans",children:p.jsxs("div",{className:"max-w-6xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-handwritten mb-8",children:"Performance Analytics"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[p.jsx(fx,{title:"Tests Taken",value:"12",icon:p.jsx(CV,{className:"text-blue-500"})}),p.jsx(fx,{title:"Avg Accuracy",value:"68%",icon:p.jsx(jZ,{className:"text-green-500"})}),p.jsx(fx,{title:"Avg Time/Q",value:"1m 45s",icon:p.jsx(XE,{className:"text-orange-500"})}),p.jsx(fx,{title:"Projected Rank",value:"AIR 450",icon:p.jsx(BZ,{className:"text-purple-500"})})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[p.jsx("h3",{className:"font-bold text-gray-700 mb-6",children:"Subject Strength Analysis"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(cy,{label:"Reservoir Engineering",percent:85,color:"bg-green-500"}),p.jsx(cy,{label:"Production Engineering",percent:60,color:"bg-yellow-500"}),p.jsx(cy,{label:"Drilling Engineering",percent:45,color:"bg-red-500"}),p.jsx(cy,{label:"Petroleum Exploration",percent:70,color:"bg-blue-500"}),p.jsx(cy,{label:"General Aptitude",percent:90,color:"bg-green-500"})]}),p.jsxs("p",{className:"mt-6 text-sm text-gray-500 bg-gray-50 p-3 rounded",children:[p.jsx("strong",{children:"Insight:"})," Focus more on ",p.jsx("em",{children:"Drilling Engineering"}),". Your accuracy is below 50%."]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col justify-between",children:[p.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:"Score Trend (Last 5 Tests)"}),p.jsx("div",{className:"flex items-end justify-between h-48 px-4 gap-2",children:[45,52,48,65,72].map((n,e)=>p.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[p.jsx("div",{className:"w-full bg-teal-100 border-t-4 border-teal-500 rounded-t-sm hover:bg-teal-200 transition-all relative group",style:{height:`${n}%`},children:p.jsxs("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[n," Marks"]})}),p.jsxs("span",{className:"text-xs text-gray-400 font-bold",children:["Test ",e+1]})]},e))})]})]})]})})}function fx({title:n,value:e,icon:t}){return p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center gap-4",children:[p.jsx("div",{className:"p-3 bg-gray-50 rounded-full",children:t}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-black text-gray-800",children:e}),p.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:n})]})]})}function cy({label:n,percent:e,color:t}){return p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between text-sm font-bold text-gray-700 mb-1",children:[p.jsx("span",{children:n}),p.jsxs("span",{children:[e,"%"]})]}),p.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2.5",children:p.jsx("div",{className:`h-2.5 rounded-full ${t}`,style:{width:`${e}%`}})})]})}function Nse(){const{user:n,loading:e}=lf(),t=ya(),[s,r]=B.useState(!1);if(e)return p.jsx("div",{className:"min-h-screen bg-[#ecfdf5] flex items-center justify-center",children:p.jsx(mg,{className:"animate-spin text-[#0f766e]",size:48})});if(!n)return p.jsx(Vw,{to:"/signup"});const i=async o=>{o.preventDefault(),r(!0);const a=new FormData(o.target),l=a.get("phone"),u=a.get("college"),h=a.get("year");try{await da(In(ht,"users",n.uid),{phone:l,college:u,gradYear:h,onboardingComplete:!0}),Fe.success("Profile Updated!"),t({to:"/enroll"})}catch(d){console.error(d),Fe.error("Failed to save details.")}finally{r(!1)}};return p.jsx("div",{className:"min-h-screen bg-[#ecfdf5] flex items-center justify-center p-4 font-sans",children:p.jsxs("div",{className:"bg-white w-full max-w-lg p-8 rounded-3xl shadow-xl border-4 border-teal-100",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"font-handwritten text-4xl font-bold text-gray-800 mb-2",children:"One Last Step! "}),p.jsx("p",{className:"text-gray-500",children:"Tell us a bit about yourself to personalize your learning."})]}),p.jsxs("form",{onSubmit:i,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx(LV,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"phone",type:"tel",required:!0,pattern:"[0-9]{10}",title:"10 digit mobile number",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"9876543210"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"College / Institute"}),p.jsxs("div",{className:"relative",children:[p.jsx(IZ,{className:"absolute left-3 top-3 text-gray-400",size:20}),p.jsx("input",{name:"college",type:"text",required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] focus:bg-white transition-all outline-none font-bold text-gray-700",placeholder:"IIT, UPES..."})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1 ml-1",children:"Graduation Year"}),p.jsxs("select",{name:"year",className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-[#0f766e] outline-none font-bold text-gray-700",children:[p.jsx("option",{children:"2024"}),p.jsx("option",{children:"2025"}),p.jsx("option",{children:"2026"}),p.jsx("option",{children:"2027"})]})]})]}),p.jsx("button",{type:"submit",disabled:s,className:"w-full bg-[#0f766e] hover:bg-[#0d9488] text-white font-bold text-lg py-4 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-2",children:s?p.jsx(mg,{className:"animate-spin"}):p.jsxs(p.Fragment,{children:["Continue to Enrollment ",p.jsx(nb,{size:20})]})})]})]})})}function Lse(){return p.jsxs("div",{className:"min-h-screen bg-[#ecfdf5] font-sans",children:[p.jsx("header",{className:"bg-white border-b-4 border-[#0f766e] p-6 sticky top-0 z-30 shadow-sm",children:p.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center",children:[p.jsxs(dn,{to:"/",className:"flex items-center gap-2 font-bold text-gray-800 hover:text-[#0f766e]",children:[p.jsx(YI,{size:20})," ",p.jsx("span",{className:"hidden sm:inline",children:"Home"})]}),p.jsx("h1",{className:"text-xl font-bold text-[#0f766e] font-handwritten",children:"Free Trial Access"}),p.jsx(dn,{to:"/signup",className:"bg-[#0f766e] text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-[#0d9488]",children:"Create Account"})]})}),p.jsxs("main",{className:"max-w-5xl mx-auto py-12 px-6",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gray-800 mb-4 font-handwritten",children:"Try Before You Buy."}),p.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Experience the quality of our handwritten notes and the real exam interface. No credit card required."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-teal-500 overflow-hidden relative",children:[p.jsx("div",{className:"bg-teal-500 text-white p-2 text-center text-sm font-bold uppercase tracking-wider",children:"Unlocked & Free"}),p.jsxs("div",{className:"p-8",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsx("div",{className:"w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center text-4xl",children:""}),p.jsx(DV,{className:"text-teal-500"})]}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Module 1: Introduction"}),p.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Learn the basics of the Petroleum Industry. Access full notes and the first chapter quiz."}),p.jsxs("ul",{className:"space-y-3 mb-8",children:[p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700 font-bold",children:[p.jsx(h0,{size:16,className:"text-teal-500"})," Full Handwritten PDF"]}),p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700 font-bold",children:[p.jsx(h0,{size:16,className:"text-teal-500"})," Concept Explainer"]}),p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700 font-bold",children:[p.jsx(h0,{size:16,className:"text-teal-500"})," Practice Quiz (10 Qs)"]})]}),p.jsx(dn,{to:"/dashboard",className:"w-full block text-center bg-teal-600 text-white py-3 rounded-xl font-bold hover:bg-teal-700 transition-colors",children:"Start Learning Now"})]})]}),p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-200 overflow-hidden opacity-90",children:[p.jsx("div",{className:"bg-gray-200 text-gray-600 p-2 text-center text-sm font-bold uppercase tracking-wider",children:"Premium Preview"}),p.jsxs("div",{className:"p-8",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsx("div",{className:"w-14 h-14 bg-gray-100 rounded-xl flex items-center justify-center text-4xl",children:""}),p.jsx(yl,{className:"text-gray-400"})]}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Full Length Mock Test"}),p.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Simulate the real GATE exam environment. 65 Questions, 3 Hours."}),p.jsxs("ul",{className:"space-y-3 mb-8",children:[p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-500",children:[p.jsx(Vx,{size:16})," TCS iON Interface"]}),p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-500",children:[p.jsx(Vx,{size:16})," Virtual Calculator"]}),p.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-500",children:[p.jsx(Vx,{size:16})," Detailed Solutions"]})]}),p.jsx(dn,{to:"/enroll",className:"w-full block text-center border-2 border-teal-600 text-teal-600 py-3 rounded-xl font-bold hover:bg-teal-50 transition-colors",children:"Unlock Premium"})]})]})]}),p.jsxs("div",{className:"bg-[#0f766e] rounded-3xl p-8 md:p-12 text-center text-white",children:[p.jsx("h2",{className:"text-3xl font-bold mb-4 font-handwritten",children:"Ready to Start?"}),p.jsx("p",{className:"mb-8 text-teal-100",children:"Create a free account to access Module 1 instantly. No payment needed."}),p.jsxs(dn,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-teal-800 px-8 py-4 rounded-xl font-bold text-lg hover:bg-teal-50 transition-colors",children:["Create Free Account ",p.jsx(nb,{size:20})]})]})]})]})}const pr=C$({component:()=>p.jsxs(Dee,{children:[p.jsx(RF,{}),p.jsx(yH,{})]})}),Dse=fr({getParentRoute:()=>pr,path:"/",component:Cse}),Mse=fr({getParentRoute:()=>pr,path:"/dashboard",component:fse}),Ose=fr({getParentRoute:()=>pr,path:"/admin",component:gse}),jse=fr({getParentRoute:()=>pr,path:"/enroll",component:wse}),Fse=fr({getParentRoute:()=>pr,path:"/login",component:bse}),Vse=fr({getParentRoute:()=>pr,path:"/signup",component:xse}),Bse=fr({getParentRoute:()=>pr,path:"/test/$testId",component:Ese}),Use=fr({getParentRoute:()=>pr,path:"/legal",component:Ase}),zse=fr({getParentRoute:()=>pr,path:"/settings",component:Pse}),$se=fr({getParentRoute:()=>pr,path:"/flashcards",component:Ise}),Hse=fr({getParentRoute:()=>pr,path:"/analytics",component:Rse}),Wse=fr({getParentRoute:()=>pr,path:"/onboarding",component:Nse}),Gse=fr({getParentRoute:()=>pr,path:"/explore",component:Lse}),qse=pr.addChildren([Dse,Mse,Ose,jse,Fse,Vse,Bse,Use,zse,$se,Hse,Wse,Gse]),Kse=O$({routeTree:qse});function Yse(){return B.useEffect(()=>{const n=s=>s.preventDefault(),e=s=>{(s.ctrlKey&&(s.key==="s"||s.key==="p"||s.key==="u")||s.ctrlKey&&s.shiftKey&&s.key==="i"||s.key==="F12")&&(s.preventDefault(),alert("Protected Content"))},t=()=>{document.hidden?document.title=" Locked":document.title="GATE Petroleum 2026"};return document.addEventListener("contextmenu",n),document.addEventListener("keydown",e),document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("contextmenu",n),document.removeEventListener("keydown",e),document.removeEventListener("visibilitychange",t)}},[]),p.jsx(V$,{router:Kse})}const Xse=new V9;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>gN()):gN();jA.createRoot(document.getElementById("root")).render(p.jsx(U9,{client:Xse,children:p.jsx(Yse,{})}));
